var vendor_5db777f00c14197bb5e7 = (function (t) { var e = {}; function n (i) { if (e[i]) return e[i].exports; var r = e[i] = { i: i, l: !1, exports: {} }; return t[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports } return n.m = t, n.c = e, n.d = function (t, e, i) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: i }) }, n.r = function (t) { typeof Symbol !== 'undefined' && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: 'Module' }), Object.defineProperty(t, '__esModule', { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && typeof t === 'object' && t && t.__esModule) return t; var i = Object.create(null); if (n.r(i), Object.defineProperty(i, 'default', { enumerable: !0, value: t }), 2 & e && typeof t !== 'string') for (var r in t)n.d(i, r, function (e) { return t[e] }.bind(null, r)); return i }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, 'a', e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = '', n(n.s = 212) }([function (t, e) { var n = { '[object Function]': 1, '[object RegExp]': 1, '[object Date]': 1, '[object Error]': 1, '[object CanvasGradient]': 1, '[object CanvasPattern]': 1, '[object Image]': 1, '[object Canvas]': 1 }; var i = { '[object Int8Array]': 1, '[object Uint8Array]': 1, '[object Uint8ClampedArray]': 1, '[object Int16Array]': 1, '[object Uint16Array]': 1, '[object Int32Array]': 1, '[object Uint32Array]': 1, '[object Float32Array]': 1, '[object Float64Array]': 1 }; var r = Object.prototype.toString; var a = Array.prototype; var o = a.forEach; var s = a.filter; var l = a.slice; var u = a.map; var c = a.reduce; var h = {}; function d (t) { if (t == null || typeof t !== 'object') return t; var e = t; var a = r.call(t); if (a === '[object Array]') { if (!M(t)) { e = []; for (var o = 0, s = t.length; o < s; o++)e[o] = d(t[o]) } } else if (i[a]) { if (!M(t)) { var l = t.constructor; if (t.constructor.from)e = l.from(t); else { e = new l(t.length); for (o = 0, s = t.length; o < s; o++)e[o] = d(t[o]) } } } else if (!n[a] && !M(t) && !w(t)) for (var u in e = {}, t)t.hasOwnProperty(u) && (e[u] = d(t[u])); return e } function f (t, e, n) { if (!_(e) || !_(t)) return n ? d(e) : t; for (var i in e) if (e.hasOwnProperty(i)) { var r = t[i]; var a = e[i]; !_(a) || !_(r) || x(a) || x(r) || w(a) || w(r) || b(a) || b(r) || M(a) || M(r) ? !n && i in t || (t[i] = d(e[i])) : f(r, a, n) } return t } function p (t, e, n) { for (var i in e)e.hasOwnProperty(i) && (n ? e[i] != null : t[i] == null) && (t[i] = e[i]); return t } var g; var v = function () { return h.createCanvas() }; function m (t, e, n) { if (t && e) if (t.forEach && t.forEach === o)t.forEach(e, n); else if (t.length === +t.length) for (var i = 0, r = t.length; i < r; i++)e.call(n, t[i], i, t); else for (var a in t)t.hasOwnProperty(a) && e.call(n, t[a], a, t) } function y (t, e) { var n = l.call(arguments, 2); return function () { return t.apply(e, n.concat(l.call(arguments))) } } function x (t) { return r.call(t) === '[object Array]' } function _ (t) { var e = typeof t; return e === 'function' || !!t && e === 'object' } function b (t) { return !!n[r.call(t)] } function w (t) { return typeof t === 'object' && typeof t.nodeType === 'number' && typeof t.ownerDocument === 'object' }h.createCanvas = function () { return document.createElement('canvas') }; var S = '__ec_primitive__'; function M (t) { return t[S] } function I (t) { var e = x(t); this.data = {}; var n = this; function i (t, i) { e ? n.set(t, i) : n.set(i, t) }t instanceof I ? t.each(i) : t && m(t, i) }I.prototype = { constructor: I, get: function (t) { return this.data.hasOwnProperty(t) ? this.data[t] : null }, set: function (t, e) { return this.data[t] = e }, each: function (t, e) { for (var n in void 0 !== e && (t = y(t, e)), this.data) this.data.hasOwnProperty(n) && t(this.data[n], n) }, removeKey: function (t) { delete this.data[t] } }, e.$override = function (t, e) { t === 'createCanvas' && (g = null), h[t] = e }, e.clone = d, e.merge = f, e.mergeAll = function (t, e) { for (var n = t[0], i = 1, r = t.length; i < r; i++)n = f(n, t[i], e); return n }, e.extend = function (t, e) { for (var n in e)e.hasOwnProperty(n) && (t[n] = e[n]); return t }, e.defaults = p, e.createCanvas = v, e.getContext = function () { return g || (g = v().getContext('2d')), g }, e.indexOf = function (t, e) { if (t) { if (t.indexOf) return t.indexOf(e); for (var n = 0, i = t.length; n < i; n++) if (t[n] === e) return n } return -1 }, e.inherits = function (t, e) { var n = t.prototype; function i () {} for (var r in i.prototype = e.prototype, t.prototype = new i(), n)n.hasOwnProperty(r) && (t.prototype[r] = n[r]); t.prototype.constructor = t, t.superClass = e }, e.mixin = function (t, e, n) { p(t = 'prototype' in t ? t.prototype : t, e = 'prototype' in e ? e.prototype : e, n) }, e.isArrayLike = function (t) { if (t) return typeof t !== 'string' && typeof t.length === 'number' }, e.each = m, e.map = function (t, e, n) { if (t && e) { if (t.map && t.map === u) return t.map(e, n); for (var i = [], r = 0, a = t.length; r < a; r++)i.push(e.call(n, t[r], r, t)); return i } }, e.reduce = function (t, e, n, i) { if (t && e) { if (t.reduce && t.reduce === c) return t.reduce(e, n, i); for (var r = 0, a = t.length; r < a; r++)n = e.call(i, n, t[r], r, t); return n } }, e.filter = function (t, e, n) { if (t && e) { if (t.filter && t.filter === s) return t.filter(e, n); for (var i = [], r = 0, a = t.length; r < a; r++)e.call(n, t[r], r, t) && i.push(t[r]); return i } }, e.find = function (t, e, n) { if (t && e) for (var i = 0, r = t.length; i < r; i++) if (e.call(n, t[i], i, t)) return t[i] }, e.bind = y, e.curry = function (t) { var e = l.call(arguments, 1); return function () { return t.apply(this, e.concat(l.call(arguments))) } }, e.isArray = x, e.isFunction = function (t) { return typeof t === 'function' }, e.isString = function (t) { return r.call(t) === '[object String]' }, e.isObject = _, e.isBuiltInObject = b, e.isTypedArray = function (t) { return !!i[r.call(t)] }, e.isDom = w, e.eqNaN = function (t) { return t != t }, e.retrieve = function (t) { for (var e = 0, n = arguments.length; e < n; e++) if (arguments[e] != null) return arguments[e] }, e.retrieve2 = function (t, e) { return t != null ? t : e }, e.retrieve3 = function (t, e, n) { return t != null ? t : e != null ? e : n }, e.slice = function () { return Function.call.apply(l, arguments) }, e.normalizeCssArray = function (t) { if (typeof t === 'number') return [t, t, t, t]; var e = t.length; return e === 2 ? [t[0], t[1], t[0], t[1]] : e === 3 ? [t[0], t[1], t[2], t[1]] : t }, e.assert = function (t, e) { if (!t) throw new Error(e) }, e.trim = function (t) { return t == null ? null : typeof t.trim === 'function' ? t.trim() : t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, '') }, e.setAsPrimitive = function (t) { t[S] = !0 }, e.isPrimitive = M, e.createHashMap = function (t) { return new I(t) }, e.concatArray = function (t, e) { for (var n = new t.constructor(t.length + e.length), i = 0; i < t.length; i++)n[i] = t[i]; var r = t.length; for (i = 0; i < e.length; i++)n[i + r] = e[i]; return n }, e.noop = function () {} }, function (t, e, n) { n(5).__DEV__; var i = n(67); var r = n(0); var a = n(23); var o = n(11); var s = n(87); var l = n(34); var u = n(139); var c = n(153); var h = n(20); var d = n(261); var f = n(262); var p = n(264); var g = n(13); var v = n(14); var m = n(74); var y = n(24); var x = n(2); var _ = n(4); var b = n(29).throttle; var w = n(265); var S = n(266); var M = n(267); var I = n(268); var A = n(269); var T = n(270); n(154); var C = n(96); var D = r.assert; var L = r.each; var P = r.isFunction; var k = r.isObject; var O = g.parseClassType; var E = 1e3; var R = 1e3; var N = 3e3; var z = { PROCESSOR: { FILTER: E, SERIES_FILTER: 800, STATISTIC: 5e3 }, VISUAL: { LAYOUT: R, PROGRESSIVE_LAYOUT: 1100, GLOBAL: 2e3, CHART: N, POST_CHART_LAYOUT: 3500, COMPONENT: 4e3, BRUSH: 5e3 } }; var B = '__flagInMainProcess'; var V = '__optionUpdated'; var F = /^[a-zA-Z0-9_]+$/; function G (t, e) { return function (n, i, r) { e || !this._disposed ? (n = n && n.toLowerCase(), l.prototype[t].call(this, n, i, r)) : this.id } } function H () { l.call(this) } function W (t, e, n) { n = n || {}, typeof e === 'string' && (e = ft[e]), this.id, this.group, this._dom = t; var a = this._zr = i.init(t, { renderer: n.renderer || 'canvas', devicePixelRatio: n.devicePixelRatio, width: n.width, height: n.height }); this._throttledZrFlush = b(r.bind(a.flush, a), 17), (e = r.clone(e)) && f(e, !0), this._theme = e, this._chartsViews = [], this._chartsMap = {}, this._componentsViews = [], this._componentsMap = {}, this._coordSysMgr = new h(); var o; var u; var d = this._api = (u = (o = this)._coordSysMgr, r.extend(new c(o), { getCoordinateSystems: r.bind(u.getCoordinateSystems, u), getComponentByElement: function (t) { for (;t;) { var e = t.__ecComponentInfo; if (e != null) return o._model.getComponent(e.mainType, e.index); t = t.parent } } })); function p (t, e) { return t.__prio - e.__prio }s(dt, p), s(ut, p), this._scheduler = new I(this, d, ut, dt), l.call(this, this._ecEventProcessor = new ot()), this._messageCenter = new H(), this._initEvents(), this.resize = r.bind(this.resize, this), this._pendingActions = [], a.animation.on('frame', this._onframe, this), (function (t, e) { t.on('rendered', function () { e.trigger('rendered'), !t.animation.isFinished() || e[V] || e._scheduler.unfinished || e._pendingActions.length || e.trigger('finished') }) }(a, this)), r.setAsPrimitive(this) }H.prototype.on = G('on', !0), H.prototype.off = G('off', !0), H.prototype.one = G('one', !0), r.mixin(H, l); var j = W.prototype; function U (t, e, n) { if (this._disposed) this.id; else { var i; var r = this._model; var a = this._coordSysMgr.getCoordinateSystems(); e = _.parseFinder(r, e); for (var o = 0; o < a.length; o++) { var s = a[o]; if (s[t] && (i = s[t](r, e, n)) != null) return i } } }j._onframe = function () { if (!this._disposed) { var t = this._scheduler; if (this[V]) { var e = this[V].silent; this[B] = !0, $(this), Z.update.call(this), this[B] = !1, this[V] = !1, K.call(this, e), J.call(this, e) } else if (t.unfinished) { var n = 1; var i = this._model; var r = this._api; t.unfinished = !1; do { var a = +new Date(); t.performSeriesTasks(i), t.performDataProcessorTasks(i), X(this, i), t.performVisualTasks(i), nt(this, this._model, r, 'remain'), n -= +new Date() - a } while (n > 0 && t.unfinished);t.unfinished || this._zr.flush() } } }, j.getDom = function () { return this._dom }, j.getZr = function () { return this._zr }, j.setOption = function (t, e, n) { if (this._disposed) this.id; else { var i; if (k(e) && (n = e.lazyUpdate, i = e.silent, e = e.notMerge), this[B] = !0, !this._model || e) { var r = new d(this._api); var a = this._theme; var o = this._model = new u(); o.scheduler = this._scheduler, o.init(null, null, a, r) } this._model.setOption(t, ct), n ? (this[V] = { silent: i }, this[B] = !1) : ($(this), Z.update.call(this), this._zr.flush(), this[V] = !1, this[B] = !1, K.call(this, i), J.call(this, i)) } }, j.setTheme = function () { console.error('ECharts#setTheme() is DEPRECATED in ECharts 3.0') }, j.getModel = function () { return this._model }, j.getOption = function () { return this._model && this._model.getOption() }, j.getWidth = function () { return this._zr.getWidth() }, j.getHeight = function () { return this._zr.getHeight() }, j.getDevicePixelRatio = function () { return this._zr.painter.dpr || window.devicePixelRatio || 1 }, j.getRenderedCanvas = function (t) { if (o.canvasSupported) return (t = t || {}).pixelRatio = t.pixelRatio || 1, t.backgroundColor = t.backgroundColor || this._model.get('backgroundColor'), this._zr.painter.getRenderedCanvas(t) }, j.getSvgDataUrl = function () { if (o.svgSupported) { var t = this._zr; var e = t.storage.getDisplayList(); return r.each(e, function (t) { t.stopAnimation(!0) }), t.painter.pathToDataUrl() } }, j.getDataURL = function (t) { if (!this._disposed) { var e = (t = t || {}).excludeComponents; var n = this._model; var i = []; var r = this; L(e, function (t) { n.eachComponent({ mainType: t }, function (t) { var e = r._componentsMap[t.__viewId]; e.group.ignore || (i.push(e), e.group.ignore = !0) }) }); var a = this._zr.painter.getType() === 'svg' ? this.getSvgDataUrl() : this.getRenderedCanvas(t).toDataURL('image/' + (t && t.type || 'png')); return L(i, function (t) { t.group.ignore = !1 }), a } this.id }, j.getConnectedDataURL = function (t) { if (this._disposed) this.id; else if (o.canvasSupported) { var e = this.group; var n = Math.min; var a = Math.max; if (vt[e]) { var s = 1 / 0; var l = 1 / 0; var u = -1 / 0; var c = -1 / 0; var h = []; var d = t && t.pixelRatio || 1; r.each(gt, function (i, o) { if (i.group === e) { var d = i.getRenderedCanvas(r.clone(t)); var f = i.getDom().getBoundingClientRect(); s = n(f.left, s), l = n(f.top, l), u = a(f.right, u), c = a(f.bottom, c), h.push({ dom: d, left: f.left, top: f.top }) } }); var f = (u *= d) - (s *= d); var p = (c *= d) - (l *= d); var g = r.createCanvas(); g.width = f, g.height = p; var v = i.init(g); return t.connectedBackgroundColor && v.add(new x.Rect({ shape: { x: 0, y: 0, width: f, height: p }, style: { fill: t.connectedBackgroundColor } })), L(h, function (t) { var e = new x.Image({ style: { x: t.left * d - s, y: t.top * d - l, image: t.dom } }); v.add(e) }), v.refreshImmediately(), g.toDataURL('image/' + (t && t.type || 'png')) } return this.getDataURL(t) } }, j.convertToPixel = r.curry(U, 'convertToPixel'), j.convertFromPixel = r.curry(U, 'convertFromPixel'), j.containPixel = function (t, e) { if (!this._disposed) { var n; var i = this._model; return t = _.parseFinder(i, t), r.each(t, function (t, i) { i.indexOf('Models') >= 0 && r.each(t, function (t) { var r = t.coordinateSystem; if (r && r.containPoint)n |= !!r.containPoint(e); else if (i === 'seriesModels') { var a = this._chartsMap[t.__viewId]; a && a.containPoint && (n |= a.containPoint(e, t)) } }, this) }, this), !!n } this.id }, j.getVisual = function (t, e) { var n = this._model; var i = (t = _.parseFinder(n, t, { defaultMainType: 'series' })).seriesModel.getData(); var r = t.hasOwnProperty('dataIndexInside') ? t.dataIndexInside : t.hasOwnProperty('dataIndex') ? i.indexOfRawIndex(t.dataIndex) : null; return r != null ? i.getItemVisual(r, e) : i.getVisual(e) }, j.getViewOfComponentModel = function (t) { return this._componentsMap[t.__viewId] }, j.getViewOfSeriesModel = function (t) { return this._chartsMap[t.__viewId] }; var Z = { prepareAndUpdate: function (t) { $(this), Z.update.call(this, t) }, update: function (t) { var e = this._model; var n = this._api; var i = this._zr; var r = this._coordSysMgr; var s = this._scheduler; if (e) { s.restoreData(e, t), s.performSeriesTasks(e), r.create(e, n), s.performDataProcessorTasks(e, t), X(this, e), r.update(e, n), tt(e), s.performVisualTasks(e, t), et(this, e, n, t); var l = e.get('backgroundColor') || 'transparent'; if (o.canvasSupported)i.setBackgroundColor(l); else { var u = a.parse(l); l = a.stringify(u, 'rgb'), u[3] === 0 && (l = 'transparent') }it(e, n) } }, updateTransform: function (t) { var e = this._model; var n = this; var i = this._api; if (e) { var a = []; e.eachComponent(function (r, o) { var s = n.getViewOfComponentModel(o); if (s && s.__alive) if (s.updateTransform) { var l = s.updateTransform(o, e, i, t); l && l.update && a.push(s) } else a.push(s) }); var o = r.createHashMap(); e.eachSeries(function (r) { var a = n._chartsMap[r.__viewId]; if (a.updateTransform) { var s = a.updateTransform(r, e, i, t); s && s.update && o.set(r.uid, 1) } else o.set(r.uid, 1) }), tt(e), this._scheduler.performVisualTasks(e, t, { setDirty: !0, dirtyMap: o }), nt(n, e, i, t, o), it(e, this._api) } }, updateView: function (t) { var e = this._model; e && (y.markUpdateMethod(t, 'updateView'), tt(e), this._scheduler.performVisualTasks(e, t, { setDirty: !0 }), et(this, this._model, this._api, t), it(e, this._api)) }, updateVisual: function (t) { Z.update.call(this, t) }, updateLayout: function (t) { Z.update.call(this, t) } }; function $ (t) { var e = t._model; var n = t._scheduler; n.restorePipelines(e), n.prepareStageTasks(), Q(t, 'component', e, n), Q(t, 'chart', e, n), n.plan() } function Y (t, e, n, i, a) { var o = t._model; if (i) { var s = {}; s[i + 'Id'] = n[i + 'Id'], s[i + 'Index'] = n[i + 'Index'], s[i + 'Name'] = n[i + 'Name']; var l = { mainType: i, query: s }; a && (l.subType = a); var u = n.excludeSeriesId; u != null && (u = r.createHashMap(_.normalizeToArray(u))), o && o.eachComponent(l, function (e) { u && u.get(e.id) != null || c(t[i === 'series' ? '_chartsMap' : '_componentsMap'][e.__viewId]) }, t) } else L(t._componentsViews.concat(t._chartsViews), c); function c (i) { i && i.__alive && i[e] && i[e](i.__model, o, t._api, n) } } function X (t, e) { var n = t._chartsMap; var i = t._scheduler; e.eachSeries(function (t) { i.updateStreamModes(t, n[t.__viewId]) }) } function q (t, e) { var n = t.type; var i = t.escapeConnect; var a = st[n]; var o = a.actionInfo; var s = (o.update || 'update').split(':'); var l = s.pop(); s = s[0] != null && O(s[0]), this[B] = !0; var u = [t]; var c = !1; t.batch && (c = !0, u = r.map(t.batch, function (e) { return (e = r.defaults(r.extend({}, e), t)).batch = null, e })); var h; var d = []; var f = n === 'highlight' || n === 'downplay'; L(u, function (t) { (h = (h = a.action(t, this._model, this._api)) || r.extend({}, t)).type = o.event || h.type, d.push(h), f ? Y(this, l, t, 'series') : s && Y(this, l, t, s.main, s.sub) }, this), l === 'none' || f || s || (this[V] ? ($(this), Z.update.call(this, t), this[V] = !1) : Z[l].call(this, t)), h = c ? { type: o.event || n, escapeConnect: i, batch: d } : d[0], this[B] = !1, !e && this._messageCenter.trigger(h.type, h) } function K (t) { for (var e = this._pendingActions; e.length;) { var n = e.shift(); q.call(this, n, t) } } function J (t) { !t && this.trigger('updated') } function Q (t, e, n, i) { for (var r = e === 'component', a = r ? t._componentsViews : t._chartsViews, o = r ? t._componentsMap : t._chartsMap, s = t._zr, l = t._api, u = 0; u < a.length; u++)a[u].__alive = !1; function c (t) { var e = '_ec_' + t.id + '_' + t.type; var u = o[e]; if (!u) { var c = O(t.type); (u = new (r ? m.getClass(c.main, c.sub) : y.getClass(c.sub))()).init(n, l), o[e] = u, a.push(u), s.add(u.group) }t.__viewId = u.__id = e, u.__alive = !0, u.__model = t, u.group.__ecComponentInfo = { mainType: t.mainType, index: t.componentIndex }, !r && i.prepareView(u, t, n, l) }r ? n.eachComponent(function (t, e) { t !== 'series' && c(e) }) : n.eachSeries(c); for (u = 0; u < a.length;) { var h = a[u]; h.__alive ? u++ : (!r && h.renderTask.dispose(), s.remove(h.group), h.dispose(n, l), a.splice(u, 1), delete o[h.__id], h.__id = h.group.__ecComponentInfo = null) } } function tt (t) { t.clearColorPalette(), t.eachSeries(function (t) { t.clearColorPalette() }) } function et (t, e, n, i) { !(function (t, e, n, i, r) { L(r || t._componentsViews, function (t) { var r = t.__model; t.render(r, e, n, i), at(r, t) }) }(t, e, n, i)), L(t._chartsViews, function (t) { t.__alive = !1 }), nt(t, e, n, i), L(t._chartsViews, function (t) { t.__alive || t.remove(e, n) }) } function nt (t, e, n, i, r) { var a; var s = t._scheduler; e.eachSeries(function (e) { var n = t._chartsMap[e.__viewId]; n.__alive = !0; var o = n.renderTask; s.updatePayload(o, i), r && r.get(e.uid) && o.dirty(), a |= o.perform(s.getPerformArgs(o)), n.group.silent = !!e.get('silent'), at(e, n), (function (t, e) { var n = t.get('blendMode') || null; e.group.traverse(function (t) { t.isGroup || t.style.blend !== n && t.setStyle('blend', n), t.eachPendingDisplayable && t.eachPendingDisplayable(function (t) { t.setStyle('blend', n) }) }) }(e, n)) }), s.unfinished |= a, (function (t, e) { var n = t._zr.storage; var i = 0; n.traverse(function (t) { i++ }), i > e.get('hoverLayerThreshold') && !o.node && e.eachSeries(function (e) { if (!e.preventUsingHoverLayer) { var n = t._chartsMap[e.__viewId]; n.__alive && n.group.traverse(function (t) { t.useHoverLayer = !0 }) } }) }(t, e)), S(t._zr.dom, e) } function it (t, e) { L(ht, function (n) { n(t, e) }) }j.resize = function (t) { if (this._disposed) this.id; else { this._zr.resize(t); var e = this._model; if (this._loadingFX && this._loadingFX.resize(), e) { var n = e.resetOption('media'); var i = t && t.silent; this[B] = !0, n && $(this), Z.update.call(this), this[B] = !1, K.call(this, i), J.call(this, i) } } }, j.showLoading = function (t, e) { if (this._disposed) this.id; else if (k(t) && (e = t, t = ''), t = t || 'default', this.hideLoading(), pt[t]) { var n = pt[t](this._api, e); var i = this._zr; this._loadingFX = n, i.add(n) } }, j.hideLoading = function () { this._disposed ? this.id : (this._loadingFX && this._zr.remove(this._loadingFX), this._loadingFX = null) }, j.makeActionFromEvent = function (t) { var e = r.extend({}, t); return e.type = lt[t.type], e }, j.dispatchAction = function (t, e) { this._disposed ? this.id : (k(e) || (e = { silent: !!e }), st[t.type] && this._model && (this[B] ? this._pendingActions.push(t) : (q.call(this, t, e.silent), e.flush ? this._zr.flush(!0) : !1 !== e.flush && o.browser.weChat && this._throttledZrFlush(), K.call(this, e.silent), J.call(this, e.silent)))) }, j.appendData = function (t) { if (this._disposed) this.id; else { var e = t.seriesIndex; this.getModel().getSeriesByIndex(e).appendData(t), this._scheduler.unfinished = !0 } }, j.on = G('on', !1), j.off = G('off', !1), j.one = G('one', !1); var rt = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu']; function at (t, e) { var n = t.get('z'); var i = t.get('zlevel'); e.group.traverse(function (t) { t.type !== 'group' && (n != null && (t.z = n), i != null && (t.zlevel = i)) }) } function ot () { this.eventInfo }j._initEvents = function () { L(rt, function (t) { var e = function (e) { var n; var i = this.getModel(); var a = e.target; if (t === 'globalout')n = {}; else if (a && a.dataIndex != null) { var o = a.dataModel || i.getSeriesByIndex(a.seriesIndex); n = o && o.getDataParams(a.dataIndex, a.dataType, a) || {} } else a && a.eventData && (n = r.extend({}, a.eventData)); if (n) { var s = n.componentType; var l = n.componentIndex; s !== 'markLine' && s !== 'markPoint' && s !== 'markArea' || (s = 'series', l = n.seriesIndex); var u = s && l != null && i.getComponent(s, l); var c = u && this[u.mainType === 'series' ? '_chartsMap' : '_componentsMap'][u.__viewId]; n.event = e, n.type = t, this._ecEventProcessor.eventInfo = { targetEl: a, packedEvent: n, model: u, view: c }, this.trigger(t, n) } }; e.zrEventfulCallAtLast = !0, this._zr.on(t, e, this) }, this), L(lt, function (t, e) { this._messageCenter.on(e, function (t) { this.trigger(e, t) }, this) }, this) }, j.isDisposed = function () { return this._disposed }, j.clear = function () { this._disposed ? this.id : this.setOption({ series: [] }, !0) }, j.dispose = function () { if (this._disposed) this.id; else { this._disposed = !0, _.setAttribute(this.getDom(), xt, ''); var t = this._api; var e = this._model; L(this._componentsViews, function (n) { n.dispose(e, t) }), L(this._chartsViews, function (n) { n.dispose(e, t) }), this._zr.dispose(), delete gt[this.id] } }, r.mixin(W, l), ot.prototype = { constructor: ot, normalizeQuery: function (t) { var e = {}; var n = {}; var i = {}; if (r.isString(t)) { var a = O(t); e.mainType = a.main || null, e.subType = a.sub || null } else { var o = ['Index', 'Name', 'Id']; var s = { name: 1, dataIndex: 1, dataType: 1 }; r.each(t, function (t, r) { for (var a = !1, l = 0; l < o.length; l++) { var u = o[l]; var c = r.lastIndexOf(u); if (c > 0 && c === r.length - u.length) { var h = r.slice(0, c); h !== 'data' && (e.mainType = h, e[u.toLowerCase()] = t, a = !0) } }s.hasOwnProperty(r) && (n[r] = t, a = !0), a || (i[r] = t) }) } return { cptQuery: e, dataQuery: n, otherQuery: i } }, filter: function (t, e, n) { var i = this.eventInfo; if (!i) return !0; var r = i.targetEl; var a = i.packedEvent; var o = i.model; var s = i.view; if (!o || !s) return !0; var l = e.cptQuery; var u = e.dataQuery; return c(l, o, 'mainType') && c(l, o, 'subType') && c(l, o, 'index', 'componentIndex') && c(l, o, 'name') && c(l, o, 'id') && c(u, a, 'name') && c(u, a, 'dataIndex') && c(u, a, 'dataType') && (!s.filterForExposedEvent || s.filterForExposedEvent(t, e.otherQuery, r, a)); function c (t, e, n, i) { return t[n] == null || e[i || n] === t[n] } }, afterTrigger: function () { this.eventInfo = null } }; var st = {}; var lt = {}; var ut = []; var ct = []; var ht = []; var dt = []; var ft = {}; var pt = {}; var gt = {}; var vt = {}; var mt = new Date() - 0; var yt = new Date() - 0; var xt = '_echarts_instance_'; function _t (t) { vt[t] = !1 } var bt = _t; function wt (t) { return gt[_.getAttribute(t, xt)] } function St (t, e) { ft[t] = e } function Mt (t) { ct.push(t) } function It (t, e) { Ct(ut, t, e, E) } function At (t, e, n) { typeof e === 'function' && (n = e, e = ''); var i = k(t) ? t.type : [t, t = { event: e }][0]; t.event = (t.event || i).toLowerCase(), e = t.event, D(F.test(i) && F.test(e)), st[i] || (st[i] = { action: n, actionInfo: t }), lt[e] = i } function Tt (t, e) { Ct(dt, t, e, N, 'visual') } function Ct (t, e, n, i, r) { (P(e) || k(e)) && (n = e, e = i); var a = I.wrapStageHandler(n, r); return a.__prio = e, a.__raw = n, t.push(a), a } function Dt (t, e) { pt[t] = e }Tt(2e3, w), Mt(f), It(900, p), Dt('default', M), At({ type: 'highlight', event: 'highlight', update: 'highlight' }, r.noop), At({ type: 'downplay', event: 'downplay', update: 'downplay' }, r.noop), St('light', A), St('dark', T); e.version = '4.5.0', e.dependencies = { zrender: '4.1.2' }, e.PRIORITY = z, e.init = function (t, e, n) { var i = wt(t); if (i) return i; var r = new W(t, e, n); return r.id = 'ec_' + mt++, gt[r.id] = r, _.setAttribute(t, xt, r.id), (function (t) { var e = '__connectUpdateStatus'; function n (t, n) { for (var i = 0; i < t.length; i++) { t[i][e] = n } }L(lt, function (i, r) { t._messageCenter.on(r, function (i) { if (vt[t.group] && t[e] !== 0) { if (i && i.escapeConnect) return; var r = t.makeActionFromEvent(i); var a = []; L(gt, function (e) { e !== t && e.group === t.group && a.push(e) }), n(a, 0), L(a, function (t) { t[e] !== 1 && t.dispatchAction(r) }), n(a, 2) } }) }) }(r)), r }, e.connect = function (t) { if (r.isArray(t)) { var e = t; t = null, L(e, function (e) { e.group != null && (t = e.group) }), t = t || 'g_' + yt++, L(e, function (e) { e.group = t }) } return vt[t] = !0, t }, e.disConnect = _t, e.disconnect = bt, e.dispose = function (t) { typeof t === 'string' ? t = gt[t] : t instanceof W || (t = wt(t)), t instanceof W && !t.isDisposed() && t.dispose() }, e.getInstanceByDom = wt, e.getInstanceById = function (t) { return gt[t] }, e.registerTheme = St, e.registerPreprocessor = Mt, e.registerProcessor = It, e.registerPostUpdate = function (t) { ht.push(t) }, e.registerAction = At, e.registerCoordinateSystem = function (t, e) { h.register(t, e) }, e.getCoordinateSystemDimensions = function (t) { var e = h.get(t); if (e) return e.getDimensionsInfo ? e.getDimensionsInfo() : e.dimensions.slice() }, e.registerLayout = function (t, e) { Ct(dt, t, e, R, 'layout') }, e.registerVisual = Tt, e.registerLoading = Dt, e.extendComponentModel = function (t) { return g.extend(t) }, e.extendComponentView = function (t) { return m.extend(t) }, e.extendSeriesModel = function (t) { return v.extend(t) }, e.extendChartView = function (t) { return y.extend(t) }, e.setCanvasCreator = function (t) { r.$override('createCanvas', t) }, e.registerMap = function (t, e, n) { C.registerMap(t, e, n) }, e.getMap = function (t) { var e = C.retrieveMap(t); return e && e[0] && { geoJson: e[0].geoJSON, specialAreas: e[0].specialAreas } }, e.dataTool = {}; var Lt = n(156); !(function () { for (var t in Lt)Lt.hasOwnProperty(t) && (e[t] = Lt[t]) }()) }, function (t, e, n) { var i = n(0); var r = n(140); var a = n(23); var o = n(15); var s = n(7); var l = n(10); var u = n(86); var c = n(43); e.Image = c; var h = n(42); e.Group = h; var d = n(35); e.Text = d; var f = n(145); e.Circle = f; var p = n(250); e.Sector = p; var g = n(251); e.Ring = g; var v = n(147); e.Polygon = v; var m = n(149); e.Polyline = m; var y = n(90); e.Rect = y; var x = n(150); e.Line = x; var _ = n(254); e.BezierCurve = _; var b = n(255); e.Arc = b; var w = n(256); e.CompoundPath = w; var S = n(92); e.LinearGradient = S; var M = n(257); e.RadialGradient = M; var I = n(8); e.BoundingRect = I; var A = n(93); e.IncrementalDisplayable = A; var T = n(91); var C = Math.max; var D = Math.min; var L = {}; var P = 1; var k = 'emphasis'; var O = 'normal'; var E = 1; var R = {}; var N = {}; function z (t, e) { N[t] = e } function B (t, e, n, i) { var a = r.createFromString(t, e); return n && (i === 'center' && (n = V(n, a.getBoundingRect())), G(a, n)), a } function V (t, e) { var n; var i = e.width / e.height; var r = t.height * i; return n = r <= t.width ? t.height : (r = t.width) / i, { x: t.x + t.width / 2 - r / 2, y: t.y + t.height / 2 - n / 2, width: r, height: n } } var F = r.mergePath; function G (t, e) { if (t.applyTransform) { var n = t.getBoundingRect().calculateTransform(e); t.applyTransform(n) } } var H = T.subPixelOptimize; function W (t) { return t != null && t !== 'none' } var j = i.createHashMap(); var U = 0; function Z (t) { var e = t.__hoverStl; if (e && !t.__highlighted) { var n = t.__zr; var i = t.useHoverLayer && n && n.painter.type === 'canvas'; if (t.__highlighted = i ? 'layer' : 'plain', !(t.isGroup || !n && t.useHoverLayer)) { var r = t; var a = t.style; i && (a = (r = n.addHover(t)).style), lt(a), i || (function (t) { if (t.__hoverStlDirty) { t.__hoverStlDirty = !1; var e = t.__hoverStl; if (e) { var n = t.__cachedNormalStl = {}; t.__cachedNormalZ2 = t.z2; var i = t.style; for (var r in e)e[r] != null && (n[r] = i[r]); n.fill = i.fill, n.stroke = i.stroke } else t.__cachedNormalStl = t.__cachedNormalZ2 = null } }(r)), a.extendFrom(e), $(a, e, 'fill'), $(a, e, 'stroke'), st(a), i || (t.dirty(!1), t.z2 += P) } } } function $ (t, e, n) { !W(e[n]) && W(t[n]) && (t[n] = (function (t) { if (typeof t !== 'string') return t; var e = j.get(t); return e || (e = a.lift(t, -0.1), U < 1e4 && (j.set(t, e), U++)), e }(t[n]))) } function Y (t) { var e = t.__highlighted; if (e && (t.__highlighted = !1, !t.isGroup)) if (e === 'layer')t.__zr && t.__zr.removeHover(t); else { var n = t.style; var i = t.__cachedNormalStl; i && (lt(n), t.setStyle(i), st(n)); var r = t.__cachedNormalZ2; r != null && t.z2 - r === P && (t.z2 = r) } } function X (t, e, n) { var i; var r = O; var a = O; t.__highlighted && (r = k, i = !0), e(t, n), t.__highlighted && (a = k, i = !0), t.isGroup && t.traverse(function (t) { !t.isGroup && e(t, n) }), i && t.__highDownOnUpdate && t.__highDownOnUpdate(r, a) } function q (t, e) { e = t.__hoverStl = !1 !== e && (t.hoverStyle || e || {}), t.__hoverStlDirty = !0, t.__highlighted && (t.__cachedNormalStl = null, Y(t), Z(t)) } function K (t) { !et(this, t) && !this.__highByOuter && X(this, Z) } function J (t) { !et(this, t) && !this.__highByOuter && X(this, Y) } function Q (t) { this.__highByOuter |= 1 << (t || 0), X(this, Z) } function tt (t) { !(this.__highByOuter &= ~(1 << (t || 0))) && X(this, Y) } function et (t, e) { return t.__highDownSilentOnTouch && e.zrByTouch } function nt (t, e) { var n = !1 === e; if (t.__highDownSilentOnTouch = t.highDownSilentOnTouch, t.__highDownOnUpdate = t.highDownOnUpdate, !n || t.__highDownDispatcher) { var i = n ? 'off' : 'on'; t[i]('mouseover', K)[i]('mouseout', J), t[i]('emphasis', Q)[i]('normal', tt), t.__highByOuter = t.__highByOuter || 0, t.__highDownDispatcher = !n } } function it (t, e, n, r, a) { return rt(t, e, r, a), n && i.extend(t, n), t } function rt (t, e, n, r) { if ((n = n || L).isRectText) { var a; n.getTextPosition ? a = n.getTextPosition(e, r) : (a = e.getShallow('position') || (r ? null : 'inside')) === 'outside' && (a = 'top'), t.textPosition = a, t.textOffset = e.getShallow('offset'); var o = e.getShallow('rotate'); o != null && (o *= Math.PI / 180), t.textRotation = o, t.textDistance = i.retrieve2(e.getShallow('distance'), r ? null : 5) } var s; var l = e.ecModel; var u = l && l.option.textStyle; var c = (function (t) { var e; for (;t && t !== t.ecModel;) { var n = (t.option || L).rich; if (n) for (var i in e = e || {}, n)n.hasOwnProperty(i) && (e[i] = 1); t = t.parentModel } return e }(e)); if (c) for (var h in s = {}, c) if (c.hasOwnProperty(h)) { var d = e.getModel(['rich', h]); at(s[h] = {}, d, u, n, r) } return t.rich = s, at(t, e, u, n, r, !0), n.forceRich && !n.textStyle && (n.textStyle = {}), t } function at (t, e, n, r, a, o) { n = !a && n || L, t.textFill = ot(e.getShallow('color'), r) || n.color, t.textStroke = ot(e.getShallow('textBorderColor'), r) || n.textBorderColor, t.textStrokeWidth = i.retrieve2(e.getShallow('textBorderWidth'), n.textBorderWidth), a || (o && (t.insideRollbackOpt = r, st(t)), t.textFill == null && (t.textFill = r.autoColor)), t.fontStyle = e.getShallow('fontStyle') || n.fontStyle, t.fontWeight = e.getShallow('fontWeight') || n.fontWeight, t.fontSize = e.getShallow('fontSize') || n.fontSize, t.fontFamily = e.getShallow('fontFamily') || n.fontFamily, t.textAlign = e.getShallow('align'), t.textVerticalAlign = e.getShallow('verticalAlign') || e.getShallow('baseline'), t.textLineHeight = e.getShallow('lineHeight'), t.textWidth = e.getShallow('width'), t.textHeight = e.getShallow('height'), t.textTag = e.getShallow('tag'), o && r.disableBox || (t.textBackgroundColor = ot(e.getShallow('backgroundColor'), r), t.textPadding = e.getShallow('padding'), t.textBorderColor = ot(e.getShallow('borderColor'), r), t.textBorderWidth = e.getShallow('borderWidth'), t.textBorderRadius = e.getShallow('borderRadius'), t.textBoxShadowColor = e.getShallow('shadowColor'), t.textBoxShadowBlur = e.getShallow('shadowBlur'), t.textBoxShadowOffsetX = e.getShallow('shadowOffsetX'), t.textBoxShadowOffsetY = e.getShallow('shadowOffsetY')), t.textShadowColor = e.getShallow('textShadowColor') || n.textShadowColor, t.textShadowBlur = e.getShallow('textShadowBlur') || n.textShadowBlur, t.textShadowOffsetX = e.getShallow('textShadowOffsetX') || n.textShadowOffsetX, t.textShadowOffsetY = e.getShallow('textShadowOffsetY') || n.textShadowOffsetY } function ot (t, e) { return t !== 'auto' ? t : e && e.autoColor ? e.autoColor : null } function st (t) { var e; var n = t.textPosition; var i = t.insideRollbackOpt; if (i && t.textFill == null) { var r = i.autoColor; var a = i.isRectText; var o = i.useInsideStyle; var s = !1 !== o && (!0 === o || a && n && typeof n === 'string' && n.indexOf('inside') >= 0); var l = !s && r != null; (s || l) && (e = { textFill: t.textFill, textStroke: t.textStroke, textStrokeWidth: t.textStrokeWidth }), s && (t.textFill = '#fff', t.textStroke == null && (t.textStroke = r, t.textStrokeWidth == null && (t.textStrokeWidth = 2))), l && (t.textFill = r) }t.insideRollback = e } function lt (t) { var e = t.insideRollback; e && (t.textFill = e.textFill, t.textStroke = e.textStroke, t.textStrokeWidth = e.textStrokeWidth, t.insideRollback = null) } function ut (t, e, n, i, r, a) { if (typeof r === 'function' && (a = r, r = null), i && i.isAnimationEnabled()) { var o = t ? 'Update' : ''; var s = i.getShallow('animationDuration' + o); var l = i.getShallow('animationEasing' + o); var u = i.getShallow('animationDelay' + o); typeof u === 'function' && (u = u(r, i.getAnimationDelayParams ? i.getAnimationDelayParams(e, r) : null)), typeof s === 'function' && (s = s(r)), s > 0 ? e.animateTo(n, s, u || 0, l, a, !!a) : (e.stopAnimation(), e.attr(n), a && a()) } else e.stopAnimation(), e.attr(n), a && a() } function ct (t, e, n, i, r) { ut(!0, t, e, n, i, r) } function ht (t, e, n) { return e && !i.isArrayLike(e) && (e = u.getLocalTransform(e)), n && (e = o.invert([], e)), s.applyTransform([], t, e) } function dt (t, e, n, i, r, a, o, s) { var l; var u = n - t; var c = i - e; var h = o - r; var d = s - a; var f = ft(h, d, u, c); if ((l = f) <= 1e-6 && l >= -1e-6) return !1; var p = t - r; var g = e - a; var v = ft(p, g, u, c) / f; if (v < 0 || v > 1) return !1; var m = ft(p, g, h, d) / f; return !(m < 0 || m > 1) } function ft (t, e, n, i) { return t * i - n * e }z('circle', f), z('sector', p), z('ring', g), z('polygon', v), z('polyline', m), z('rect', y), z('line', x), z('bezierCurve', _), z('arc', b), e.Z2_EMPHASIS_LIFT = P, e.CACHED_LABEL_STYLE_PROPERTIES = { color: 'textFill', textBorderColor: 'textStroke', textBorderWidth: 'textStrokeWidth' }, e.extendShape = function (t) { return l.extend(t) }, e.extendPath = function (t, e) { return r.extendFromString(t, e) }, e.registerShape = z, e.getShapeClass = function (t) { if (N.hasOwnProperty(t)) return N[t] }, e.makePath = B, e.makeImage = function (t, e, n) { var i = new c({ style: { image: t, x: e.x, y: e.y, width: e.width, height: e.height }, onload: function (t) { if (n === 'center') { var r = { width: t.width, height: t.height }; i.setStyle(V(e, r)) } } }); return i }, e.mergePath = F, e.resizePath = G, e.subPixelOptimizeLine = function (t) { return T.subPixelOptimizeLine(t.shape, t.shape, t.style), t }, e.subPixelOptimizeRect = function (t) { return T.subPixelOptimizeRect(t.shape, t.shape, t.style), t }, e.subPixelOptimize = H, e.setElementHoverStyle = q, e.setHoverStyle = function (t, e) { nt(t, !0), X(t, q, e) }, e.setAsHighDownDispatcher = nt, e.isHighDownDispatcher = function (t) { return !(!t || !t.__highDownDispatcher) }, e.getHighlightDigit = function (t) { var e = R[t]; return e == null && E <= 32 && (e = R[t] = E++), e }, e.setLabelStyle = function (t, e, n, r, a, o, s) { var l; var u = (a = a || L).labelFetcher; var c = a.labelDataIndex; var h = a.labelDimIndex; var d = n.getShallow('show'); var f = r.getShallow('show'); (d || f) && (u && (l = u.getFormattedLabel(c, 'normal', null, h)), l == null && (l = i.isFunction(a.defaultText) ? a.defaultText(c, a) : a.defaultText)); var p = d ? l : null; var g = f ? i.retrieve2(u ? u.getFormattedLabel(c, 'emphasis', null, h) : null, l) : null; p == null && g == null || (it(t, n, o, a), it(e, r, s, a, !0)), t.text = p, e.text = g }, e.modifyLabelStyle = function (t, e, n) { var r = t.style; e && (lt(r), t.setStyle(e), st(r)), r = t.__hoverStl, n && r && (lt(r), i.extend(r, n), st(r)) }, e.setTextStyle = it, e.setText = function (t, e, n) { var i; var r = { isRectText: !0 }; !1 === n ? i = !0 : r.autoColor = n, rt(t, e, r, i) }, e.getFont = function (t, e) { var n = e || e.getModel('textStyle'); return i.trim([t.fontStyle || n && n.getShallow('fontStyle') || '', t.fontWeight || n && n.getShallow('fontWeight') || '', (t.fontSize || n && n.getShallow('fontSize') || 12) + 'px', t.fontFamily || n && n.getShallow('fontFamily') || 'sans-serif'].join(' ')) }, e.updateProps = ct, e.initProps = function (t, e, n, i, r) { ut(!1, t, e, n, i, r) }, e.getTransform = function (t, e) { for (var n = o.identity([]); t && t !== e;)o.mul(n, t.getLocalTransform(), n), t = t.parent; return n }, e.applyTransform = ht, e.transformDirection = function (t, e, n) { var i = e[4] === 0 || e[5] === 0 || e[0] === 0 ? 1 : Math.abs(2 * e[4] / e[0]); var r = e[4] === 0 || e[5] === 0 || e[2] === 0 ? 1 : Math.abs(2 * e[4] / e[2]); var a = [t === 'left' ? -i : t === 'right' ? i : 0, t === 'top' ? -r : t === 'bottom' ? r : 0]; return a = ht(a, e, n), Math.abs(a[0]) > Math.abs(a[1]) ? a[0] > 0 ? 'right' : 'left' : a[1] > 0 ? 'bottom' : 'top' }, e.groupTransition = function (t, e, n, r) { if (t && e) { var a; var o = (a = {}, t.traverse(function (t) { !t.isGroup && t.anid && (a[t.anid] = t) }), a); e.traverse(function (t) { if (!t.isGroup && t.anid) { var e = o[t.anid]; if (e) { var i = l(t); t.attr(l(e)), ct(t, i, n, t.dataIndex) } } }) } function l (t) { var e = { position: s.clone(t.position), rotation: t.rotation }; return t.shape && (e.shape = i.extend({}, t.shape)), e } }, e.clipPointsByRect = function (t, e) { return i.map(t, function (t) { var n = t[0]; n = C(n, e.x), n = D(n, e.x + e.width); var i = t[1]; return i = C(i, e.y), [n, i = D(i, e.y + e.height)] }) }, e.clipRectByRect = function (t, e) { var n = C(t.x, e.x); var i = D(t.x + t.width, e.x + e.width); var r = C(t.y, e.y); var a = D(t.y + t.height, e.y + e.height); if (i >= n && a >= r) return { x: n, y: r, width: i - n, height: a - r } }, e.createIcon = function (t, e, n) { var r = (e = i.extend({ rectHover: !0 }, e)).style = { strokeNoScale: !0 }; if (n = n || { x: -1, y: -1, width: 2, height: 2 }, t) return t.indexOf('image://') === 0 ? (r.image = t.slice(8), i.defaults(r, n), new c(e)) : B(t.replace('path://', ''), e, n, 'center') }, e.linePolygonIntersect = function (t, e, n, i, r) { for (var a = 0, o = r[r.length - 1]; a < r.length; a++) { var s = r[a]; if (dt(t, e, n, i, s[0], s[1], o[0], o[1])) return !0; o = s } }, e.lineLineIntersect = dt }, function (t, e, n) { var i = n(0); var r = 1e-4; var a = /^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/; function o (t) { if (t === 0) return 0; var e = Math.floor(Math.log(t) / Math.LN10); return t / Math.pow(10, e) >= 10 && e++, e }e.linearMap = function (t, e, n, i) { var r = e[1] - e[0]; var a = n[1] - n[0]; if (r === 0) return a === 0 ? n[0] : (n[0] + n[1]) / 2; if (i) if (r > 0) { if (t <= e[0]) return n[0]; if (t >= e[1]) return n[1] } else { if (t >= e[0]) return n[0]; if (t <= e[1]) return n[1] } else { if (t === e[0]) return n[0]; if (t === e[1]) return n[1] } return (t - e[0]) / r * a + n[0] }, e.parsePercent = function (t, e) { switch (t) { case 'center':case 'middle':t = '50%'; break; case 'left':case 'top':t = '0%'; break; case 'right':case 'bottom':t = '100%' } return typeof t === 'string' ? (n = t, n.replace(/^\s+|\s+$/g, '')).match(/%$/) ? parseFloat(t) / 100 * e : parseFloat(t) : t == null ? NaN : +t; var n }, e.round = function (t, e, n) { return e == null && (e = 10), e = Math.min(Math.max(0, e), 20), t = (+t).toFixed(e), n ? t : +t }, e.asc = function (t) { return t.sort(function (t, e) { return t - e }), t }, e.getPrecision = function (t) { if (t = +t, isNaN(t)) return 0; for (var e = 1, n = 0; Math.round(t * e) / e !== t;)e *= 10, n++; return n }, e.getPrecisionSafe = function (t) { var e = t.toString(); var n = e.indexOf('e'); if (n > 0) { var i = +e.slice(n + 1); return i < 0 ? -i : 0 } var r = e.indexOf('.'); return r < 0 ? 0 : e.length - 1 - r }, e.getPixelPrecision = function (t, e) { var n = Math.log; var i = Math.LN10; var r = Math.floor(n(t[1] - t[0]) / i); var a = Math.round(n(Math.abs(e[1] - e[0])) / i); var o = Math.min(Math.max(-r + a, 0), 20); return isFinite(o) ? o : 20 }, e.getPercentWithPrecision = function (t, e, n) { if (!t[e]) return 0; var r = i.reduce(t, function (t, e) { return t + (isNaN(e) ? 0 : e) }, 0); if (r === 0) return 0; for (var a = Math.pow(10, n), o = i.map(t, function (t) { return (isNaN(t) ? 0 : t) / r * a * 100 }), s = 100 * a, l = i.map(o, function (t) { return Math.floor(t) }), u = i.reduce(l, function (t, e) { return t + e }, 0), c = i.map(o, function (t, e) { return t - l[e] }); u < s;) { for (var h = Number.NEGATIVE_INFINITY, d = null, f = 0, p = c.length; f < p; ++f)c[f] > h && (h = c[f], d = f); ++l[d], c[d] = 0, ++u } return l[e] / a }, e.MAX_SAFE_INTEGER = 9007199254740991, e.remRadian = function (t) { var e = 2 * Math.PI; return (t % e + e) % e }, e.isRadianAroundZero = function (t) { return t > -r && t < r }, e.parseDate = function (t) { if (t instanceof Date) return t; if (typeof t === 'string') { var e = a.exec(t); if (!e) return new Date(NaN); if (e[8]) { var n = +e[4] || 0; return e[8].toUpperCase() !== 'Z' && (n -= e[8].slice(0, 3)), new Date(Date.UTC(+e[1], +(e[2] || 1) - 1, +e[3] || 1, n, +(e[5] || 0), +e[6] || 0, +e[7] || 0)) } return new Date(+e[1], +(e[2] || 1) - 1, +e[3] || 1, +e[4] || 0, +(e[5] || 0), +e[6] || 0, +e[7] || 0) } return t == null ? new Date(NaN) : new Date(Math.round(t)) }, e.quantity = function (t) { return Math.pow(10, o(t)) }, e.quantityExponent = o, e.nice = function (t, e) { var n = o(t); var i = Math.pow(10, n); var r = t / i; return t = (e ? r < 1.5 ? 1 : r < 2.5 ? 2 : r < 4 ? 3 : r < 7 ? 5 : 10 : r < 1 ? 1 : r < 2 ? 2 : r < 3 ? 3 : r < 5 ? 5 : 10) * i, n >= -20 ? +t.toFixed(n < 0 ? -n : 0) : t }, e.quantile = function (t, e) { var n = (t.length - 1) * e + 1; var i = Math.floor(n); var r = +t[i - 1]; var a = n - i; return a ? r + a * (t[i] - r) : r }, e.reformIntervals = function (t) { t.sort(function (t, e) { return (function t (e, n, i) { return e.interval[i] < n.interval[i] || e.interval[i] === n.interval[i] && (e.close[i] - n.close[i] == (i ? -1 : 1) || !i && t(e, n, 1)) }(t, e, 0)) ? -1 : 1 }); for (var e = -1 / 0, n = 1, i = 0; i < t.length;) { for (var r = t[i].interval, a = t[i].close, o = 0; o < 2; o++)r[o] <= e && (r[o] = e, a[o] = o ? 1 : 1 - n), e = r[o], n = a[o]; r[0] === r[1] && a[0] * a[1] != 1 ? t.splice(i, 1) : i++ } return t }, e.isNumeric = function (t) { return t - parseFloat(t) >= 0 } }, function (t, e, n) { var i = n(0); var r = n(11); var a = i.each; var o = i.isObject; var s = i.isArray; var l = 'series\0'; function u (t) { return t instanceof Array ? t : t == null ? [] : [t] } function c (t) { return o(t) && t.id && (t.id + '').indexOf('\0_ec_\0') === 0 } var h = 0; function d (t, e) { return t && t.hasOwnProperty(e) }e.normalizeToArray = u, e.defaultEmphasis = function (t, e, n) { if (t) { t[e] = t[e] || {}, t.emphasis = t.emphasis || {}, t.emphasis[e] = t.emphasis[e] || {}; for (var i = 0, r = n.length; i < r; i++) { var a = n[i]; !t.emphasis[e].hasOwnProperty(a) && t[e].hasOwnProperty(a) && (t.emphasis[e][a] = t[e][a]) } } }, e.TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'], e.getDataItemValue = function (t) { return !o(t) || s(t) || t instanceof Date ? t : t.value }, e.isDataItemOption = function (t) { return o(t) && !(t instanceof Array) }, e.mappingToExists = function (t, e) { e = (e || []).slice(); var n = i.map(t || [], function (t, e) { return { exist: t } }); return a(e, function (t, i) { if (o(t)) { for (var r = 0; r < n.length; r++) if (!n[r].option && t.id != null && n[r].exist.id === t.id + '') return n[r].option = t, void (e[i] = null); for (r = 0; r < n.length; r++) { var a = n[r].exist; if (!(n[r].option || a.id != null && t.id != null || t.name == null || c(t) || c(a) || a.name !== t.name + '')) return n[r].option = t, void (e[i] = null) } } }), a(e, function (t, e) { if (o(t)) { for (var i = 0; i < n.length; i++) { var r = n[i].exist; if (!n[i].option && !c(r) && t.id == null) { n[i].option = t; break } }i >= n.length && n.push({ option: t }) } }), n }, e.makeIdAndName = function (t) { var e = i.createHashMap(); a(t, function (t, n) { var i = t.exist; i && e.set(i.id, t) }), a(t, function (t, n) { var r = t.option; i.assert(!r || r.id == null || !e.get(r.id) || e.get(r.id) === t, 'id duplicates: ' + (r && r.id)), r && r.id != null && e.set(r.id, t), !t.keyInfo && (t.keyInfo = {}) }), a(t, function (t, n) { var i = t.exist; var r = t.option; var a = t.keyInfo; if (o(r)) { if (a.name = r.name != null ? r.name + '' : i ? i.name : l + n, i)a.id = i.id; else if (r.id != null)a.id = r.id + ''; else { var s = 0; do { a.id = '\0' + a.name + '\0' + s++ } while (e.get(a.id)) }e.set(a.id, t) } }) }, e.isNameSpecified = function (t) { var e = t.name; return !(!e || !e.indexOf(l)) }, e.isIdInner = c, e.compressBatches = function (t, e) { var n = {}; var i = {}; return r(t || [], n), r(e || [], i, n), [a(n), a(i)]; function r (t, e, n) { for (var i = 0, r = t.length; i < r; i++) for (var a = t[i].seriesId, o = u(t[i].dataIndex), s = n && n[a], l = 0, c = o.length; l < c; l++) { var h = o[l]; s && s[h] ? s[h] = null : (e[a] || (e[a] = {}))[h] = 1 } } function a (t, e) { var n = []; for (var i in t) if (t.hasOwnProperty(i) && t[i] != null) if (e)n.push(+i); else { var r = a(t[i], !0); r.length && n.push({ seriesId: i, dataIndex: r }) } return n } }, e.queryDataIndex = function (t, e) { return e.dataIndexInside != null ? e.dataIndexInside : e.dataIndex != null ? i.isArray(e.dataIndex) ? i.map(e.dataIndex, function (e) { return t.indexOfRawIndex(e) }) : t.indexOfRawIndex(e.dataIndex) : e.name != null ? i.isArray(e.name) ? i.map(e.name, function (e) { return t.indexOfName(e) }) : t.indexOfName(e.name) : void 0 }, e.makeInner = function () { var t = '__\0ec_inner_' + h++ + '_' + Math.random().toFixed(5); return function (e) { return e[t] || (e[t] = {}) } }, e.parseFinder = function (t, e, n) { if (i.isString(e)) { var r = {}; r[e + 'Index'] = 0, e = r } var o = n && n.defaultMainType; !o || d(e, o + 'Index') || d(e, o + 'Id') || d(e, o + 'Name') || (e[o + 'Index'] = 0); var s = {}; return a(e, function (r, a) { r = e[a]; if (a !== 'dataIndex' && a !== 'dataIndexInside') { var o = a.match(/^(\w+)(Index|Id|Name)$/) || []; var l = o[1]; var u = (o[2] || '').toLowerCase(); if (!(!l || !u || r == null || u === 'index' && r === 'none' || n && n.includeMainTypes && i.indexOf(n.includeMainTypes, l) < 0)) { var c = { mainType: l }; u === 'index' && r === 'all' || (c[u] = r); var h = t.queryComponents(c); s[l + 'Models'] = h, s[l + 'Model'] = h[0] } } else s[a] = r }), s }, e.setAttribute = function (t, e, n) { t.setAttribute ? t.setAttribute(e, n) : t[e] = n }, e.getAttribute = function (t, e) { return t.getAttribute ? t.getAttribute(e) : t[e] }, e.getTooltipRenderMode = function (t) { return t === 'auto' ? r.domSupported ? 'html' : 'richText' : t || 'html' }, e.groupData = function (t, e) { var n = i.createHashMap(); var r = []; return i.each(t, function (t) { var i = e(t); (n.get(i) || (r.push(i), n.set(i, []))).push(t) }), { keys: r, buckets: n } } }, function (t, e, n) { (function (t) { var n; typeof window !== 'undefined' ? n = window.__DEV__ : void 0 !== t && (n = t.__DEV__), void 0 === n && (n = !0); var i = n; e.__DEV__ = i }).call(this, n(66)) }, function (t, e, n) { var i = n(0); var r = n(8); var a = n(3).parsePercent; var o = n(9); var s = i.each; var l = ['left', 'right', 'top', 'bottom', 'width', 'height']; var u = [['width', 'left', 'right'], ['height', 'top', 'bottom']]; function c (t, e, n, i, r) { var a = 0; var o = 0; i == null && (i = 1 / 0), r == null && (r = 1 / 0); var s = 0; e.eachChild(function (l, u) { var c; var h; var d = l.position; var f = l.getBoundingRect(); var p = e.childAt(u + 1); var g = p && p.getBoundingRect(); if (t === 'horizontal') { var v = f.width + (g ? -g.x + f.x : 0); (c = a + v) > i || l.newline ? (a = 0, c = v, o += s + n, s = f.height) : s = Math.max(s, f.height) } else { var m = f.height + (g ? -g.y + f.y : 0); (h = o + m) > r || l.newline ? (a += s + n, o = 0, h = m, s = f.width) : s = Math.max(s, f.width) }l.newline || (d[0] = a, d[1] = o, t === 'horizontal' ? a = c + n : o = h + n) }) } var h = c; var d = i.curry(c, 'vertical'); var f = i.curry(c, 'horizontal'); function p (t, e, n) { n = o.normalizeCssArray(n || 0); var i = e.width; var s = e.height; var l = a(t.left, i); var u = a(t.top, s); var c = a(t.right, i); var h = a(t.bottom, s); var d = a(t.width, i); var f = a(t.height, s); var p = n[2] + n[0]; var g = n[1] + n[3]; var v = t.aspect; switch (isNaN(d) && (d = i - c - g - l), isNaN(f) && (f = s - h - p - u), v != null && (isNaN(d) && isNaN(f) && (v > i / s ? d = 0.8 * i : f = 0.8 * s), isNaN(d) && (d = v * f), isNaN(f) && (f = d / v)), isNaN(l) && (l = i - c - d - g), isNaN(u) && (u = s - h - f - p), t.left || t.right) { case 'center':l = i / 2 - d / 2 - n[3]; break; case 'right':l = i - d - g } switch (t.top || t.bottom) { case 'middle':case 'center':u = s / 2 - f / 2 - n[0]; break; case 'bottom':u = s - f - p }l = l || 0, u = u || 0, isNaN(d) && (d = i - g - l - (c || 0)), isNaN(f) && (f = s - p - u - (h || 0)); var m = new r(l + n[3], u + n[0], d, f); return m.margin = n, m } function g (t, e) { return e && t && s(l, function (n) { e.hasOwnProperty(n) && (t[n] = e[n]) }), t }e.LOCATION_PARAMS = l, e.HV_NAMES = u, e.box = h, e.vbox = d, e.hbox = f, e.getAvailableSize = function (t, e, n) { var i = e.width; var r = e.height; var s = a(t.x, i); var l = a(t.y, r); var u = a(t.x2, i); var c = a(t.y2, r); return (isNaN(s) || isNaN(parseFloat(t.x))) && (s = 0), (isNaN(u) || isNaN(parseFloat(t.x2))) && (u = i), (isNaN(l) || isNaN(parseFloat(t.y))) && (l = 0), (isNaN(c) || isNaN(parseFloat(t.y2))) && (c = r), n = o.normalizeCssArray(n || 0), { width: Math.max(u - s - n[1] - n[3], 0), height: Math.max(c - l - n[0] - n[2], 0) } }, e.getLayoutRect = p, e.positionElement = function (t, e, n, a, o) { var s = !o || !o.hv || o.hv[0]; var l = !o || !o.hv || o.hv[1]; var u = o && o.boundingMode || 'all'; if (s || l) { var c; if (u === 'raw')c = t.type === 'group' ? new r(0, 0, +e.width || 0, +e.height || 0) : t.getBoundingRect(); else if (c = t.getBoundingRect(), t.needLocalTransform()) { var h = t.getLocalTransform(); (c = c.clone()).applyTransform(h) }e = p(i.defaults({ width: c.width, height: c.height }, e), n, a); var d = t.position; var f = s ? e.x - c.x : 0; var g = l ? e.y - c.y : 0; t.attr('position', u === 'raw' ? [f, g] : [d[0] + f, d[1] + g]) } }, e.sizeCalculable = function (t, e) { return t[u[e][0]] != null || t[u[e][1]] != null && t[u[e][2]] != null }, e.mergeLayoutParam = function (t, e, n) { !i.isObject(n) && (n = {}); var r = n.ignoreSize; !i.isArray(r) && (r = [r, r]); var a = l(u[0], 0); var o = l(u[1], 1); function l (n, i) { var a = {}; var o = 0; var l = {}; var u = 0; if (s(n, function (e) { l[e] = t[e] }), s(n, function (t) { c(e, t) && (a[t] = l[t] = e[t]), h(a, t) && o++, h(l, t) && u++ }), r[i]) return h(e, n[1]) ? l[n[2]] = null : h(e, n[2]) && (l[n[1]] = null), l; if (u !== 2 && o) { if (o >= 2) return a; for (var d = 0; d < n.length; d++) { var f = n[d]; if (!c(a, f) && c(t, f)) { a[f] = t[f]; break } } return a } return l } function c (t, e) { return t.hasOwnProperty(e) } function h (t, e) { return t[e] != null && t[e] !== 'auto' } function d (t, e, n) { s(t, function (t) { e[t] = n[t] }) }d(u[0], t, a), d(u[1], t, o) }, e.getLayoutParams = function (t) { return g({}, t) }, e.copyLayoutParams = g }, function (t, e) { var n = typeof Float32Array === 'undefined' ? Array : Float32Array; function i (t) { return Math.sqrt(a(t)) } var r = i; function a (t) { return t[0] * t[0] + t[1] * t[1] } var o = a; function s (t, e) { return Math.sqrt((t[0] - e[0]) * (t[0] - e[0]) + (t[1] - e[1]) * (t[1] - e[1])) } var l = s; function u (t, e) { return (t[0] - e[0]) * (t[0] - e[0]) + (t[1] - e[1]) * (t[1] - e[1]) } var c = u; e.create = function (t, e) { var i = new n(2); return t == null && (t = 0), e == null && (e = 0), i[0] = t, i[1] = e, i }, e.copy = function (t, e) { return t[0] = e[0], t[1] = e[1], t }, e.clone = function (t) { var e = new n(2); return e[0] = t[0], e[1] = t[1], e }, e.set = function (t, e, n) { return t[0] = e, t[1] = n, t }, e.add = function (t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t }, e.scaleAndAdd = function (t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t }, e.sub = function (t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t }, e.len = i, e.length = r, e.lenSquare = a, e.lengthSquare = o, e.mul = function (t, e, n) { return t[0] = e[0] * n[0], t[1] = e[1] * n[1], t }, e.div = function (t, e, n) { return t[0] = e[0] / n[0], t[1] = e[1] / n[1], t }, e.dot = function (t, e) { return t[0] * e[0] + t[1] * e[1] }, e.scale = function (t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t }, e.normalize = function (t, e) { var n = i(e); return n === 0 ? (t[0] = 0, t[1] = 0) : (t[0] = e[0] / n, t[1] = e[1] / n), t }, e.distance = s, e.dist = l, e.distanceSquare = u, e.distSquare = c, e.negate = function (t, e) { return t[0] = -e[0], t[1] = -e[1], t }, e.lerp = function (t, e, n, i) { return t[0] = e[0] + i * (n[0] - e[0]), t[1] = e[1] + i * (n[1] - e[1]), t }, e.applyTransform = function (t, e, n) { var i = e[0]; var r = e[1]; return t[0] = n[0] * i + n[2] * r + n[4], t[1] = n[1] * i + n[3] * r + n[5], t }, e.min = function (t, e, n) { return t[0] = Math.min(e[0], n[0]), t[1] = Math.min(e[1], n[1]), t }, e.max = function (t, e, n) { return t[0] = Math.max(e[0], n[0]), t[1] = Math.max(e[1], n[1]), t } }, function (t, e, n) { var i; var r; var a; var o; var s = n(7); var l = n(15); var u = s.applyTransform; var c = Math.min; var h = Math.max; function d (t, e, n, i) { n < 0 && (t += n, n = -n), i < 0 && (e += i, i = -i), this.x = t, this.y = e, this.width = n, this.height = i }d.prototype = { constructor: d, union: function (t) { var e = c(t.x, this.x); var n = c(t.y, this.y); this.width = h(t.x + t.width, this.x + this.width) - e, this.height = h(t.y + t.height, this.y + this.height) - n, this.x = e, this.y = n }, applyTransform: (i = [], r = [], a = [], o = [], function (t) { if (t) { i[0] = a[0] = this.x, i[1] = o[1] = this.y, r[0] = o[0] = this.x + this.width, r[1] = a[1] = this.y + this.height, u(i, i, t), u(r, r, t), u(a, a, t), u(o, o, t), this.x = c(i[0], r[0], a[0], o[0]), this.y = c(i[1], r[1], a[1], o[1]); var e = h(i[0], r[0], a[0], o[0]); var n = h(i[1], r[1], a[1], o[1]); this.width = e - this.x, this.height = n - this.y } }), calculateTransform: function (t) { var e = this; var n = t.width / e.width; var i = t.height / e.height; var r = l.create(); return l.translate(r, r, [-e.x, -e.y]), l.scale(r, r, [n, i]), l.translate(r, r, [t.x, t.y]), r }, intersect: function (t) { if (!t) return !1; t instanceof d || (t = d.create(t)); var e = this; var n = e.x; var i = e.x + e.width; var r = e.y; var a = e.y + e.height; var o = t.x; var s = t.x + t.width; var l = t.y; var u = t.y + t.height; return !(i < o || s < n || a < l || u < r) }, contain: function (t, e) { return t >= this.x && t <= this.x + this.width && e >= this.y && e <= this.y + this.height }, clone: function () { return new d(this.x, this.y, this.width, this.height) }, copy: function (t) { this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height }, plain: function () { return { x: this.x, y: this.y, width: this.width, height: this.height } } }, d.create = function (t) { return new d(t.x, t.y, t.width, t.height) }; var f = d; t.exports = f }, function (t, e, n) { var i = n(0); var r = n(17); var a = n(3); var o = i.normalizeCssArray; var s = /([&<>"'])/g; var l = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }; function u (t) { return t == null ? '' : (t + '').replace(s, function (t, e) { return l[e] }) } var c = ['a', 'b', 'c', 'd', 'e', 'f', 'g']; var h = function (t, e) { return '{' + t + (e == null ? '' : e) + '}' }; function d (t, e) { return '0000'.substr(0, e - (t += '').length) + t } var f = r.truncateText; e.addCommas = function (t) { return isNaN(t) ? '-' : (t = (t + '').split('.'))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, '$1,') + (t.length > 1 ? '.' + t[1] : '') }, e.toCamelCase = function (t, e) { return t = (t || '').toLowerCase().replace(/-(.)/g, function (t, e) { return e.toUpperCase() }), e && t && (t = t.charAt(0).toUpperCase() + t.slice(1)), t }, e.normalizeCssArray = o, e.encodeHTML = u, e.formatTpl = function (t, e, n) { i.isArray(e) || (e = [e]); var r = e.length; if (!r) return ''; for (var a = e[0].$vars || [], o = 0; o < a.length; o++) { var s = c[o]; t = t.replace(h(s), h(s, 0)) } for (var l = 0; l < r; l++) for (var d = 0; d < a.length; d++) { var f = e[l][a[d]]; t = t.replace(h(c[d], l), n ? u(f) : f) } return t }, e.formatTplSimple = function (t, e, n) { return i.each(e, function (e, i) { t = t.replace('{' + i + '}', n ? u(e) : e) }), t }, e.getTooltipMarker = function (t, e) { var n = (t = i.isString(t) ? { color: t, extraCssText: e } : t || {}).color; var r = t.type; var a = (e = t.extraCssText, t.renderMode || 'html'); var o = t.markerId || 'X'; return n ? a === 'html' ? r === 'subItem' ? '<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:' + u(n) + ';' + (e || '') + '"></span>' : '<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:' + u(n) + ';' + (e || '') + '"></span>' : { renderMode: a, content: '{marker' + o + '|}  ', style: { color: n } } : '' }, e.formatTime = function (t, e, n) { t !== 'week' && t !== 'month' && t !== 'quarter' && t !== 'half-year' && t !== 'year' || (t = 'MM-dd\nyyyy'); var i = a.parseDate(e); var r = n ? 'UTC' : ''; var o = i['get' + r + 'FullYear'](); var s = i['get' + r + 'Month']() + 1; var l = i['get' + r + 'Date'](); var u = i['get' + r + 'Hours'](); var c = i['get' + r + 'Minutes'](); var h = i['get' + r + 'Seconds'](); var f = i['get' + r + 'Milliseconds'](); return t = t.replace('MM', d(s, 2)).replace('M', s).replace('yyyy', o).replace('yy', o % 100).replace('dd', d(l, 2)).replace('d', l).replace('hh', d(u, 2)).replace('h', u).replace('mm', d(c, 2)).replace('m', c).replace('ss', d(h, 2)).replace('s', h).replace('SSS', d(f, 3)) }, e.capitalFirst = function (t) { return t ? t.charAt(0).toUpperCase() + t.substr(1) : t }, e.truncateText = f, e.getTextBoundingRect = function (t) { return r.getBoundingRect(t.text, t.font, t.textAlign, t.textVerticalAlign, t.textPadding, t.textLineHeight, t.rich, t.truncate) }, e.getTextRect = function (t, e, n, i, a, o, s, l) { return r.getBoundingRect(t, e, n, i, a, l, o, s) } }, function (t, e, n) { var i = n(54); var r = n(0); var a = n(45); var o = n(246); var s = n(135).prototype.getCanvasPattern; var l = Math.abs; var u = new a(!0); function c (t) { i.call(this, t), this.path = null }c.prototype = { constructor: c, type: 'path', __dirtyPath: !0, strokeContainThreshold: 5, segmentIgnoreThreshold: 0, subPixelOptimize: !1, brush: function (t, e) { var n; var i = this.style; var r = this.path || u; var a = i.hasStroke(); var o = i.hasFill(); var l = i.fill; var c = i.stroke; var h = o && !!l.colorStops; var d = a && !!c.colorStops; var f = o && !!l.image; var p = a && !!c.image; (i.bind(t, this, e), this.setTransform(t), this.__dirty) && (h && (n = n || this.getBoundingRect(), this._fillGradient = i.getGradient(t, l, n)), d && (n = n || this.getBoundingRect(), this._strokeGradient = i.getGradient(t, c, n))); h ? t.fillStyle = this._fillGradient : f && (t.fillStyle = s.call(l, t)), d ? t.strokeStyle = this._strokeGradient : p && (t.strokeStyle = s.call(c, t)); var g = i.lineDash; var v = i.lineDashOffset; var m = !!t.setLineDash; var y = this.getGlobalScale(); if (r.setScale(y[0], y[1], this.segmentIgnoreThreshold), this.__dirtyPath || g && !m && a ? (r.beginPath(t), g && !m && (r.setLineDash(g), r.setLineDashOffset(v)), this.buildPath(r, this.shape, !1), this.path && (this.__dirtyPath = !1)) : (t.beginPath(), this.path.rebuildPath(t)), o) if (i.fillOpacity != null) { var x = t.globalAlpha; t.globalAlpha = i.fillOpacity * i.opacity, r.fill(t), t.globalAlpha = x } else r.fill(t); if (g && m && (t.setLineDash(g), t.lineDashOffset = v), a) if (i.strokeOpacity != null) { x = t.globalAlpha; t.globalAlpha = i.strokeOpacity * i.opacity, r.stroke(t), t.globalAlpha = x } else r.stroke(t); g && m && t.setLineDash([]), i.text != null && (this.restoreTransform(t), this.drawRectText(t, this.getBoundingRect())) }, buildPath: function (t, e, n) {}, createPathProxy: function () { this.path = new a() }, getBoundingRect: function () { var t = this._rect; var e = this.style; var n = !t; if (n) { var i = this.path; i || (i = this.path = new a()), this.__dirtyPath && (i.beginPath(), this.buildPath(i, this.shape, !1)), t = i.getBoundingRect() } if (this._rect = t, e.hasStroke()) { var r = this._rectWithStroke || (this._rectWithStroke = t.clone()); if (this.__dirty || n) { r.copy(t); var o = e.lineWidth; var s = e.strokeNoScale ? this.getLineScale() : 1; e.hasFill() || (o = Math.max(o, this.strokeContainThreshold || 4)), s > 1e-10 && (r.width += o / s, r.height += o / s, r.x -= o / s / 2, r.y -= o / s / 2) } return r } return t }, contain: function (t, e) { var n = this.transformCoordToLocal(t, e); var i = this.getBoundingRect(); var r = this.style; if (t = n[0], e = n[1], i.contain(t, e)) { var a = this.path.data; if (r.hasStroke()) { var s = r.lineWidth; var l = r.strokeNoScale ? this.getLineScale() : 1; if (l > 1e-10 && (r.hasFill() || (s = Math.max(s, this.strokeContainThreshold)), o.containStroke(a, s / l, t, e))) return !0 } if (r.hasFill()) return o.contain(a, t, e) } return !1 }, dirty: function (t) { t == null && (t = !0), t && (this.__dirtyPath = t, this._rect = null), this.__dirty = this.__dirtyText = !0, this.__zr && this.__zr.refresh(), this.__clipTarget && this.__clipTarget.dirty() }, animateShape: function (t) { return this.animate('shape', t) }, attrKV: function (t, e) { t === 'shape' ? (this.setShape(e), this.__dirtyPath = !0, this._rect = null) : i.prototype.attrKV.call(this, t, e) }, setShape: function (t, e) { var n = this.shape; if (n) { if (r.isObject(t)) for (var i in t)t.hasOwnProperty(i) && (n[i] = t[i]); else n[t] = e; this.dirty(!0) } return this }, getLineScale: function () { var t = this.transform; return t && l(t[0] - 1) > 1e-10 && l(t[3] - 1) > 1e-10 ? Math.sqrt(l(t[0] * t[3] - t[2] * t[1])) : 1 } }, c.extend = function (t) { var e = function (e) { c.call(this, e), t.style && this.style.extendFrom(t.style, !1); var n = t.shape; if (n) { this.shape = this.shape || {}; var i = this.shape; for (var r in n)!i.hasOwnProperty(r) && n.hasOwnProperty(r) && (i[r] = n[r]) }t.init && t.init.call(this, e) }; for (var n in r.inherits(e, c), t)n !== 'style' && n !== 'shape' && (e.prototype[n] = t[n]); return e }, r.inherits(c, i); var h = c; t.exports = h }, function (t, e) { var n = typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function' ? { browser: {}, os: {}, node: !1, wxa: !0, canvasSupported: !0, svgSupported: !1, touchEventsSupported: !0, domSupported: !1 } : typeof document === 'undefined' && typeof self !== 'undefined' ? { browser: {}, os: {}, node: !1, worker: !0, canvasSupported: !0, domSupported: !1 } : typeof navigator === 'undefined' ? { browser: {}, os: {}, node: !0, worker: !1, canvasSupported: !0, svgSupported: !0, domSupported: !1 } : (function (t) { var e = {}; var n = t.match(/Firefox\/([\d.]+)/); var i = t.match(/MSIE\s([\d.]+)/) || t.match(/Trident\/.+?rv:(([\d.]+))/); var r = t.match(/Edge\/([\d.]+)/); var a = /micromessenger/i.test(t); n && (e.firefox = !0, e.version = n[1]); i && (e.ie = !0, e.version = i[1]); r && (e.edge = !0, e.version = r[1]); a && (e.weChat = !0); return { browser: e, os: {}, node: !1, canvasSupported: !!document.createElement('canvas').getContext, svgSupported: typeof SVGRect !== 'undefined', touchEventsSupported: 'ontouchstart' in window && !e.ie && !e.edge, pointerEventsSupported: 'onpointerdown' in window && (e.edge || e.ie && e.version >= 11), domSupported: typeof document !== 'undefined' } }(navigator.userAgent)); t.exports = n }, function (t, e, n) { var i = n(0); var r = n(11); var a = n(4).makeInner; var o = n(26); var s = o.enableClassExtend; var l = o.enableClassCheck; var u = n(243); var c = n(244); var h = n(245); var d = n(258); var f = i.mixin; var p = a(); function g (t, e, n) { this.parentModel = e, this.ecModel = n, this.option = t } function v (t, e, n) { for (var i = 0; i < e.length && (!e[i] || (t = t && typeof t === 'object' ? t[e[i]] : null) != null); i++);return t == null && n && (t = n.get(e)), t } function m (t, e) { var n = p(t).getParent; return n ? n.call(t, e) : t.parentModel }g.prototype = { constructor: g, init: null, mergeOption: function (t) { i.merge(this.option, t, !0) }, get: function (t, e) { return t == null ? this.option : v(this.option, this.parsePath(t), !e && m(this, t)) }, getShallow: function (t, e) { var n = this.option; var i = n == null ? n : n[t]; var r = !e && m(this, t); return i == null && r && (i = r.getShallow(t)), i }, getModel: function (t, e) { var n; return new g(t == null ? this.option : v(this.option, t = this.parsePath(t)), e = e || (n = m(this, t)) && n.getModel(t), this.ecModel) }, isEmpty: function () { return this.option == null }, restoreData: function () {}, clone: function () { return new (0, this.constructor)(i.clone(this.option)) }, setReadOnly: function (t) {}, parsePath: function (t) { return typeof t === 'string' && (t = t.split('.')), t }, customizeGetParent: function (t) { p(this).getParent = t }, isAnimationEnabled: function () { if (!r.node) { if (this.option.animation != null) return !!this.option.animation; if (this.parentModel) return this.parentModel.isAnimationEnabled() } } }, s(g), l(g), f(g, u), f(g, c), f(g, h), f(g, d); var y = g; t.exports = y }, function (t, e, n) { var i = n(0); var r = n(12); var a = n(55); var o = n(26); var s = o.enableClassManagement; var l = o.parseClassType; var u = n(4).makeInner; var c = n(6); var h = n(259); var d = u(); var f = r.extend({ type: 'component', id: '', name: '', mainType: '', subType: '', componentIndex: 0, defaultOption: null, ecModel: null, dependentModels: [], uid: null, layoutMode: null, $constructor: function (t, e, n, i) { r.call(this, t, e, n, i), this.uid = a.getUID('ec_cpt_model') }, init: function (t, e, n, i) { this.mergeDefaultAndTheme(t, n) }, mergeDefaultAndTheme: function (t, e) { var n = this.layoutMode; var r = n ? c.getLayoutParams(t) : {}; var a = e.getTheme(); i.merge(t, a.get(this.mainType)), i.merge(t, this.getDefaultOption()), n && c.mergeLayoutParam(t, r, n) }, mergeOption: function (t, e) { i.merge(this.option, t, !0); var n = this.layoutMode; n && c.mergeLayoutParam(this.option, t, n) }, optionUpdated: function (t, e) {}, getDefaultOption: function () { var t = d(this); if (!t.defaultOption) { for (var e = [], n = this.constructor; n;) { var r = n.prototype.defaultOption; r && e.push(r), n = n.superClass } for (var a = {}, o = e.length - 1; o >= 0; o--)a = i.merge(a, e[o], !0); t.defaultOption = a } return t.defaultOption }, getReferringComponents: function (t) { return this.ecModel.queryComponents({ mainType: t, index: this.get(t + 'Index', !0), id: this.get(t + 'Id', !0) }) } }); s(f, { registerWhenExtend: !0 }), a.enableSubTypeDefaulter(f), a.enableTopologicalTravel(f, function (t) { var e = []; i.each(f.getClassesByMainType(t), function (t) { e = e.concat(t.prototype.dependencies || []) }), e = i.map(e, function (t) { return l(t).main }), t !== 'dataset' && i.indexOf(e, 'dataset') <= 0 && e.unshift('dataset'); return e }), i.mixin(f, h); var p = f; t.exports = p }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(11); var a = n(9); var o = a.formatTime; var s = a.encodeHTML; var l = a.addCommas; var u = a.getTooltipMarker; var c = n(4); var h = n(13); var d = n(151); var f = n(94); var p = n(6); var g = p.getLayoutParams; var v = p.mergeLayoutParam; var m = n(95).createTask; var y = n(73); var x = y.prepareSource; var _ = y.getSource; var b = n(36).retrieveRawValue; var w = c.makeInner(); var S = h.extend({ type: 'series.__base__', seriesIndex: 0, coordinateSystem: null, defaultOption: null, legendDataProvider: null, visualColorAccessPath: 'itemStyle.color', visualBorderColorAccessPath: 'itemStyle.borderColor', layoutMode: null, init: function (t, e, n, i) { this.seriesIndex = this.componentIndex, this.dataTask = m({ count: I, reset: A }), this.dataTask.context = { model: this }, this.mergeDefaultAndTheme(t, n), x(this); var r = this.getInitialData(t, n); C(r, this), this.dataTask.context.data = r, w(this).dataBeforeProcessed = r, M(this) }, mergeDefaultAndTheme: function (t, e) { var n = this.layoutMode; var r = n ? g(t) : {}; var a = this.subType; h.hasClass(a) && (a += 'Series'), i.merge(t, e.getTheme().get(this.subType)), i.merge(t, this.getDefaultOption()), c.defaultEmphasis(t, 'label', ['show']), this.fillDataTextStyle(t.data), n && v(t, r, n) }, mergeOption: function (t, e) { t = i.merge(this.option, t, !0), this.fillDataTextStyle(t.data); var n = this.layoutMode; n && v(this.option, t, n), x(this); var r = this.getInitialData(t, e); C(r, this), this.dataTask.dirty(), this.dataTask.context.data = r, w(this).dataBeforeProcessed = r, M(this) }, fillDataTextStyle: function (t) { if (t && !i.isTypedArray(t)) for (var e = ['show'], n = 0; n < t.length; n++)t[n] && t[n].label && c.defaultEmphasis(t[n], 'label', e) }, getInitialData: function () {}, appendData: function (t) { this.getRawData().appendData(t.data) }, getData: function (t) { var e = L(this); if (e) { var n = e.context.data; return t == null ? n : n.getLinkedData(t) } return w(this).data }, setData: function (t) { var e = L(this); if (e) { var n = e.context; n.data !== t && e.modifyOutputEnd && e.setOutputEnd(t.count()), n.outputData = t, e !== this.dataTask && (n.data = t) }w(this).data = t }, getSource: function () { return _(this) }, getRawData: function () { return w(this).dataBeforeProcessed }, getBaseAxis: function () { var t = this.coordinateSystem; return t && t.getBaseAxis && t.getBaseAxis() }, formatTooltip: function (t, e, n, r) { var a = this; var h = (r = r || 'html') === 'html' ? '<br/>' : '\n'; var d = r === 'richText'; var f = {}; var p = 0; function g (t) { return { renderMode: r, content: s(l(t)), style: f } } var v = this.getData(); var m = v.mapDimension('defaultedTooltip', !0); var y = m.length; var x = this.getRawValue(t); var _ = i.isArray(x); var w = v.getItemVisual(t, 'color'); i.isObject(w) && w.colorStops && (w = (w.colorStops[0] || {}).color), w = w || 'transparent'; var S = (y > 1 || _ && !y ? (function (n) { var c = i.reduce(n, function (t, e, n) { var i = v.getDimensionInfo(n); return t | (i && !1 !== i.tooltip && i.displayName != null) }, 0); var h = []; function g (t, n) { var i = v.getDimensionInfo(n); if (i && !1 !== i.otherDims.tooltip) { var g = i.type; var m = 'sub' + a.seriesIndex + 'at' + p; var y = u({ color: w, type: 'subItem', renderMode: r, markerId: m }); var x = typeof y === 'string' ? y : y.content; var _ = (c ? x + s(i.displayName || '-') + ': ' : '') + s(g === 'ordinal' ? t + '' : g === 'time' ? e ? '' : o('yyyy/MM/dd hh:mm:ss', t) : l(t)); _ && h.push(_), d && (f[m] = w, ++p) } }m.length ? i.each(m, function (e) { g(b(v, t, e), e) }) : i.each(n, g); var y = c ? d ? '\n' : '<br/>' : ''; var x = y + h.join(y || ', '); return { renderMode: r, content: x, style: f } }(x)) : g(y ? b(v, t, m[0]) : _ ? x[0] : x)).content; var M = a.seriesIndex + 'at' + p; var I = u({ color: w, type: 'item', renderMode: r, markerId: M }); f[M] = w, ++p; var A = v.getName(t); var T = this.name; c.isNameSpecified(this) || (T = ''), T = T ? s(T) + (e ? ': ' : h) : ''; var C = typeof I === 'string' ? I : I.content; return { html: e ? C + T + S : T + C + (A ? s(A) + ': ' + S : S), markers: f } }, isAnimationEnabled: function () { if (r.node) return !1; var t = this.getShallow('animation'); return t && this.getData().count() > this.getShallow('animationThreshold') && (t = !1), t }, restoreData: function () { this.dataTask.dirty() }, getColorFromPalette: function (t, e, n) { var i = this.ecModel; var r = d.getColorFromPalette.call(this, t, e, n); return r || (r = i.getColorFromPalette(t, e, n)), r }, coordDimToDataDim: function (t) { return this.getRawData().mapDimension(t, !0) }, getProgressive: function () { return this.get('progressive') }, getProgressiveThreshold: function () { return this.get('progressiveThreshold') }, getAxisTooltipData: null, getTooltipPosition: null, pipeTask: null, preventIncremental: null, pipelineContext: null }); function M (t) { var e = t.name; c.isNameSpecified(t) || (t.name = (function (t) { var e = t.getRawData(); var n = e.mapDimension('seriesName', !0); var r = []; return i.each(n, function (t) { var n = e.getDimensionInfo(t); n.displayName && r.push(n.displayName) }), r.join(' ') }(t)) || e) } function I (t) { return t.model.getRawData().count() } function A (t) { var e = t.model; return e.setData(e.getRawData().cloneShallow()), T } function T (t, e) { t.end > e.outputData.count() && e.model.getRawData().cloneShallow(e.outputData) } function C (t, e) { i.each(t.CHANGABLE_METHODS, function (n) { t.wrapMethod(n, i.curry(D, e)) }) } function D (t) { var e = L(t); e && e.setOutputEnd(this.count()) } function L (t) { var e = (t.ecModel || {}).scheduler; var n = e && e.getPipeline(t.uid); if (n) { var i = n.currentTask; if (i) { var r = i.agentStubMap; r && (i = r.get(t.uid)) } return i } }i.mixin(S, f), i.mixin(S, d); var P = S; t.exports = P }, function (t, e) { var n = typeof Float32Array === 'undefined' ? Array : Float32Array; function i () { var t = new n(6); return r(t), t } function r (t) { return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 1, t[4] = 0, t[5] = 0, t } function a (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t }e.create = i, e.identity = r, e.copy = a, e.mul = function (t, e, n) { var i = e[0] * n[0] + e[2] * n[1]; var r = e[1] * n[0] + e[3] * n[1]; var a = e[0] * n[2] + e[2] * n[3]; var o = e[1] * n[2] + e[3] * n[3]; var s = e[0] * n[4] + e[2] * n[5] + e[4]; var l = e[1] * n[4] + e[3] * n[5] + e[5]; return t[0] = i, t[1] = r, t[2] = a, t[3] = o, t[4] = s, t[5] = l, t }, e.translate = function (t, e, n) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4] + n[0], t[5] = e[5] + n[1], t }, e.rotate = function (t, e, n) { var i = e[0]; var r = e[2]; var a = e[4]; var o = e[1]; var s = e[3]; var l = e[5]; var u = Math.sin(n); var c = Math.cos(n); return t[0] = i * c + o * u, t[1] = -i * u + o * c, t[2] = r * c + s * u, t[3] = -r * u + c * s, t[4] = c * a + u * l, t[5] = c * l - u * a, t }, e.scale = function (t, e, n) { var i = n[0]; var r = n[1]; return t[0] = e[0] * i, t[1] = e[1] * r, t[2] = e[2] * i, t[3] = e[3] * r, t[4] = e[4] * i, t[5] = e[5] * r, t }, e.invert = function (t, e) { var n = e[0]; var i = e[2]; var r = e[4]; var a = e[1]; var o = e[3]; var s = e[5]; var l = n * o - a * i; return l ? (l = 1 / l, t[0] = o * l, t[1] = -a * l, t[2] = -i * l, t[3] = n * l, t[4] = (i * s - o * r) * l, t[5] = (a * r - n * s) * l, t) : null }, e.clone = function (t) { var e = i(); return a(e, t), e } }, function (t, e, n) { 'use strict'; var i = n(121); var r = n(215); var a = Object.prototype.toString; function o (t) { return a.call(t) === '[object Array]' } function s (t) { return t !== null && typeof t === 'object' } function l (t) { return a.call(t) === '[object Function]' } function u (t, e) { if (t != null) if (typeof t !== 'object' && (t = [t]), o(t)) for (var n = 0, i = t.length; n < i; n++)e.call(null, t[n], n, t); else for (var r in t)Object.prototype.hasOwnProperty.call(t, r) && e.call(null, t[r], r, t) }t.exports = { isArray: o, isArrayBuffer: function (t) { return a.call(t) === '[object ArrayBuffer]' }, isBuffer: r, isFormData: function (t) { return typeof FormData !== 'undefined' && t instanceof FormData }, isArrayBufferView: function (t) { return typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView ? ArrayBuffer.isView(t) : t && t.buffer && t.buffer instanceof ArrayBuffer }, isString: function (t) { return typeof t === 'string' }, isNumber: function (t) { return typeof t === 'number' }, isObject: s, isUndefined: function (t) { return void 0 === t }, isDate: function (t) { return a.call(t) === '[object Date]' }, isFile: function (t) { return a.call(t) === '[object File]' }, isBlob: function (t) { return a.call(t) === '[object Blob]' }, isFunction: l, isStream: function (t) { return s(t) && l(t.pipe) }, isURLSearchParams: function (t) { return typeof URLSearchParams !== 'undefined' && t instanceof URLSearchParams }, isStandardBrowserEnv: function () { return (typeof navigator === 'undefined' || navigator.product !== 'ReactNative' && navigator.product !== 'NativeScript' && navigator.product !== 'NS') && (typeof window !== 'undefined' && typeof document !== 'undefined') }, forEach: u, merge: function t () { var e = {}; function n (n, i) { typeof e[i] === 'object' && typeof n === 'object' ? e[i] = t(e[i], n) : e[i] = n } for (var i = 0, r = arguments.length; i < r; i++)u(arguments[i], n); return e }, deepMerge: function t () { var e = {}; function n (n, i) { typeof e[i] === 'object' && typeof n === 'object' ? e[i] = t(e[i], n) : e[i] = typeof n === 'object' ? t({}, n) : n } for (var i = 0, r = arguments.length; i < r; i++)u(arguments[i], n); return e }, extend: function (t, e, n) { return u(e, function (e, r) { t[r] = n && typeof e === 'function' ? i(e, n) : e }), t }, trim: function (t) { return t.replace(/^\s*/, '').replace(/\s*$/, '') } } }, function (t, e, n) { var i = n(8); var r = n(89); var a = n(0); var o = a.getContext; var s = a.extend; var l = a.retrieve2; var u = a.retrieve3; var c = a.trim; var h = {}; var d = 0; var f = 5e3; var p = /\{([a-zA-Z0-9_]+)\|([^}]*)\}/g; var g = '12px sans-serif'; var v = {}; function m (t, e) { var n = t + ':' + (e = e || g); if (h[n]) return h[n]; for (var i = (t + '').split('\n'), r = 0, a = 0, o = i.length; a < o; a++)r = Math.max(A(i[a], e).width, r); return d > f && (d = 0, h = {}), d++, h[n] = r, r } function y (t, e, n) { return n === 'right' ? t -= e : n === 'center' && (t -= e / 2), t } function x (t, e, n) { return n === 'middle' ? t -= e / 2 : n === 'bottom' && (t -= e), t } function _ (t, e, n) { var i = e.textPosition; var r = e.textDistance; var a = n.x; var o = n.y; r = r || 0; var s = n.height; var l = n.width; var u = s / 2; var c = 'left'; var h = 'top'; switch (i) { case 'left':a -= r, o += u, c = 'right', h = 'middle'; break; case 'right':a += r + l, o += u, h = 'middle'; break; case 'top':a += l / 2, o -= r, c = 'center', h = 'bottom'; break; case 'bottom':a += l / 2, o += s + r, c = 'center'; break; case 'inside':a += l / 2, o += u, c = 'center', h = 'middle'; break; case 'insideLeft':a += r, o += u, h = 'middle'; break; case 'insideRight':a += l - r, o += u, c = 'right', h = 'middle'; break; case 'insideTop':a += l / 2, o += r, c = 'center'; break; case 'insideBottom':a += l / 2, o += s - r, c = 'center', h = 'bottom'; break; case 'insideTopLeft':a += r, o += r; break; case 'insideTopRight':a += l - r, o += r, c = 'right'; break; case 'insideBottomLeft':a += r, o += s - r, h = 'bottom'; break; case 'insideBottomRight':a += l - r, o += s - r, c = 'right', h = 'bottom' } return (t = t || {}).x = a, t.y = o, t.textAlign = c, t.textVerticalAlign = h, t } function b (t, e, n, i, r) { if (!e) return ''; var a = (t + '').split('\n'); r = w(e, n, i, r); for (var o = 0, s = a.length; o < s; o++)a[o] = S(a[o], r); return a.join('\n') } function w (t, e, n, i) { (i = s({}, i)).font = e; n = l(n, '...'); i.maxIterations = l(i.maxIterations, 2); var r = i.minChar = l(i.minChar, 0); i.cnCharWidth = m('国', e); var a = i.ascCharWidth = m('a', e); i.placeholder = l(i.placeholder, ''); for (var o = t = Math.max(0, t - 1), u = 0; u < r && o >= a; u++)o -= a; var c = m(n, e); return c > o && (n = '', c = 0), o = t - c, i.ellipsis = n, i.ellipsisWidth = c, i.contentWidth = o, i.containerWidth = t, i } function S (t, e) { var n = e.containerWidth; var i = e.font; var r = e.contentWidth; if (!n) return ''; var a = m(t, i); if (a <= n) return t; for (var o = 0; ;o++) { if (a <= r || o >= e.maxIterations) { t += e.ellipsis; break } var s = o === 0 ? M(t, r, e.ascCharWidth, e.cnCharWidth) : a > 0 ? Math.floor(t.length * r / a) : 0; a = m(t = t.substr(0, s), i) } return t === '' && (t = e.placeholder), t } function M (t, e, n, i) { for (var r = 0, a = 0, o = t.length; a < o && r < e; a++) { var s = t.charCodeAt(a); r += s >= 0 && s <= 127 ? n : i } return a } function I (t) { return m('国', t) } function A (t, e) { return v.measureText(t, e) } function T (t, e, n, i, r) { t != null && (t += ''); var a = l(i, I(e)); var o = t ? t.split('\n') : []; var s = o.length * a; var u = s; var c = !0; if (n && (u += n[0] + n[2]), t && r) { c = !1; var h = r.outerHeight; var d = r.outerWidth; if (h != null && u > h)t = '', o = []; else if (d != null) for (var f = w(d - (n ? n[1] + n[3] : 0), e, r.ellipsis, { minChar: r.minChar, placeholder: r.placeholder }), p = 0, g = o.length; p < g; p++)o[p] = S(o[p], f) } return { lines: o, height: s, outerHeight: u, lineHeight: a, canCacheByTextString: c } } function C (t, e) { var n = { lines: [], width: 0, height: 0 }; if (t != null && (t += ''), !t) return n; for (var i, a = p.lastIndex = 0; (i = p.exec(t)) != null;) { var o = i.index; o > a && D(n, t.substring(a, o)), D(n, i[2], i[1]), a = p.lastIndex }a < t.length && D(n, t.substring(a, t.length)); var s = n.lines; var c = 0; var h = 0; var d = []; var f = e.textPadding; var g = e.truncate; var v = g && g.outerWidth; var y = g && g.outerHeight; f && (v != null && (v -= f[1] + f[3]), y != null && (y -= f[0] + f[2])); for (var x = 0; x < s.length; x++) { for (var _ = s[x], w = 0, S = 0, M = 0; M < _.tokens.length; M++) { var A = (z = _.tokens[M]).styleName && e.rich[z.styleName] || {}; var T = z.textPadding = A.textPadding; var C = z.font = A.font || e.font; var L = z.textHeight = l(A.textHeight, I(C)); if (T && (L += T[0] + T[2]), z.height = L, z.lineHeight = u(A.textLineHeight, e.textLineHeight, L), z.textAlign = A && A.textAlign || e.textAlign, z.textVerticalAlign = A && A.textVerticalAlign || 'middle', y != null && c + z.lineHeight > y) return { lines: [], width: 0, height: 0 }; z.textWidth = m(z.text, C); var P = A.textWidth; var k = P == null || P === 'auto'; if (typeof P === 'string' && P.charAt(P.length - 1) === '%')z.percentWidth = P, d.push(z), P = 0; else { if (k) { P = z.textWidth; var O = A.textBackgroundColor; var E = O && O.image; E && (E = r.findExistImage(E), r.isImageReady(E) && (P = Math.max(P, E.width * L / E.height))) } var R = T ? T[1] + T[3] : 0; P += R; var N = v != null ? v - S : null; N != null && N < P && (!k || N < R ? (z.text = '', z.textWidth = P = 0) : (z.text = b(z.text, N - R, C, g.ellipsis, { minChar: g.minChar }), z.textWidth = m(z.text, C), P = z.textWidth + R)) }S += z.width = P, A && (w = Math.max(w, z.lineHeight)) }_.width = S, _.lineHeight = w, c += w, h = Math.max(h, S) }n.outerWidth = n.width = l(e.textWidth, h), n.outerHeight = n.height = l(e.textHeight, c), f && (n.outerWidth += f[1] + f[3], n.outerHeight += f[0] + f[2]); for (x = 0; x < d.length; x++) { var z; var B = (z = d[x]).percentWidth; z.width = parseInt(B, 10) / 100 * h } return n } function D (t, e, n) { for (var i = e === '', r = e.split('\n'), a = t.lines, o = 0; o < r.length; o++) { var s = r[o]; var l = { styleName: n, text: s, isLineHolder: !s && !i }; if (o)a.push({ tokens: [l] }); else { var u = (a[a.length - 1] || (a[0] = { tokens: [] })).tokens; var c = u.length; c === 1 && u[0].isLineHolder ? u[0] = l : (s || !c || i) && u.push(l) } } }v.measureText = function (t, e) { var n = o(); return n.font = e || g, n.measureText(t) }, e.DEFAULT_FONT = g, e.$override = function (t, e) { v[t] = e }, e.getWidth = m, e.getBoundingRect = function (t, e, n, r, a, o, s, l) { return s ? (function (t, e, n, r, a, o, s, l) { var u = C(t, { rich: s, truncate: l, font: e, textAlign: n, textPadding: a, textLineHeight: o }); var c = u.outerWidth; var h = u.outerHeight; var d = y(0, c, n); var f = x(0, h, r); return new i(d, f, c, h) }(t, e, n, r, a, o, s, l)) : (function (t, e, n, r, a, o, s) { var l = T(t, e, a, o, s); var u = m(t, e); a && (u += a[1] + a[3]); var c = l.outerHeight; var h = y(0, u, n); var d = x(0, c, r); var f = new i(h, d, u, c); return f.lineHeight = l.lineHeight, f }(t, e, n, r, a, o, l)) }, e.adjustTextX = y, e.adjustTextY = x, e.calculateTextPosition = _, e.adjustTextPositionOnRect = function (t, e, n) { return _({}, { textPosition: t, textDistance: n }, e) }, e.truncateText = b, e.getLineHeight = I, e.measureText = A, e.parsePlainText = T, e.parseRichText = C, e.makeFont = function (t) { var e = (t.fontSize || t.fontFamily) && [t.fontStyle, t.fontWeight, (t.fontSize || 12) + 'px', t.fontFamily || 'sans-serif'].join(' '); return e && c(e) || t.textFont || t.font } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(12); var a = n(37); var o = n(56); var s = n(36); var l = s.defaultDimValueGetters; var u = s.DefaultDataProvider; var c = n(58).summarizeDimensions; var h = i.isObject; var d = -1; var f = 'e\0\0'; var p = { float: typeof Float64Array === 'undefined' ? Array : Float64Array, int: typeof Int32Array === 'undefined' ? Array : Int32Array, ordinal: Array, number: Array, time: Array }; var g = typeof Uint32Array === 'undefined' ? Array : Uint32Array; var v = typeof Int32Array === 'undefined' ? Array : Int32Array; var m = typeof Uint16Array === 'undefined' ? Array : Uint16Array; function y (t) { return t._rawCount > 65535 ? g : m } var x = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_rawData', '_chunkSize', '_chunkCount', '_dimValueGetter', '_count', '_rawCount', '_nameDimIdx', '_idDimIdx']; var _ = ['_extent', '_approximateExtent', '_rawExtent']; function b (t, e) { i.each(x.concat(e.__wrappedMethods || []), function (n) { e.hasOwnProperty(n) && (t[n] = e[n]) }), t.__wrappedMethods = e.__wrappedMethods, i.each(_, function (n) { t[n] = i.clone(e[n]) }), t._calculationInfo = i.extend(e._calculationInfo) } var w = function (t, e) { t = t || ['x', 'y']; for (var n = {}, r = [], a = {}, o = 0; o < t.length; o++) { var s = t[o]; i.isString(s) && (s = { name: s }); var l = s.name; s.type = s.type || 'float', s.coordDim || (s.coordDim = l, s.coordDimIndex = 0), s.otherDims = s.otherDims || {}, r.push(l), n[l] = s, s.index = o, s.createInvertedIndices && (a[l] = []) } this.dimensions = r, this._dimensionInfos = n, this.hostModel = e, this.dataType, this._indices = null, this._count = 0, this._rawCount = 0, this._storage = {}, this._nameList = [], this._idList = [], this._optionModels = [], this._visual = {}, this._layout = {}, this._itemVisuals = [], this.hasItemVisual = {}, this._itemLayouts = [], this._graphicEls = [], this._chunkSize = 1e5, this._chunkCount = 0, this._rawData, this._rawExtent = {}, this._extent = {}, this._approximateExtent = {}, this._dimensionsSummary = c(this), this._invertedIndicesMap = a, this._calculationInfo = {}, this.userOutput = this._dimensionsSummary.userOutput }; var S = w.prototype; function M (t, e, n, i, r) { var a = p[e.type]; var o = i - 1; var s = e.name; var l = t[s][o]; if (l && l.length < n) { for (var u = new a(Math.min(r - o * n, n)), c = 0; c < l.length; c++)u[c] = l[c]; t[s][o] = u } for (var h = i * n; h < r; h += n)t[s].push(new a(Math.min(r - h, n))) } function I (t) { var e = t._invertedIndicesMap; i.each(e, function (n, i) { var r = t._dimensionInfos[i].ordinalMeta; if (r) { n = e[i] = new v(r.categories.length); for (var a = 0; a < n.length; a++)n[a] = d; for (a = 0; a < t._count; a++)n[t.get(i, a)] = a } }) } function A (t, e, n) { var i; if (e != null) { var r = t._chunkSize; var a = Math.floor(n / r); var o = n % r; var s = t.dimensions[e]; var l = t._storage[s][a]; if (l) { i = l[o]; var u = t._dimensionInfos[s].ordinalMeta; u && u.categories.length && (i = u.categories[i]) } } return i } function T (t) { return t } function C (t) { return t < this._count && t >= 0 ? this._indices[t] : -1 } function D (t, e) { var n = t._idList[e]; return n == null && (n = A(t, t._idDimIdx, e)), n == null && (n = f + e), n } function L (t) { return i.isArray(t) || (t = [t]), t } function P (t, e) { var n = t.dimensions; var r = new w(i.map(n, t.getDimensionInfo, t), t.hostModel); b(r, t); for (var a = r._storage = {}, o = t._storage, s = 0; s < n.length; s++) { var l = n[s]; o[l] && (i.indexOf(e, l) >= 0 ? (a[l] = k(o[l]), r._rawExtent[l] = O(), r._extent[l] = null) : a[l] = o[l]) } return r } function k (t) { for (var e, n, i = new Array(t.length), r = 0; r < t.length; r++)i[r] = (e = t[r], n = void 0, (n = e.constructor) === Array ? e.slice() : new n(e)); return i } function O () { return [1 / 0, -1 / 0] }S.type = 'list', S.hasItemOption = !0, S.getDimension = function (t) { return typeof t !== 'number' && (isNaN(t) || this._dimensionInfos.hasOwnProperty(t)) || (t = this.dimensions[t]), t }, S.getDimensionInfo = function (t) { return this._dimensionInfos[this.getDimension(t)] }, S.getDimensionsOnCoord = function () { return this._dimensionsSummary.dataDimsOnCoord.slice() }, S.mapDimension = function (t, e) { var n = this._dimensionsSummary; if (e == null) return n.encodeFirstDimNotExtra[t]; var i = n.encode[t]; return !0 === e ? (i || []).slice() : i && i[e] }, S.initData = function (t, e, n) { (o.isInstance(t) || i.isArrayLike(t)) && (t = new u(t, this.dimensions.length)), this._rawData = t, this._storage = {}, this._indices = null, this._nameList = e || [], this._idList = [], this._nameRepeatCount = {}, n || (this.hasItemOption = !1), this.defaultDimValueGetter = l[this._rawData.getSource().sourceFormat], this._dimValueGetter = n = n || this.defaultDimValueGetter, this._dimValueGetterArrayRows = l.arrayRows, this._rawExtent = {}, this._initDataFromProvider(0, t.count()), t.pure && (this.hasItemOption = !1) }, S.getProvider = function () { return this._rawData }, S.appendData = function (t) { var e = this._rawData; var n = this.count(); e.appendData(t); var i = e.count(); e.persistent || (i += n), this._initDataFromProvider(n, i) }, S.appendValues = function (t, e) { for (var n = this._chunkSize, i = this._storage, r = this.dimensions, a = r.length, o = this._rawExtent, s = this.count(), l = s + Math.max(t.length, e ? e.length : 0), u = this._chunkCount, c = 0; c < a; c++) { o[m = r[c]] || (o[m] = O()), i[m] || (i[m] = []), M(i, this._dimensionInfos[m], n, u, l), this._chunkCount = i[m].length } for (var h = new Array(a), d = s; d < l; d++) { for (var f = d - s, p = Math.floor(d / n), g = d % n, v = 0; v < a; v++) { var m = r[v]; var y = this._dimValueGetterArrayRows(t[f] || h, m, f, v); i[m][p][g] = y; var x = o[m]; y < x[0] && (x[0] = y), y > x[1] && (x[1] = y) }e && (this._nameList[d] = e[f]) } this._rawCount = this._count = l, this._extent = {}, I(this) }, S._initDataFromProvider = function (t, e) { if (!(t >= e)) { for (var n, i = this._chunkSize, r = this._rawData, a = this._storage, o = this.dimensions, s = o.length, l = this._dimensionInfos, u = this._nameList, c = this._idList, h = this._rawExtent, d = this._nameRepeatCount = {}, f = this._chunkCount, p = 0; p < s; p++) { h[b = o[p]] || (h[b] = O()); var g = l[b]; g.otherDims.itemName === 0 && (n = this._nameDimIdx = p), g.otherDims.itemId === 0 && (this._idDimIdx = p), a[b] || (a[b] = []), M(a, g, i, f, e), this._chunkCount = a[b].length } for (var v = new Array(s), m = t; m < e; m++) { v = r.getItem(m, v); for (var y = Math.floor(m / i), x = m % i, _ = 0; _ < s; _++) { var b; var w = a[b = o[_]][y]; var S = this._dimValueGetter(v, b, m, _); w[x] = S; var A = h[b]; S < A[0] && (A[0] = S), S > A[1] && (A[1] = S) } if (!r.pure) { var T = u[m]; if (v && T == null) if (v.name != null)u[m] = T = v.name; else if (n != null) { var C = o[n]; var D = a[C][y]; if (D) { T = D[x]; var L = l[C].ordinalMeta; L && L.categories.length && (T = L.categories[T]) } } var P = v == null ? null : v.id; P == null && T != null && (d[T] = d[T] || 0, P = T, d[T] > 0 && (P += '__ec__' + d[T]), d[T]++), P != null && (c[m] = P) } }!r.persistent && r.clean && r.clean(), this._rawCount = this._count = e, this._extent = {}, I(this) } }, S.count = function () { return this._count }, S.getIndices = function () { var t = this._indices; if (t) { var e = t.constructor; var n = this._count; if (e === Array) { r = new e(n); for (var i = 0; i < n; i++)r[i] = t[i] } else r = new e(t.buffer, 0, n) } else { var r = new (e = y(this))(this.count()); for (i = 0; i < r.length; i++)r[i] = i } return r }, S.get = function (t, e) { if (!(e >= 0 && e < this._count)) return NaN; var n = this._storage; if (!n[t]) return NaN; e = this.getRawIndex(e); var i = Math.floor(e / this._chunkSize); var r = e % this._chunkSize; return n[t][i][r] }, S.getByRawIndex = function (t, e) { if (!(e >= 0 && e < this._rawCount)) return NaN; var n = this._storage[t]; if (!n) return NaN; var i = Math.floor(e / this._chunkSize); var r = e % this._chunkSize; return n[i][r] }, S._getFast = function (t, e) { var n = Math.floor(e / this._chunkSize); var i = e % this._chunkSize; return this._storage[t][n][i] }, S.getValues = function (t, e) { var n = []; i.isArray(t) || (e = t, t = this.dimensions); for (var r = 0, a = t.length; r < a; r++)n.push(this.get(t[r], e)); return n }, S.hasValue = function (t) { for (var e = this._dimensionsSummary.dataDimsOnCoord, n = 0, i = e.length; n < i; n++) if (isNaN(this.get(e[n], t))) return !1; return !0 }, S.getDataExtent = function (t) { t = this.getDimension(t); var e = this._storage[t]; var n = O(); if (!e) return n; var i; var r = this.count(); if (!this._indices) return this._rawExtent[t].slice(); if (i = this._extent[t]) return i.slice(); for (var a = (i = n)[0], o = i[1], s = 0; s < r; s++) { var l = this._getFast(t, this.getRawIndex(s)); l < a && (a = l), l > o && (o = l) } return i = [a, o], this._extent[t] = i, i }, S.getApproximateExtent = function (t) { return t = this.getDimension(t), this._approximateExtent[t] || this.getDataExtent(t) }, S.setApproximateExtent = function (t, e) { e = this.getDimension(e), this._approximateExtent[e] = t.slice() }, S.getCalculationInfo = function (t) { return this._calculationInfo[t] }, S.setCalculationInfo = function (t, e) { h(t) ? i.extend(this._calculationInfo, t) : this._calculationInfo[t] = e }, S.getSum = function (t) { var e = 0; if (this._storage[t]) for (var n = 0, i = this.count(); n < i; n++) { var r = this.get(t, n); isNaN(r) || (e += r) } return e }, S.getMedian = function (t) { var e = []; this.each(t, function (t, n) { isNaN(t) || e.push(t) }); var n = [].concat(e).sort(function (t, e) { return t - e }); var i = this.count(); return i === 0 ? 0 : i % 2 == 1 ? n[(i - 1) / 2] : (n[i / 2] + n[i / 2 - 1]) / 2 }, S.rawIndexOf = function (t, e) { var n = (t && this._invertedIndicesMap[t])[e]; return n == null || isNaN(n) ? d : n }, S.indexOfName = function (t) { for (var e = 0, n = this.count(); e < n; e++) if (this.getName(e) === t) return e; return -1 }, S.indexOfRawIndex = function (t) { if (t >= this._rawCount || t < 0) return -1; if (!this._indices) return t; var e = this._indices; var n = e[t]; if (n != null && n < this._count && n === t) return t; for (var i = 0, r = this._count - 1; i <= r;) { var a = (i + r) / 2 | 0; if (e[a] < t)i = a + 1; else { if (!(e[a] > t)) return a; r = a - 1 } } return -1 }, S.indicesOfNearest = function (t, e, n) { var i = []; if (!this._storage[t]) return i; n == null && (n = 1 / 0); for (var r = Number.MAX_VALUE, a = -1, o = 0, s = this.count(); o < s; o++) { var l = e - this.get(t, o); var u = Math.abs(l); l <= n && u <= r && ((u < r || l >= 0 && a < 0) && (r = u, a = l, i.length = 0), i.push(o)) } return i }, S.getRawIndex = T, S.getRawDataItem = function (t) { if (this._rawData.persistent) return this._rawData.getItem(this.getRawIndex(t)); for (var e = [], n = 0; n < this.dimensions.length; n++) { var i = this.dimensions[n]; e.push(this.get(i, t)) } return e }, S.getName = function (t) { var e = this.getRawIndex(t); return this._nameList[e] || A(this, this._nameDimIdx, e) || '' }, S.getId = function (t) { return D(this, this.getRawIndex(t)) }, S.each = function (t, e, n, r) { 'use strict'; if (this._count) { typeof t === 'function' && (r = n, n = e, e = t, t = []), n = n || r || this; for (var a = (t = i.map(L(t), this.getDimension, this)).length, o = 0; o < this.count(); o++) switch (a) { case 0:e.call(n, o); break; case 1:e.call(n, this.get(t[0], o), o); break; case 2:e.call(n, this.get(t[0], o), this.get(t[1], o), o); break; default:for (var s = 0, l = []; s < a; s++)l[s] = this.get(t[s], o); l[s] = o, e.apply(n, l) } } }, S.filterSelf = function (t, e, n, r) { 'use strict'; if (this._count) { typeof t === 'function' && (r = n, n = e, e = t, t = []), n = n || r || this, t = i.map(L(t), this.getDimension, this); for (var a = this.count(), o = new (y(this))(a), s = [], l = t.length, u = 0, c = t[0], h = 0; h < a; h++) { var d; var f = this.getRawIndex(h); if (l === 0)d = e.call(n, h); else if (l === 1) { var p = this._getFast(c, f); d = e.call(n, p, h) } else { for (var g = 0; g < l; g++)s[g] = this._getFast(c, f); s[g] = h, d = e.apply(n, s) }d && (o[u++] = f) } return u < a && (this._indices = o), this._count = u, this._extent = {}, this.getRawIndex = this._indices ? C : T, this } }, S.selectRange = function (t) { 'use strict'; if (this._count) { var e = []; for (var n in t)t.hasOwnProperty(n) && e.push(n); var i = e.length; if (i) { var r = this.count(); var a = new (y(this))(r); var o = 0; var s = e[0]; var l = t[s][0]; var u = t[s][1]; var c = !1; if (!this._indices) { var h = 0; if (i === 1) { for (var d = this._storage[e[0]], f = 0; f < this._chunkCount; f++) for (var p = d[f], g = Math.min(this._count - f * this._chunkSize, this._chunkSize), v = 0; v < g; v++) { ((w = p[v]) >= l && w <= u || isNaN(w)) && (a[o++] = h), h++ }c = !0 } else if (i === 2) { d = this._storage[s]; var m = this._storage[e[1]]; var x = t[e[1]][0]; var _ = t[e[1]][1]; for (f = 0; f < this._chunkCount; f++) { p = d[f]; var b = m[f]; for (g = Math.min(this._count - f * this._chunkSize, this._chunkSize), v = 0; v < g; v++) { var w = p[v]; var S = b[v]; (w >= l && w <= u || isNaN(w)) && (S >= x && S <= _ || isNaN(S)) && (a[o++] = h), h++ } }c = !0 } } if (!c) if (i === 1) for (v = 0; v < r; v++) { var M = this.getRawIndex(v); ((w = this._getFast(s, M)) >= l && w <= u || isNaN(w)) && (a[o++] = M) } else for (v = 0; v < r; v++) { var I = !0; for (M = this.getRawIndex(v), f = 0; f < i; f++) { var A = e[f]; ((w = this._getFast(n, M)) < t[A][0] || w > t[A][1]) && (I = !1) }I && (a[o++] = this.getRawIndex(v)) } return o < r && (this._indices = a), this._count = o, this._extent = {}, this.getRawIndex = this._indices ? C : T, this } } }, S.mapArray = function (t, e, n, i) { 'use strict'; typeof t === 'function' && (i = n, n = e, e = t, t = []), n = n || i || this; var r = []; return this.each(t, function () { r.push(e && e.apply(this, arguments)) }, n), r }, S.map = function (t, e, n, r) { 'use strict'; n = n || r || this; var a = P(this, t = i.map(L(t), this.getDimension, this)); a._indices = this._indices, a.getRawIndex = a._indices ? C : T; for (var o = a._storage, s = [], l = this._chunkSize, u = t.length, c = this.count(), h = [], d = a._rawExtent, f = 0; f < c; f++) { for (var p = 0; p < u; p++)h[p] = this.get(t[p], f); h[u] = f; var g = e && e.apply(n, h); if (g != null) { typeof g !== 'object' && (s[0] = g, g = s); for (var v = this.getRawIndex(f), m = Math.floor(v / l), y = v % l, x = 0; x < g.length; x++) { var _ = t[x]; var b = g[x]; var w = d[_]; var S = o[_]; S && (S[m][y] = b), b < w[0] && (w[0] = b), b > w[1] && (w[1] = b) } } } return a }, S.downSample = function (t, e, n, i) { for (var r = P(this, [t]), a = r._storage, o = [], s = Math.floor(1 / e), l = a[t], u = this.count(), c = this._chunkSize, h = r._rawExtent[t], d = new (y(this))(u), f = 0, p = 0; p < u; p += s) { s > u - p && (s = u - p, o.length = s); for (var g = 0; g < s; g++) { var v = this.getRawIndex(p + g); var m = Math.floor(v / c); var x = v % c; o[g] = l[m][x] } var _ = n(o); var b = this.getRawIndex(Math.min(p + i(o, _) || 0, u - 1)); var w = b % c; l[Math.floor(b / c)][w] = _, _ < h[0] && (h[0] = _), _ > h[1] && (h[1] = _), d[f++] = b } return r._count = f, r._indices = d, r.getRawIndex = C, r }, S.getItemModel = function (t) { var e = this.hostModel; return new r(this.getRawDataItem(t), e, e && e.ecModel) }, S.diff = function (t) { var e = this; return new a(t ? t.getIndices() : [], this.getIndices(), function (e) { return D(t, e) }, function (t) { return D(e, t) }) }, S.getVisual = function (t) { var e = this._visual; return e && e[t] }, S.setVisual = function (t, e) { if (h(t)) for (var n in t)t.hasOwnProperty(n) && this.setVisual(n, t[n]); else this._visual = this._visual || {}, this._visual[t] = e }, S.setLayout = function (t, e) { if (h(t)) for (var n in t)t.hasOwnProperty(n) && this.setLayout(n, t[n]); else this._layout[t] = e }, S.getLayout = function (t) { return this._layout[t] }, S.getItemLayout = function (t) { return this._itemLayouts[t] }, S.setItemLayout = function (t, e, n) { this._itemLayouts[t] = n ? i.extend(this._itemLayouts[t] || {}, e) : e }, S.clearItemLayouts = function () { this._itemLayouts.length = 0 }, S.getItemVisual = function (t, e, n) { var i = this._itemVisuals[t]; var r = i && i[e]; return r != null || n ? r : this.getVisual(e) }, S.setItemVisual = function (t, e, n) { var i = this._itemVisuals[t] || {}; var r = this.hasItemVisual; if (this._itemVisuals[t] = i, h(e)) for (var a in e)e.hasOwnProperty(a) && (i[a] = e[a], r[a] = !0); else i[e] = n, r[e] = !0 }, S.clearAllVisual = function () { this._visual = {}, this._itemVisuals = [], this.hasItemVisual = {} }; var E = function (t) { t.seriesIndex = this.seriesIndex, t.dataIndex = this.dataIndex, t.dataType = this.dataType }; S.setItemGraphicEl = function (t, e) { var n = this.hostModel; e && (e.dataIndex = t, e.dataType = this.dataType, e.seriesIndex = n && n.seriesIndex, e.type === 'group' && e.traverse(E, e)), this._graphicEls[t] = e }, S.getItemGraphicEl = function (t) { return this._graphicEls[t] }, S.eachItemGraphicEl = function (t, e) { i.each(this._graphicEls, function (n, i) { n && t && t.call(e, n, i) }) }, S.cloneShallow = function (t) { if (!t) { var e = i.map(this.dimensions, this.getDimensionInfo, this); t = new w(e, this.hostModel) } if (t._storage = this._storage, b(t, this), this._indices) { var n = this._indices.constructor; t._indices = new n(this._indices) } else t._indices = null; return t.getRawIndex = t._indices ? C : T, t }, S.wrapMethod = function (t, e) { var n = this[t]; typeof n === 'function' && (this.__wrappedMethods = this.__wrappedMethods || [], this.__wrappedMethods.push(t), this[t] = function () { var t = n.apply(this, arguments); return e.apply(this, [t].concat(i.slice(arguments))) }) }, S.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'map'], S.CHANGABLE_METHODS = ['filterSelf', 'selectRange']; var R = w; t.exports = R }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(8); var o = n(17).calculateTextPosition; var s = r.extendShape({ type: 'triangle', shape: { cx: 0, cy: 0, width: 0, height: 0 }, buildPath: function (t, e) { var n = e.cx; var i = e.cy; var r = e.width / 2; var a = e.height / 2; t.moveTo(n, i - a), t.lineTo(n + r, i + a), t.lineTo(n - r, i + a), t.closePath() } }); var l = r.extendShape({ type: 'diamond', shape: { cx: 0, cy: 0, width: 0, height: 0 }, buildPath: function (t, e) { var n = e.cx; var i = e.cy; var r = e.width / 2; var a = e.height / 2; t.moveTo(n, i - a), t.lineTo(n + r, i), t.lineTo(n, i + a), t.lineTo(n - r, i), t.closePath() } }); var u = r.extendShape({ type: 'pin', shape: { x: 0, y: 0, width: 0, height: 0 }, buildPath: function (t, e) { var n = e.x; var i = e.y; var r = e.width / 5 * 3; var a = Math.max(r, e.height); var o = r / 2; var s = o * o / (a - o); var l = i - a + o + s; var u = Math.asin(s / o); var c = Math.cos(u) * o; var h = Math.sin(u); var d = Math.cos(u); var f = 0.6 * o; var p = 0.7 * o; t.moveTo(n - c, l + s), t.arc(n, l, o, Math.PI - u, 2 * Math.PI + u), t.bezierCurveTo(n + c - h * f, l + s + d * f, n, i - p, n, i), t.bezierCurveTo(n, i - p, n - c + h * f, l + s + d * f, n - c, l + s), t.closePath() } }); var c = r.extendShape({ type: 'arrow', shape: { x: 0, y: 0, width: 0, height: 0 }, buildPath: function (t, e) { var n = e.height; var i = e.width; var r = e.x; var a = e.y; var o = i / 3 * 2; t.moveTo(r, a), t.lineTo(r + o, a + n), t.lineTo(r, a + n / 4 * 3), t.lineTo(r - o, a + n), t.lineTo(r, a), t.closePath() } }); var h = { line: r.Line, rect: r.Rect, roundRect: r.Rect, square: r.Rect, circle: r.Circle, diamond: l, pin: u, arrow: c, triangle: s }; var d = { line: function (t, e, n, i, r) { r.x1 = t, r.y1 = e + i / 2, r.x2 = t + n, r.y2 = e + i / 2 }, rect: function (t, e, n, i, r) { r.x = t, r.y = e, r.width = n, r.height = i }, roundRect: function (t, e, n, i, r) { r.x = t, r.y = e, r.width = n, r.height = i, r.r = Math.min(n, i) / 4 }, square: function (t, e, n, i, r) { var a = Math.min(n, i); r.x = t, r.y = e, r.width = a, r.height = a }, circle: function (t, e, n, i, r) { r.cx = t + n / 2, r.cy = e + i / 2, r.r = Math.min(n, i) / 2 }, diamond: function (t, e, n, i, r) { r.cx = t + n / 2, r.cy = e + i / 2, r.width = n, r.height = i }, pin: function (t, e, n, i, r) { r.x = t + n / 2, r.y = e + i / 2, r.width = n, r.height = i }, arrow: function (t, e, n, i, r) { r.x = t + n / 2, r.y = e + i / 2, r.width = n, r.height = i }, triangle: function (t, e, n, i, r) { r.cx = t + n / 2, r.cy = e + i / 2, r.width = n, r.height = i } }; var f = {}; i.each(h, function (t, e) { f[e] = new t() }); var p = r.extendShape({ type: 'symbol', shape: { symbolType: '', x: 0, y: 0, width: 0, height: 0 }, calculateTextPosition: function (t, e, n) { var i = o(t, e, n); var r = this.shape; return r && r.symbolType === 'pin' && e.textPosition === 'inside' && (i.y = n.y + 0.4 * n.height), i }, buildPath: function (t, e, n) { var i = e.symbolType; if (i !== 'none') { var r = f[i]; r || (r = f[i = 'rect']), d[i](e.x, e.y, e.width, e.height, r.shape), r.buildPath(t, r.shape, n) } } }); function g (t, e) { if (this.type !== 'image') { var n = this.style; var i = this.shape; i && i.symbolType === 'line' ? n.stroke = t : this.__isEmptyBrush ? (n.stroke = t, n.fill = e || '#fff') : (n.fill && (n.fill = t), n.stroke && (n.stroke = t)), this.dirty(!1) } }e.createSymbol = function (t, e, n, i, o, s, l) { var u; var c = t.indexOf('empty') === 0; return c && (t = t.substr(5, 1).toLowerCase() + t.substr(6)), (u = t.indexOf('image://') === 0 ? r.makeImage(t.slice(8), new a(e, n, i, o), l ? 'center' : 'cover') : t.indexOf('path://') === 0 ? r.makePath(t.slice(7), {}, new a(e, n, i, o), l ? 'center' : 'cover') : new p({ shape: { symbolType: t, x: e, y: n, width: i, height: o } })).__isEmptyBrush = c, u.setColor = g, u.setColor(s), u } }, function (t, e, n) { var i = n(0); var r = {}; function a () { this._coordinateSystems = [] }a.prototype = { constructor: a, create: function (t, e) { var n = []; i.each(r, function (i, r) { var a = i.create(t, e); n = n.concat(a || []) }), this._coordinateSystems = n }, update: function (t, e) { i.each(this._coordinateSystems, function (n) { n.update && n.update(t, e) }) }, getCoordinateSystems: function () { return this._coordinateSystems.slice() } }, a.register = function (t, e) { r[t] = e }, a.get = function (t) { return r[t] }; var o = a; t.exports = o }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(273); var a = n(76); var o = n(75); var s = n(3); var l = n(77); var u = l.prepareLayoutBarSeries; var c = l.makeColumnLayout; var h = l.retrieveColumnLayout; var d = n(8); function f (t, e) { var n; var r; var a; var o = t.type; var l = e.getMin(); var d = e.getMax(); var f = l != null; var p = d != null; var g = t.getExtent(); o === 'ordinal' ? n = e.getCategories().length : (r = e.get('boundaryGap'), i.isArray(r) || (r = [r || 0, r || 0]), typeof r[0] === 'boolean' && (r = [0, 0]), r[0] = s.parsePercent(r[0], 1), r[1] = s.parsePercent(r[1], 1), a = g[1] - g[0] || Math.abs(g[0])), l == null && (l = o === 'ordinal' ? n ? 0 : NaN : g[0] - r[0] * a), d == null && (d = o === 'ordinal' ? n ? n - 1 : NaN : g[1] + r[1] * a), l === 'dataMin' ? l = g[0] : typeof l === 'function' && (l = l({ min: g[0], max: g[1] })), d === 'dataMax' ? d = g[1] : typeof d === 'function' && (d = d({ min: g[0], max: g[1] })), (l == null || !isFinite(l)) && (l = NaN), (d == null || !isFinite(d)) && (d = NaN), t.setBlank(i.eqNaN(l) || i.eqNaN(d) || o === 'ordinal' && !t.getOrdinalMeta().categories.length), e.getNeedCrossZero() && (l > 0 && d > 0 && !f && (l = 0), l < 0 && d < 0 && !p && (d = 0)); var v = e.ecModel; if (v && o === 'time') { var m; var y = u('bar', v); if (i.each(y, function (t) { m |= t.getBaseAxis() === e.axis }), m) { var x = c(y); var _ = (function (t, e, n, r) { var a = n.axis.getExtent(); var o = a[1] - a[0]; var s = h(r, n.axis); if (void 0 === s) return { min: t, max: e }; var l = 1 / 0; i.each(s, function (t) { l = Math.min(t.offset, l) }); var u = -1 / 0; i.each(s, function (t) { u = Math.max(t.offset + t.width, u) }), l = Math.abs(l), u = Math.abs(u); var c = l + u; var d = e - t; var f = d / (1 - (l + u) / o) - d; return { min: t -= f * (l / c), max: e += f * (u / c) } }(l, d, e, x)); l = _.min, d = _.max } } return [l, d] } function p (t) { var e; var n = t.getLabelModel().get('formatter'); var i = t.type === 'category' ? t.scale.getExtent()[0] : null; return typeof n === 'string' ? (e = n, n = function (n) { return n = t.scale.getLabel(n), e.replace('{value}', n != null ? n : '') }) : typeof n === 'function' ? function (e, r) { return i != null && (r = e - i), n(g(t, e), r) } : function (e) { return t.scale.getLabel(e) } } function g (t, e) { return t.type === 'category' ? t.scale.getLabel(e) : e } function v (t) { var e = t.get('interval'); return e == null ? 'auto' : e }n(274), n(160), e.getScaleExtent = f, e.niceScaleExtent = function (t, e) { var n = f(t, e); var i = e.getMin() != null; var r = e.getMax() != null; var a = e.get('splitNumber'); t.type === 'log' && (t.base = e.get('logBase')); var o = t.type; t.setExtent(n[0], n[1]), t.niceExtent({ splitNumber: a, fixMin: i, fixMax: r, minInterval: o === 'interval' || o === 'time' ? e.get('minInterval') : null, maxInterval: o === 'interval' || o === 'time' ? e.get('maxInterval') : null }); var s = e.get('interval'); s != null && t.setInterval && t.setInterval(s) }, e.createScaleByModel = function (t, e) { if (e = e || t.get('type')) switch (e) { case 'category':return new r(t.getOrdinalMeta ? t.getOrdinalMeta() : t.getCategories(), [1 / 0, -1 / 0]); case 'value':return new a(); default:return (o.getClass(e) || a).create(t) } }, e.ifAxisCrossZero = function (t) { var e = t.scale.getExtent(); var n = e[0]; var i = e[1]; return !(n > 0 && i > 0 || n < 0 && i < 0) }, e.makeLabelFormatter = p, e.getAxisRawValue = g, e.estimateLabelUnionRect = function (t) { var e = t.model; var n = t.scale; if (e.get('axisLabel.show') && !n.isBlank()) { var i; var r; var a = t.type === 'category'; var o = n.getExtent(); r = a ? n.count() : (i = n.getTicks()).length; var s; var l; var u; var c; var h; var f; var g; var v; var m; var y = t.getLabelModel(); var x = p(t); var _ = 1; r > 40 && (_ = Math.ceil(r / 40)); for (var b = 0; b < r; b += _) { var w = x(i ? i[b] : o[0] + b); var S = y.getTextRect(w); var M = (l = S, u = y.get('rotate') || 0, c = void 0, h = void 0, f = void 0, g = void 0, v = void 0, m = void 0, void 0, c = u * Math.PI / 180, h = l.plain(), f = h.width, g = h.height, v = f * Math.cos(c) + g * Math.sin(c), m = f * Math.sin(c) + g * Math.cos(c), new d(h.x, h.y, v, m)); s ? s.union(M) : s = M } return s } }, e.getOptionCategoryInterval = v, e.shouldShowAllLabels = function (t) { return t.type === 'category' && v(t.getLabelModel()) === 0 } }, function (t, e, n) { var i = n(34); e.Dispatcher = i; var r = n(11); var a = n(233).buildTransformer; var o = typeof window !== 'undefined' && !!window.addEventListener; var s = /^(?:mouse|pointer|contextmenu|drag|drop)|click/; var l = '___zrEVENTSAVED'; var u = []; function c (t, e, n, i) { return n = n || {}, i || !r.canvasSupported ? h(t, e, n) : r.browser.firefox && e.layerX != null && e.layerX !== e.offsetX ? (n.zrX = e.layerX, n.zrY = e.layerY) : e.offsetX != null ? (n.zrX = e.offsetX, n.zrY = e.offsetY) : h(t, e, n), n } function h (t, e, n) { if (t.getBoundingClientRect && r.domSupported) { var i = e.clientX; var o = e.clientY; if (t.nodeName.toUpperCase() === 'CANVAS') { var s = t.getBoundingClientRect(); return n.zrX = i - s.left, void (n.zrY = o - s.top) } var c = t[l] || (t[l] = {}); var h = (function (t, e) { for (var n = e.transformer, i = e.srcCoords, r = !0, o = [], s = [], l = 0; l < 4; l++) { var u = t[l].getBoundingClientRect(); var c = 2 * l; var h = u.left; var d = u.top; o.push(h, d), r &= i && h === i[c] && d === i[c + 1], s.push(t[l].offsetLeft, t[l].offsetTop) } return r ? n : (e.srcCoords = o, e.transformer = a(o, s)) }((function (t, e) { var n = e.markers; if (n) return n; n = e.markers = []; for (var i = ['left', 'right'], r = ['top', 'bottom'], a = 0; a < 4; a++) { var o = document.createElement('div'); var s = o.style; var l = a % 2; var u = (a >> 1) % 2; s.cssText = ['position:absolute', 'visibility: hidden', 'padding: 0', 'margin: 0', 'border-width: 0', 'width:0', 'height:0', i[l] + ':0', r[u] + ':0', i[1 - l] + ':auto', r[1 - u] + ':auto', ''].join('!important;'), t.appendChild(o), n.push(o) } return n }(t, c)), c)); if (h) return h(u, i, o), n.zrX = u[0], void (n.zrY = u[1]) }n.zrX = n.zrY = 0 } var d = o ? function (t) { t.preventDefault(), t.stopPropagation(), t.cancelBubble = !0 } : function (t) { t.returnValue = !1, t.cancelBubble = !0 }; e.clientToLocal = c, e.normalizeEvent = function (t, e, n) { if ((e = e || window.event).zrX != null) return e; var i = e.type; if (i && i.indexOf('touch') >= 0) { var r = i !== 'touchend' ? e.targetTouches[0] : e.changedTouches[0]; r && c(t, r, e, n) } else c(t, e, e, n), e.zrDelta = e.wheelDelta ? e.wheelDelta / 120 : -(e.detail || 0) / 3; var a = e.button; return e.which == null && void 0 !== a && s.test(e.type) && (e.which = 1 & a ? 1 : 2 & a ? 3 : 4 & a ? 2 : 0), e }, e.addEventListener = function (t, e, n) { o ? t.addEventListener(e, n) : t.attachEvent('on' + e, n) }, e.removeEventListener = function (t, e, n) { o ? t.removeEventListener(e, n) : t.detachEvent('on' + e, n) }, e.stop = d, e.isMiddleOrRightButtonOnMouseUpDown = function (t) { return t.which === 2 || t.which === 3 }, e.notLeftMouse = function (t) { return t.which > 1 } }, function (t, e, n) { var i = n(133); var r = { transparent: [0, 0, 0, 0], aliceblue: [240, 248, 255, 1], antiquewhite: [250, 235, 215, 1], aqua: [0, 255, 255, 1], aquamarine: [127, 255, 212, 1], azure: [240, 255, 255, 1], beige: [245, 245, 220, 1], bisque: [255, 228, 196, 1], black: [0, 0, 0, 1], blanchedalmond: [255, 235, 205, 1], blue: [0, 0, 255, 1], blueviolet: [138, 43, 226, 1], brown: [165, 42, 42, 1], burlywood: [222, 184, 135, 1], cadetblue: [95, 158, 160, 1], chartreuse: [127, 255, 0, 1], chocolate: [210, 105, 30, 1], coral: [255, 127, 80, 1], cornflowerblue: [100, 149, 237, 1], cornsilk: [255, 248, 220, 1], crimson: [220, 20, 60, 1], cyan: [0, 255, 255, 1], darkblue: [0, 0, 139, 1], darkcyan: [0, 139, 139, 1], darkgoldenrod: [184, 134, 11, 1], darkgray: [169, 169, 169, 1], darkgreen: [0, 100, 0, 1], darkgrey: [169, 169, 169, 1], darkkhaki: [189, 183, 107, 1], darkmagenta: [139, 0, 139, 1], darkolivegreen: [85, 107, 47, 1], darkorange: [255, 140, 0, 1], darkorchid: [153, 50, 204, 1], darkred: [139, 0, 0, 1], darksalmon: [233, 150, 122, 1], darkseagreen: [143, 188, 143, 1], darkslateblue: [72, 61, 139, 1], darkslategray: [47, 79, 79, 1], darkslategrey: [47, 79, 79, 1], darkturquoise: [0, 206, 209, 1], darkviolet: [148, 0, 211, 1], deeppink: [255, 20, 147, 1], deepskyblue: [0, 191, 255, 1], dimgray: [105, 105, 105, 1], dimgrey: [105, 105, 105, 1], dodgerblue: [30, 144, 255, 1], firebrick: [178, 34, 34, 1], floralwhite: [255, 250, 240, 1], forestgreen: [34, 139, 34, 1], fuchsia: [255, 0, 255, 1], gainsboro: [220, 220, 220, 1], ghostwhite: [248, 248, 255, 1], gold: [255, 215, 0, 1], goldenrod: [218, 165, 32, 1], gray: [128, 128, 128, 1], green: [0, 128, 0, 1], greenyellow: [173, 255, 47, 1], grey: [128, 128, 128, 1], honeydew: [240, 255, 240, 1], hotpink: [255, 105, 180, 1], indianred: [205, 92, 92, 1], indigo: [75, 0, 130, 1], ivory: [255, 255, 240, 1], khaki: [240, 230, 140, 1], lavender: [230, 230, 250, 1], lavenderblush: [255, 240, 245, 1], lawngreen: [124, 252, 0, 1], lemonchiffon: [255, 250, 205, 1], lightblue: [173, 216, 230, 1], lightcoral: [240, 128, 128, 1], lightcyan: [224, 255, 255, 1], lightgoldenrodyellow: [250, 250, 210, 1], lightgray: [211, 211, 211, 1], lightgreen: [144, 238, 144, 1], lightgrey: [211, 211, 211, 1], lightpink: [255, 182, 193, 1], lightsalmon: [255, 160, 122, 1], lightseagreen: [32, 178, 170, 1], lightskyblue: [135, 206, 250, 1], lightslategray: [119, 136, 153, 1], lightslategrey: [119, 136, 153, 1], lightsteelblue: [176, 196, 222, 1], lightyellow: [255, 255, 224, 1], lime: [0, 255, 0, 1], limegreen: [50, 205, 50, 1], linen: [250, 240, 230, 1], magenta: [255, 0, 255, 1], maroon: [128, 0, 0, 1], mediumaquamarine: [102, 205, 170, 1], mediumblue: [0, 0, 205, 1], mediumorchid: [186, 85, 211, 1], mediumpurple: [147, 112, 219, 1], mediumseagreen: [60, 179, 113, 1], mediumslateblue: [123, 104, 238, 1], mediumspringgreen: [0, 250, 154, 1], mediumturquoise: [72, 209, 204, 1], mediumvioletred: [199, 21, 133, 1], midnightblue: [25, 25, 112, 1], mintcream: [245, 255, 250, 1], mistyrose: [255, 228, 225, 1], moccasin: [255, 228, 181, 1], navajowhite: [255, 222, 173, 1], navy: [0, 0, 128, 1], oldlace: [253, 245, 230, 1], olive: [128, 128, 0, 1], olivedrab: [107, 142, 35, 1], orange: [255, 165, 0, 1], orangered: [255, 69, 0, 1], orchid: [218, 112, 214, 1], palegoldenrod: [238, 232, 170, 1], palegreen: [152, 251, 152, 1], paleturquoise: [175, 238, 238, 1], palevioletred: [219, 112, 147, 1], papayawhip: [255, 239, 213, 1], peachpuff: [255, 218, 185, 1], peru: [205, 133, 63, 1], pink: [255, 192, 203, 1], plum: [221, 160, 221, 1], powderblue: [176, 224, 230, 1], purple: [128, 0, 128, 1], red: [255, 0, 0, 1], rosybrown: [188, 143, 143, 1], royalblue: [65, 105, 225, 1], saddlebrown: [139, 69, 19, 1], salmon: [250, 128, 114, 1], sandybrown: [244, 164, 96, 1], seagreen: [46, 139, 87, 1], seashell: [255, 245, 238, 1], sienna: [160, 82, 45, 1], silver: [192, 192, 192, 1], skyblue: [135, 206, 235, 1], slateblue: [106, 90, 205, 1], slategray: [112, 128, 144, 1], slategrey: [112, 128, 144, 1], snow: [255, 250, 250, 1], springgreen: [0, 255, 127, 1], steelblue: [70, 130, 180, 1], tan: [210, 180, 140, 1], teal: [0, 128, 128, 1], thistle: [216, 191, 216, 1], tomato: [255, 99, 71, 1], turquoise: [64, 224, 208, 1], violet: [238, 130, 238, 1], wheat: [245, 222, 179, 1], white: [255, 255, 255, 1], whitesmoke: [245, 245, 245, 1], yellow: [255, 255, 0, 1], yellowgreen: [154, 205, 50, 1] }; function a (t) { return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t } function o (t) { return t < 0 ? 0 : t > 1 ? 1 : t } function s (t) { return t.length && t.charAt(t.length - 1) === '%' ? a(parseFloat(t) / 100 * 255) : a(parseInt(t, 10)) } function l (t) { return t.length && t.charAt(t.length - 1) === '%' ? o(parseFloat(t) / 100) : o(parseFloat(t)) } function u (t, e, n) { return n < 0 ? n += 1 : n > 1 && (n -= 1), 6 * n < 1 ? t + (e - t) * n * 6 : 2 * n < 1 ? e : 3 * n < 2 ? t + (e - t) * (2 / 3 - n) * 6 : t } function c (t, e, n) { return t + (e - t) * n } function h (t, e, n, i, r) { return t[0] = e, t[1] = n, t[2] = i, t[3] = r, t } function d (t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t } var f = new i(20); var p = null; function g (t, e) { p && d(p, e), p = f.put(t, p || e.slice()) } function v (t, e) { if (t) { e = e || []; var n = f.get(t); if (n) return d(e, n); var i; var a = (t += '').replace(/ /g, '').toLowerCase(); if (a in r) return d(e, r[a]), g(t, e), e; if (a.charAt(0) === '#') return a.length === 4 ? (i = parseInt(a.substr(1), 16)) >= 0 && i <= 4095 ? (h(e, (3840 & i) >> 4 | (3840 & i) >> 8, 240 & i | (240 & i) >> 4, 15 & i | (15 & i) << 4, 1), g(t, e), e) : void h(e, 0, 0, 0, 1) : a.length === 7 ? (i = parseInt(a.substr(1), 16)) >= 0 && i <= 16777215 ? (h(e, (16711680 & i) >> 16, (65280 & i) >> 8, 255 & i, 1), g(t, e), e) : void h(e, 0, 0, 0, 1) : void 0; var o = a.indexOf('('); var u = a.indexOf(')'); if (o !== -1 && u + 1 === a.length) { var c = a.substr(0, o); var p = a.substr(o + 1, u - (o + 1)).split(','); var v = 1; switch (c) { case 'rgba':if (p.length !== 4) return void h(e, 0, 0, 0, 1); v = l(p.pop()); case 'rgb':return p.length !== 3 ? void h(e, 0, 0, 0, 1) : (h(e, s(p[0]), s(p[1]), s(p[2]), v), g(t, e), e); case 'hsla':return p.length !== 4 ? void h(e, 0, 0, 0, 1) : (p[3] = l(p[3]), m(p, e), g(t, e), e); case 'hsl':return p.length !== 3 ? void h(e, 0, 0, 0, 1) : (m(p, e), g(t, e), e); default:return } }h(e, 0, 0, 0, 1) } } function m (t, e) { var n = (parseFloat(t[0]) % 360 + 360) % 360 / 360; var i = l(t[1]); var r = l(t[2]); var o = r <= 0.5 ? r * (i + 1) : r + i - r * i; var s = 2 * r - o; return h(e = e || [], a(255 * u(s, o, n + 1 / 3)), a(255 * u(s, o, n)), a(255 * u(s, o, n - 1 / 3)), 1), t.length === 4 && (e[3] = t[3]), e } function y (t, e, n) { if (e && e.length && t >= 0 && t <= 1) { n = n || []; var i = t * (e.length - 1); var r = Math.floor(i); var s = Math.ceil(i); var l = e[r]; var u = e[s]; var h = i - r; return n[0] = a(c(l[0], u[0], h)), n[1] = a(c(l[1], u[1], h)), n[2] = a(c(l[2], u[2], h)), n[3] = o(c(l[3], u[3], h)), n } } var x = y; function _ (t, e, n) { if (e && e.length && t >= 0 && t <= 1) { var i = t * (e.length - 1); var r = Math.floor(i); var s = Math.ceil(i); var l = v(e[r]); var u = v(e[s]); var h = i - r; var d = w([a(c(l[0], u[0], h)), a(c(l[1], u[1], h)), a(c(l[2], u[2], h)), o(c(l[3], u[3], h))], 'rgba'); return n ? { color: d, leftIndex: r, rightIndex: s, value: i } : d } } var b = _; function w (t, e) { if (t && t.length) { var n = t[0] + ',' + t[1] + ',' + t[2]; return e !== 'rgba' && e !== 'hsva' && e !== 'hsla' || (n += ',' + t[3]), e + '(' + n + ')' } }e.parse = v, e.lift = function (t, e) { var n = v(t); if (n) { for (var i = 0; i < 3; i++)n[i] = e < 0 ? n[i] * (1 - e) | 0 : (255 - n[i]) * e + n[i] | 0, n[i] > 255 ? n[i] = 255 : t[i] < 0 && (n[i] = 0); return w(n, n.length === 4 ? 'rgba' : 'rgb') } }, e.toHex = function (t) { var e = v(t); if (e) return ((1 << 24) + (e[0] << 16) + (e[1] << 8) + +e[2]).toString(16).slice(1) }, e.fastLerp = y, e.fastMapToColor = x, e.lerp = _, e.mapToColor = b, e.modifyHSL = function (t, e, n, i) { if (t = v(t)) return t = (function (t) { if (t) { var e; var n; var i = t[0] / 255; var r = t[1] / 255; var a = t[2] / 255; var o = Math.min(i, r, a); var s = Math.max(i, r, a); var l = s - o; var u = (s + o) / 2; if (l === 0)e = 0, n = 0; else { n = u < 0.5 ? l / (s + o) : l / (2 - s - o); var c = ((s - i) / 6 + l / 2) / l; var h = ((s - r) / 6 + l / 2) / l; var d = ((s - a) / 6 + l / 2) / l; i === s ? e = d - h : r === s ? e = 1 / 3 + c - d : a === s && (e = 2 / 3 + h - c), e < 0 && (e += 1), e > 1 && (e -= 1) } var f = [360 * e, n, u]; return t[3] != null && f.push(t[3]), f } }(t)), e != null && (t[0] = (r = e, (r = Math.round(r)) < 0 ? 0 : r > 360 ? 360 : r)), n != null && (t[1] = l(n)), i != null && (t[2] = l(i)), w(m(t), 'rgba'); var r }, e.modifyAlpha = function (t, e) { if ((t = v(t)) && e != null) return t[3] = o(e), w(t, 'rgba') }, e.stringify = w }, function (t, e, n) { var i = n(0).each; var r = n(42); var a = n(55); var o = n(26); var s = n(4); var l = n(2); var u = n(95).createTask; var c = n(46); var h = s.makeInner(); var d = c(); function f () { this.group = new r(), this.uid = a.getUID('viewChart'), this.renderTask = u({ plan: m, reset: y }), this.renderTask.context = { view: this } }f.prototype = { type: 'chart', init: function (t, e) {}, render: function (t, e, n, i) {}, highlight: function (t, e, n, i) { v(t.getData(), i, 'emphasis') }, downplay: function (t, e, n, i) { v(t.getData(), i, 'normal') }, remove: function (t, e) { this.group.removeAll() }, dispose: function () {}, incrementalPrepareRender: null, incrementalRender: null, updateTransform: null, filterForExposedEvent: null }; var p = f.prototype; function g (t, e, n) { if (t && (t.trigger(e, n), t.isGroup && !l.isHighDownDispatcher(t))) for (var i = 0, r = t.childCount(); i < r; i++)g(t.childAt(i), e, n) } function v (t, e, n) { var r = s.queryDataIndex(t, e); var a = e && e.highlightKey != null ? l.getHighlightDigit(e.highlightKey) : null; r != null ? i(s.normalizeToArray(r), function (e) { g(t.getItemGraphicEl(e), n, a) }) : t.eachItemGraphicEl(function (t) { g(t, n, a) }) } function m (t) { return d(t.model) } function y (t) { var e = t.model; var n = t.ecModel; var i = t.api; var r = t.payload; var a = e.pipelineContext.progressiveRender; var o = t.view; var s = r && h(r).updateMethod; var l = a ? 'incrementalPrepareRender' : s && o[s] ? s : 'render'; return l !== 'render' && o[l](e, n, i, r), x[l] }p.updateView = p.updateLayout = p.updateVisual = function (t, e, n, i) { this.render(t, e, n, i) }, o.enableClassExtend(f, ['dispose']), o.enableClassManagement(f, { registerWhenExtend: !0 }), f.markUpdateMethod = function (t, e) { h(t).updateMethod = e }; var x = { incrementalPrepareRender: { progress: function (t, e) { e.view.incrementalRender(t, e.model, e.ecModel, e.api, e.payload) } }, render: { forceFirstProgress: !0, progress: function (t, e) { e.view.render(e.model, e.ecModel, e.api, e.payload) } } }; var _ = f; t.exports = _ }, function (t, e, n) { var i = n(0); var r = i.each; var a = i.isString; function o (t, e) { return !!e && e === t.getCalculationInfo('stackedDimension') }e.enableDataStack = function (t, e, n) { var i; var o; var s; var l; var u = (n = n || {}).byIndex; var c = n.stackedCoordDimension; var h = !(!t || !t.get('stack')); if (r(e, function (t, n) { a(t) && (e[n] = t = { name: t }), h && !t.isExtraCoord && (u || i || !t.ordinalMeta || (i = t), o || t.type === 'ordinal' || t.type === 'time' || c && c !== t.coordDim || (o = t)) }), !o || u || i || (u = !0), o) { s = '__\0ecstackresult', l = '__\0ecstackedover', i && (i.createInvertedIndices = !0); var d = o.coordDim; var f = o.type; var p = 0; r(e, function (t) { t.coordDim === d && p++ }), e.push({ name: s, coordDim: d, coordDimIndex: p, type: f, isExtraCoord: !0, isCalculationCoord: !0 }), p++, e.push({ name: l, coordDim: l, coordDimIndex: p, type: f, isExtraCoord: !0, isCalculationCoord: !0 }) } return { stackedDimension: o && o.name, stackedByDimension: i && i.name, isStackedByIndex: u, stackedOverDimension: l, stackResultDimension: s } }, e.isDimensionStacked = o, e.getStackedDimension = function (t, e) { return o(t, e) ? t.getCalculationInfo('stackResultDimension') : e } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = '.'; var a = '___EC__COMPONENT__CONTAINER___'; function o (t) { var e = { main: '', sub: '' }; return t && (t = t.split(r), e.main = t[0] || '', e.sub = t[1] || ''), e } var s = 0; function l (t, e) { var n = i.slice(arguments, 2); return this.superClass.prototype[e].apply(t, n) } function u (t, e, n) { return this.superClass.prototype[e].apply(t, n) }e.parseClassType = o, e.enableClassExtend = function (t, e) { t.$constructor = t, t.extend = function (t) { var e = this; var n = function () { t.$constructor ? t.$constructor.apply(this, arguments) : e.apply(this, arguments) }; return i.extend(n.prototype, t), n.extend = this.extend, n.superCall = l, n.superApply = u, i.inherits(n, this), n.superClass = e, n } }, e.enableClassCheck = function (t) { var e = ['__\0is_clz', s++, Math.random().toFixed(3)].join('_'); t.prototype[e] = !0, t.isInstance = function (t) { return !(!t || !t[e]) } }, e.enableClassManagement = function (t, e) { e = e || {}; var n = {}; if (t.registerClass = function (t, e) { if (e) if ((function (t) { i.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t), 'componentType "' + t + '" illegal') }(e)), (e = o(e)).sub) { if (e.sub !== a) { (function (t) { var e = n[t.main]; e && e[a] || ((e = n[t.main] = {})[a] = !0); return e }(e))[e.sub] = t } } else n[e.main] = t; return t }, t.getClass = function (t, e, i) { var r = n[t]; if (r && r[a] && (r = e ? r[e] : null), i && !r) throw new Error(e ? 'Component ' + t + '.' + (e || '') + ' not exists. Load it first.' : t + '.type should be specified.'); return r }, t.getClassesByMainType = function (t) { t = o(t); var e = []; var r = n[t.main]; return r && r[a] ? i.each(r, function (t, n) { n !== a && e.push(t) }) : e.push(r), e }, t.hasClass = function (t) { return t = o(t), !!n[t.main] }, t.getAllClassMainTypes = function () { var t = []; return i.each(n, function (e, n) { t.push(n) }), t }, t.hasSubTypes = function (t) { t = o(t); var e = n[t.main]; return e && e[a] }, t.parseClassType = o, e.registerWhenExtend) { var r = t.extend; r && (t.extend = function (e) { var n = r.call(this, e); return t.registerClass(n, e.type) }) } return t }, e.setReadOnly = function (t, e) {} }, function (t, e, n) { var i = n(0); var r = n(18); var a = n(47); var o = n(57).SOURCE_FORMAT_ORIGINAL; var s = n(58).getDimensionTypeByAxis; var l = n(4).getDataItemValue; var u = n(20); var c = n(152).getCoordSysDefineBySeries; var h = n(56); var d = n(25).enableDataStack; var f = function (t, e, n) { n = n || {}, h.isInstance(t) || (t = h.seriesDataToSource(t)); var f; var p = e.get('coordinateSystem'); var g = u.get(p); var v = c(e); v && (f = i.map(v.coordSysDims, function (t) { var e = { name: t }; var n = v.axisMap.get(t); if (n) { var i = n.get('type'); e.type = s(i) } return e })), f || (f = g && (g.getDimensionsInfo ? g.getDimensionsInfo() : g.dimensions.slice()) || ['x', 'y']); var m; var y; var x = a(t, { coordDimensions: f, generateCoord: n.generateCoord }); v && i.each(x, function (t, e) { var n = t.coordDim; var i = v.categoryAxisMap.get(n); i && (m == null && (m = e), t.ordinalMeta = i.getOrdinalMeta()), t.otherDims.itemName != null && (y = !0) }), y || m == null || (x[m].otherDims.itemName = 0); var _ = d(e, x); var b = new r(x, e); b.setCalculationInfo(_); var w = m != null && (function (t) { if (t.sourceFormat === o) { var e = (function (t) { var e = 0; for (;e < t.length && t[e] == null;)e++; return t[e] }(t.data || [])); return e != null && !i.isArray(l(e)) } }(t)) ? function (t, e, n, i) { return i === m ? n : this.defaultDimValueGetter(t, e, n, i) } : null; return b.hasItemOption = !1, b.initData(t, null, w), b }; t.exports = f }, function (t, e, n) { var i = n(7); var r = i.create; var a = i.distSquare; var o = Math.pow; var s = Math.sqrt; var l = 1e-8; var u = 1e-4; var c = s(3); var h = 1 / 3; var d = r(); var f = r(); var p = r(); function g (t) { return t > -l && t < l } function v (t) { return t > l || t < -l } function m (t, e, n, i, r) { var a = 1 - r; return a * a * (a * t + 3 * r * e) + r * r * (r * i + 3 * a * n) } function y (t, e, n, i) { var r = 1 - i; return r * (r * t + 2 * i * e) + i * i * n }e.cubicAt = m, e.cubicDerivativeAt = function (t, e, n, i, r) { var a = 1 - r; return 3 * (((e - t) * a + 2 * (n - e) * r) * a + (i - n) * r * r) }, e.cubicRootAt = function (t, e, n, i, r, a) { var l = i + 3 * (e - n) - t; var u = 3 * (n - 2 * e + t); var d = 3 * (e - t); var f = t - r; var p = u * u - 3 * l * d; var v = u * d - 9 * l * f; var m = d * d - 3 * u * f; var y = 0; if (g(p) && g(v)) { if (g(u))a[0] = 0; else (D = -d / u) >= 0 && D <= 1 && (a[y++] = D) } else { var x = v * v - 4 * p * m; if (g(x)) { var _ = v / p; var b = -_ / 2; (D = -u / l + _) >= 0 && D <= 1 && (a[y++] = D), b >= 0 && b <= 1 && (a[y++] = b) } else if (x > 0) { var w = s(x); var S = p * u + 1.5 * l * (-v + w); var M = p * u + 1.5 * l * (-v - w); (D = (-u - ((S = S < 0 ? -o(-S, h) : o(S, h)) + (M = M < 0 ? -o(-M, h) : o(M, h)))) / (3 * l)) >= 0 && D <= 1 && (a[y++] = D) } else { var I = (2 * p * u - 3 * l * v) / (2 * s(p * p * p)); var A = Math.acos(I) / 3; var T = s(p); var C = Math.cos(A); var D = (-u - 2 * T * C) / (3 * l); var L = (b = (-u + T * (C + c * Math.sin(A))) / (3 * l), (-u + T * (C - c * Math.sin(A))) / (3 * l)); D >= 0 && D <= 1 && (a[y++] = D), b >= 0 && b <= 1 && (a[y++] = b), L >= 0 && L <= 1 && (a[y++] = L) } } return y }, e.cubicExtrema = function (t, e, n, i, r) { var a = 6 * n - 12 * e + 6 * t; var o = 9 * e + 3 * i - 3 * t - 9 * n; var l = 3 * e - 3 * t; var u = 0; if (g(o)) { if (v(a))(h = -l / a) >= 0 && h <= 1 && (r[u++] = h) } else { var c = a * a - 4 * o * l; if (g(c))r[0] = -a / (2 * o); else if (c > 0) { var h; var d = s(c); var f = (-a - d) / (2 * o); (h = (-a + d) / (2 * o)) >= 0 && h <= 1 && (r[u++] = h), f >= 0 && f <= 1 && (r[u++] = f) } } return u }, e.cubicSubdivide = function (t, e, n, i, r, a) { var o = (e - t) * r + t; var s = (n - e) * r + e; var l = (i - n) * r + n; var u = (s - o) * r + o; var c = (l - s) * r + s; var h = (c - u) * r + u; a[0] = t, a[1] = o, a[2] = u, a[3] = h, a[4] = h, a[5] = c, a[6] = l, a[7] = i }, e.cubicProjectPoint = function (t, e, n, i, r, o, l, c, h, g, v) { var y; var x; var _; var b; var w; var S = 0.005; var M = 1 / 0; d[0] = h, d[1] = g; for (var I = 0; I < 1; I += 0.05)f[0] = m(t, n, r, l, I), f[1] = m(e, i, o, c, I), (b = a(d, f)) < M && (y = I, M = b); M = 1 / 0; for (var A = 0; A < 32 && !(S < u); A++)x = y - S, _ = y + S, f[0] = m(t, n, r, l, x), f[1] = m(e, i, o, c, x), b = a(f, d), x >= 0 && b < M ? (y = x, M = b) : (p[0] = m(t, n, r, l, _), p[1] = m(e, i, o, c, _), w = a(p, d), _ <= 1 && w < M ? (y = _, M = w) : S *= 0.5); return v && (v[0] = m(t, n, r, l, y), v[1] = m(e, i, o, c, y)), s(M) }, e.quadraticAt = y, e.quadraticDerivativeAt = function (t, e, n, i) { return 2 * ((1 - i) * (e - t) + i * (n - e)) }, e.quadraticRootAt = function (t, e, n, i, r) { var a = t - 2 * e + n; var o = 2 * (e - t); var l = t - i; var u = 0; if (g(a)) { if (v(o))(h = -l / o) >= 0 && h <= 1 && (r[u++] = h) } else { var c = o * o - 4 * a * l; if (g(c))(h = -o / (2 * a)) >= 0 && h <= 1 && (r[u++] = h); else if (c > 0) { var h; var d = s(c); var f = (-o - d) / (2 * a); (h = (-o + d) / (2 * a)) >= 0 && h <= 1 && (r[u++] = h), f >= 0 && f <= 1 && (r[u++] = f) } } return u }, e.quadraticExtremum = function (t, e, n) { var i = t + n - 2 * e; return i === 0 ? 0.5 : (t - e) / i }, e.quadraticSubdivide = function (t, e, n, i, r) { var a = (e - t) * i + t; var o = (n - e) * i + e; var s = (o - a) * i + a; r[0] = t, r[1] = a, r[2] = s, r[3] = s, r[4] = o, r[5] = n }, e.quadraticProjectPoint = function (t, e, n, i, r, o, l, c, h) { var g; var v = 0.005; var m = 1 / 0; d[0] = l, d[1] = c; for (var x = 0; x < 1; x += 0.05) { f[0] = y(t, n, r, x), f[1] = y(e, i, o, x), (S = a(d, f)) < m && (g = x, m = S) }m = 1 / 0; for (var _ = 0; _ < 32 && !(v < u); _++) { var b = g - v; var w = g + v; f[0] = y(t, n, r, b), f[1] = y(e, i, o, b); var S = a(f, d); if (b >= 0 && S < m)g = b, m = S; else { p[0] = y(t, n, r, w), p[1] = y(e, i, o, w); var M = a(p, d); w <= 1 && M < m ? (g = w, m = M) : v *= 0.5 } } return h && (h[0] = y(t, n, r, g), h[1] = y(e, i, o, g)), s(m) } }, function (t, e) { var n = '\0__throttleOriginMethod'; var i = '\0__throttleRate'; var r = '\0__throttleType'; function a (t, e, n) { var i; var r; var a; var o; var s; var l = 0; var u = 0; var c = null; function h () { u = (new Date()).getTime(), c = null, t.apply(a, o || []) }e = e || 0; var d = function () { i = (new Date()).getTime(), a = this, o = arguments; var t = s || e; var d = s || n; s = null, r = i - (d ? l : u) - t, clearTimeout(c), d ? c = setTimeout(h, t) : r >= 0 ? h() : c = setTimeout(h, -r), l = i }; return d.clear = function () { c && (clearTimeout(c), c = null) }, d.debounceNextCall = function (t) { s = t }, d }e.throttle = a, e.createOrUpdate = function (t, e, o, s) { var l = t[e]; if (l) { var u = l[n] || l; var c = l[r]; if (l[i] !== o || c !== s) { if (o == null || !s) return t[e] = u; (l = t[e] = a(u, o, s === 'debounce'))[n] = u, l[r] = s, l[i] = o } return l } }, e.clear = function (t, e) { var i = t[e]; i && i[n] && (t[e] = i[n]) } }, function (t, e) { t.exports = { legend: { selector: { all: '全选', inverse: '反选' } }, toolbox: { brush: { title: { rect: '矩形选择', polygon: '圈选', lineX: '横向选择', lineY: '纵向选择', keep: '保持选择', clear: '清除选择' } }, dataView: { title: '数据视图', lang: ['数据视图', '关闭', '刷新'] }, dataZoom: { title: { zoom: '区域缩放', back: '区域缩放还原' } }, magicType: { title: { line: '切换为折线图', bar: '切换为柱状图', stack: '切换为堆叠', tiled: '切换为平铺' } }, restore: { title: '还原' }, saveAsImage: { title: '保存为图片', lang: ['右键另存为图片'] } }, series: { typeNames: { pie: '饼图', bar: '柱状图', line: '折线图', scatter: '散点图', effectScatter: '涟漪散点图', radar: '雷达图', tree: '树图', treemap: '矩形树图', boxplot: '箱型图', candlestick: 'K线图', k: 'K线图', heatmap: '热力图', map: '地图', parallel: '平行坐标图', lines: '线图', graph: '关系图', sankey: '桑基图', funnel: '漏斗图', gauge: '仪表盘图', pictorialBar: '象形柱图', themeRiver: '主题河流图', sunburst: '旭日图' } }, aria: { general: { withTitle: '这是一个关于“{title}”的图表。', withoutTitle: '这是一个图表，' }, series: { single: { prefix: '', withName: '图表类型是{seriesType}，表示{seriesName}。', withoutName: '图表类型是{seriesType}。' }, multiple: { prefix: '它由{seriesCount}个图表系列组成。', withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，', withoutName: '第{seriesId}个系列是一个{seriesType}，', separator: { middle: '；', end: '。' } } }, data: { allData: '其数据是——', partialData: '其中，前{displayCnt}项是——', withName: '{name}的数据是{value}', withoutName: '{value}', separator: { middle: '，', end: '' } } } } }, function (t, e, n) { var i = n(0); var r = i.each; var a = i.map; var o = n(3); var s = o.linearMap; var l = o.getPixelPrecision; var u = o.round; var c = n(275); var h = c.createAxisTicks; var d = c.createAxisLabels; var f = c.calculateCategoryInterval; var p = [0, 1]; var g = function (t, e, n) { this.dim = t, this.scale = e, this._extent = n || [0, 0], this.inverse = !1, this.onBand = !1 }; function v (t, e) { var n = (t[1] - t[0]) / e / 2; t[0] += n, t[1] -= n }g.prototype = { constructor: g, contain: function (t) { var e = this._extent; var n = Math.min(e[0], e[1]); var i = Math.max(e[0], e[1]); return t >= n && t <= i }, containData: function (t) { return this.contain(this.dataToCoord(t)) }, getExtent: function () { return this._extent.slice() }, getPixelPrecision: function (t) { return l(t || this.scale.getExtent(), this._extent) }, setExtent: function (t, e) { var n = this._extent; n[0] = t, n[1] = e }, dataToCoord: function (t, e) { var n = this._extent; var i = this.scale; return t = i.normalize(t), this.onBand && i.type === 'ordinal' && v(n = n.slice(), i.count()), s(t, p, n, e) }, coordToData: function (t, e) { var n = this._extent; var i = this.scale; this.onBand && i.type === 'ordinal' && v(n = n.slice(), i.count()); var r = s(t, n, p, e); return this.scale.scale(r) }, pointToData: function (t, e) {}, getTicksCoords: function (t) { var e = (t = t || {}).tickModel || this.getTickModel(); var n = h(this, e).ticks; var i = a(n, function (t) { return { coord: this.dataToCoord(t), tickValue: t } }, this); return (function (t, e, n, i) { var a = e.length; if (!t.onBand || n || !a) return; var o; var s; var l = t.getExtent(); if (a === 1)e[0].coord = l[0], o = e[1] = { coord: l[0] }; else { var c = e[a - 1].tickValue - e[0].tickValue; var h = (e[a - 1].coord - e[0].coord) / c; r(e, function (t) { t.coord -= h / 2 }); var d = t.scale.getExtent(); s = 1 + d[1] - e[a - 1].tickValue, o = { coord: e[a - 1].coord + h * s }, e.push(o) } var f = l[0] > l[1]; p(e[0].coord, l[0]) && (i ? e[0].coord = l[0] : e.shift()); i && p(l[0], e[0].coord) && e.unshift({ coord: l[0] }); p(l[1], o.coord) && (i ? o.coord = l[1] : e.pop()); i && p(o.coord, l[1]) && e.push({ coord: l[1] }); function p (t, e) { return t = u(t), e = u(e), f ? t > e : t < e } }(this, i, e.get('alignWithLabel'), t.clamp)), i }, getViewLabels: function () { return d(this).labels }, getLabelModel: function () { return this.model.getModel('axisLabel') }, getTickModel: function () { return this.model.getModel('axisTick') }, getBandWidth: function () { var t = this._extent; var e = this.scale.getExtent(); var n = e[1] - e[0] + (this.onBand ? 1 : 0); n === 0 && (n = 1); var i = Math.abs(t[1] - t[0]); return Math.abs(i) / n }, isHorizontal: null, getRotate: null, calculateCategoryInterval: function () { return f(this) } }; var m = g; t.exports = m }, function (t, e, n) { var i = n(0); var r = i.retrieve; var a = i.defaults; var o = i.extend; var s = i.each; var l = n(9); var u = n(2); var c = n(12); var h = n(3); var d = h.isRadianAroundZero; var f = h.remRadian; var p = n(19).createSymbol; var g = n(15); var v = n(7).applyTransform; var m = n(21).shouldShowAllLabels; var y = Math.PI; var x = function (t, e) { this.opt = e, this.axisModel = t, a(e, { labelOffset: 0, nameDirection: 1, tickDirection: 1, labelDirection: 1, silent: !0 }), this.group = new u.Group(); var n = new u.Group({ position: e.position.slice(), rotation: e.rotation }); n.updateTransform(), this._transform = n.transform, this._dumbGroup = n }; x.prototype = { constructor: x, hasBuilder: function (t) { return !!_[t] }, add: function (t) { _[t].call(this) }, getGroup: function () { return this.group } }; var _ = { axisLine: function () { var t = this.opt; var e = this.axisModel; if (e.get('axisLine.show')) { var n = this.axisModel.axis.getExtent(); var i = this._transform; var r = [n[0], 0]; var a = [n[1], 0]; i && (v(r, r, i), v(a, a, i)); var l = o({ lineCap: 'round' }, e.getModel('axisLine.lineStyle').getLineStyle()); this.group.add(new u.Line({ anid: 'line', subPixelOptimize: !0, shape: { x1: r[0], y1: r[1], x2: a[0], y2: a[1] }, style: l, strokeContainThreshold: t.strokeContainThreshold || 5, silent: !0, z2: 1 })); var c = e.get('axisLine.symbol'); var h = e.get('axisLine.symbolSize'); var d = e.get('axisLine.symbolOffset') || 0; if (typeof d === 'number' && (d = [d, d]), c != null) { typeof c === 'string' && (c = [c, c]), typeof h !== 'string' && typeof h !== 'number' || (h = [h, h]); var f = h[0]; var g = h[1]; s([{ rotate: t.rotation + Math.PI / 2, offset: d[0], r: 0 }, { rotate: t.rotation - Math.PI / 2, offset: d[1], r: Math.sqrt((r[0] - a[0]) * (r[0] - a[0]) + (r[1] - a[1]) * (r[1] - a[1])) }], function (e, n) { if (c[n] !== 'none' && c[n] != null) { var i = p(c[n], -f / 2, -g / 2, f, g, l.stroke, !0); var a = e.r + e.offset; var o = [r[0] + a * Math.cos(t.rotation), r[1] - a * Math.sin(t.rotation)]; i.attr({ rotation: e.rotate, position: o, silent: !0, z2: 11 }), this.group.add(i) } }, this) } } }, axisTickLabel: function () { var t = this.axisModel; var e = this.opt; var n = (function (t, e, n) { var i = e.axis; if (!e.get('axisTick.show') || i.scale.isBlank()) return; for (var r = e.getModel('axisTick'), o = r.getModel('lineStyle'), s = r.get('length'), l = i.getTicksCoords(), c = [], h = [], d = t._transform, f = [], p = 0; p < l.length; p++) { var g = l[p].coord; c[0] = g, c[1] = 0, h[0] = g, h[1] = n.tickDirection * s, d && (v(c, c, d), v(h, h, d)); var m = new u.Line({ anid: 'tick_' + l[p].tickValue, subPixelOptimize: !0, shape: { x1: c[0], y1: c[1], x2: h[0], y2: h[1] }, style: a(o.getLineStyle(), { stroke: e.get('axisLine.lineStyle.color') }), z2: 2, silent: !0 }); t.group.add(m), f.push(m) } return f }(this, t, e)); var i = (function (t, e, n) { var i = e.axis; if (!r(n.axisLabelShow, e.get('axisLabel.show')) || i.scale.isBlank()) return; var a = e.getModel('axisLabel'); var o = a.get('margin'); var l = i.getViewLabels(); var h = (r(n.labelRotate, a.get('rotate')) || 0) * y / 180; var d = w(n.rotation, h, n.labelDirection); var f = e.getCategories && e.getCategories(!0); var p = []; var g = S(e); var v = e.get('triggerEvent'); return s(l, function (r, s) { var l = r.tickValue; var h = r.formattedLabel; var m = r.rawLabel; var y = a; f && f[l] && f[l].textStyle && (y = new c(f[l].textStyle, a, e.ecModel)); var x = y.getTextColor() || e.get('axisLine.lineStyle.color'); var _ = [i.dataToCoord(l), n.labelOffset + n.labelDirection * o]; var w = new u.Text({ anid: 'label_' + l, position: _, rotation: d.rotation, silent: g, z2: 10 }); u.setTextStyle(w.style, y, { text: h, textAlign: y.getShallow('align', !0) || d.textAlign, textVerticalAlign: y.getShallow('verticalAlign', !0) || y.getShallow('baseline', !0) || d.textVerticalAlign, textFill: typeof x === 'function' ? x(i.type === 'category' ? m : i.type === 'value' ? l + '' : l, s) : x }), v && (w.eventData = b(e), w.eventData.targetType = 'axisLabel', w.eventData.value = m), t._dumbGroup.add(w), w.updateTransform(), p.push(w), t.group.add(w), w.decomposeTransform() }), p }(this, t, e)); !(function (t, e, n) { if (m(t.axis)) return; var i = t.get('axisLabel.showMinLabel'); var r = t.get('axisLabel.showMaxLabel'); n = n || []; var a = (e = e || [])[0]; var o = e[1]; var s = e[e.length - 1]; var l = e[e.length - 2]; var u = n[0]; var c = n[1]; var h = n[n.length - 1]; var d = n[n.length - 2]; !1 === i ? (M(a), M(u)) : I(a, o) && (i ? (M(o), M(c)) : (M(a), M(u))); !1 === r ? (M(s), M(h)) : I(l, s) && (r ? (M(l), M(d)) : (M(s), M(h))) }(t, i, n)) }, axisName: function () { var t = this.opt; var e = this.axisModel; var n = r(t.axisName, e.get('name')); if (n) { var i; var a; var s = e.get('nameLocation'); var c = t.nameDirection; var h = e.getModel('nameTextStyle'); var p = e.get('nameGap') || 0; var g = this.axisModel.axis.getExtent(); var v = g[0] > g[1] ? -1 : 1; var m = [s === 'start' ? g[0] - v * p : s === 'end' ? g[1] + v * p : (g[0] + g[1]) / 2, A(s) ? t.labelOffset + c * p : 0]; var x = e.get('nameRotate'); x != null && (x = x * y / 180), A(s) ? i = w(t.rotation, x != null ? x : t.rotation, c) : (i = (function (t, e, n, i) { var r; var a; var o = f(n - t.rotation); var s = i[0] > i[1]; var l = e === 'start' && !s || e !== 'start' && s; d(o - y / 2) ? (a = l ? 'bottom' : 'top', r = 'center') : d(o - 1.5 * y) ? (a = l ? 'top' : 'bottom', r = 'center') : (a = 'middle', r = o < 1.5 * y && o > y / 2 ? l ? 'left' : 'right' : l ? 'right' : 'left'); return { rotation: o, textAlign: r, textVerticalAlign: a } }(t, s, x || 0, g)), (a = t.axisNameAvailableWidth) != null && (a = Math.abs(a / Math.sin(i.rotation)), !isFinite(a) && (a = null))); var _ = h.getFont(); var M = e.get('nameTruncate', !0) || {}; var I = M.ellipsis; var T = r(t.nameTruncateMaxWidth, M.maxWidth, a); var C = I != null && T != null ? l.truncateText(n, T, _, I, { minChar: 2, placeholder: M.placeholder }) : n; var D = e.get('tooltip', !0); var L = e.mainType; var P = { componentType: L, name: n, $vars: ['name'] }; P[L + 'Index'] = e.componentIndex; var k = new u.Text({ anid: 'name', __fullText: n, __truncatedText: C, position: m, rotation: i.rotation, silent: S(e), z2: 1, tooltip: D && D.show ? o({ content: n, formatter: function () { return n }, formatterParams: P }, D) : null }); u.setTextStyle(k.style, h, { text: C, textFont: _, textFill: h.getTextColor() || e.get('axisLine.lineStyle.color'), textAlign: h.get('align') || i.textAlign, textVerticalAlign: h.get('verticalAlign') || i.textVerticalAlign }), e.get('triggerEvent') && (k.eventData = b(e), k.eventData.targetType = 'axisName', k.eventData.name = n), this._dumbGroup.add(k), k.updateTransform(), this.group.add(k), k.decomposeTransform() } } }; var b = x.makeAxisEventDataBase = function (t) { var e = { componentType: t.mainType, componentIndex: t.componentIndex }; return e[t.mainType + 'Index'] = t.componentIndex, e }; var w = x.innerTextLayout = function (t, e, n) { var i; var r; var a = f(e - t); return d(a) ? (r = n > 0 ? 'top' : 'bottom', i = 'center') : d(a - y) ? (r = n > 0 ? 'bottom' : 'top', i = 'center') : (r = 'middle', i = a > 0 && a < y ? n > 0 ? 'right' : 'left' : n > 0 ? 'left' : 'right'), { rotation: a, textAlign: i, textVerticalAlign: r } }; var S = x.isLabelSilent = function (t) { var e = t.get('tooltip'); return t.get('silent') || !(t.get('triggerEvent') || e && e.show) }; function M (t) { t && (t.ignore = !0) } function I (t, e, n) { var i = t && t.getBoundingRect().clone(); var r = e && e.getBoundingRect().clone(); if (i && r) { var a = g.identity([]); return g.rotate(a, a, -t.rotation), i.applyTransform(g.mul([], a, t.getLocalTransform())), r.applyTransform(g.mul([], a, e.getLocalTransform())), i.intersect(r) } } function A (t) { return t === 'middle' || t === 'center' } var T = x; t.exports = T }, function (t, e) { var n = {}; e.register = function (t, e) { n[t] = e }, e.get = function (t) { return n[t] } }, function (t, e) { var n = Array.prototype.slice; var i = function (t) { this._$handlers = {}, this._$eventProcessor = t }; function r (t, e, n, i, r, a) { var o = t._$handlers; if (typeof n === 'function' && (r = i, i = n, n = null), !i || !e) return t; n = (function (t, e) { var n = t._$eventProcessor; return e != null && n && n.normalizeQuery && (e = n.normalizeQuery(e)), e }(t, n)), o[e] || (o[e] = []); for (var s = 0; s < o[e].length; s++) if (o[e][s].h === i) return t; var l = { h: i, one: a, query: n, ctx: r || t, callAtLast: i.zrEventfulCallAtLast }; var u = o[e].length - 1; var c = o[e][u]; return c && c.callAtLast ? o[e].splice(u, 0, l) : o[e].push(l), t }i.prototype = { constructor: i, one: function (t, e, n, i) { return r(this, t, e, n, i, !0) }, on: function (t, e, n, i) { return r(this, t, e, n, i, !1) }, isSilent: function (t) { var e = this._$handlers; return !e[t] || !e[t].length }, off: function (t, e) { var n = this._$handlers; if (!t) return this._$handlers = {}, this; if (e) { if (n[t]) { for (var i = [], r = 0, a = n[t].length; r < a; r++)n[t][r].h !== e && i.push(n[t][r]); n[t] = i }n[t] && n[t].length === 0 && delete n[t] } else delete n[t]; return this }, trigger: function (t) { var e = this._$handlers[t]; var i = this._$eventProcessor; if (e) { var r = arguments; var a = r.length; a > 3 && (r = n.call(r, 1)); for (var o = e.length, s = 0; s < o;) { var l = e[s]; if (i && i.filter && l.query != null && !i.filter(t, l.query))s++; else { switch (a) { case 1:l.h.call(l.ctx); break; case 2:l.h.call(l.ctx, r[1]); break; case 3:l.h.call(l.ctx, r[1], r[2]); break; default:l.h.apply(l.ctx, r) }l.one ? (e.splice(s, 1), o--) : s++ } } } return i && i.afterTrigger && i.afterTrigger(t), this }, triggerWithContext: function (t) { var e = this._$handlers[t]; var i = this._$eventProcessor; if (e) { var r = arguments; var a = r.length; a > 4 && (r = n.call(r, 1, r.length - 1)); for (var o = r[r.length - 1], s = e.length, l = 0; l < s;) { var u = e[l]; if (i && i.filter && u.query != null && !i.filter(t, u.query))l++; else { switch (a) { case 1:u.h.call(o); break; case 2:u.h.call(o, r[1]); break; case 3:u.h.call(o, r[1], r[2]); break; default:u.h.apply(o, r) }u.one ? (e.splice(l, 1), s--) : l++ } } } return i && i.afterTrigger && i.afterTrigger(t), this } }; var a = i; t.exports = a }, function (t, e, n) { var i = n(54); var r = n(0); var a = n(17); var o = n(70); var s = n(69).ContextCachedBy; var l = function (t) { i.call(this, t) }; l.prototype = { constructor: l, type: 'text', brush: function (t, e) { var n = this.style; this.__dirty && o.normalizeTextStyle(n, !0), n.fill = n.stroke = n.shadowBlur = n.shadowColor = n.shadowOffsetX = n.shadowOffsetY = null; var i = n.text; i != null && (i += ''), o.needDrawText(i, n) ? (this.setTransform(t), o.renderText(this, t, i, n, null, e), this.restoreTransform(t)) : t.__attrCachedBy = s.NONE }, getBoundingRect: function () { var t = this.style; if (this.__dirty && o.normalizeTextStyle(t, !0), !this._rect) { var e = t.text; e != null ? e += '' : e = ''; var n = a.getBoundingRect(t.text + '', t.font, t.textAlign, t.textVerticalAlign, t.textPadding, t.textLineHeight, t.rich); if (n.x += t.x || 0, n.y += t.y || 0, o.getStroke(t.textStroke, t.textStrokeWidth)) { var i = t.textStrokeWidth; n.x -= i / 2, n.y -= i / 2, n.width += i, n.height += i } this._rect = n } return this._rect } }, r.inherits(l, i); var u = l; t.exports = u }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = (i.isTypedArray, i.extend); var a = (i.assert, i.each); var o = i.isObject; var s = n(4); var l = s.getDataItemValue; var u = s.isDataItemOption; var c = n(3).parseDate; var h = n(56); var d = n(57); var f = d.SOURCE_FORMAT_TYPED_ARRAY; var p = d.SOURCE_FORMAT_ARRAY_ROWS; var g = d.SOURCE_FORMAT_ORIGINAL; var v = d.SOURCE_FORMAT_OBJECT_ROWS; function m (t, e) { h.isInstance(t) || (t = h.seriesDataToSource(t)), this._source = t; var n = this._data = t.data; var i = t.sourceFormat; i === f && (this._offset = 0, this._dimSize = e, this._data = n); var a = x[i === p ? i + '_' + t.seriesLayoutBy : i]; r(this, a) } var y = m.prototype; y.pure = !1, y.persistent = !0, y.getSource = function () { return this._source }; var x = { arrayRows_column: { pure: !0, count: function () { return Math.max(0, this._data.length - this._source.startIndex) }, getItem: function (t) { return this._data[t + this._source.startIndex] }, appendData: w }, arrayRows_row: { pure: !0, count: function () { var t = this._data[0]; return t ? Math.max(0, t.length - this._source.startIndex) : 0 }, getItem: function (t) { t += this._source.startIndex; for (var e = [], n = this._data, i = 0; i < n.length; i++) { var r = n[i]; e.push(r ? r[t] : null) } return e }, appendData: function () { throw new Error('Do not support appendData when set seriesLayoutBy: "row".') } }, objectRows: { pure: !0, count: _, getItem: b, appendData: w }, keyedColumns: { pure: !0, count: function () { var t = this._source.dimensionsDefine[0].name; var e = this._data[t]; return e ? e.length : 0 }, getItem: function (t) { for (var e = [], n = this._source.dimensionsDefine, i = 0; i < n.length; i++) { var r = this._data[n[i].name]; e.push(r ? r[t] : null) } return e }, appendData: function (t) { var e = this._data; a(t, function (t, n) { for (var i = e[n] || (e[n] = []), r = 0; r < (t || []).length; r++)i.push(t[r]) }) } }, original: { count: _, getItem: b, appendData: w }, typedArray: { persistent: !1, pure: !0, count: function () { return this._data ? this._data.length / this._dimSize : 0 }, getItem: function (t, e) { t -= this._offset, e = e || []; for (var n = this._dimSize * t, i = 0; i < this._dimSize; i++)e[i] = this._data[n + i]; return e }, appendData: function (t) { this._data = t }, clean: function () { this._offset += this.count(), this._data = null } } }; function _ () { return this._data.length } function b (t) { return this._data[t] } function w (t) { for (var e = 0; e < t.length; e++) this._data.push(t[e]) } var S = { arrayRows: M, objectRows: function (t, e, n, i) { return n != null ? t[i] : t }, keyedColumns: M, original: function (t, e, n, i) { var r = l(t); return n != null && r instanceof Array ? r[n] : r }, typedArray: M }; function M (t, e, n, i) { return n != null ? t[n] : t } var I = { arrayRows: A, objectRows: function (t, e, n, i) { return T(t[e], this._dimensionInfos[e]) }, keyedColumns: A, original: function (t, e, n, i) { var r = t && (t.value == null ? t : t.value); return !this._rawData.pure && u(t) && (this.hasItemOption = !0), T(r instanceof Array ? r[i] : r, this._dimensionInfos[e]) }, typedArray: function (t, e, n, i) { return t[i] } }; function A (t, e, n, i) { return T(t[i], this._dimensionInfos[e]) } function T (t, e) { var n = e && e.type; if (n === 'ordinal') { var i = e && e.ordinalMeta; return i ? i.parseAndCollect(t) : t } return n === 'time' && typeof t !== 'number' && t != null && t !== '-' && (t = +c(t)), t == null || t === '' ? NaN : +t }e.DefaultDataProvider = m, e.defaultDimValueGetters = I, e.retrieveRawValue = function (t, e, n) { if (t) { var i = t.getRawDataItem(e); if (i != null) { var r; var a; var o = t.getProvider().getSource().sourceFormat; var s = t.getDimensionInfo(n); return s && (r = s.name, a = s.index), S[o](i, e, a, r) } } }, e.retrieveRawAttr = function (t, e, n) { if (t) { var i = t.getProvider().getSource().sourceFormat; if (i === g || i === v) { var r = t.getRawDataItem(e); return i !== g || o(r) || (r = null), r ? r[n] : void 0 } } } }, function (t, e) { function n (t) { return t } function i (t, e, i, r, a) { this._old = t, this._new = e, this._oldKeyGetter = i || n, this._newKeyGetter = r || n, this.context = a } function r (t, e, n, i, r) { for (var a = 0; a < t.length; a++) { var o = '_ec_' + r[i](t[a], a); var s = e[o]; s == null ? (n.push(o), e[o] = a) : (s.length || (e[o] = s = [s]), s.push(a)) } }i.prototype = { constructor: i, add: function (t) { return this._add = t, this }, update: function (t) { return this._update = t, this }, remove: function (t) { return this._remove = t, this }, execute: function () { var t = this._old; var e = this._new; var n = {}; var i = []; var a = []; for (r(t, {}, i, '_oldKeyGetter', this), r(e, n, a, '_newKeyGetter', this), o = 0; o < t.length; o++) { if ((l = n[s = i[o]]) != null)(c = l.length) ? (c === 1 && (n[s] = null), l = l.shift()) : n[s] = null, this._update && this._update(l, o); else this._remove && this._remove(o) } for (var o = 0; o < a.length; o++) { var s = a[o]; if (n.hasOwnProperty(s)) { var l; if ((l = n[s]) == null) continue; if (l.length) for (var u = 0, c = l.length; u < c; u++) this._add && this._add(l[u]); else this._add && this._add(l) } } } }; var a = i; t.exports = a }, function (t, e, n) { var i = n(0).isFunction; t.exports = function (t, e, n) { return { seriesType: t, performRawSeries: !0, reset: function (t, r, a) { var o = t.getData(); var s = t.get('symbol'); var l = t.get('symbolSize'); var u = t.get('symbolKeepAspect'); var c = i(s); var h = i(l); var d = c || h; var f = !c && s ? s : e; var p = h ? null : l; if (o.setVisual({ legendSymbol: n || f, symbol: f, symbolSize: p, symbolKeepAspect: u }), !r.isSeriesFiltered(t)) return { dataEach: o.hasItemOption || d ? function (e, n) { if (d) { var i = t.getRawValue(n); var r = t.getDataParams(n); c && e.setItemVisual(n, 'symbol', s(i, r)), h && e.setItemVisual(n, 'symbolSize', l(i, r)) } if (e.hasItemOption) { var a = e.getItemModel(n); var o = a.getShallow('symbol', !0); var u = a.getShallow('symbolSize', !0); var f = a.getShallow('symbolKeepAspect', !0); o != null && e.setItemVisual(n, 'symbol', o), u != null && e.setItemVisual(n, 'symbolSize', u), f != null && e.setItemVisual(n, 'symbolKeepAspect', f) } } : null } } } } }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(80); var a = i.extendComponentView({ type: 'axis', _axisPointer: null, axisPointerClass: null, render: function (t, e, n, i) { this.axisPointerClass && r.fixValue(t), a.superApply(this, 'render', arguments), o(this, t, e, n, i, !0) }, updateAxisPointer: function (t, e, n, i, r) { o(this, t, e, n, i, !1) }, remove: function (t, e) { var n = this._axisPointer; n && n.remove(e), a.superApply(this, 'remove', arguments) }, dispose: function (t, e) { s(this, e), a.superApply(this, 'dispose', arguments) } }); function o (t, e, n, i, o, l) { var u = a.getAxisPointerClass(t.axisPointerClass); if (u) { var c = r.getAxisPointerModel(e); c ? (t._axisPointer || (t._axisPointer = new u())).render(e, c, i, l) : s(t, i) } } function s (t, e, n) { var i = t._axisPointer; i && i.dispose(e, n), t._axisPointer = null } var l = []; a.registerAxisPointerClass = function (t, e) { l[t] = e }, a.getAxisPointerClass = function (t) { return t && l[t] }; var u = a; t.exports = u }, function (t, e, n) { var i = n(0); function r (t) { for (var e = []; t;)(t = t.parentNode) && e.push(t); return e.reverse() }e.retrieveTargetInfo = function (t, e, n) { if (t && i.indexOf(e, t.type) >= 0) { var r = n.getData().tree.root; var a = t.targetNode; if (typeof a === 'string' && (a = r.getNodeById(a)), a && r.contains(a)) return { node: a }; var o = t.targetNodeId; if (o != null && (a = r.getNodeById(o))) return { node: a } } }, e.getPathToRoot = r, e.aboveViewRoot = function (t, e) { var n = r(t); return i.indexOf(n, e) >= 0 }, e.wrapTreePathInfo = function (t, e) { for (var n = []; t;) { var i = t.dataIndex; n.push({ name: t.name, dataIndex: i, value: e.getRawValue(i) }), t = t.parentNode } return n.reverse(), n } }, function (t, e, n) { var i = n(0); var r = n(23); var a = n(3).linearMap; var o = i.each; var s = i.isObject; var l = -1; var u = function (t) { var e = t.mappingMethod; var n = t.type; var r = this.option = i.clone(t); this.type = n, this.mappingMethod = e, this._normalizeData = _[e]; var a = c[n]; this.applyVisual = a.applyVisual, this.getColorMapper = a.getColorMapper, this._doMap = a._doMap[e], e === 'piecewise' ? (h(r), (function (t) { var e = t.pieceList; t.hasSpecialVisual = !1, i.each(e, function (e, n) { e.originIndex = n, e.visual != null && (t.hasSpecialVisual = !0) }) }(r))) : e === 'category' ? r.categories ? (function (t) { var e = t.categories; var n = t.visual; var r = t.categoryMap = {}; if (o(e, function (t, e) { r[t] = e }), !i.isArray(n)) { var a = []; i.isObject(n) ? o(n, function (t, e) { var n = r[e]; a[n != null ? n : l] = t }) : a[l] = n, n = x(t, a) } for (var s = e.length - 1; s >= 0; s--)n[s] == null && (delete r[e[s]], e.pop()) }(r)) : h(r, !0) : (i.assert(e !== 'linear' || r.dataExtent), h(r)) }; u.prototype = { constructor: u, mapValueToVisual: function (t) { var e = this._normalizeData(t); return this._doMap(e, t) }, getNormalizer: function () { return i.bind(this._normalizeData, this) } }; var c = u.visualHandlers = { color: { applyVisual: p('color'), getColorMapper: function () { var t = this.option; return i.bind(t.mappingMethod === 'category' ? function (t, e) { return !e && (t = this._normalizeData(t)), g.call(this, t) } : function (e, n, i) { var a = !!i; return !n && (e = this._normalizeData(e)), i = r.fastLerp(e, t.parsedVisual, i), a ? i : r.stringify(i, 'rgba') }, this) }, _doMap: { linear: function (t) { return r.stringify(r.fastLerp(t, this.option.parsedVisual), 'rgba') }, category: g, piecewise: function (t, e) { var n = y.call(this, e); return n == null && (n = r.stringify(r.fastLerp(t, this.option.parsedVisual), 'rgba')), n }, fixed: v } }, colorHue: d(function (t, e) { return r.modifyHSL(t, e) }), colorSaturation: d(function (t, e) { return r.modifyHSL(t, null, e) }), colorLightness: d(function (t, e) { return r.modifyHSL(t, null, null, e) }), colorAlpha: d(function (t, e) { return r.modifyAlpha(t, e) }), opacity: { applyVisual: p('opacity'), _doMap: m([0, 1]) }, liftZ: { applyVisual: p('liftZ'), _doMap: { linear: v, category: v, piecewise: v, fixed: v } }, symbol: { applyVisual: function (t, e, n) { var r = this.mapValueToVisual(t); if (i.isString(r))n('symbol', r); else if (s(r)) for (var a in r)r.hasOwnProperty(a) && n(a, r[a]) }, _doMap: { linear: f, category: g, piecewise: function (t, e) { var n = y.call(this, e); return n == null && (n = f.call(this, t)), n }, fixed: v } }, symbolSize: { applyVisual: p('symbolSize'), _doMap: m([0, 1]) } }; function h (t, e) { var n = t.visual; var r = []; i.isObject(n) ? o(n, function (t) { r.push(t) }) : n != null && r.push(n); e || r.length !== 1 || { color: 1, symbol: 1 }.hasOwnProperty(t.type) || (r[1] = r[0]), x(t, r) } function d (t) { return { applyVisual: function (e, n, i) { e = this.mapValueToVisual(e), i('color', t(n('color'), e)) }, _doMap: m([0, 1]) } } function f (t) { var e = this.option.visual; return e[Math.round(a(t, [0, 1], [0, e.length - 1], !0))] || {} } function p (t) { return function (e, n, i) { i(t, this.mapValueToVisual(e)) } } function g (t) { var e = this.option.visual; return e[this.option.loop && t !== l ? t % e.length : t] } function v () { return this.option.visual[0] } function m (t) { return { linear: function (e) { return a(e, t, this.option.visual, !0) }, category: g, piecewise: function (e, n) { var i = y.call(this, n); return i == null && (i = a(e, t, this.option.visual, !0)), i }, fixed: v } } function y (t) { var e = this.option; var n = e.pieceList; if (e.hasSpecialVisual) { var i = n[u.findPieceIndex(t, n)]; if (i && i.visual) return i.visual[this.type] } } function x (t, e) { return t.visual = e, t.type === 'color' && (t.parsedVisual = i.map(e, function (t) { return r.parse(t) })), e } var _ = { linear: function (t) { return a(t, this.option.dataExtent, [0, 1], !0) }, piecewise: function (t) { var e = this.option.pieceList; var n = u.findPieceIndex(t, e, !0); if (n != null) return a(n, [0, e.length - 1], [0, 1], !0) }, category: function (t) { var e = this.option.categories ? this.option.categoryMap[t] : t; return e == null ? l : e }, fixed: i.noop }; function b (t, e, n) { return t ? e <= n : e < n }u.listVisualTypes = function () { var t = []; return i.each(c, function (e, n) { t.push(n) }), t }, u.addVisualHandler = function (t, e) { c[t] = e }, u.isValidType = function (t) { return c.hasOwnProperty(t) }, u.eachVisual = function (t, e, n) { i.isObject(t) ? i.each(t, e, n) : e.call(n, t) }, u.mapVisual = function (t, e, n) { var r; var a = i.isArray(t) ? [] : i.isObject(t) ? {} : (r = !0, null); return u.eachVisual(t, function (t, i) { var o = e.call(n, t, i); r ? a = o : a[i] = o }), a }, u.retrieveVisuals = function (t) { var e; var n = {}; return t && o(c, function (i, r) { t.hasOwnProperty(r) && (n[r] = t[r], e = !0) }), e ? n : null }, u.prepareVisualTypes = function (t) { if (s(t)) { var e = []; o(t, function (t, n) { e.push(n) }), t = e } else { if (!i.isArray(t)) return []; t = t.slice() } return t.sort(function (t, e) { return e === 'color' && t !== 'color' && t.indexOf('color') === 0 ? 1 : -1 }), t }, u.dependsOn = function (t, e) { return e === 'color' ? !(!t || t.indexOf(e) !== 0) : t === e }, u.findPieceIndex = function (t, e, n) { for (var i, r = 1 / 0, a = 0, o = e.length; a < o; a++) { var s = e[a].value; if (s != null) { if (s === t || typeof s === 'string' && s === t + '') return a; n && h(s, a) } } for (a = 0, o = e.length; a < o; a++) { var l = e[a]; var u = l.interval; var c = l.close; if (u) { if (u[0] === -1 / 0) { if (b(c[1], t, u[1])) return a } else if (u[1] === 1 / 0) { if (b(c[0], u[0], t)) return a } else if (b(c[0], u[0], t) && b(c[1], t, u[1])) return a; n && h(u[0], a), n && h(u[1], a) } } if (n) return t === 1 / 0 ? e.length - 1 : t === -1 / 0 ? 0 : i; function h (e, n) { var a = Math.abs(e - t); a < r && (r = a, i = n) } }; var w = u; t.exports = w }, function (t, e, n) { var i = n(0); var r = n(131); var a = n(8); var o = function (t) { for (var e in t = t || {}, r.call(this, t), t)t.hasOwnProperty(e) && (this[e] = t[e]); this._children = [], this.__storage = null, this.__dirty = !0 }; o.prototype = { constructor: o, isGroup: !0, type: 'group', silent: !1, children: function () { return this._children.slice() }, childAt: function (t) { return this._children[t] }, childOfName: function (t) { for (var e = this._children, n = 0; n < e.length; n++) if (e[n].name === t) return e[n] }, childCount: function () { return this._children.length }, add: function (t) { return t && t !== this && t.parent !== this && (this._children.push(t), this._doAdd(t)), this }, addBefore: function (t, e) { if (t && t !== this && t.parent !== this && e && e.parent === this) { var n = this._children; var i = n.indexOf(e); i >= 0 && (n.splice(i, 0, t), this._doAdd(t)) } return this }, _doAdd: function (t) { t.parent && t.parent.remove(t), t.parent = this; var e = this.__storage; var n = this.__zr; e && e !== t.__storage && (e.addToStorage(t), t instanceof o && t.addChildrenToStorage(e)), n && n.refresh() }, remove: function (t) { var e = this.__zr; var n = this.__storage; var r = this._children; var a = i.indexOf(r, t); return a < 0 ? this : (r.splice(a, 1), t.parent = null, n && (n.delFromStorage(t), t instanceof o && t.delChildrenFromStorage(n)), e && e.refresh(), this) }, removeAll: function () { var t; var e; var n = this._children; var i = this.__storage; for (e = 0; e < n.length; e++)t = n[e], i && (i.delFromStorage(t), t instanceof o && t.delChildrenFromStorage(i)), t.parent = null; return n.length = 0, this }, eachChild: function (t, e) { for (var n = this._children, i = 0; i < n.length; i++) { var r = n[i]; t.call(e, r, i) } return this }, traverse: function (t, e) { for (var n = 0; n < this._children.length; n++) { var i = this._children[n]; t.call(e, i), i.type === 'group' && i.traverse(t, e) } return this }, addChildrenToStorage: function (t) { for (var e = 0; e < this._children.length; e++) { var n = this._children[e]; t.addToStorage(n), n instanceof o && n.addChildrenToStorage(t) } }, delChildrenFromStorage: function (t) { for (var e = 0; e < this._children.length; e++) { var n = this._children[e]; t.delFromStorage(n), n instanceof o && n.delChildrenFromStorage(t) } }, dirty: function () { return this.__dirty = !0, this.__zr && this.__zr.refresh(), this }, getBoundingRect: function (t) { for (var e = null, n = new a(0, 0, 0, 0), i = t || this._children, r = [], o = 0; o < i.length; o++) { var s = i[o]; if (!s.ignore && !s.invisible) { var l = s.getBoundingRect(); var u = s.getLocalTransform(r); u ? (n.copy(l), n.applyTransform(u), (e = e || n.clone()).union(n)) : (e = e || l.clone()).union(l) } } return e || n } }, i.inherits(o, r); var s = o; t.exports = s }, function (t, e, n) { var i = n(54); var r = n(8); var a = n(0); var o = n(89); function s (t) { i.call(this, t) }s.prototype = { constructor: s, type: 'image', brush: function (t, e) { var n = this.style; var i = n.image; n.bind(t, this, e); var r = this._image = o.createOrUpdateImage(i, this._image, this, this.onload); if (r && o.isImageReady(r)) { var a = n.x || 0; var s = n.y || 0; var l = n.width; var u = n.height; var c = r.width / r.height; if (l == null && u != null ? l = u * c : u == null && l != null ? u = l / c : l == null && u == null && (l = r.width, u = r.height), this.setTransform(t), n.sWidth && n.sHeight) { var h = n.sx || 0; var d = n.sy || 0; t.drawImage(r, h, d, n.sWidth, n.sHeight, a, s, l, u) } else if (n.sx && n.sy) { var f = l - (h = n.sx); var p = u - (d = n.sy); t.drawImage(r, h, d, f, p, a, s, l, u) } else t.drawImage(r, a, s, l, u); n.text != null && (this.restoreTransform(t), this.drawRectText(t, this.getBoundingRect())) } }, getBoundingRect: function () { var t = this.style; return this._rect || (this._rect = new r(t.x || 0, t.y || 0, t.width || 0, t.height || 0)), this._rect } }, a.inherits(s, i); var l = s; t.exports = l }, function (t, e, n) { var i = n(0); t.exports = function (t) { for (var e = 0; e < t.length; e++)t[e][1] || (t[e][1] = t[e][0]); return function (e, n, r) { for (var a = {}, o = 0; o < t.length; o++) { var s = t[o][1]; if (!(n && i.indexOf(n, s) >= 0 || r && i.indexOf(r, s) < 0)) { var l = e.getShallow(s); l != null && (a[t[o][0]] = l) } } return a } } }, function (t, e, n) { var i = n(28); var r = n(7); var a = n(71); var o = n(8); var s = n(68).devicePixelRatio; var l = { M: 1, L: 2, C: 3, Q: 4, A: 5, Z: 6, R: 7 }; var u = []; var c = []; var h = []; var d = []; var f = Math.min; var p = Math.max; var g = Math.cos; var v = Math.sin; var m = Math.sqrt; var y = Math.abs; var x = typeof Float32Array !== 'undefined'; var _ = function (t) { this._saveData = !t, this._saveData && (this.data = []), this._ctx = null }; _.prototype = { constructor: _, _xi: 0, _yi: 0, _x0: 0, _y0: 0, _ux: 0, _uy: 0, _len: 0, _lineDash: null, _dashOffset: 0, _dashIdx: 0, _dashSum: 0, setScale: function (t, e, n) { n = n || 0, this._ux = y(n / s / t) || 0, this._uy = y(n / s / e) || 0 }, getContext: function () { return this._ctx }, beginPath: function (t) { return this._ctx = t, t && t.beginPath(), t && (this.dpr = t.dpr), this._saveData && (this._len = 0), this._lineDash && (this._lineDash = null, this._dashOffset = 0), this }, moveTo: function (t, e) { return this.addData(l.M, t, e), this._ctx && this._ctx.moveTo(t, e), this._x0 = t, this._y0 = e, this._xi = t, this._yi = e, this }, lineTo: function (t, e) { var n = y(t - this._xi) > this._ux || y(e - this._yi) > this._uy || this._len < 5; return this.addData(l.L, t, e), this._ctx && n && (this._needsDash() ? this._dashedLineTo(t, e) : this._ctx.lineTo(t, e)), n && (this._xi = t, this._yi = e), this }, bezierCurveTo: function (t, e, n, i, r, a) { return this.addData(l.C, t, e, n, i, r, a), this._ctx && (this._needsDash() ? this._dashedBezierTo(t, e, n, i, r, a) : this._ctx.bezierCurveTo(t, e, n, i, r, a)), this._xi = r, this._yi = a, this }, quadraticCurveTo: function (t, e, n, i) { return this.addData(l.Q, t, e, n, i), this._ctx && (this._needsDash() ? this._dashedQuadraticTo(t, e, n, i) : this._ctx.quadraticCurveTo(t, e, n, i)), this._xi = n, this._yi = i, this }, arc: function (t, e, n, i, r, a) { return this.addData(l.A, t, e, n, n, i, r - i, 0, a ? 0 : 1), this._ctx && this._ctx.arc(t, e, n, i, r, a), this._xi = g(r) * n + t, this._yi = v(r) * n + e, this }, arcTo: function (t, e, n, i, r) { return this._ctx && this._ctx.arcTo(t, e, n, i, r), this }, rect: function (t, e, n, i) { return this._ctx && this._ctx.rect(t, e, n, i), this.addData(l.R, t, e, n, i), this }, closePath: function () { this.addData(l.Z); var t = this._ctx; var e = this._x0; var n = this._y0; return t && (this._needsDash() && this._dashedLineTo(e, n), t.closePath()), this._xi = e, this._yi = n, this }, fill: function (t) { t && t.fill(), this.toStatic() }, stroke: function (t) { t && t.stroke(), this.toStatic() }, setLineDash: function (t) { if (t instanceof Array) { this._lineDash = t, this._dashIdx = 0; for (var e = 0, n = 0; n < t.length; n++)e += t[n]; this._dashSum = e } return this }, setLineDashOffset: function (t) { return this._dashOffset = t, this }, len: function () { return this._len }, setData: function (t) { var e = t.length; this.data && this.data.length === e || !x || (this.data = new Float32Array(e)); for (var n = 0; n < e; n++) this.data[n] = t[n]; this._len = e }, appendPath: function (t) { t instanceof Array || (t = [t]); for (var e = t.length, n = 0, i = this._len, r = 0; r < e; r++)n += t[r].len(); x && this.data instanceof Float32Array && (this.data = new Float32Array(i + n)); for (r = 0; r < e; r++) for (var a = t[r].data, o = 0; o < a.length; o++) this.data[i++] = a[o]; this._len = i }, addData: function (t) { if (this._saveData) { var e = this.data; this._len + arguments.length > e.length && (this._expandData(), e = this.data); for (var n = 0; n < arguments.length; n++)e[this._len++] = arguments[n]; this._prevCmd = t } }, _expandData: function () { if (!(this.data instanceof Array)) { for (var t = [], e = 0; e < this._len; e++)t[e] = this.data[e]; this.data = t } }, _needsDash: function () { return this._lineDash }, _dashedLineTo: function (t, e) { var n; var i; var r = this._dashSum; var a = this._dashOffset; var o = this._lineDash; var s = this._ctx; var l = this._xi; var u = this._yi; var c = t - l; var h = e - u; var d = m(c * c + h * h); var g = l; var v = u; var y = o.length; for (a < 0 && (a = r + a), g -= (a %= r) * (c /= d), v -= a * (h /= d); c > 0 && g <= t || c < 0 && g >= t || c === 0 && (h > 0 && v <= e || h < 0 && v >= e);)g += c * (n = o[i = this._dashIdx]), v += h * n, this._dashIdx = (i + 1) % y, c > 0 && g < l || c < 0 && g > l || h > 0 && v < u || h < 0 && v > u || s[i % 2 ? 'moveTo' : 'lineTo'](c >= 0 ? f(g, t) : p(g, t), h >= 0 ? f(v, e) : p(v, e)); c = g - t, h = v - e, this._dashOffset = -m(c * c + h * h) }, _dashedBezierTo: function (t, e, n, r, a, o) { var s; var l; var u; var c; var h; var d = this._dashSum; var f = this._dashOffset; var p = this._lineDash; var g = this._ctx; var v = this._xi; var y = this._yi; var x = i.cubicAt; var _ = 0; var b = this._dashIdx; var w = p.length; var S = 0; for (f < 0 && (f = d + f), f %= d, s = 0; s < 1; s += 0.1)l = x(v, t, n, a, s + 0.1) - x(v, t, n, a, s), u = x(y, e, r, o, s + 0.1) - x(y, e, r, o, s), _ += m(l * l + u * u); for (;b < w && !((S += p[b]) > f); b++);for (s = (S - f) / _; s <= 1;)c = x(v, t, n, a, s), h = x(y, e, r, o, s), b % 2 ? g.moveTo(c, h) : g.lineTo(c, h), s += p[b] / _, b = (b + 1) % w; b % 2 != 0 && g.lineTo(a, o), l = a - c, u = o - h, this._dashOffset = -m(l * l + u * u) }, _dashedQuadraticTo: function (t, e, n, i) { var r = n; var a = i; n = (n + 2 * t) / 3, i = (i + 2 * e) / 3, t = (this._xi + 2 * t) / 3, e = (this._yi + 2 * e) / 3, this._dashedBezierTo(t, e, n, i, r, a) }, toStatic: function () { var t = this.data; t instanceof Array && (t.length = this._len, x && (this.data = new Float32Array(t))) }, getBoundingRect: function () { u[0] = u[1] = h[0] = h[1] = Number.MAX_VALUE, c[0] = c[1] = d[0] = d[1] = -Number.MAX_VALUE; for (var t = this.data, e = 0, n = 0, i = 0, s = 0, f = 0; f < t.length;) { var p = t[f++]; switch (f === 1 && (i = e = t[f], s = n = t[f + 1]), p) { case l.M:e = i = t[f++], n = s = t[f++], h[0] = i, h[1] = s, d[0] = i, d[1] = s; break; case l.L:a.fromLine(e, n, t[f], t[f + 1], h, d), e = t[f++], n = t[f++]; break; case l.C:a.fromCubic(e, n, t[f++], t[f++], t[f++], t[f++], t[f], t[f + 1], h, d), e = t[f++], n = t[f++]; break; case l.Q:a.fromQuadratic(e, n, t[f++], t[f++], t[f], t[f + 1], h, d), e = t[f++], n = t[f++]; break; case l.A:var m = t[f++]; var y = t[f++]; var x = t[f++]; var _ = t[f++]; var b = t[f++]; var w = t[f++] + b; f += 1; var S = 1 - t[f++]; f === 1 && (i = g(b) * x + m, s = v(b) * _ + y), a.fromArc(m, y, x, _, b, w, S, h, d), e = g(w) * x + m, n = v(w) * _ + y; break; case l.R:i = e = t[f++], s = n = t[f++]; var M = t[f++]; var I = t[f++]; a.fromLine(i, s, i + M, s + I, h, d); break; case l.Z:e = i, n = s }r.min(u, u, h), r.max(c, c, d) } return f === 0 && (u[0] = u[1] = c[0] = c[1] = 0), new o(u[0], u[1], c[0] - u[0], c[1] - u[1]) }, rebuildPath: function (t) { for (var e, n, i, r, a, o, s = this.data, u = this._ux, c = this._uy, h = this._len, d = 0; d < h;) { var f = s[d++]; switch (d === 1 && (e = i = s[d], n = r = s[d + 1]), f) { case l.M:e = i = s[d++], n = r = s[d++], t.moveTo(i, r); break; case l.L:a = s[d++], o = s[d++], (y(a - i) > u || y(o - r) > c || d === h - 1) && (t.lineTo(a, o), i = a, r = o); break; case l.C:t.bezierCurveTo(s[d++], s[d++], s[d++], s[d++], s[d++], s[d++]), i = s[d - 2], r = s[d - 1]; break; case l.Q:t.quadraticCurveTo(s[d++], s[d++], s[d++], s[d++]), i = s[d - 2], r = s[d - 1]; break; case l.A:var p = s[d++]; var m = s[d++]; var x = s[d++]; var _ = s[d++]; var b = s[d++]; var w = s[d++]; var S = s[d++]; var M = s[d++]; var I = x > _ ? x : _; var A = x > _ ? 1 : x / _; var T = x > _ ? _ / x : 1; var C = b + w; Math.abs(x - _) > 0.001 ? (t.translate(p, m), t.rotate(S), t.scale(A, T), t.arc(0, 0, I, b, C, 1 - M), t.scale(1 / A, 1 / T), t.rotate(-S), t.translate(-p, -m)) : t.arc(p, m, I, b, C, 1 - M), d === 1 && (e = g(b) * x + p, n = v(b) * _ + m), i = g(C) * x + p, r = v(C) * _ + m; break; case l.R:e = i = s[d], n = r = s[d + 1], t.rect(s[d++], s[d++], s[d++], s[d++]); break; case l.Z:t.closePath(), i = e, r = n } } } }, _.CMD = l; var b = _; t.exports = b }, function (t, e, n) { var i = n(4).makeInner; t.exports = function () { var t = i(); return function (e) { var n = t(e); var i = e.pipelineContext; var r = n.large; var a = n.progressiveRender; var o = n.large = i.large; var s = n.progressiveRender = i.progressiveRender; return !!(r ^ o || a ^ s) && 'reset' } } }, function (t, e, n) { var i = n(157); t.exports = function (t, e) { return i((e = e || {}).coordDimensions || [], t, { dimsDef: e.dimensionsDefine || t.dimensionsDefine, encodeDef: e.encodeDefine || t.encodeDefine, dimCount: e.dimensionsCount, generateCoord: e.generateCoord, generateCoordCount: e.generateCoordCount }) } }, function (t, e, n) { var i = n(0); var r = { getMin: function (t) { var e = this.option; var n = t || e.rangeStart == null ? e.min : e.rangeStart; return this.axis && n != null && n !== 'dataMin' && typeof n !== 'function' && !i.eqNaN(n) && (n = this.axis.scale.parse(n)), n }, getMax: function (t) { var e = this.option; var n = t || e.rangeEnd == null ? e.max : e.rangeEnd; return this.axis && n != null && n !== 'dataMax' && typeof n !== 'function' && !i.eqNaN(n) && (n = this.axis.scale.parse(n)), n }, getNeedCrossZero: function () { var t = this.option; return t.rangeStart == null && t.rangeEnd == null && !t.scale }, getCoordSysModel: i.noop, setRange: function (t, e) { this.option.rangeStart = t, this.option.rangeEnd = e }, resetRange: function () { this.option.rangeStart = this.option.rangeEnd = null } }; t.exports = r }, function (t, e, n) { var i = n(47); var r = n(18); var a = n(0); var o = a.extend; var s = a.isArray; t.exports = function (t, e, n) { e = s(e) && { coordDimensions: e } || o({}, e); var a = t.getSource(); var l = i(a, e); var u = new r(l, t); return u.initData(a, n), u } }, function (t, e) { function n (t, e) { var n = t[e] - t[1 - e]; return { span: Math.abs(n), sign: n > 0 ? -1 : n < 0 ? 1 : e ? -1 : 1 } } function i (t, e) { return Math.min(e[1] != null ? e[1] : 1 / 0, Math.max(e[0] != null ? e[0] : -1 / 0, t)) }t.exports = function (t, e, r, a, o, s) { t = t || 0; var l = r[1] - r[0]; if (o != null && (o = i(o, [0, l])), s != null && (s = Math.max(s, o != null ? o : 0)), a === 'all') { var u = Math.abs(e[1] - e[0]); u = i(u, [0, l]), o = s = i(u, [o, s]), a = 0 }e[0] = i(e[0], r), e[1] = i(e[1], r); var c = n(e, a); e[a] += t; var h = o || 0; var d = r.slice(); c.sign < 0 ? d[0] += h : d[1] -= h, e[a] = i(e[a], d); var f = n(e, a); return o != null && (f.sign !== c.sign || f.span < o) && (e[1 - a] = e[a] + c.sign * o), f = n(e, a), s != null && f.span > s && (e[1 - a] = e[a] + f.sign * s), e } }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(11); var o = n(4); var s = n(112); var l = n(463); var u = r.each; var c = s.eachAxisDim; function h (t) { var e = {}; return u(['start', 'end', 'startValue', 'endValue', 'throttle'], function (n) { t.hasOwnProperty(n) && (e[n] = t[n]) }), e } function d (t, e) { var n = t._rangePropMode; var i = t.get('rangeMode'); u([['start', 'startValue'], ['end', 'endValue']], function (t, r) { var a = e[t[0]] != null; var o = e[t[1]] != null; a && !o ? n[r] = 'percent' : !a && o ? n[r] = 'value' : i ? n[r] = i[r] : a && (n[r] = 'percent') }) } var f = i.extendComponentModel({ type: 'dataZoom', dependencies: ['xAxis', 'yAxis', 'zAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series'], defaultOption: { zlevel: 0, z: 4, orient: null, xAxisIndex: null, yAxisIndex: null, filterMode: 'filter', throttle: null, start: 0, end: 100, startValue: null, endValue: null, minSpan: null, maxSpan: null, minValueSpan: null, maxValueSpan: null, rangeMode: null }, init: function (t, e, n) { this._dataIntervalByAxis = {}, this._dataInfo = {}, this._axisProxies = {}, this.textStyleModel, this._autoThrottle = !0, this._rangePropMode = ['percent', 'percent']; var i = h(t); this.settledOption = i, this.mergeDefaultAndTheme(t, n), this.doInit(i) }, mergeOption: function (t) { var e = h(t); r.merge(this.option, t, !0), r.merge(this.settledOption, e, !0), this.doInit(e) }, doInit: function (t) { var e = this.option; a.canvasSupported || (e.realtime = !1), this._setDefaultThrottle(t), d(this, t); var n = this.settledOption; u([['start', 'startValue'], ['end', 'endValue']], function (t, i) { this._rangePropMode[i] === 'value' && (e[t[0]] = n[t[0]] = null) }, this), this.textStyleModel = this.getModel('textStyle'), this._resetTarget(), this._giveAxisProxies() }, _giveAxisProxies: function () { var t = this._axisProxies; this.eachTargetAxis(function (e, n, i, r) { var a = this.dependentModels[e.axis][n]; var o = a.__dzAxisProxy || (a.__dzAxisProxy = new l(e.name, n, this, r)); t[e.name + '_' + n] = o }, this) }, _resetTarget: function () { var t = this.option; var e = this._judgeAutoMode(); c(function (e) { var n = e.axisIndex; t[n] = o.normalizeToArray(t[n]) }, this), e === 'axisIndex' ? this._autoSetAxisIndex() : e === 'orient' && this._autoSetOrient() }, _judgeAutoMode: function () { var t = this.option; var e = !1; c(function (n) { t[n.axisIndex] != null && (e = !0) }, this); var n = t.orient; return n == null && e ? 'orient' : e ? void 0 : (n == null && (t.orient = 'horizontal'), 'axisIndex') }, _autoSetAxisIndex: function () { var t = !0; var e = this.get('orient', !0); var n = this.option; var i = this.dependentModels; if (t) { var a = e === 'vertical' ? 'y' : 'x'; i[a + 'Axis'].length ? (n[a + 'AxisIndex'] = [0], t = !1) : u(i.singleAxis, function (i) { t && i.get('orient', !0) === e && (n.singleAxisIndex = [i.componentIndex], t = !1) }) }t && c(function (e) { if (t) { var i = []; var r = this.dependentModels[e.axis]; if (r.length && !i.length) for (var a = 0, o = r.length; a < o; a++)r[a].get('type') === 'category' && i.push(a); n[e.axisIndex] = i, i.length && (t = !1) } }, this), t && this.ecModel.eachSeries(function (t) { this._isSeriesHasAllAxesTypeOf(t, 'value') && c(function (e) { var i = n[e.axisIndex]; var a = t.get(e.axisIndex); var o = t.get(e.axisId); a = t.ecModel.queryComponents({ mainType: e.axis, index: a, id: o })[0].componentIndex, r.indexOf(i, a) < 0 && i.push(a) }) }, this) }, _autoSetOrient: function () { var t; this.eachTargetAxis(function (e) { !t && (t = e.name) }, this), this.option.orient = t === 'y' ? 'vertical' : 'horizontal' }, _isSeriesHasAllAxesTypeOf: function (t, e) { var n = !0; return c(function (i) { var r = t.get(i.axisIndex); var a = this.dependentModels[i.axis][r]; a && a.get('type') === e || (n = !1) }, this), n }, _setDefaultThrottle: function (t) { if (t.hasOwnProperty('throttle') && (this._autoThrottle = !1), this._autoThrottle) { var e = this.ecModel.option; this.option.throttle = e.animation && e.animationDurationUpdate > 0 ? 100 : 20 } }, getFirstTargetAxisModel: function () { var t; return c(function (e) { if (t == null) { var n = this.get(e.axisIndex); n.length && (t = this.dependentModels[e.axis][n[0]]) } }, this), t }, eachTargetAxis: function (t, e) { var n = this.ecModel; c(function (i) { u(this.get(i.axisIndex), function (r) { t.call(e, i, r, this, n) }, this) }, this) }, getAxisProxy: function (t, e) { return this._axisProxies[t + '_' + e] }, getAxisModel: function (t, e) { var n = this.getAxisProxy(t, e); return n && n.getAxisModel() }, setRawRange: function (t) { var e = this.option; var n = this.settledOption; u([['start', 'startValue'], ['end', 'endValue']], function (i) { t[i[0]] == null && t[i[1]] == null || (e[i[0]] = n[i[0]] = t[i[0]], e[i[1]] = n[i[1]] = t[i[1]]) }, this), d(this, t) }, setCalculatedRange: function (t) { var e = this.option; u(['start', 'startValue', 'end', 'endValue'], function (n) { e[n] = t[n] }) }, getPercentRange: function () { var t = this.findRepresentativeAxisProxy(); if (t) return t.getDataPercentWindow() }, getValueRange: function (t, e) { if (t != null || e != null) return this.getAxisProxy(t, e).getDataValueWindow(); var n = this.findRepresentativeAxisProxy(); return n ? n.getDataValueWindow() : void 0 }, findRepresentativeAxisProxy: function (t) { if (t) return t.__dzAxisProxy; var e = this._axisProxies; for (var n in e) if (e.hasOwnProperty(n) && e[n].hostedBy(this)) return e[n]; for (var n in e) if (e.hasOwnProperty(n) && !e[n].hostedBy(this)) return e[n] }, getRangePropMode: function () { return this._rangePropMode.slice() } }); t.exports = f }, function (t, e, n) { var i = n(74).extend({ type: 'dataZoom', render: function (t, e, n, i) { this.dataZoomModel = t, this.ecModel = e, this.api = n }, getTargetCoordInfo: function () { var t = this.dataZoomModel; var e = this.ecModel; var n = {}; return t.eachTargetAxis(function (t, i) { var r = e.getComponent(t.axis, i); if (r) { var a = r.getCoordSysModel(); a && (function (t, e, n, i) { for (var r, a = 0; a < n.length; a++) if (n[a].model === t) { r = n[a]; break }r || n.push(r = { model: t, axisModels: [], coordIndex: i }); r.axisModels.push(e) }(a, r, n[a.mainType] || (n[a.mainType] = []), a.componentIndex)) } }, this), n } }); t.exports = i }, function (t, e, n) { var i = function () {}; n(68).debugMode === 1 && (i = console.error); var r = i; t.exports = r }, function (t, e, n) { var i = n(0); var r = n(88); var a = n(131); var o = n(137); function s (t) { for (var e in t = t || {}, a.call(this, t), t)t.hasOwnProperty(e) && e !== 'style' && (this[e] = t[e]); this.style = new r(t.style, this), this._rect = null, this.__clipPaths = null }s.prototype = { constructor: s, type: 'displayable', __dirty: !0, invisible: !1, z: 0, z2: 0, zlevel: 0, draggable: !1, dragging: !1, silent: !1, culling: !1, cursor: 'pointer', rectHover: !1, progressive: !1, incremental: !1, globalScaleRatio: 1, beforeBrush: function (t) {}, afterBrush: function (t) {}, brush: function (t, e) {}, getBoundingRect: function () {}, contain: function (t, e) { return this.rectContain(t, e) }, traverse: function (t, e) { t.call(e, this) }, rectContain: function (t, e) { var n = this.transformCoordToLocal(t, e); return this.getBoundingRect().contain(n[0], n[1]) }, dirty: function () { this.__dirty = this.__dirtyText = !0, this._rect = null, this.__zr && this.__zr.refresh() }, animateStyle: function (t) { return this.animate('style', t) }, attrKV: function (t, e) { t !== 'style' ? a.prototype.attrKV.call(this, t, e) : this.style.set(e) }, setStyle: function (t, e) { return this.style.set(t, e), this.dirty(!1), this }, useStyle: function (t) { return this.style = new r(t, this), this.dirty(!1), this }, calculateTextPosition: null }, i.inherits(s, a), i.mixin(s, o); var l = s; t.exports = l }, function (t, e, n) { var i = n(0); var r = n(26).parseClassType; var a = 0; e.getUID = function (t) { return [t || '', a++, Math.random().toFixed(5)].join('_') }, e.enableSubTypeDefaulter = function (t) { var e = {}; return t.registerSubTypeDefaulter = function (t, n) { t = r(t), e[t.main] = n }, t.determineSubType = function (n, i) { var a = i.type; if (!a) { var o = r(n).main; t.hasSubTypes(n) && e[o] && (a = e[o](i)) } return a }, t }, e.enableTopologicalTravel = function (t, e) { function n (t, e) { return t[e] || (t[e] = { predecessor: [], successor: [] }), t[e] }t.topologicalTravel = function (t, r, a, o) { if (t.length) { var s = (function (t) { var r = {}; var a = []; return i.each(t, function (o) { var s = n(r, o); var l = (function (t, e) { var n = []; return i.each(t, function (t) { i.indexOf(e, t) >= 0 && n.push(t) }), n }(s.originalDeps = e(o), t)); s.entryCount = l.length, s.entryCount === 0 && a.push(o), i.each(l, function (t) { i.indexOf(s.predecessor, t) < 0 && s.predecessor.push(t); var e = n(r, t); i.indexOf(e.successor, t) < 0 && e.successor.push(o) }) }), { graph: r, noEntryList: a } }(r)); var l = s.graph; var u = s.noEntryList; var c = {}; for (i.each(t, function (t) { c[t] = !0 }); u.length;) { var h = u.pop(); var d = l[h]; var f = !!c[h]; f && (a.call(o, h, d.originalDeps.slice()), delete c[h]), i.each(d.successor, f ? g : p) }i.each(c, function () { throw new Error('Circle dependency may exists') }) } function p (t) { l[t].entryCount--, l[t].entryCount === 0 && u.push(t) } function g (t) { c[t] = !0, p(t) } } } }, function (t, e, n) { var i = n(0); var r = i.createHashMap; var a = i.isTypedArray; var o = n(26).enableClassCheck; var s = n(57); var l = s.SOURCE_FORMAT_ORIGINAL; var u = s.SERIES_LAYOUT_BY_COLUMN; var c = s.SOURCE_FORMAT_UNKNOWN; var h = s.SOURCE_FORMAT_TYPED_ARRAY; var d = s.SOURCE_FORMAT_KEYED_COLUMNS; function f (t) { this.fromDataset = t.fromDataset, this.data = t.data || (t.sourceFormat === d ? {} : []), this.sourceFormat = t.sourceFormat || c, this.seriesLayoutBy = t.seriesLayoutBy || u, this.dimensionsDefine = t.dimensionsDefine, this.encodeDefine = t.encodeDefine && r(t.encodeDefine), this.startIndex = t.startIndex || 0, this.dimensionsDetectCount = t.dimensionsDetectCount }f.seriesDataToSource = function (t) { return new f({ data: t, sourceFormat: a(t) ? h : l, fromDataset: !1 }) }, o(f); var p = f; t.exports = p }, function (t, e) { e.SOURCE_FORMAT_ORIGINAL = 'original', e.SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows', e.SOURCE_FORMAT_OBJECT_ROWS = 'objectRows', e.SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns', e.SOURCE_FORMAT_UNKNOWN = 'unknown', e.SOURCE_FORMAT_TYPED_ARRAY = 'typedArray', e.SERIES_LAYOUT_BY_COLUMN = 'column', e.SERIES_LAYOUT_BY_ROW = 'row' }, function (t, e, n) { var i = n(0); var r = i.each; var a = i.createHashMap; var o = (i.assert, n(5).__DEV__, a(['tooltip', 'label', 'itemName', 'itemId', 'seriesName'])); function s (t, e) { return t.hasOwnProperty(e) || (t[e] = []), t[e] }e.OTHER_DIMENSIONS = o, e.summarizeDimensions = function (t) { var e = {}; var n = e.encode = {}; var i = a(); var l = []; var u = []; var c = e.userOutput = { dimensionNames: t.dimensions.slice(), encode: {} }; r(t.dimensions, function (e) { var r; var a = t.getDimensionInfo(e); var h = a.coordDim; if (h) { var d = a.coordDimIndex; s(n, h)[d] = e, a.isExtraCoord || (i.set(h, 1), (r = a.type) !== 'ordinal' && r !== 'time' && (l[0] = e), s(c.encode, h)[d] = a.index), a.defaultTooltip && u.push(e) }o.each(function (t, e) { var i = s(n, e); var r = a.otherDims[e]; r != null && !1 !== r && (i[r] = a.name) }) }); var h = []; var d = {}; i.each(function (t, e) { var i = n[e]; d[e] = i[0], h = h.concat(i) }), e.dataDimsOnCoord = h, e.encodeFirstDimNotExtra = d; var f = n.label; f && f.length && (l = f.slice()); var p = n.tooltip; return p && p.length ? u = p.slice() : u.length || (u = l.slice()), n.defaultedLabel = l, n.defaultedTooltip = u, e }, e.getDimensionTypeByAxis = function (t) { return t === 'category' ? 'ordinal' : t === 'time' ? 'time' : 'float' } }, function (t, e, n) { var i = n(2); var r = n(78); var a = n(0).isObject; function o (t) { this.group = new i.Group(), this._symbolCtor = t || r } var s = o.prototype; function l (t, e, n, i) { return e && !isNaN(e[0]) && !isNaN(e[1]) && !(i.isIgnore && i.isIgnore(n)) && !(i.clipShape && !i.clipShape.contain(e[0], e[1])) && t.getItemVisual(n, 'symbol') !== 'none' } function u (t) { return t == null || a(t) || (t = { isIgnore: t }), t || {} } function c (t) { var e = t.hostModel; return { itemStyle: e.getModel('itemStyle').getItemStyle(['color']), hoverItemStyle: e.getModel('emphasis.itemStyle').getItemStyle(), symbolRotate: e.get('symbolRotate'), symbolOffset: e.get('symbolOffset'), hoverAnimation: e.get('hoverAnimation'), labelModel: e.getModel('label'), hoverLabelModel: e.getModel('emphasis.label'), cursorStyle: e.get('cursor') } }s.updateData = function (t, e) { e = u(e); var n = this.group; var r = t.hostModel; var a = this._data; var o = this._symbolCtor; var s = c(t); a || n.removeAll(), t.diff(a).add(function (i) { var r = t.getItemLayout(i); if (l(t, r, i, e)) { var a = new o(t, i, s); a.attr('position', r), t.setItemGraphicEl(i, a), n.add(a) } }).update(function (u, c) { var h = a.getItemGraphicEl(c); var d = t.getItemLayout(u); l(t, d, u, e) ? (h ? (h.updateData(t, u, s), i.updateProps(h, { position: d }, r)) : (h = new o(t, u)).attr('position', d), n.add(h), t.setItemGraphicEl(u, h)) : n.remove(h) }).remove(function (t) { var e = a.getItemGraphicEl(t); e && e.fadeOut(function () { n.remove(e) }) }).execute(), this._data = t }, s.isPersistent = function () { return !0 }, s.updateLayout = function () { var t = this._data; t && t.eachItemGraphicEl(function (e, n) { var i = t.getItemLayout(n); e.attr('position', i) }) }, s.incrementalPrepareUpdate = function (t) { this._seriesScope = c(t), this._data = null, this.group.removeAll() }, s.incrementalUpdate = function (t, e, n) { function i (t) { t.isGroup || (t.incremental = t.useHoverLayer = !0) }n = u(n); for (var r = t.start; r < t.end; r++) { var a = e.getItemLayout(r); if (l(e, a, r, n)) { var o = new this._symbolCtor(e, r, this._seriesScope); o.traverse(i), o.attr('position', a), this.group.add(o), e.setItemGraphicEl(r, o) } } }, s.remove = function (t) { var e = this.group; var n = this._data; n && t ? n.eachItemGraphicEl(function (t) { t.fadeOut(function () { e.remove(t) }) }) : e.removeAll() }; var h = o; t.exports = h }, function (t, e, n) { var i = n(2); var r = n(3).round; function a (t, e, n) { var r = t.getArea(); var a = t.getBaseAxis().isHorizontal(); var o = r.x; var s = r.y; var l = r.width; var u = r.height; var c = n.get('lineStyle.width') || 2; o -= c / 2, s -= c / 2, l += c, u += c; var h = new i.Rect({ shape: { x: o, y: s, width: l, height: u } }); return e && (h.shape[a ? 'width' : 'height'] = 0, i.initProps(h, { shape: { width: l, height: u } }, n)), h } function o (t, e, n) { var a = t.getArea(); var o = new i.Sector({ shape: { cx: r(t.cx, 1), cy: r(t.cy, 1), r0: r(a.r0, 1), r: r(a.r, 1), startAngle: a.startAngle, endAngle: a.endAngle, clockwise: a.clockwise } }); return e && (o.shape.endAngle = a.startAngle, i.initProps(o, { shape: { endAngle: a.endAngle } }, n)), o }e.createGridClipPath = a, e.createPolarClipPath = o, e.createClipPath = function (t, e, n) { return t ? t.type === 'polar' ? o(t, e, n) : t.type === 'cartesian2d' ? a(t, e, n) : null : null } }, function (t, e, n) { var i = n(0).map; var r = n(46); var a = n(25).isDimensionStacked; t.exports = function (t) { return { seriesType: t, plan: r(), reset: function (t) { var e = t.getData(); var n = t.coordinateSystem; var r = t.pipelineContext.large; if (n) { var o = i(n.dimensions, function (t) { return e.mapDimension(t) }).slice(0, 2); var s = o.length; var l = e.getCalculationInfo('stackResultDimension'); return a(e, o[0]) && (o[0] = l), a(e, o[1]) && (o[1] = l), s && { progress: function (t, e) { for (var i = t.end - t.start, a = r && new Float32Array(i * s), l = t.start, u = 0, c = [], h = []; l < t.end; l++) { var d; if (s === 1) { var f = e.get(o[0], l); d = !isNaN(f) && n.dataToPoint(f, null, h) } else { f = c[0] = e.get(o[0], l); var p = c[1] = e.get(o[1], l); d = !isNaN(f) && !isNaN(p) && n.dataToPoint(c, null, h) }r ? (a[u++] = d ? d[0] : NaN, a[u++] = d ? d[1] : NaN) : e.setItemLayout(l, d && d.slice() || [NaN, NaN]) }r && e.setLayout('symbolPoints', a) } } } } } } }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(2); n(98), n(285), i.extendComponentView({ type: 'grid', render: function (t, e) { this.group.removeAll(), t.get('show') && this.group.add(new a.Rect({ shape: t.coordinateSystem.getRect(), style: r.defaults({ fill: t.get('backgroundColor') }, t.getItemStyle()), silent: !0, z2: -1 })) } }), i.registerPreprocessor(function (t) { t.xAxis && t.yAxis && !t.grid && (t.grid = {}) }) }, function (t, e) { t.exports = function (t) { return { seriesType: t, reset: function (t, e) { var n = e.findComponents({ mainType: 'legend' }); if (n && n.length) { var i = t.getData(); i.filterSelf(function (t) { for (var e = i.getName(t), r = 0; r < n.length; r++) if (!n[r].isSelected(e)) return !1; return !0 }) } } } } }, function (t, e, n) { var i = n(0); var r = n(34); var a = n(22); var o = n(173); function s (t) { this.pointerChecker, this._zr = t, this._opt = {}; var e = i.bind; var n = e(l, this); var a = e(u, this); var o = e(c, this); var s = e(h, this); var f = e(d, this); r.call(this), this.setPointerChecker = function (t) { this.pointerChecker = t }, this.enable = function (e, r) { this.disable(), this._opt = i.defaults(i.clone(r) || {}, { zoomOnMouseWheel: !0, moveOnMouseMove: !0, moveOnMouseWheel: !1, preventDefaultMouseMove: !0 }), e == null && (e = !0), !0 !== e && e !== 'move' && e !== 'pan' || (t.on('mousedown', n), t.on('mousemove', a), t.on('mouseup', o)), !0 !== e && e !== 'scale' && e !== 'zoom' || (t.on('mousewheel', s), t.on('pinch', f)) }, this.disable = function () { t.off('mousedown', n), t.off('mousemove', a), t.off('mouseup', o), t.off('mousewheel', s), t.off('pinch', f) }, this.dispose = this.disable, this.isDragging = function () { return this._dragging }, this.isPinching = function () { return this._pinching } } function l (t) { if (!(a.isMiddleOrRightButtonOnMouseUpDown(t) || t.target && t.target.draggable)) { var e = t.offsetX; var n = t.offsetY; this.pointerChecker && this.pointerChecker(t, e, n) && (this._x = e, this._y = n, this._dragging = !0) } } function u (t) { if (this._dragging && g('moveOnMouseMove', t, this._opt) && t.gestureEvent !== 'pinch' && !o.isTaken(this._zr, 'globalPan')) { var e = t.offsetX; var n = t.offsetY; var i = this._x; var r = this._y; var s = e - i; var l = n - r; this._x = e, this._y = n, this._opt.preventDefaultMouseMove && a.stop(t.event), p(this, 'pan', 'moveOnMouseMove', t, { dx: s, dy: l, oldX: i, oldY: r, newX: e, newY: n }) } } function c (t) { a.isMiddleOrRightButtonOnMouseUpDown(t) || (this._dragging = !1) } function h (t) { var e = g('zoomOnMouseWheel', t, this._opt); var n = g('moveOnMouseWheel', t, this._opt); var i = t.wheelDelta; var r = Math.abs(i); var a = t.offsetX; var o = t.offsetY; if (i !== 0 && (e || n)) { if (e) { var s = r > 3 ? 1.4 : r > 1 ? 1.2 : 1.1; f(this, 'zoom', 'zoomOnMouseWheel', t, { scale: i > 0 ? s : 1 / s, originX: a, originY: o }) } if (n) { var l = Math.abs(i); f(this, 'scrollMove', 'moveOnMouseWheel', t, { scrollDelta: (i > 0 ? 1 : -1) * (l > 3 ? 0.4 : l > 1 ? 0.15 : 0.05), originX: a, originY: o }) } } } function d (t) { o.isTaken(this._zr, 'globalPan') || f(this, 'zoom', null, t, { scale: t.pinchScale > 1 ? 1.1 : 1 / 1.1, originX: t.pinchX, originY: t.pinchY }) } function f (t, e, n, i, r) { t.pointerChecker && t.pointerChecker(i, r.originX, r.originY) && (a.stop(i.event), p(t, e, n, i, r)) } function p (t, e, n, r, a) { a.isAvailableBehavior = i.bind(g, null, n, r), t.trigger(e, a) } function g (t, e, n) { var r = n[t]; return !t || r && (!i.isString(r) || e.event[r + 'Key']) }i.mixin(s, r); var v = s; t.exports = v }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(80); var o = n(414); n(415), n(416), n(192), i.registerPreprocessor(function (t) { if (t) { (!t.axisPointer || t.axisPointer.length === 0) && (t.axisPointer = {}); var e = t.axisPointer.link; e && !r.isArray(e) && (t.axisPointer.link = [e]) } }), i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC, function (t, e) { t.getComponent('axisPointer').coordSysAxesInfo = a.collect(t, e) }), i.registerAction({ type: 'updateAxisPointer', event: 'updateAxisPointer', update: ':updateAxisPointer' }, o) }, function (t, e) { var n; n = (function () { return this }()); try { n = n || new Function('return this')() } catch (t) { typeof window === 'object' && (n = window) }t.exports = n }, function (t, e, n) { var i = n(130); var r = n(11); var a = n(0); var o = n(231); var s = n(235); var l = n(239); var u = n(241); var c = n(242); var h = !r.canvasSupported; var d = { canvas: l }; var f = {}; var p = function (t, e, n) { n = n || {}, this.dom = e, this.id = t; var i = this; var l = new s(); var f = n.renderer; if (h) { if (!d.vml) throw new Error("You need to require 'zrender/vml/vml' to support IE8"); f = 'vml' } else f && d[f] || (f = 'canvas'); var p = new d[f](e, l, n, t); this.storage = l, this.painter = p; var g = r.node || r.worker ? null : new c(p.getViewportRoot()); this.handler = new o(l, p, g, p.root), this.animation = new u({ stage: { update: a.bind(this.flush, this) } }), this.animation.start(), this._needsRefresh; var v = l.delFromStorage; var m = l.addToStorage; l.delFromStorage = function (t) { v.call(l, t), t && t.removeSelfFromZr(i) }, l.addToStorage = function (t) { m.call(l, t), t.addSelfToZr(i) } }; p.prototype = { constructor: p, getId: function () { return this.id }, add: function (t) { this.storage.addRoot(t), this._needsRefresh = !0 }, remove: function (t) { this.storage.delRoot(t), this._needsRefresh = !0 }, configLayer: function (t, e) { this.painter.configLayer && this.painter.configLayer(t, e), this._needsRefresh = !0 }, setBackgroundColor: function (t) { this.painter.setBackgroundColor && this.painter.setBackgroundColor(t), this._needsRefresh = !0 }, refreshImmediately: function () { this._needsRefresh = this._needsRefreshHover = !1, this.painter.refresh(), this._needsRefresh = this._needsRefreshHover = !1 }, refresh: function () { this._needsRefresh = !0 }, flush: function () { var t; this._needsRefresh && (t = !0, this.refreshImmediately()), this._needsRefreshHover && (t = !0, this.refreshHoverImmediately()), t && this.trigger('rendered') }, addHover: function (t, e) { if (this.painter.addHover) { var n = this.painter.addHover(t, e); return this.refreshHover(), n } }, removeHover: function (t) { this.painter.removeHover && (this.painter.removeHover(t), this.refreshHover()) }, clearHover: function () { this.painter.clearHover && (this.painter.clearHover(), this.refreshHover()) }, refreshHover: function () { this._needsRefreshHover = !0 }, refreshHoverImmediately: function () { this._needsRefreshHover = !1, this.painter.refreshHover && this.painter.refreshHover() }, resize: function (t) { t = t || {}, this.painter.resize(t.width, t.height), this.handler.resize() }, clearAnimation: function () { this.animation.clear() }, getWidth: function () { return this.painter.getWidth() }, getHeight: function () { return this.painter.getHeight() }, pathToImage: function (t, e) { return this.painter.pathToImage(t, e) }, setCursorStyle: function (t) { this.handler.setCursorStyle(t) }, findHover: function (t, e) { return this.handler.findHover(t, e) }, on: function (t, e, n) { this.handler.on(t, e, n) }, off: function (t, e) { this.handler.off(t, e) }, trigger: function (t, e) { this.handler.trigger(t, e) }, clear: function () { this.storage.delRoot(), this.painter.clear() }, dispose: function () { var t; this.animation.stop(), this.clear(), this.storage.dispose(), this.painter.dispose(), this.handler.dispose(), this.animation = this.storage = this.painter = this.handler = null, t = this.id, delete f[t] } }, e.version = '4.1.2', e.init = function (t, e) { var n = new p(i(), t, e); return f[n.id] = n, n }, e.dispose = function (t) { if (t)t.dispose(); else { for (var e in f)f.hasOwnProperty(e) && f[e].dispose(); f = {} } return this }, e.getInstance = function (t) { return f[t] }, e.registerPainter = function (t, e) { d[t] = e } }, function (t, e) { var n = 1; typeof window !== 'undefined' && (n = Math.max(window.devicePixelRatio || 1, 1)); var i = n; e.debugMode = 0, e.devicePixelRatio = i }, function (t, e) { e.ContextCachedBy = { NONE: 0, STYLE_BIND: 1, PLAIN_TEXT: 2 }, e.WILL_BE_RESTORED = 9 }, function (t, e, n) { var i = n(0); var r = i.retrieve2; var a = i.retrieve3; var o = i.each; var s = i.normalizeCssArray; var l = i.isString; var u = i.isObject; var c = n(17); var h = n(138); var d = n(89); var f = n(134); var p = n(69); var g = p.ContextCachedBy; var v = p.WILL_BE_RESTORED; var m = c.DEFAULT_FONT; var y = { left: 1, right: 1, center: 1 }; var x = { top: 1, bottom: 1, middle: 1 }; var _ = [['textShadowBlur', 'shadowBlur', 0], ['textShadowOffsetX', 'shadowOffsetX', 0], ['textShadowOffsetY', 'shadowOffsetY', 0], ['textShadowColor', 'shadowColor', 'transparent']]; var b = {}; var w = {}; function S (t) { if (t) { t.font = c.makeFont(t); var e = t.textAlign; e === 'middle' && (e = 'center'), t.textAlign = e == null || y[e] ? e : 'left'; var n = t.textVerticalAlign || t.textBaseline; n === 'center' && (n = 'middle'), t.textVerticalAlign = n == null || x[n] ? n : 'top', t.textPadding && (t.textPadding = s(t.textPadding)) } } function M (t, e, n, i, r) { if (n && e.textRotation) { var a = e.textOrigin; a === 'center' ? (i = n.width / 2 + n.x, r = n.height / 2 + n.y) : a && (i = a[0] + n.x, r = a[1] + n.y), t.translate(i, r), t.rotate(-e.textRotation), t.translate(-i, -r) } } function I (t, e, n, i, o, s, l, u) { var c = i.rich[n.styleName] || {}; c.text = n.text; var h = n.textVerticalAlign; var d = s + o / 2; h === 'top' ? d = s + n.height / 2 : h === 'bottom' && (d = s + o - n.height / 2), !n.isLineHolder && A(c) && T(t, e, c, u === 'right' ? l - n.width : u === 'center' ? l - n.width / 2 : l, d - n.height / 2, n.width, n.height); var f = n.textPadding; f && (l = E(l, u, f), d -= n.height / 2 - f[2] - n.textHeight / 2), L(e, 'shadowBlur', a(c.textShadowBlur, i.textShadowBlur, 0)), L(e, 'shadowColor', c.textShadowColor || i.textShadowColor || 'transparent'), L(e, 'shadowOffsetX', a(c.textShadowOffsetX, i.textShadowOffsetX, 0)), L(e, 'shadowOffsetY', a(c.textShadowOffsetY, i.textShadowOffsetY, 0)), L(e, 'textAlign', u), L(e, 'textBaseline', 'middle'), L(e, 'font', n.font || m); var p = P(c.textStroke || i.textStroke, v); var g = k(c.textFill || i.textFill); var v = r(c.textStrokeWidth, i.textStrokeWidth); p && (L(e, 'lineWidth', v), L(e, 'strokeStyle', p), e.strokeText(n.text, l, d)), g && (L(e, 'fillStyle', g), e.fillText(n.text, l, d)) } function A (t) { return !!(t.textBackgroundColor || t.textBorderWidth && t.textBorderColor) } function T (t, e, n, i, r, a, o) { var s = n.textBackgroundColor; var c = n.textBorderWidth; var f = n.textBorderColor; var p = l(s); if (L(e, 'shadowBlur', n.textBoxShadowBlur || 0), L(e, 'shadowColor', n.textBoxShadowColor || 'transparent'), L(e, 'shadowOffsetX', n.textBoxShadowOffsetX || 0), L(e, 'shadowOffsetY', n.textBoxShadowOffsetY || 0), p || c && f) { e.beginPath(); var g = n.textBorderRadius; g ? h.buildPath(e, { x: i, y: r, width: a, height: o, r: g }) : e.rect(i, r, a, o), e.closePath() } if (p) if (L(e, 'fillStyle', s), n.fillOpacity != null) { var v = e.globalAlpha; e.globalAlpha = n.fillOpacity * n.opacity, e.fill(), e.globalAlpha = v } else e.fill(); else if (u(s)) { var m = s.image; (m = d.createOrUpdateImage(m, null, t, C, s)) && d.isImageReady(m) && e.drawImage(m, i, r, a, o) } if (c && f) if (L(e, 'lineWidth', c), L(e, 'strokeStyle', f), n.strokeOpacity != null) { v = e.globalAlpha; e.globalAlpha = n.strokeOpacity * n.opacity, e.stroke(), e.globalAlpha = v } else e.stroke() } function C (t, e) { e.image = t } function D (t, e, n, i) { var r = n.x || 0; var a = n.y || 0; var o = n.textAlign; var s = n.textVerticalAlign; if (i) { var l = n.textPosition; if (l instanceof Array)r = i.x + O(l[0], i.width), a = i.y + O(l[1], i.height); else { var u = e && e.calculateTextPosition ? e.calculateTextPosition(b, n, i) : c.calculateTextPosition(b, n, i); r = u.x, a = u.y, o = o || u.textAlign, s = s || u.textVerticalAlign } var h = n.textOffset; h && (r += h[0], a += h[1]) } return (t = t || {}).baseX = r, t.baseY = a, t.textAlign = o, t.textVerticalAlign = s, t } function L (t, e, n) { return t[e] = f(t, e, n), t[e] } function P (t, e) { return t == null || e <= 0 || t === 'transparent' || t === 'none' ? null : t.image || t.colorStops ? '#000' : t } function k (t) { return t == null || t === 'none' ? null : t.image || t.colorStops ? '#000' : t } function O (t, e) { return typeof t === 'string' ? t.lastIndexOf('%') >= 0 ? parseFloat(t) / 100 * e : parseFloat(t) : t } function E (t, e, n) { return e === 'right' ? t - n[1] : e === 'center' ? t + n[3] / 2 - n[1] / 2 : t + n[3] }e.normalizeTextStyle = function (t) { return S(t), o(t.rich, S), t }, e.renderText = function (t, e, n, i, r, a) { i.rich ? (function (t, e, n, i, r, a) { a !== v && (e.__attrCachedBy = g.NONE); var o = t.__textCotentBlock; o && !t.__dirtyText || (o = t.__textCotentBlock = c.parseRichText(n, i)); !(function (t, e, n, i, r) { var a = n.width; var o = n.outerWidth; var s = n.outerHeight; var l = i.textPadding; var u = D(w, t, i, r); var h = u.baseX; var d = u.baseY; var f = u.textAlign; var p = u.textVerticalAlign; M(e, i, r, h, d); var g = c.adjustTextX(h, o, f); var v = c.adjustTextY(d, s, p); var m = g; var y = v; l && (m += l[3], y += l[0]); var x = m + a; A(i) && T(t, e, i, g, v, o, s); for (var _ = 0; _ < n.lines.length; _++) { for (var b, S = n.lines[_], C = S.tokens, L = C.length, P = S.lineHeight, k = S.width, O = 0, E = m, R = x, N = L - 1; O < L && (!(b = C[O]).textAlign || b.textAlign === 'left');)I(t, e, b, i, P, y, E, 'left'), k -= b.width, E += b.width, O++; for (;N >= 0 && (b = C[N]).textAlign === 'right';)I(t, e, b, i, P, y, R, 'right'), k -= b.width, R -= b.width, N--; for (E += (a - (E - m) - (x - R) - k) / 2; O <= N;)b = C[O], I(t, e, b, i, P, y, E + b.width / 2, 'center'), E += b.width, O++; y += P } }(t, e, o, i, r)) }(t, e, n, i, r, a)) : (function (t, e, n, i, r, a) { 'use strict'; var o; var s = A(i); var l = !1; var u = e.__attrCachedBy === g.PLAIN_TEXT; a !== v ? (a && (o = a.style, l = !s && u && o), e.__attrCachedBy = s ? g.NONE : g.PLAIN_TEXT) : u && (e.__attrCachedBy = g.NONE); var h = i.font || m; l && h === (o.font || m) || (e.font = h); var d = t.__computedFont; t.__styleFont !== h && (t.__styleFont = h, d = t.__computedFont = e.font); var p = i.textPadding; var y = i.textLineHeight; var x = t.__textCotentBlock; x && !t.__dirtyText || (x = t.__textCotentBlock = c.parsePlainText(n, d, p, y, i.truncate)); var b = x.outerHeight; var S = x.lines; var I = x.lineHeight; var C = D(w, t, i, r); var L = C.baseX; var O = C.baseY; var R = C.textAlign || 'left'; var N = C.textVerticalAlign; M(e, i, r, L, O); var z = c.adjustTextY(O, b, N); var B = L; var V = z; if (s || p) { var F = c.getWidth(n, d); p && (F += p[1] + p[3]); var G = c.adjustTextX(L, F, R); s && T(t, e, i, G, z, F, b), p && (B = E(L, R, p), V += p[0]) }e.textAlign = R, e.textBaseline = 'middle', e.globalAlpha = i.opacity || 1; for (var H = 0; H < _.length; H++) { var W = _[H]; var j = W[0]; var U = W[1]; var Z = i[j]; l && Z === o[j] || (e[U] = f(e, U, Z || W[2])) }V += I / 2; var $ = i.textStrokeWidth; var Y = l ? o.textStrokeWidth : null; var X = !l || $ !== Y; var q = !l || X || i.textStroke !== o.textStroke; var K = P(i.textStroke, $); var J = k(i.textFill); K && (X && (e.lineWidth = $), q && (e.strokeStyle = K)); J && (l && i.textFill === o.textFill || (e.fillStyle = J)); if (S.length === 1)K && e.strokeText(S[0], B, V), J && e.fillText(S[0], B, V); else for (H = 0; H < S.length; H++)K && e.strokeText(S[H], B, V), J && e.fillText(S[H], B, V), V += I }(t, e, n, i, r, a)) }, e.getBoxPosition = D, e.getStroke = P, e.getFill = k, e.parsePercent = O, e.needDrawText = function (t, e) { return t != null && (t || e.textBackgroundColor || e.textBorderWidth && e.textBorderColor || e.textPadding) } }, function (t, e, n) { var i = n(7); var r = n(28); var a = Math.min; var o = Math.max; var s = Math.sin; var l = Math.cos; var u = 2 * Math.PI; var c = i.create(); var h = i.create(); var d = i.create(); var f = []; var p = []; e.fromPoints = function (t, e, n) { if (t.length !== 0) { var i; var r = t[0]; var s = r[0]; var l = r[0]; var u = r[1]; var c = r[1]; for (i = 1; i < t.length; i++)r = t[i], s = a(s, r[0]), l = o(l, r[0]), u = a(u, r[1]), c = o(c, r[1]); e[0] = s, e[1] = u, n[0] = l, n[1] = c } }, e.fromLine = function (t, e, n, i, r, s) { r[0] = a(t, n), r[1] = a(e, i), s[0] = o(t, n), s[1] = o(e, i) }, e.fromCubic = function (t, e, n, i, s, l, u, c, h, d) { var g; var v = r.cubicExtrema; var m = r.cubicAt; var y = v(t, n, s, u, f); for (h[0] = 1 / 0, h[1] = 1 / 0, d[0] = -1 / 0, d[1] = -1 / 0, g = 0; g < y; g++) { var x = m(t, n, s, u, f[g]); h[0] = a(x, h[0]), d[0] = o(x, d[0]) } for (y = v(e, i, l, c, p), g = 0; g < y; g++) { var _ = m(e, i, l, c, p[g]); h[1] = a(_, h[1]), d[1] = o(_, d[1]) }h[0] = a(t, h[0]), d[0] = o(t, d[0]), h[0] = a(u, h[0]), d[0] = o(u, d[0]), h[1] = a(e, h[1]), d[1] = o(e, d[1]), h[1] = a(c, h[1]), d[1] = o(c, d[1]) }, e.fromQuadratic = function (t, e, n, i, s, l, u, c) { var h = r.quadraticExtremum; var d = r.quadraticAt; var f = o(a(h(t, n, s), 1), 0); var p = o(a(h(e, i, l), 1), 0); var g = d(t, n, s, f); var v = d(e, i, l, p); u[0] = a(t, s, g), u[1] = a(e, l, v), c[0] = o(t, s, g), c[1] = o(e, l, v) }, e.fromArc = function (t, e, n, r, a, o, f, p, g) { var v = i.min; var m = i.max; var y = Math.abs(a - o); if (y % u < 1e-4 && y > 1e-4) return p[0] = t - n, p[1] = e - r, g[0] = t + n, void (g[1] = e + r); if (c[0] = l(a) * n + t, c[1] = s(a) * r + e, h[0] = l(o) * n + t, h[1] = s(o) * r + e, v(p, c, h), m(g, c, h), (a %= u) < 0 && (a += u), (o %= u) < 0 && (o += u), a > o && !f ? o += u : a < o && f && (a += u), f) { var x = o; o = a, a = x } for (var _ = 0; _ < o; _ += Math.PI / 2)_ > a && (d[0] = l(_) * n + t, d[1] = s(_) * r + e, v(p, d, p), m(g, d, g)) } }, function (t, e) { var n = function (t) { this.colorStops = t || [] }; n.prototype = { constructor: n, addColorStop: function (t, e) { this.colorStops.push({ offset: t, color: e }) } }; var i = n; t.exports = i }, function (t, e, n) { n(5).__DEV__; var i = n(4); var r = i.makeInner; var a = i.getDataItemValue; var o = n(152).getCoordSysDefineBySeries; var s = n(0); var l = s.createHashMap; var u = s.each; var c = s.map; var h = s.isArray; var d = s.isString; var f = s.isObject; var p = s.isTypedArray; var g = s.isArrayLike; var v = s.extend; var m = (s.assert, n(56)); var y = n(57); var x = y.SOURCE_FORMAT_ORIGINAL; var _ = y.SOURCE_FORMAT_ARRAY_ROWS; var b = y.SOURCE_FORMAT_OBJECT_ROWS; var w = y.SOURCE_FORMAT_KEYED_COLUMNS; var S = y.SOURCE_FORMAT_UNKNOWN; var M = y.SOURCE_FORMAT_TYPED_ARRAY; var I = y.SERIES_LAYOUT_BY_ROW; var A = r(); function T (t) { if (t) { var e = l(); return c(t, function (t, n) { if ((t = v({}, f(t) ? t : { name: t })).name == null) return t; t.name += '', t.displayName == null && (t.displayName = t.name); var i = e.get(t.name); return i ? t.name += '-' + i.count++ : e.set(t.name, { count: 1 }), t }) } } function C (t, e, n, i) { if (i == null && (i = 1 / 0), e === I) for (var r = 0; r < n.length && r < i; r++)t(n[r] ? n[r][0] : null, r); else { var a = n[0] || []; for (r = 0; r < a.length && r < i; r++)t(a[r], r) } } function D (t, e, n, i, r, o) { var s, l; if (p(t)) return !1; if (i && (l = i[o], l = f(l) ? l.name : l), e === _) if (n === I) { for (var u = t[o], c = 0; c < (u || []).length && c < 5; c++) if ((s = y(u[r + c])) != null) return s } else for (c = 0; c < t.length && c < 5; c++) { var g = t[r + c]; if (g && (s = y(g[o])) != null) return s } else if (e === b) { if (!l) return; for (c = 0; c < t.length && c < 5; c++) { if ((v = t[c]) && (s = y(v[l])) != null) return s } } else if (e === w) { if (!l) return; if (!(u = t[l]) || p(u)) return !1; for (c = 0; c < u.length && c < 5; c++) if ((s = y(u[c])) != null) return s } else if (e === x) for (c = 0; c < t.length && c < 5; c++) { var v = t[c]; var m = a(v); if (!h(m)) return !1; if ((s = y(m[o])) != null) return s } function y (t) { return (t == null || !isFinite(t) || t === '') && (!(!d(t) || t === '-') || void 0) } return !1 }e.detectSourceFormat = function (t) { var e = t.option.source; var n = S; if (p(e))n = M; else if (h(e)) { e.length === 0 && (n = _); for (var i = 0, r = e.length; i < r; i++) { var a = e[i]; if (a != null) { if (h(a)) { n = _; break } if (f(a)) { n = b; break } } } } else if (f(e)) { for (var o in e) if (e.hasOwnProperty(o) && g(e[o])) { n = w; break } } else if (e != null) throw new Error('Invalid data'); A(t).sourceFormat = n }, e.getSource = function (t) { return A(t).source }, e.resetSourceDefaulter = function (t) { A(t).datasetMap = l() }, e.prepareSource = function (t) { var e = t.option; var n = e.data; var i = p(n) ? M : x; var r = !1; var s = e.seriesLayoutBy; var c = e.sourceHeader; var g = e.dimensions; var v = (function (t) { var e = t.option; if (!e.data) return t.ecModel.getComponent('dataset', e.datasetIndex || 0) }(t)); if (v) { var y = v.option; n = y.source, i = A(v).sourceFormat, r = !0, s = s || y.seriesLayoutBy, c == null && (c = y.sourceHeader), g = g || y.dimensions } var S = (function (t, e, n, i, r) { if (!t) return { dimensionsDefine: T(r) }; var o, s, l, c; if (e === _)i === 'auto' || i == null ? C(function (t) { t != null && t !== '-' && (d(t) ? s == null && (s = 1) : s = 0) }, n, t, 10) : s = i ? 1 : 0, r || s !== 1 || (r = [], C(function (t, e) { r[e] = t != null ? t : '' }, n, t)), o = r ? r.length : n === I ? t.length : t[0] ? t[0].length : null; else if (e === b)r || (r = (function (t) { var e; var n = 0; for (;n < t.length && !(e = t[n++]););if (e) { var i = []; return u(e, function (t, e) { i.push(e) }), i } }(t)), l = !0); else if (e === w)r || (r = [], l = !0, u(t, function (t, e) { r.push(e) })); else if (e === x) { var p = a(t[0]); o = h(p) && p.length || 1 }l && u(r, function (t, e) { (f(t) ? t.name : t) === 'name' && (c = e) }); return { startIndex: s, dimensionsDefine: T(r), dimensionsDetectCount: o, potentialNameDimIndex: c } }(n, i, s, c, g)); var L = e.encode; !L && v && (L = (function (t, e, n, i, r, a) { var s = o(t); var c = {}; var h = []; var d = []; var f = t.subType; var p = l(['pie', 'map', 'funnel']); var g = l(['line', 'bar', 'pictorialBar', 'scatter', 'effectScatter', 'candlestick', 'boxplot']); if (s && g.get(f) != null) { var v = t.ecModel; var m = A(v).datasetMap; var y = e.uid + '_' + r; var x = m.get(y) || m.set(y, { categoryWayDim: 1, valueWayDim: 0 }); u(s.coordSysDims, function (t) { if (s.firstCategoryDimIndex == null) { var e = x.valueWayDim++; c[t] = e, d.push(e) } else if (s.categoryAxisMap.get(t))c[t] = 0, h.push(0); else { e = x.categoryWayDim++; c[t] = e, d.push(e) } }) } else if (p.get(f) != null) { for (var _, b = 0; b < 5 && _ == null; b++)D(n, i, r, a.dimensionsDefine, a.startIndex, b) || (_ = b); if (_ != null) { c.value = _; var w = a.potentialNameDimIndex || Math.max(_ - 1, 0); d.push(w), h.push(w) } } return h.length && (c.itemName = h), d.length && (c.seriesName = d), c }(t, v, n, i, s, S))), A(t).source = new m({ data: n, fromDataset: r, seriesLayoutBy: s, sourceFormat: i, dimensionsDefine: S.dimensionsDefine, startIndex: S.startIndex, dimensionsDetectCount: S.dimensionsDetectCount, encodeDefine: L }) }, e.guessOrdinal = function (t, e) { return D(t.data, t.sourceFormat, t.seriesLayoutBy, t.dimensionsDefine, t.startIndex, e) } }, function (t, e, n) { var i = n(42); var r = n(55); var a = n(26); var o = function () { this.group = new i(), this.uid = r.getUID('viewComponent') }; var s = o.prototype = { constructor: o, init: function (t, e) {}, render: function (t, e, n, i) {}, dispose: function () {}, filterForExposedEvent: null }; s.updateView = s.updateLayout = s.updateVisual = function (t, e, n, i) {}, a.enableClassExtend(o), a.enableClassManagement(o, { registerWhenExtend: !0 }); var l = o; t.exports = l }, function (t, e, n) { var i = n(26); function r (t) { this._setting = t || {}, this._extent = [1 / 0, -1 / 0], this._interval = 0, this.init && this.init.apply(this, arguments) }r.prototype.parse = function (t) { return t }, r.prototype.getSetting = function (t) { return this._setting[t] }, r.prototype.contain = function (t) { var e = this._extent; return t >= e[0] && t <= e[1] }, r.prototype.normalize = function (t) { var e = this._extent; return e[1] === e[0] ? 0.5 : (t - e[0]) / (e[1] - e[0]) }, r.prototype.scale = function (t) { var e = this._extent; return t * (e[1] - e[0]) + e[0] }, r.prototype.unionExtent = function (t) { var e = this._extent; t[0] < e[0] && (e[0] = t[0]), t[1] > e[1] && (e[1] = t[1]) }, r.prototype.unionExtentFromData = function (t, e) { this.unionExtent(t.getApproximateExtent(e)) }, r.prototype.getExtent = function () { return this._extent.slice() }, r.prototype.setExtent = function (t, e) { var n = this._extent; isNaN(t) || (n[0] = t), isNaN(e) || (n[1] = e) }, r.prototype.isBlank = function () { return this._isBlank }, r.prototype.setBlank = function (t) { this._isBlank = t }, r.prototype.getLabel = null, i.enableClassExtend(r), i.enableClassManagement(r, { registerWhenExtend: !0 }); var a = r; t.exports = a }, function (t, e, n) { var i = n(3); var r = n(9); var a = n(75); var o = n(159); var s = i.round; var l = a.extend({ type: 'interval', _interval: 0, _intervalPrecision: 2, setExtent: function (t, e) { var n = this._extent; isNaN(t) || (n[0] = parseFloat(t)), isNaN(e) || (n[1] = parseFloat(e)) }, unionExtent: function (t) { var e = this._extent; t[0] < e[0] && (e[0] = t[0]), t[1] > e[1] && (e[1] = t[1]), l.prototype.setExtent.call(this, e[0], e[1]) }, getInterval: function () { return this._interval }, setInterval: function (t) { this._interval = t, this._niceExtent = this._extent.slice(), this._intervalPrecision = o.getIntervalPrecision(t) }, getTicks: function () { return o.intervalScaleGetTicks(this._interval, this._extent, this._niceExtent, this._intervalPrecision) }, getLabel: function (t, e) { if (t == null) return ''; var n = e && e.precision; return n == null ? n = i.getPrecisionSafe(t) || 0 : n === 'auto' && (n = this._intervalPrecision), t = s(t, n, !0), r.addCommas(t) }, niceTicks: function (t, e, n) { t = t || 5; var i = this._extent; var r = i[1] - i[0]; if (isFinite(r)) { r < 0 && (r = -r, i.reverse()); var a = o.intervalScaleNiceTicks(i, t, e, n); this._intervalPrecision = a.intervalPrecision, this._interval = a.interval, this._niceExtent = a.niceTickExtent } }, niceExtent: function (t) { var e = this._extent; if (e[0] === e[1]) if (e[0] !== 0) { var n = e[0]; t.fixMax ? e[0] -= n / 2 : (e[1] += n / 2, e[0] -= n / 2) } else e[1] = 1; var i = e[1] - e[0]; isFinite(i) || (e[0] = 0, e[1] = 1), this.niceTicks(t.splitNumber, t.minInterval, t.maxInterval); var r = this._interval; t.fixMin || (e[0] = s(Math.floor(e[0] / r) * r)), t.fixMax || (e[1] = s(Math.ceil(e[1] / r) * r)) } }); l.create = function () { return new l() }; var u = l; t.exports = u }, function (t, e, n) { var i = n(0); var r = n(3).parsePercent; var a = n(25).isDimensionStacked; var o = n(46); var s = '__ec_stack_'; var l = typeof Float32Array !== 'undefined' ? Float32Array : Array; function u (t) { return t.get('stack') || s + t.seriesIndex } function c (t) { return t.dim + t.index } function h (t, e) { var n = []; return e.eachSeriesByType(t, function (t) { v(t) && !m(t) && n.push(t) }), n } function d (t) { var e = (function (t) { var e = {}; i.each(t, function (t) { var n = t.coordinateSystem.getBaseAxis(); if (n.type === 'time' || n.type === 'value') for (var i = t.getData(), r = n.dim + '_' + n.index, a = i.mapDimension(n.dim), o = 0, s = i.count(); o < s; ++o) { var l = i.get(a, o); e[r] ? e[r].push(l) : e[r] = [l] } }); var n = []; for (var r in e) if (e.hasOwnProperty(r)) { var a = e[r]; if (a) { a.sort(function (t, e) { return t - e }); for (var o = null, s = 1; s < a.length; ++s) { var l = a[s] - a[s - 1]; l > 0 && (o = o === null ? l : Math.min(o, l)) }n[r] = o } } return n }(t)); var n = []; return i.each(t, function (t) { var i; var a = t.coordinateSystem.getBaseAxis(); var o = a.getExtent(); if (a.type === 'category')i = a.getBandWidth(); else if (a.type === 'value' || a.type === 'time') { var s = a.dim + '_' + a.index; var l = e[s]; var h = Math.abs(o[1] - o[0]); var d = a.scale.getExtent(); var f = Math.abs(d[1] - d[0]); i = l ? h / f * l : h } else { var p = t.getData(); i = Math.abs(o[1] - o[0]) / p.count() } var g = r(t.get('barWidth'), i); var v = r(t.get('barMaxWidth'), i); var m = r(t.get('barMinWidth') || 1, i); var y = t.get('barGap'); var x = t.get('barCategoryGap'); n.push({ bandWidth: i, barWidth: g, barMaxWidth: v, barMinWidth: m, barGap: y, barCategoryGap: x, axisKey: c(a), stackId: u(t) }) }), f(n) } function f (t) { var e = {}; i.each(t, function (t, n) { var i = t.axisKey; var r = t.bandWidth; var a = e[i] || { bandWidth: r, remainedWidth: r, autoWidthCount: 0, categoryGap: '20%', gap: '30%', stacks: {} }; var o = a.stacks; e[i] = a; var s = t.stackId; o[s] || a.autoWidthCount++, o[s] = o[s] || { width: 0, maxWidth: 0 }; var l = t.barWidth; l && !o[s].width && (o[s].width = l, l = Math.min(a.remainedWidth, l), a.remainedWidth -= l); var u = t.barMaxWidth; u && (o[s].maxWidth = u); var c = t.barMinWidth; c && (o[s].minWidth = c); var h = t.barGap; h != null && (a.gap = h); var d = t.barCategoryGap; d != null && (a.categoryGap = d) }); var n = {}; return i.each(e, function (t, e) { n[e] = {}; var a = t.stacks; var o = t.bandWidth; var s = r(t.categoryGap, o); var l = r(t.gap, 1); var u = t.remainedWidth; var c = t.autoWidthCount; var h = (u - s) / (c + (c - 1) * l); h = Math.max(h, 0), i.each(a, function (t) { var e = t.maxWidth; var n = t.minWidth; if (t.width) { i = t.width; e && (i = Math.min(i, e)), n && (i = Math.max(i, n)), t.width = i, u -= i, c-- } else { var i = h; e && e < i && (i = Math.min(e, u)), n && n > i && (i = n), i !== h && (t.width = i, u -= i, c--) } }), h = (u - s) / (c + (c - 1) * l), h = Math.max(h, 0); var d; var f = 0; i.each(a, function (t, e) { t.width || (t.width = h), d = t, f += t.width * (1 + l) }), d && (f -= d.width * l); var p = -f / 2; i.each(a, function (t, i) { n[e][i] = n[e][i] || { bandWidth: o, offset: p, width: t.width }, p += t.width * (1 + l) }) }), n } function p (t, e, n) { if (t && e) { var i = t[c(e)]; return i != null && n != null && (i = i[u(n)]), i } } var g = { seriesType: 'bar', plan: o(), reset: function (t) { if (v(t) && m(t)) { var e = t.getData(); var n = t.coordinateSystem; var i = n.getBaseAxis(); var r = n.getOtherAxis(i); var a = e.mapDimension(r.dim); var o = e.mapDimension(i.dim); var s = r.isHorizontal(); var u = s ? 0 : 1; var c = p(d([t]), i, t).width; return c > 0.5 || (c = 0.5), { progress: function (t, e) { var h; var d = t.count; var f = new l(2 * d); var p = new l(d); var g = []; var v = []; var m = 0; var x = 0; for (;(h = t.next()) != null;)v[u] = e.get(a, h), v[1 - u] = e.get(o, h), g = n.dataToPoint(v, null, g), f[m++] = g[0], f[m++] = g[1], p[x++] = h; e.setLayout({ largePoints: f, largeDataIndices: p, barWidth: c, valueAxisStart: y(i, r, !1), valueAxisHorizontal: s }) } } } } }; function v (t) { return t.coordinateSystem && t.coordinateSystem.type === 'cartesian2d' } function m (t) { return t.pipelineContext && t.pipelineContext.large } function y (t, e, n) { return e.toGlobalCoord(e.dataToCoord(e.type === 'log' ? 1 : 0)) }e.getLayoutOnAxis = function (t) { var e = []; var n = t.axis; if (n.type === 'category') { for (var r = n.getBandWidth(), a = 0; a < t.count; a++)e.push(i.defaults({ bandWidth: r, axisKey: 'axis0', stackId: s + a }, t)); var o = f(e); var l = []; for (a = 0; a < t.count; a++) { var u = o.axis0[s + a]; u.offsetCenter = u.offset + u.width / 2, l.push(u) } return l } }, e.prepareLayoutBarSeries = h, e.makeColumnLayout = d, e.retrieveColumnLayout = p, e.layout = function (t, e) { var n = h(t, e); var r = d(n); var o = {}; var s = {}; i.each(n, function (t) { var e = t.getData(); var n = t.coordinateSystem; var i = n.getBaseAxis(); var l = u(t); var h = r[c(i)][l]; var d = h.offset; var f = h.width; var p = n.getOtherAxis(i); var g = t.get('barMinHeight') || 0; o[l] = o[l] || [], s[l] = s[l] || [], e.setLayout({ bandWidth: h.bandWidth, offset: d, size: f }); for (var v = e.mapDimension(p.dim), m = e.mapDimension(i.dim), x = a(e, v), _ = p.isHorizontal(), b = y(i, p, x), w = 0, S = e.count(); w < S; w++) { var M = e.get(v, w); var I = e.get(m, w); if (!isNaN(M) && !isNaN(I)) { var A; var T; var C; var D; var L; var P = M >= 0 ? 'p' : 'n'; var k = b; if (x && (o[l][I] || (o[l][I] = { p: b, n: b }), k = o[l][I][P]), _)A = k, T = (L = n.dataToPoint([M, I]))[1] + d, C = L[0] - b, D = f, Math.abs(C) < g && (C = (C < 0 ? -1 : 1) * g), x && (o[l][I][P] += C); else A = (L = n.dataToPoint([I, M]))[0] + d, T = k, C = f, D = L[1] - b, Math.abs(D) < g && (D = (D <= 0 ? -1 : 1) * g), x && (o[l][I][P] += D); e.setItemLayout(w, { x: A, y: T, width: C, height: D }) } } }, this) }, e.largeLayout = g }, function (t, e, n) { var i = n(0); var r = n(19).createSymbol; var a = n(2); var o = n(3).parsePercent; var s = n(97).getDefaultLabel; function l (t, e, n) { a.Group.call(this), this.updateData(t, e, n) } var u = l.prototype; var c = l.getSymbolSize = function (t, e) { var n = t.getItemVisual(e, 'symbolSize'); return n instanceof Array ? n.slice() : [+n, +n] }; function h (t) { return [t[0] / 2, t[1] / 2] } function d (t, e) { this.parent.drift(t, e) }u._createSymbol = function (t, e, n, i, a) { this.removeAll(); var o = e.getItemVisual(n, 'color'); var s = r(t, -1, -1, 2, 2, o, a); s.attr({ z2: 100, culling: !0, scale: h(i) }), s.drift = d, this._symbolType = t, this.add(s) }, u.stopSymbolAnimation = function (t) { this.childAt(0).stopAnimation(t) }, u.getSymbolPath = function () { return this.childAt(0) }, u.getScale = function () { return this.childAt(0).scale }, u.highlight = function () { this.childAt(0).trigger('emphasis') }, u.downplay = function () { this.childAt(0).trigger('normal') }, u.setZ = function (t, e) { var n = this.childAt(0); n.zlevel = t, n.z = e }, u.setDraggable = function (t) { var e = this.childAt(0); e.draggable = t, e.cursor = t ? 'move' : e.cursor }, u.updateData = function (t, e, n) { this.silent = !1; var i = t.getItemVisual(e, 'symbol') || 'circle'; var r = t.hostModel; var o = c(t, e); var s = i !== this._symbolType; if (s) { var l = t.getItemVisual(e, 'symbolKeepAspect'); this._createSymbol(i, t, e, o, l) } else { (u = this.childAt(0)).silent = !1, a.updateProps(u, { scale: h(o) }, r, e) } if (this._updateCommon(t, e, o, n), s) { var u = this.childAt(0); var d = n && n.fadeIn; var f = { scale: u.scale.slice() }; d && (f.style = { opacity: u.style.opacity }), u.scale = [0, 0], d && (u.style.opacity = 0), a.initProps(u, f, r, e) } this._seriesModel = r }; var f = ['itemStyle']; var p = ['emphasis', 'itemStyle']; var g = ['label']; var v = ['emphasis', 'label']; function m (t, e) { if (!this.incremental && !this.useHoverLayer) if (e === 'emphasis') { var n = this.__symbolOriginalScale; var i = n[1] / n[0]; var r = { scale: [Math.max(1.1 * n[0], n[0] + 3), Math.max(1.1 * n[1], n[1] + 3 * i)] }; this.animateTo(r, 400, 'elasticOut') } else e === 'normal' && this.animateTo({ scale: this.__symbolOriginalScale }, 400, 'elasticOut') }u._updateCommon = function (t, e, n, r) { var l = this.childAt(0); var u = t.hostModel; var c = t.getItemVisual(e, 'color'); l.type !== 'image' ? l.useStyle({ strokeNoScale: !0 }) : l.setStyle({ opacity: null, shadowBlur: null, shadowOffsetX: null, shadowOffsetY: null, shadowColor: null }); var d = r && r.itemStyle; var y = r && r.hoverItemStyle; var x = r && r.symbolRotate; var _ = r && r.symbolOffset; var b = r && r.labelModel; var w = r && r.hoverLabelModel; var S = r && r.hoverAnimation; var M = r && r.cursorStyle; if (!r || t.hasItemOption) { var I = r && r.itemModel ? r.itemModel : t.getItemModel(e); d = I.getModel(f).getItemStyle(['color']), y = I.getModel(p).getItemStyle(), x = I.getShallow('symbolRotate'), _ = I.getShallow('symbolOffset'), b = I.getModel(g), w = I.getModel(v), S = I.getShallow('hoverAnimation'), M = I.getShallow('cursor') } else y = i.extend({}, y); var A = l.style; l.attr('rotation', (x || 0) * Math.PI / 180 || 0), _ && l.attr('position', [o(_[0], n[0]), o(_[1], n[1])]), M && l.attr('cursor', M), l.setColor(c, r && r.symbolInnerColor), l.setStyle(d); var T = t.getItemVisual(e, 'opacity'); T != null && (A.opacity = T); var C = t.getItemVisual(e, 'liftZ'); var D = l.__z2Origin; C != null ? D == null && (l.__z2Origin = l.z2, l.z2 += C) : D != null && (l.z2 = D, l.__z2Origin = null); var L = r && r.useNameLabel; a.setLabelStyle(A, y, b, w, { labelFetcher: u, labelDataIndex: e, defaultText: function (e, n) { return L ? t.getName(e) : s(t, e) }, isRectText: !0, autoColor: c }), l.__symbolOriginalScale = h(n), l.hoverStyle = y, l.highDownOnUpdate = S && u.isAnimationEnabled() ? m : null, a.setHoverStyle(l) }, u.fadeOut = function (t, e) { var n = this.childAt(0); this.silent = n.silent = !0, (!e || !e.keepLabel) && (n.style.text = null), a.updateProps(n, { style: { opacity: 0 }, scale: [0, 0] }, this._seriesModel, this.dataIndex, t) }, i.inherits(l, a.Group); var y = l; t.exports = y }, function (t, e, n) { var i = n(0); var r = n(167); var a = n(13); var o = n(6); var s = o.getLayoutParams; var l = o.mergeLayoutParam; var u = n(158); var c = ['value', 'category', 'time', 'log']; t.exports = function (t, e, n, o) { i.each(c, function (a) { e.extend({ type: t + 'Axis.' + a, mergeDefaultAndTheme: function (e, r) { var o = this.layoutMode; var u = o ? s(e) : {}; var c = r.getTheme(); i.merge(e, c.get(a + 'Axis')), i.merge(e, this.getDefaultOption()), e.type = n(t, e), o && l(e, u, o) }, optionUpdated: function () { this.option.type === 'category' && (this.__ordinalMeta = u.createByAxisModel(this)) }, getCategories: function (t) { var e = this.option; if (e.type === 'category') return t ? e.data : this.__ordinalMeta.categories }, getOrdinalMeta: function () { return this.__ordinalMeta }, defaultOption: i.mergeAll([{}, r[a + 'Axis'], o], !0) }) }), a.registerSubTypeDefaulter(t + 'Axis', i.curry(n, t)) } }, function (t, e, n) { var i = n(0); var r = n(12); var a = i.each; var o = i.curry; function s (t, e) { return t === 'all' || i.isArray(t) && i.indexOf(t, e) >= 0 || t === e } function l (t) { var e = (t.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo; return e && e.axesInfo[c(t)] } function u (t) { return !!t.get('handle.show') } function c (t) { return t.type + '||' + t.id }e.collect = function (t, e) { var n = { axesInfo: {}, seriesInvolved: !1, coordSysAxesInfo: {}, coordSysMap: {} }; return (function (t, e, n) { var l = e.getComponent('tooltip'); var h = e.getComponent('axisPointer'); var d = h.get('link', !0) || []; var f = []; a(n.getCoordinateSystems(), function (n) { if (n.axisPointerEnabled) { var p = c(n.model); var g = t.coordSysAxesInfo[p] = {}; t.coordSysMap[p] = n; var v = n.model.getModel('tooltip', l); if (a(n.getAxes(), o(_, !1, null)), n.getTooltipAxes && l && v.get('show')) { var m = v.get('trigger') === 'axis'; var y = v.get('axisPointer.type') === 'cross'; var x = n.getTooltipAxes(v.get('axisPointer.axis')); (m || y) && a(x.baseAxes, o(_, !y || 'cross', m)), y && a(x.otherAxes, o(_, 'cross', !1)) } } function _ (o, l, p) { var m = p.model.getModel('axisPointer', h); var y = m.get('show'); if (y && (y !== 'auto' || o || u(m))) { l == null && (l = m.get('triggerTooltip')); var x = (m = o ? (function (t, e, n, o, s, l) { var u = e.getModel('axisPointer'); var c = {}; a(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (t) { c[t] = i.clone(u.get(t)) }), c.snap = t.type !== 'category' && !!l, u.get('type') === 'cross' && (c.type = 'line'); var h = c.label || (c.label = {}); if (h.show == null && (h.show = !1), s === 'cross') { var d = u.get('label.show'); if (h.show = d == null || d, !l) { var f = c.lineStyle = u.get('crossStyle'); f && i.defaults(h, f.textStyle) } } return t.model.getModel('axisPointer', new r(c, n, o)) }(p, v, h, e, o, l)) : m).get('snap'); var _ = c(p.model); var b = l || x || p.type === 'category'; var w = t.axesInfo[_] = { key: _, axis: p, coordSys: n, axisPointerModel: m, triggerTooltip: l, involveSeries: b, snap: x, useHandle: u(m), seriesModels: [] }; g[_] = w, t.seriesInvolved |= b; var S = (function (t, e) { for (var n = e.model, i = e.dim, r = 0; r < t.length; r++) { var a = t[r] || {}; if (s(a[i + 'AxisId'], n.id) || s(a[i + 'AxisIndex'], n.componentIndex) || s(a[i + 'AxisName'], n.name)) return r } }(d, p)); if (S != null) { var M = f[S] || (f[S] = { axesInfo: {} }); M.axesInfo[_] = w, M.mapper = d[S].mapper, w.linkGroup = M } } } }) }(n, t, e)), n.seriesInvolved && (function (t, e) { e.eachSeries(function (e) { var n = e.coordinateSystem; var i = e.get('tooltip.trigger', !0); var r = e.get('tooltip.show', !0); n && i !== 'none' && !1 !== i && i !== 'item' && !1 !== r && !1 !== e.get('axisPointer.show', !0) && a(t.coordSysAxesInfo[c(n.model)], function (t) { var i = t.axis; n.getAxis(i.dim) === i && (t.seriesModels.push(e), t.seriesDataCount == null && (t.seriesDataCount = 0), t.seriesDataCount += e.getData().count()) }) }, this) }(n, t)), n }, e.fixValue = function (t) { var e = l(t); if (e) { var n = e.axisPointerModel; var i = e.axis.scale; var r = n.option; var a = n.get('status'); var o = n.get('value'); o != null && (o = i.parse(o)); var s = u(n); a == null && (r.status = s ? 'show' : 'hide'); var c = i.getExtent().slice(); c[0] > c[1] && c.reverse(), (o == null || o > c[1]) && (o = c[1]), o < c[0] && (o = c[0]), r.value = o, s && (r.status = e.axis.scale.isBlank() ? 'hide' : 'show') } }, e.getAxisInfo = l, e.getAxisPointerModel = function (t) { var e = l(t); return e && e.axisPointerModel }, e.makeKey = c }, function (t, e, n) { var i = n(0).createHashMap; t.exports = function (t) { return { getTargetSeries: function (e) { var n = {}; var r = i(); return e.eachSeriesByType(t, function (t) { t.__paletteScope = n, r.set(t.uid, t) }), r }, reset: function (t, e) { var n = t.getRawData(); var i = {}; var r = t.getData(); r.each(function (t) { var e = r.getRawIndex(t); i[e] = t }), n.each(function (e) { var a; var o = i[e]; var s = o != null && r.getItemVisual(o, 'color', !0); var l = o != null && r.getItemVisual(o, 'borderColor', !0); if (s && l || (a = n.getItemModel(e)), s)n.setItemVisual(e, 'color', s); else { var u = a.get('itemStyle.color') || t.getColorFromPalette(n.getName(e) || e + '', t.__paletteScope, n.count()); n.setItemVisual(e, 'color', u), o != null && r.setItemVisual(o, 'color', u) } if (l)n.setItemVisual(e, 'borderColor', l); else { var c = a.get('itemStyle.borderColor'); n.setItemVisual(e, 'borderColor', c), o != null && r.setItemVisual(o, 'borderColor', c) } }) } } } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = i.each; var a = i.createHashMap; var o = n(96); var s = n(313); var l = n(318); var u = n(8); var c = { geoJSON: s, svg: l }; var h = { load: function (t, e) { var n; var i = []; var o = a(); var s = a(); var l = f(t); return r(l, function (a) { var l = c[a.type].load(t, a); r(l.regions, function (t) { var n = t.name; e && e.hasOwnProperty(n) && (t = t.cloneShallow(n = e[n])), i.push(t), o.set(n, t), s.set(n, t.center) }); var u = l.boundingRect; u && (n ? n.union(u) : n = u.clone()) }), { regions: i, regionsMap: o, nameCoordMap: s, boundingRect: n || new u(0, 0, 0, 0) } }, makeGraphic: d('makeGraphic'), removeGraphic: d('removeGraphic') }; function d (t) { return function (e, n) { var i = f(e); var a = []; return r(i, function (i) { var r = c[i.type][t]; r && a.push(r(e, i, n)) }), a } } function f (t) { return o.retrieveMap(t) || [] }t.exports = h }, function (t, e) { var n = { axisPointer: 1, tooltip: 1, brush: 1 }; e.onIrrelevantElement = function (t, e, i) { var r = e.getComponentByElement(t.topTarget); var a = r && r.coordinateSystem; return r && r !== i && !n[r.mainType] && a && a.model !== i } }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(17); var o = n(9); var s = n(15); var l = n(21); var u = n(32); function c (t, e, n, i, r) { var s = h(n.get('value'), e.axis, e.ecModel, n.get('seriesDataIndices'), { precision: n.get('label.precision'), formatter: n.get('label.formatter') }); var l = n.getModel('label'); var u = o.normalizeCssArray(l.get('padding') || 0); var c = l.getFont(); var d = a.getBoundingRect(s, c); var f = r.position; var p = d.width + u[1] + u[3]; var g = d.height + u[0] + u[2]; var v = r.align; v === 'right' && (f[0] -= p), v === 'center' && (f[0] -= p / 2); var m = r.verticalAlign; m === 'bottom' && (f[1] -= g), m === 'middle' && (f[1] -= g / 2), (function (t, e, n, i) { var r = i.getWidth(); var a = i.getHeight(); t[0] = Math.min(t[0] + e, r) - e, t[1] = Math.min(t[1] + n, a) - n, t[0] = Math.max(t[0], 0), t[1] = Math.max(t[1], 0) }(f, p, g, i)); var y = l.get('backgroundColor'); y && y !== 'auto' || (y = e.get('axisLine.lineStyle.color')), t.label = { shape: { x: 0, y: 0, width: p, height: g, r: l.get('borderRadius') }, position: f.slice(), style: { text: s, textFont: c, textFill: l.getTextColor(), textPosition: 'inside', textPadding: u, fill: y, stroke: l.get('borderColor') || 'transparent', lineWidth: l.get('borderWidth') || 0, shadowBlur: l.get('shadowBlur'), shadowColor: l.get('shadowColor'), shadowOffsetX: l.get('shadowOffsetX'), shadowOffsetY: l.get('shadowOffsetY') }, z2: 10 } } function h (t, e, n, r, a) { t = e.scale.parse(t); var o = e.scale.getLabel(t, { precision: a.precision }); var s = a.formatter; if (s) { var u = { value: l.getAxisRawValue(e, t), axisDimension: e.dim, axisIndex: e.index, seriesData: [] }; i.each(r, function (t) { var e = n.getSeriesByIndex(t.seriesIndex); var i = t.dataIndexInside; var r = e && e.getDataParams(i); r && u.seriesData.push(r) }), i.isString(s) ? o = s.replace('{value}', o) : i.isFunction(s) && (o = s(u)) } return o } function d (t, e, n) { var i = s.create(); return s.rotate(i, i, n.rotation), s.translate(i, i, n.position), r.applyTransform([t.dataToCoord(e), (n.labelOffset || 0) + (n.labelDirection || 1) * (n.labelMargin || 0)], i) }e.buildElStyle = function (t) { var e; var n = t.get('type'); var i = t.getModel(n + 'Style'); return n === 'line' ? (e = i.getLineStyle()).fill = null : n === 'shadow' && ((e = i.getAreaStyle()).stroke = null), e }, e.buildLabelElOption = c, e.getValueLabel = h, e.getTransformedPosition = d, e.buildCartesianSingleLabelElOption = function (t, e, n, i, r, a) { var o = u.innerTextLayout(n.rotation, 0, n.labelDirection); n.labelMargin = r.get('label.margin'), c(e, i, r, a, { position: d(i.axis, t, n), align: o.textAlign, verticalAlign: o.textVerticalAlign }) }, e.makeLineShape = function (t, e, n) { return { x1: t[n = n || 0], y1: t[1 - n], x2: e[n], y2: e[1 - n] } }, e.makeRectShape = function (t, e, n) { return { x: t[n = n || 0], y: t[1 - n], width: e[n], height: e[1 - n] } }, e.makeSectorShape = function (t, e, n, i, r, a) { return { cx: t, cy: e, r0: n, r: i, startAngle: r, endAngle: a, clockwise: !0 } } }, function (t, e, n) { var i = n(0); var r = n(41); var a = i.each; function o (t) { if (t) for (var e in t) if (t.hasOwnProperty(e)) return !0 }e.createVisualMappings = function (t, e, n) { var o = {}; return a(e, function (e) { var s; var l = o[e] = ((s = function () {}).prototype.__hidden = s.prototype, new s()); a(t[e], function (t, a) { if (r.isValidType(a)) { var o = { type: a, visual: t }; n && n(o, e), l[a] = new r(o), a === 'opacity' && ((o = i.clone(o)).type = 'colorAlpha', l.__hidden.__alphaForOpacity = new r(o)) } }) }), o }, e.replaceVisualOption = function (t, e, n) { var r; i.each(n, function (t) { e.hasOwnProperty(t) && o(e[t]) && (r = !0) }), r && i.each(n, function (n) { e.hasOwnProperty(n) && o(e[n]) ? t[n] = i.clone(e[n]) : delete t[n] }) }, e.applyVisual = function (t, e, n, a, o, s) { var l; var u = {}; function c (t) { return n.getItemVisual(l, t) } function h (t, e) { n.setItemVisual(l, t, e) } function d (t, i) { l = s == null ? t : i; var r = n.getRawDataItem(l); if (!r || !1 !== r.visualMap) for (var d = a.call(o, t), f = e[d], p = u[d], g = 0, v = p.length; g < v; g++) { var m = p[g]; f[m] && f[m].applyVisual(t, c, h) } }i.each(t, function (t) { var n = r.prepareVisualTypes(e[t]); u[t] = n }), s == null ? n.each(d) : n.each([s], d) }, e.incrementalApplyVisual = function (t, e, n, a) { var o = {}; return i.each(t, function (t) { var n = r.prepareVisualTypes(e[t]); o[t] = n }), { progress: function (t, i) { function r (t) { return i.getItemVisual(l, t) } function s (t, e) { i.setItemVisual(l, t, e) } var l; for (a != null && (a = i.getDimension(a)); (l = t.next()) != null;) { var u = i.getRawDataItem(l); if (!u || !1 !== u.visualMap) for (var c = a != null ? i.get(a, l, !0) : l, h = n(c), d = e[h], f = o[h], p = 0, g = f.length; p < g; p++) { var v = f[p]; d[v] && d[v].applyVisual(c, r, s) } } } } } }, function (t, e, n) { var i = n(15); var r = n(7); var a = i.identity; var o = 5e-5; function s (t) { return t > o || t < -o } var l = function (t) { (t = t || {}).position || (this.position = [0, 0]), t.rotation == null && (this.rotation = 0), t.scale || (this.scale = [1, 1]), this.origin = this.origin || null }; var u = l.prototype; u.transform = null, u.needLocalTransform = function () { return s(this.rotation) || s(this.position[0]) || s(this.position[1]) || s(this.scale[0] - 1) || s(this.scale[1] - 1) }; var c = []; u.updateTransform = function () { var t = this.parent; var e = t && t.transform; var n = this.needLocalTransform(); var r = this.transform; if (n || e) { r = r || i.create(), n ? this.getLocalTransform(r) : a(r), e && (n ? i.mul(r, t.transform, r) : i.copy(r, t.transform)), this.transform = r; var o = this.globalScaleRatio; if (o != null && o !== 1) { this.getGlobalScale(c); var s = c[0] < 0 ? -1 : 1; var l = c[1] < 0 ? -1 : 1; var u = ((c[0] - s) * o + s) / c[0] || 0; var h = ((c[1] - l) * o + l) / c[1] || 0; r[0] *= u, r[1] *= u, r[2] *= h, r[3] *= h } this.invTransform = this.invTransform || i.create(), i.invert(this.invTransform, r) } else r && a(r) }, u.getLocalTransform = function (t) { return l.getLocalTransform(this, t) }, u.setTransform = function (t) { var e = this.transform; var n = t.dpr || 1; e ? t.setTransform(n * e[0], n * e[1], n * e[2], n * e[3], n * e[4], n * e[5]) : t.setTransform(n, 0, 0, n, 0, 0) }, u.restoreTransform = function (t) { var e = t.dpr || 1; t.setTransform(e, 0, 0, e, 0, 0) }; var h = []; var d = i.create(); u.setLocalTransform = function (t) { if (t) { var e = t[0] * t[0] + t[1] * t[1]; var n = t[2] * t[2] + t[3] * t[3]; var i = this.position; var r = this.scale; s(e - 1) && (e = Math.sqrt(e)), s(n - 1) && (n = Math.sqrt(n)), t[0] < 0 && (e = -e), t[3] < 0 && (n = -n), i[0] = t[4], i[1] = t[5], r[0] = e, r[1] = n, this.rotation = Math.atan2(-t[1] / n, t[0] / e) } }, u.decomposeTransform = function () { if (this.transform) { var t = this.parent; var e = this.transform; t && t.transform && (i.mul(h, t.invTransform, e), e = h); var n = this.origin; n && (n[0] || n[1]) && (d[4] = n[0], d[5] = n[1], i.mul(h, e, d), h[4] -= n[0], h[5] -= n[1], e = h), this.setLocalTransform(e) } }, u.getGlobalScale = function (t) { var e = this.transform; return t = t || [], e ? (t[0] = Math.sqrt(e[0] * e[0] + e[1] * e[1]), t[1] = Math.sqrt(e[2] * e[2] + e[3] * e[3]), e[0] < 0 && (t[0] = -t[0]), e[3] < 0 && (t[1] = -t[1]), t) : (t[0] = 1, t[1] = 1, t) }, u.transformCoordToLocal = function (t, e) { var n = [t, e]; var i = this.invTransform; return i && r.applyTransform(n, n, i), n }, u.transformCoordToGlobal = function (t, e) { var n = [t, e]; var i = this.transform; return i && r.applyTransform(n, n, i), n }, l.getLocalTransform = function (t, e) { a(e = e || []); var n = t.origin; var r = t.scale || [1, 1]; var o = t.rotation || 0; var s = t.position || [0, 0]; return n && (e[4] -= n[0], e[5] -= n[1]), i.scale(e, e, r), o && i.rotate(e, e, o), n && (e[4] += n[0], e[5] += n[1]), e[4] += s[0], e[5] += s[1], e }; var f = l; t.exports = f }, function (t, e) { var n = 32; var i = 7; function r (t, e, n, i) { var r = e + 1; if (r === n) return 1; if (i(t[r++], t[e]) < 0) { for (;r < n && i(t[r], t[r - 1]) < 0;)r++; !(function (t, e, n) { n--; for (;e < n;) { var i = t[e]; t[e++] = t[n], t[n--] = i } }(t, e, r)) } else for (;r < n && i(t[r], t[r - 1]) >= 0;)r++; return r - e } function a (t, e, n, i, r) { for (i === e && i++; i < n; i++) { for (var a, o = t[i], s = e, l = i; s < l;)r(o, t[a = s + l >>> 1]) < 0 ? l = a : s = a + 1; var u = i - s; switch (u) { case 3:t[s + 3] = t[s + 2]; case 2:t[s + 2] = t[s + 1]; case 1:t[s + 1] = t[s]; break; default:for (;u > 0;)t[s + u] = t[s + u - 1], u-- }t[s] = o } } function o (t, e, n, i, r, a) { var o = 0; var s = 0; var l = 1; if (a(t, e[n + r]) > 0) { for (s = i - r; l < s && a(t, e[n + r + l]) > 0;)o = l, (l = 1 + (l << 1)) <= 0 && (l = s); l > s && (l = s), o += r, l += r } else { for (s = r + 1; l < s && a(t, e[n + r - l]) <= 0;)o = l, (l = 1 + (l << 1)) <= 0 && (l = s); l > s && (l = s); var u = o; o = r - l, l = r - u } for (o++; o < l;) { var c = o + (l - o >>> 1); a(t, e[n + c]) > 0 ? o = c + 1 : l = c } return l } function s (t, e, n, i, r, a) { var o = 0; var s = 0; var l = 1; if (a(t, e[n + r]) < 0) { for (s = r + 1; l < s && a(t, e[n + r - l]) < 0;)o = l, (l = 1 + (l << 1)) <= 0 && (l = s); l > s && (l = s); var u = o; o = r - l, l = r - u } else { for (s = i - r; l < s && a(t, e[n + r + l]) >= 0;)o = l, (l = 1 + (l << 1)) <= 0 && (l = s); l > s && (l = s), o += r, l += r } for (o++; o < l;) { var c = o + (l - o >>> 1); a(t, e[n + c]) < 0 ? l = c : o = c + 1 } return l } function l (t, e) { var n; var r; var a; var l = i; var u = 0; n = t.length; var c = []; function h (n) { var h = r[n]; var d = a[n]; var f = r[n + 1]; var p = a[n + 1]; a[n] = d + p, n === u - 3 && (r[n + 1] = r[n + 2], a[n + 1] = a[n + 2]), u--; var g = s(t[f], t, h, d, 0, e); h += g, (d -= g) !== 0 && (p = o(t[h + d - 1], t, f, p, p - 1, e)) !== 0 && (d <= p ? (function (n, r, a, u) { var h = 0; for (h = 0; h < r; h++)c[h] = t[n + h]; var d = 0; var f = a; var p = n; if (t[p++] = t[f++], --u == 0) { for (h = 0; h < r; h++)t[p + h] = c[d + h]; return } if (r === 1) { for (h = 0; h < u; h++)t[p + h] = t[f + h]; return void (t[p + u] = c[d]) } var g; var v; var m; var y = l; for (;;) { g = 0, v = 0, m = !1; do { if (e(t[f], c[d]) < 0) { if (t[p++] = t[f++], v++, g = 0, --u == 0) { m = !0; break } } else if (t[p++] = c[d++], g++, v = 0, --r == 1) { m = !0; break } } while ((g | v) < y);if (m) break; do { if ((g = s(t[f], c, d, r, 0, e)) !== 0) { for (h = 0; h < g; h++)t[p + h] = c[d + h]; if (p += g, d += g, (r -= g) <= 1) { m = !0; break } } if (t[p++] = t[f++], --u == 0) { m = !0; break } if ((v = o(c[d], t, f, u, 0, e)) !== 0) { for (h = 0; h < v; h++)t[p + h] = t[f + h]; if (p += v, f += v, (u -= v) === 0) { m = !0; break } } if (t[p++] = c[d++], --r == 1) { m = !0; break }y-- } while (g >= i || v >= i);if (m) break; y < 0 && (y = 0), y += 2 } if ((l = y) < 1 && (l = 1), r === 1) { for (h = 0; h < u; h++)t[p + h] = t[f + h]; t[p + u] = c[d] } else { if (r === 0) throw new Error(); for (h = 0; h < r; h++)t[p + h] = c[d + h] } }(h, d, f, p)) : (function (n, r, a, u) { var h = 0; for (h = 0; h < u; h++)c[h] = t[a + h]; var d = n + r - 1; var f = u - 1; var p = a + u - 1; var g = 0; var v = 0; if (t[p--] = t[d--], --r == 0) { for (g = p - (u - 1), h = 0; h < u; h++)t[g + h] = c[h]; return } if (u === 1) { for (v = (p -= r) + 1, g = (d -= r) + 1, h = r - 1; h >= 0; h--)t[v + h] = t[g + h]; return void (t[p] = c[f]) } var m = l; for (;;) { var y = 0; var x = 0; var _ = !1; do { if (e(c[f], t[d]) < 0) { if (t[p--] = t[d--], y++, x = 0, --r == 0) { _ = !0; break } } else if (t[p--] = c[f--], x++, y = 0, --u == 1) { _ = !0; break } } while ((y | x) < m);if (_) break; do { if ((y = r - s(c[f], t, n, r, r - 1, e)) !== 0) { for (r -= y, v = (p -= y) + 1, g = (d -= y) + 1, h = y - 1; h >= 0; h--)t[v + h] = t[g + h]; if (r === 0) { _ = !0; break } } if (t[p--] = c[f--], --u == 1) { _ = !0; break } if ((x = u - o(t[d], c, 0, u, u - 1, e)) !== 0) { for (u -= x, v = (p -= x) + 1, g = (f -= x) + 1, h = 0; h < x; h++)t[v + h] = c[g + h]; if (u <= 1) { _ = !0; break } } if (t[p--] = t[d--], --r == 0) { _ = !0; break }m-- } while (y >= i || x >= i);if (_) break; m < 0 && (m = 0), m += 2 }(l = m) < 1 && (l = 1); if (u === 1) { for (v = (p -= r) + 1, g = (d -= r) + 1, h = r - 1; h >= 0; h--)t[v + h] = t[g + h]; t[p] = c[f] } else { if (u === 0) throw new Error(); for (g = p - (u - 1), h = 0; h < u; h++)t[g + h] = c[h] } }(h, d, f, p))) }r = [], a = [], this.mergeRuns = function () { for (;u > 1;) { var t = u - 2; if (t >= 1 && a[t - 1] <= a[t] + a[t + 1] || t >= 2 && a[t - 2] <= a[t] + a[t - 1])a[t - 1] < a[t + 1] && t--; else if (a[t] > a[t + 1]) break; h(t) } }, this.forceMergeRuns = function () { for (;u > 1;) { var t = u - 2; t > 0 && a[t - 1] < a[t + 1] && t--, h(t) } }, this.pushRun = function (t, e) { r[u] = t, a[u] = e, u += 1 } }t.exports = function (t, e, i, o) { i || (i = 0), o || (o = t.length); var s = o - i; if (!(s < 2)) { var u = 0; if (s < n)a(t, i, o, i + (u = r(t, i, o, e)), e); else { var c = new l(t, e); var h = (function (t) { for (var e = 0; t >= n;)e |= 1 & t, t >>= 1; return t + e }(s)); do { if ((u = r(t, i, o, e)) < h) { var d = s; d > h && (d = h), a(t, i, i + d, i + u, e), u = d }c.pushRun(i, u), c.mergeRuns(), s -= u, i += u } while (s !== 0);c.forceMergeRuns() } } } }, function (t, e, n) { var i = n(134); var r = n(69).ContextCachedBy; var a = [['shadowBlur', 0], ['shadowOffsetX', 0], ['shadowOffsetY', 0], ['shadowColor', '#000'], ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]]; var o = function (t) { this.extendFrom(t, !1) }; function s (t, e, n) { var i = e.x == null ? 0 : e.x; var r = e.x2 == null ? 1 : e.x2; var a = e.y == null ? 0 : e.y; var o = e.y2 == null ? 0 : e.y2; return e.global || (i = i * n.width + n.x, r = r * n.width + n.x, a = a * n.height + n.y, o = o * n.height + n.y), i = isNaN(i) ? 0 : i, r = isNaN(r) ? 1 : r, a = isNaN(a) ? 0 : a, o = isNaN(o) ? 0 : o, t.createLinearGradient(i, a, r, o) } function l (t, e, n) { var i = n.width; var r = n.height; var a = Math.min(i, r); var o = e.x == null ? 0.5 : e.x; var s = e.y == null ? 0.5 : e.y; var l = e.r == null ? 0.5 : e.r; return e.global || (o = o * i + n.x, s = s * r + n.y, l *= a), t.createRadialGradient(o, s, 0, o, s, l) } for (var u = o.prototype = { constructor: o, fill: '#000', stroke: null, opacity: 1, fillOpacity: null, strokeOpacity: null, lineDash: null, lineDashOffset: 0, shadowBlur: 0, shadowOffsetX: 0, shadowOffsetY: 0, lineWidth: 1, strokeNoScale: !1, text: null, font: null, textFont: null, fontStyle: null, fontWeight: null, fontSize: null, fontFamily: null, textTag: null, textFill: '#000', textStroke: null, textWidth: null, textHeight: null, textStrokeWidth: 0, textLineHeight: null, textPosition: 'inside', textRect: null, textOffset: null, textAlign: null, textVerticalAlign: null, textDistance: 5, textShadowColor: 'transparent', textShadowBlur: 0, textShadowOffsetX: 0, textShadowOffsetY: 0, textBoxShadowColor: 'transparent', textBoxShadowBlur: 0, textBoxShadowOffsetX: 0, textBoxShadowOffsetY: 0, transformText: !1, textRotation: 0, textOrigin: null, textBackgroundColor: null, textBorderColor: null, textBorderWidth: 0, textBorderRadius: 0, textPadding: null, rich: null, truncate: null, blend: null, bind: function (t, e, n) { var o = n && n.style; var s = !o || t.__attrCachedBy !== r.STYLE_BIND; t.__attrCachedBy = r.STYLE_BIND; for (var l = 0; l < a.length; l++) { var u = a[l]; var c = u[0]; (s || this[c] !== o[c]) && (t[c] = i(t, c, this[c] || u[1])) } if ((s || this.fill !== o.fill) && (t.fillStyle = this.fill), (s || this.stroke !== o.stroke) && (t.strokeStyle = this.stroke), (s || this.opacity !== o.opacity) && (t.globalAlpha = this.opacity == null ? 1 : this.opacity), (s || this.blend !== o.blend) && (t.globalCompositeOperation = this.blend || 'source-over'), this.hasStroke()) { var h = this.lineWidth; t.lineWidth = h / (this.strokeNoScale && e && e.getLineScale ? e.getLineScale() : 1) } }, hasFill: function () { var t = this.fill; return t != null && t !== 'none' }, hasStroke: function () { var t = this.stroke; return t != null && t !== 'none' && this.lineWidth > 0 }, extendFrom: function (t, e) { if (t) for (var n in t)!t.hasOwnProperty(n) || !0 !== e && (!1 === e ? this.hasOwnProperty(n) : t[n] == null) || (this[n] = t[n]) }, set: function (t, e) { typeof t === 'string' ? this[t] = e : this.extendFrom(t, !0) }, clone: function () { var t = new this.constructor(); return t.extendFrom(this, !0), t }, getGradient: function (t, e, n) { for (var i = (e.type === 'radial' ? l : s)(t, e, n), r = e.colorStops, a = 0; a < r.length; a++)i.addColorStop(r[a].offset, r[a].color); return i } }, c = 0; c < a.length; c++) { var h = a[c]; h[0] in u || (u[h[0]] = h[1]) }o.getGradient = u.getGradient; var d = o; t.exports = d }, function (t, e, n) { var i = new (n(133))(50); function r () { var t = this.__cachedImgObj; this.onload = this.onerror = this.__cachedImgObj = null; for (var e = 0; e < t.pending.length; e++) { var n = t.pending[e]; var i = n.cb; i && i(this, n.cbPayload), n.hostEl.dirty() }t.pending.length = 0 } function a (t) { return t && t.width && t.height }e.findExistImage = function (t) { if (typeof t === 'string') { var e = i.get(t); return e && e.image } return t }, e.createOrUpdateImage = function (t, e, n, o, s) { if (t) { if (typeof t === 'string') { if (e && e.__zrImageSrc === t || !n) return e; var l = i.get(t); var u = { hostEl: n, cb: o, cbPayload: s }; return l ? !a(e = l.image) && l.pending.push(u) : ((e = new Image()).onload = e.onerror = r, i.put(t, e.__cachedImgObj = { image: e, pending: [u] }), e.src = e.__zrImageSrc = t), e } return t } return e }, e.isImageReady = a }, function (t, e, n) { var i = n(10); var r = n(138); var a = n(91).subPixelOptimizeRect; var o = {}; var s = i.extend({ type: 'rect', shape: { r: 0, x: 0, y: 0, width: 0, height: 0 }, buildPath: function (t, e) { var n, i, s, l; this.subPixelOptimize ? (a(o, e, this.style), n = o.x, i = o.y, s = o.width, l = o.height, o.r = e.r, e = o) : (n = e.x, i = e.y, s = e.width, l = e.height), e.r ? r.buildPath(t, e) : t.rect(n, i, s, l), t.closePath() } }); t.exports = s }, function (t, e) { var n = Math.round; function i (t, e, i) { var r = n(2 * t); return (r + n(e)) % 2 == 0 ? r / 2 : (r + (i ? 1 : -1)) / 2 }e.subPixelOptimizeLine = function (t, e, r) { var a = r && r.lineWidth; if (e && a) { var o = e.x1; var s = e.x2; var l = e.y1; var u = e.y2; n(2 * o) === n(2 * s) ? t.x1 = t.x2 = i(o, a, !0) : (t.x1 = o, t.x2 = s), n(2 * l) === n(2 * u) ? t.y1 = t.y2 = i(l, a, !0) : (t.y1 = l, t.y2 = u) } }, e.subPixelOptimizeRect = function (t, e, n) { var r = n && n.lineWidth; if (e && r) { var a = e.x; var o = e.y; var s = e.width; var l = e.height; t.x = i(a, r, !0), t.y = i(o, r, !0), t.width = Math.max(i(a + s, r, !1) - t.x, s === 0 ? 0 : 1), t.height = Math.max(i(o + l, r, !1) - t.y, l === 0 ? 0 : 1) } }, e.subPixelOptimize = i }, function (t, e, n) { var i = n(0); var r = n(72); var a = function (t, e, n, i, a, o) { this.x = t == null ? 0 : t, this.y = e == null ? 0 : e, this.x2 = n == null ? 1 : n, this.y2 = i == null ? 0 : i, this.type = 'linear', this.global = o || !1, r.call(this, a) }; a.prototype = { constructor: a }, i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { var i = n(0).inherits; var r = n(54); var a = n(8); function o (t) { r.call(this, t), this._displayables = [], this._temporaryDisplayables = [], this._cursor = 0, this.notClear = !0 }o.prototype.incremental = !0, o.prototype.clearDisplaybles = function () { this._displayables = [], this._temporaryDisplayables = [], this._cursor = 0, this.dirty(), this.notClear = !1 }, o.prototype.addDisplayable = function (t, e) { e ? this._temporaryDisplayables.push(t) : this._displayables.push(t), this.dirty() }, o.prototype.addDisplayables = function (t, e) { e = e || !1; for (var n = 0; n < t.length; n++) this.addDisplayable(t[n], e) }, o.prototype.eachPendingDisplayable = function (t) { for (var e = this._cursor; e < this._displayables.length; e++)t && t(this._displayables[e]); for (e = 0; e < this._temporaryDisplayables.length; e++)t && t(this._temporaryDisplayables[e]) }, o.prototype.update = function () { this.updateTransform(); for (var t = this._cursor; t < this._displayables.length; t++) { (e = this._displayables[t]).parent = this, e.update(), e.parent = null } for (t = 0; t < this._temporaryDisplayables.length; t++) { var e; (e = this._temporaryDisplayables[t]).parent = this, e.update(), e.parent = null } }, o.prototype.brush = function (t, e) { for (var n = this._cursor; n < this._displayables.length; n++) { (i = this._displayables[n]).beforeBrush && i.beforeBrush(t), i.brush(t, n === this._cursor ? null : this._displayables[n - 1]), i.afterBrush && i.afterBrush(t) } this._cursor = n; for (n = 0; n < this._temporaryDisplayables.length; n++) { var i; (i = this._temporaryDisplayables[n]).beforeBrush && i.beforeBrush(t), i.brush(t, n === 0 ? null : this._temporaryDisplayables[n - 1]), i.afterBrush && i.afterBrush(t) } this._temporaryDisplayables = [], this.notClear = !0 }; var s = []; o.prototype.getBoundingRect = function () { if (!this._rect) { for (var t = new a(1 / 0, 1 / 0, -1 / 0, -1 / 0), e = 0; e < this._displayables.length; e++) { var n = this._displayables[e]; var i = n.getBoundingRect().clone(); n.needLocalTransform() && i.applyTransform(n.getLocalTransform(s)), t.union(i) } this._rect = t } return this._rect }, o.prototype.contain = function (t, e) { var n = this.transformCoordToLocal(t, e); if (this.getBoundingRect().contain(n[0], n[1])) for (var i = 0; i < this._displayables.length; i++) { if (this._displayables[i].contain(t, e)) return !0 } return !1 }, i(o, r); var l = o; t.exports = l }, function (t, e, n) { var i = n(36).retrieveRawValue; var r = n(9); var a = r.getTooltipMarker; var o = r.formatTpl; var s = n(4).getTooltipRenderMode; var l = /\{@(.+?)\}/g; var u = { getDataParams: function (t, e) { var n = this.getData(e); var i = this.getRawValue(t, e); var r = n.getRawIndex(t); var o = n.getName(t); var l = n.getRawDataItem(t); var u = n.getItemVisual(t, 'color'); var c = n.getItemVisual(t, 'borderColor'); var h = this.ecModel.getComponent('tooltip'); var d = h && h.get('renderMode'); var f = s(d); var p = this.mainType; var g = p === 'series'; var v = n.userOutput; return { componentType: p, componentSubType: this.subType, componentIndex: this.componentIndex, seriesType: g ? this.subType : null, seriesIndex: this.seriesIndex, seriesId: g ? this.id : null, seriesName: g ? this.name : null, name: o, dataIndex: r, data: l, dataType: e, value: i, color: u, borderColor: c, dimensionNames: v ? v.dimensionNames : null, encode: v ? v.encode : null, marker: a({ color: u, renderMode: f }), $vars: ['seriesName', 'name', 'value'] } }, getFormattedLabel: function (t, e, n, r, a) { e = e || 'normal'; var s = this.getData(n); var u = s.getItemModel(t); var c = this.getDataParams(t, n); r != null && c.value instanceof Array && (c.value = c.value[r]); var h = u.get(e === 'normal' ? [a || 'label', 'formatter'] : [e, a || 'label', 'formatter']); return typeof h === 'function' ? (c.status = e, c.dimensionIndex = r, h(c)) : typeof h === 'string' ? o(h, c).replace(l, function (e, n) { var r = n.length; return n.charAt(0) === '[' && n.charAt(r - 1) === ']' && (n = +n.slice(1, r - 1)), i(s, t, n) }) : void 0 }, getRawValue: function (t, e) { return i(this.getData(e), t) }, formatTooltip: function () {} }; t.exports = u }, function (t, e, n) { var i = n(0); var r = (i.assert, i.isArray); n(5).__DEV__; function a (t) { t = t || {}, this._reset = t.reset, this._plan = t.plan, this._count = t.count, this._onDirty = t.onDirty, this._dirty = !0, this.context } var o = a.prototype; o.perform = function (t) { var e; var n = this._upstream; var i = t && t.skip; if (this._dirty && n) { var a = this.context; a.data = a.outputData = n.context.outputData } this.__pipeline && (this.__pipeline.currentTask = this), this._plan && !i && (e = this._plan(this.context)); var o; var s = d(this._modBy); var u = this._modDataCount || 0; var c = d(t && t.modBy); var h = t && t.modDataCount || 0; function d (t) { return !(t >= 1) && (t = 1), t }s === c && u === h || (e = 'reset'), (this._dirty || e === 'reset') && (this._dirty = !1, o = (function (t, e) { var n, i; t._dueIndex = t._outputDueEnd = t._dueEnd = 0, t._settedOutputEnd = null, !e && t._reset && ((n = t._reset(t.context)) && n.progress && (i = n.forceFirstProgress, n = n.progress), r(n) && !n.length && (n = null)); t._progress = n, t._modBy = t._modDataCount = null; var a = t._downstream; return a && a.dirty(), i }(this, i))), this._modBy = c, this._modDataCount = h; var f = t && t.step; if (this._dueEnd = n ? n._outputDueEnd : this._count ? this._count(this.context) : 1 / 0, this._progress) { var p = this._dueIndex; var g = Math.min(f != null ? this._dueIndex + f : 1 / 0, this._dueEnd); if (!i && (o || p < g)) { var v = this._progress; if (r(v)) for (var m = 0; m < v.length; m++)l(this, v[m], p, g, c, h); else l(this, v, p, g, c, h) } this._dueIndex = g; var y = this._settedOutputEnd != null ? this._settedOutputEnd : g; this._outputDueEnd = y } else this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd; return this.unfinished() }; var s = (function () { var t; var e; var n; var i; var r; var a = { reset: function (l, u, c, h) { e = l, t = u, n = c, i = h, r = Math.ceil(i / n), a.next = n > 1 && i > 0 ? s : o } }; return a; function o () { return e < t ? e++ : null } function s () { var a = e % r * n + Math.ceil(e / r); var o = e >= t ? null : a < i ? a : e; return e++, o } }()); function l (t, e, n, i, r, a) { s.reset(n, i, r, a), t._callingProgress = e, t._callingProgress({ start: n, end: i, count: i - n, next: s.next }, t.context) }o.dirty = function () { this._dirty = !0, this._onDirty && this._onDirty(this.context) }, o.unfinished = function () { return this._progress && this._dueIndex < this._dueEnd }, o.pipe = function (t) { (this._downstream !== t || this._dirty) && (this._downstream = t, t._upstream = this, t.dirty()) }, o.dispose = function () { this._disposed || (this._upstream && (this._upstream._downstream = null), this._downstream && (this._downstream._upstream = null), this._dirty = !1, this._disposed = !0) }, o.getUpstream = function () { return this._upstream }, o.getDownstream = function () { return this._downstream }, o.setOutputEnd = function (t) { this._outputDueEnd = this._settedOutputEnd = t }, e.createTask = function (t) { return new a(t) } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = i.createHashMap; var a = i.isString; var o = i.isArray; var s = i.each; var l = (i.assert, n(155).parseXML); var u = r(); var c = { registerMap: function (t, e, n) { var i; return o(e) ? i = e : e.svg ? i = [{ type: 'svg', source: e.svg, specialAreas: e.specialAreas }] : (e.geoJson && !e.features && (n = e.specialAreas, e = e.geoJson), i = [{ type: 'geoJSON', source: e, specialAreas: n }]), s(i, function (t) { var e = t.type; e === 'geoJson' && (e = t.type = 'geoJSON'), (0, h[e])(t) }), u.set(t, i) }, retrieveMap: function (t) { return u.get(t) } }; var h = { geoJSON: function (t) { var e = t.source; t.geoJSON = a(e) ? typeof JSON !== 'undefined' && JSON.parse ? JSON.parse(e) : new Function('return (' + e + ');')() : e }, svg: function (t) { t.svgXML = l(t.source) } }; t.exports = c }, function (t, e, n) { var i = n(36).retrieveRawValue; e.getDefaultLabel = function (t, e) { var n = t.mapDimension('defaultedLabel', !0); var r = n.length; if (r === 1) return i(t, e, n[0]); if (r) { for (var a = [], o = 0; o < n.length; o++) { var s = i(t, e, n[o]); a.push(s) } return a.join(' ') } } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = i.isObject; var a = i.each; var o = i.map; var s = i.indexOf; var l = (i.retrieve, n(6).getLayoutRect); var u = n(21); var c = u.createScaleByModel; var h = u.ifAxisCrossZero; var d = u.niceScaleExtent; var f = u.estimateLabelUnionRect; var p = n(281); var g = n(283); var v = n(20); var m = n(25).getStackedDimension; function y (t, e, n) { return t.getCoordSysModel() === e } function x (t, e, n) { this._coordsMap = {}, this._coordsList = [], this._axesMap = {}, this._axesList = [], this._initCartesian(t, e, n), this.model = t }n(284); var _ = x.prototype; function b (t, e, n, i) { n.getAxesOnZeroOf = function () { return r ? [r] : [] }; var r; var a = t[e]; var o = n.model; var s = o.get('axisLine.onZero'); var l = o.get('axisLine.onZeroAxisIndex'); if (s) { if (l != null)w(a[l]) && (r = a[l]); else for (var u in a) if (a.hasOwnProperty(u) && w(a[u]) && !i[c(a[u])]) { r = a[u]; break }r && (i[c(r)] = !0) } function c (t) { return t.dim + '_' + t.index } } function w (t) { return t && t.type !== 'category' && t.type !== 'time' && h(t) }_.type = 'grid', _.axisPointerEnabled = !0, _.getRect = function () { return this._rect }, _.update = function (t, e) { var n = this._axesMap; this._updateScale(t, this.model), a(n.x, function (t) { d(t.scale, t.model) }), a(n.y, function (t) { d(t.scale, t.model) }); var i = {}; a(n.x, function (t) { b(n, 'y', t, i) }), a(n.y, function (t) { b(n, 'x', t, i) }), this.resize(this.model, e) }, _.resize = function (t, e, n) { var i = l(t.getBoxLayoutParams(), { width: e.getWidth(), height: e.getHeight() }); this._rect = i; var r = this._axesList; function o () { a(r, function (t) { var e = t.isHorizontal(); var n = e ? [0, i.width] : [0, i.height]; var r = t.inverse ? 1 : 0; t.setExtent(n[r], n[1 - r]), (function (t, e) { var n = t.getExtent(); var i = n[0] + n[1]; t.toGlobalCoord = t.dim === 'x' ? function (t) { return t + e } : function (t) { return i - t + e }, t.toLocalCoord = t.dim === 'x' ? function (t) { return t - e } : function (t) { return i - t + e } }(t, e ? i.x : i.y)) }) }o(), !n && t.get('containLabel') && (a(r, function (t) { if (!t.model.get('axisLabel.inside')) { var e = f(t); if (e) { var n = t.isHorizontal() ? 'height' : 'width'; var r = t.model.get('axisLabel.margin'); i[n] -= e[n] + r, t.position === 'top' ? i.y += e.height + r : t.position === 'left' && (i.x += e.width + r) } } }), o()) }, _.getAxis = function (t, e) { var n = this._axesMap[t]; if (n != null) { if (e == null) for (var i in n) if (n.hasOwnProperty(i)) return n[i]; return n[e] } }, _.getAxes = function () { return this._axesList.slice() }, _.getCartesian = function (t, e) { if (t != null && e != null) { var n = 'x' + t + 'y' + e; return this._coordsMap[n] }r(t) && (e = t.yAxisIndex, t = t.xAxisIndex); for (var i = 0, a = this._coordsList; i < a.length; i++) if (a[i].getAxis('x').index === t || a[i].getAxis('y').index === e) return a[i] }, _.getCartesians = function () { return this._coordsList.slice() }, _.convertToPixel = function (t, e, n) { var i = this._findConvertTarget(t, e); return i.cartesian ? i.cartesian.dataToPoint(n) : i.axis ? i.axis.toGlobalCoord(i.axis.dataToCoord(n)) : null }, _.convertFromPixel = function (t, e, n) { var i = this._findConvertTarget(t, e); return i.cartesian ? i.cartesian.pointToData(n) : i.axis ? i.axis.coordToData(i.axis.toLocalCoord(n)) : null }, _._findConvertTarget = function (t, e) { var n; var i; var r = e.seriesModel; var a = e.xAxisModel || r && r.getReferringComponents('xAxis')[0]; var o = e.yAxisModel || r && r.getReferringComponents('yAxis')[0]; var l = e.gridModel; var u = this._coordsList; if (r)n = r.coordinateSystem, s(u, n) < 0 && (n = null); else if (a && o)n = this.getCartesian(a.componentIndex, o.componentIndex); else if (a)i = this.getAxis('x', a.componentIndex); else if (o)i = this.getAxis('y', o.componentIndex); else if (l) { l.coordinateSystem === this && (n = this._coordsList[0]) } return { cartesian: n, axis: i } }, _.containPoint = function (t) { var e = this._coordsList[0]; if (e) return e.containPoint(t) }, _._initCartesian = function (t, e, n) { var i = { left: !1, right: !1, top: !1, bottom: !1 }; var r = { x: {}, y: {} }; var o = { x: 0, y: 0 }; if (e.eachComponent('xAxis', s('x'), this), e.eachComponent('yAxis', s('y'), this), !o.x || !o.y) return this._axesMap = {}, void (this._axesList = []); function s (e) { return function (n, a) { if (y(n, t)) { var s = n.get('position'); e === 'x' ? s !== 'top' && s !== 'bottom' && (s = i.bottom ? 'top' : 'bottom') : s !== 'left' && s !== 'right' && (s = i.left ? 'right' : 'left'), i[s] = !0; var l = new g(e, c(n), [0, 0], n.get('type'), s); var u = l.type === 'category'; l.onBand = u && n.get('boundaryGap'), l.inverse = n.get('inverse'), n.axis = l, l.model = n, l.grid = this, l.index = a, this._axesList.push(l), r[e][a] = l, o[e]++ } } } this._axesMap = r, a(r.x, function (e, n) { a(r.y, function (i, r) { var a = 'x' + n + 'y' + r; var o = new p(a); o.grid = this, o.model = t, this._coordsMap[a] = o, this._coordsList.push(o), o.addAxis(e), o.addAxis(i) }, this) }, this) }, _._updateScale = function (t, e) { function n (t, e, n) { a(t.mapDimension(e.dim, !0), function (n) { e.scale.unionExtentFromData(t, m(t, n)) }) }a(this._axesList, function (t) { t.scale.setExtent(1 / 0, -1 / 0) }), t.eachSeries(function (i) { if (I(i)) { var r = M(i, t); var a = r[0]; var o = r[1]; if (!y(a, e) || !y(o, e)) return; var s = this.getCartesian(a.componentIndex, o.componentIndex); var l = i.getData(); var u = s.getAxis('x'); var c = s.getAxis('y'); l.type === 'list' && (n(l, u, i), n(l, c, i)) } }, this) }, _.getTooltipAxes = function (t) { var e = []; var n = []; return a(this.getCartesians(), function (i) { var r = t != null && t !== 'auto' ? i.getAxis(t) : i.getBaseAxis(); var a = i.getOtherAxis(r); s(e, r) < 0 && e.push(r), s(n, a) < 0 && n.push(a) }), { baseAxes: e, otherAxes: n } }; var S = ['xAxis', 'yAxis']; function M (t, e) { return o(S, function (e) { return t.getReferringComponents(e)[0] }) } function I (t) { return t.get('coordinateSystem') === 'cartesian2d' }x.create = function (t, e) { var n = []; return t.eachComponent('grid', function (i, r) { var a = new x(i, t, e); a.name = 'grid_' + r, a.resize(i, e, !0), i.coordinateSystem = a, n.push(a) }), t.eachSeries(function (t) { if (I(t)) { var e = M(t); var n = e[0]; var i = e[1]; var r = n.getCoordSysModel().coordinateSystem; t.coordinateSystem = r.getCartesian(n.componentIndex, i.componentIndex) } }), n }, x.dimensions = x.prototype.dimensions = p.prototype.dimensions, v.register('cartesian2d', x); var A = x; t.exports = A }, function (t, e, n) { var i = n(0); var r = { updateSelectedMap: function (t) { this._targetList = i.isArray(t) ? t.slice() : [], this._selectTargetMap = i.reduce(t || [], function (t, e) { return t.set(e.name, e), t }, i.createHashMap()) }, select: function (t, e) { var n = e != null ? this._targetList[e] : this._selectTargetMap.get(t); this.get('selectedMode') === 'single' && this._selectTargetMap.each(function (t) { t.selected = !1 }), n && (n.selected = !0) }, unSelect: function (t, e) { var n = e != null ? this._targetList[e] : this._selectTargetMap.get(t); n && (n.selected = !1) }, toggleSelected: function (t, e) { var n = e != null ? this._targetList[e] : this._selectTargetMap.get(t); if (n != null) return this[n.selected ? 'unSelect' : 'select'](t, e), n.selected }, isSelected: function (t, e) { var n = e != null ? this._targetList[e] : this._selectTargetMap.get(t); return n && n.selected } }; t.exports = r }, function (t, e) { e.updateViewOnPan = function (t, e, n) { var i = t.target; var r = i.position; r[0] += e, r[1] += n, i.dirty() }, e.updateViewOnZoom = function (t, e, n, i) { var r = t.target; var a = t.zoomLimit; var o = r.position; var s = r.scale; var l = t.zoom = t.zoom || 1; if (l *= e, a) { var u = a.min || 0; var c = a.max || 1 / 0; l = Math.max(Math.min(c, l), u) } var h = l / t.zoom; t.zoom = l, o[0] -= (n - o[0]) * (h - 1), o[1] -= (i - o[1]) * (h - 1), s[0] *= h, s[1] *= h, r.dirty() } }, function (t, e) { e.updateCenterAndZoom = function (t, e, n) { var i = t.getZoom(); var r = t.getCenter(); var a = e.zoom; var o = t.dataToPoint(r); if (e.dx != null && e.dy != null) { o[0] -= e.dx, o[1] -= e.dy; r = t.pointToData(o); t.setCenter(r) } if (a != null) { if (n) { var s = n.min || 0; var l = n.max || 1 / 0; a = Math.max(Math.min(i * a, l), s) / i }t.scale[0] *= a, t.scale[1] *= a; var u = t.position; var c = (e.originX - u[0]) * (a - 1); var h = (e.originY - u[1]) * (a - 1); u[0] -= c, u[1] -= h, t.updateTransform(); r = t.pointToData(o); t.setCenter(r), t.setZoom(a * i) } return { center: t.getCenter(), zoom: t.getZoom() } } }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(320); var o = n(6); var s = n(3); var l = n(82); var u = n(96); function c (t, e) { var n = t.get('boundingCoords'); if (n != null) { var i = n[0]; var r = n[1]; isNaN(i[0]) || isNaN(i[1]) || isNaN(r[0]) || isNaN(r[1]) || this.setBoundingRect(i[0], i[1], r[0] - i[0], r[1] - i[1]) } var a; var l = this.getBoundingRect(); var u = t.get('layoutCenter'); var c = t.get('layoutSize'); var h = e.getWidth(); var d = e.getHeight(); var f = l.width / l.height * this.aspectScale; var p = !1; if (u && c && (u = [s.parsePercent(u[0], h), s.parsePercent(u[1], d)], c = s.parsePercent(c, Math.min(h, d)), isNaN(u[0]) || isNaN(u[1]) || isNaN(c) || (p = !0)), p) { var g = {}; f > 1 ? (g.width = c, g.height = c / f) : (g.height = c, g.width = c * f), g.y = u[1] - g.height / 2, g.x = u[0] - g.width / 2 } else (a = t.getBoxLayoutParams()).aspect = f, g = o.getLayoutRect(a, { width: h, height: d }); this.setViewRect(g.x, g.y, g.width, g.height), this.setCenter(t.get('center')), this.setZoom(t.get('zoom')) } function h (t, e) { r.each(e.get('geoCoord'), function (e, n) { t.addGeoCoord(n, e) }) } var d = { dimensions: a.prototype.dimensions, create: function (t, e) { var n = []; t.eachComponent('geo', function (t, i) { var r = t.get('map'); var o = t.get('aspectScale'); var s = !0; var l = u.retrieveMap(r); l && l[0] && l[0].type === 'svg' ? (o == null && (o = 1), s = !1) : o == null && (o = 0.75); var d = new a(r + i, r, t.get('nameMap'), s); d.aspectScale = o, d.zoomLimit = t.get('scaleLimit'), n.push(d), h(d, t), t.coordinateSystem = d, d.model = t, d.resize = c, d.resize(t, e) }), t.eachSeries(function (t) { if (t.get('coordinateSystem') === 'geo') { var e = t.get('geoIndex') || 0; t.coordinateSystem = n[e] } }); var i = {}; return t.eachSeriesByType('map', function (t) { if (!t.getHostGeoModel()) { var e = t.getMapType(); i[e] = i[e] || [], i[e].push(t) } }), r.each(i, function (t, i) { var o = r.map(t, function (t) { return t.get('nameMap') }); var s = new a(i, i, r.mergeAll(o)); s.zoomLimit = r.retrieve.apply(null, r.map(t, function (t) { return t.get('scaleLimit') })), n.push(s), s.resize = c, s.aspectScale = t[0].get('aspectScale'), s.resize(t[0], e), r.each(t, function (t) { t.coordinateSystem = s, h(s, t) }) }), n }, getFilledRegions: function (t, e, n) { for (var i = (t || []).slice(), a = r.createHashMap(), o = 0; o < i.length; o++)a.set(i[o].name, i[o]); var s = l.load(e, n); return r.each(s.regions, function (t) { var e = t.name; !a.get(e) && i.push({ name: e }) }), i } }; i.registerCoordinateSystem('geo', d); var f = d; t.exports = f }, function (t, e, n) { var i = n(0); var r = n(7); var a = n(15); var o = n(8); var s = n(86); var l = r.applyTransform; function u () { s.call(this) } function c (t) { this.name = t, this.zoomLimit, s.call(this), this._roamTransformable = new u(), this._rawTransformable = new u(), this._center, this._zoom } function h (t, e, n, i) { var r = n.seriesModel; var a = r ? r.coordinateSystem : null; return a === this ? a[t](i) : null }i.mixin(u, s), c.prototype = { constructor: c, type: 'view', dimensions: ['x', 'y'], setBoundingRect: function (t, e, n, i) { return this._rect = new o(t, e, n, i), this._rect }, getBoundingRect: function () { return this._rect }, setViewRect: function (t, e, n, i) { this.transformTo(t, e, n, i), this._viewRect = new o(t, e, n, i) }, transformTo: function (t, e, n, i) { var r = this.getBoundingRect(); var a = this._rawTransformable; a.transform = r.calculateTransform(new o(t, e, n, i)), a.decomposeTransform(), this._updateTransform() }, setCenter: function (t) { t && (this._center = t, this._updateCenterAndZoom()) }, setZoom: function (t) { t = t || 1; var e = this.zoomLimit; e && (e.max != null && (t = Math.min(e.max, t)), e.min != null && (t = Math.max(e.min, t))), this._zoom = t, this._updateCenterAndZoom() }, getDefaultCenter: function () { var t = this.getBoundingRect(); return [t.x + t.width / 2, t.y + t.height / 2] }, getCenter: function () { return this._center || this.getDefaultCenter() }, getZoom: function () { return this._zoom || 1 }, getRoamTransform: function () { return this._roamTransformable.getLocalTransform() }, _updateCenterAndZoom: function () { var t = this._rawTransformable.getLocalTransform(); var e = this._roamTransformable; var n = this.getDefaultCenter(); var i = this.getCenter(); var a = this.getZoom(); i = r.applyTransform([], i, t), n = r.applyTransform([], n, t), e.origin = i, e.position = [n[0] - i[0], n[1] - i[1]], e.scale = [a, a], this._updateTransform() }, _updateTransform: function () { var t = this._roamTransformable; var e = this._rawTransformable; e.parent = t, t.updateTransform(), e.updateTransform(), a.copy(this.transform || (this.transform = []), e.transform || a.create()), this._rawTransform = e.getLocalTransform(), this.invTransform = this.invTransform || [], a.invert(this.invTransform, this.transform), this.decomposeTransform() }, getViewRect: function () { return this._viewRect }, getViewRectAfterRoam: function () { var t = this.getBoundingRect().clone(); return t.applyTransform(this.transform), t }, dataToPoint: function (t, e, n) { var i = e ? this._rawTransform : this.transform; return n = n || [], i ? l(n, t, i) : r.copy(n, t) }, pointToData: function (t) { var e = this.invTransform; return e ? l([], t, e) : [t[0], t[1]] }, convertToPixel: i.curry(h, 'dataToPoint'), convertFromPixel: i.curry(h, 'pointToData'), containPoint: function (t) { return this.getViewRectAfterRoam().contain(t[0], t[1]) } }, i.mixin(c, s); var d = c; t.exports = d }, function (t, e, n) { var i = n(0); var r = n(12); var a = n(175); var o = n(18); var s = n(47); var l = function (t, e) { this.name = t || '', this.depth = 0, this.height = 0, this.parentNode = null, this.dataIndex = -1, this.children = [], this.viewChildren = [], this.hostTree = e }; function u (t, e, n) { this.root, this.data, this._nodes = [], this.hostModel = t, this.levelModels = i.map(e || [], function (e) { return new r(e, t, t.ecModel) }), this.leavesModel = new r(n || {}, t, t.ecModel) }l.prototype = { constructor: l, isRemoved: function () { return this.dataIndex < 0 }, eachNode: function (t, e, n) { typeof t === 'function' && (n = e, e = t, t = null), t = t || {}, i.isString(t) && (t = { order: t }); var r; var a = t.order || 'preorder'; var o = this[t.attr || 'children']; a === 'preorder' && (r = e.call(n, this)); for (var s = 0; !r && s < o.length; s++)o[s].eachNode(t, e, n); a === 'postorder' && e.call(n, this) }, updateDepthAndHeight: function (t) { var e = 0; this.depth = t; for (var n = 0; n < this.children.length; n++) { var i = this.children[n]; i.updateDepthAndHeight(t + 1), i.height > e && (e = i.height) } this.height = e + 1 }, getNodeById: function (t) { if (this.getId() === t) return this; for (var e = 0, n = this.children, i = n.length; e < i; e++) { var r = n[e].getNodeById(t); if (r) return r } }, contains: function (t) { if (t === this) return !0; for (var e = 0, n = this.children, i = n.length; e < i; e++) { var r = n[e].contains(t); if (r) return r } }, getAncestors: function (t) { for (var e = [], n = t ? this : this.parentNode; n;)e.push(n), n = n.parentNode; return e.reverse(), e }, getValue: function (t) { var e = this.hostTree.data; return e.get(e.getDimension(t || 'value'), this.dataIndex) }, setLayout: function (t, e) { this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, t, e) }, getLayout: function () { return this.hostTree.data.getItemLayout(this.dataIndex) }, getModel: function (t) { if (!(this.dataIndex < 0)) { var e; var n = this.hostTree; var i = n.data.getItemModel(this.dataIndex); var r = this.getLevelModel(); return r || this.children.length !== 0 && (this.children.length === 0 || !1 !== this.isExpand) || (e = this.getLeavesModel()), i.getModel(t, (r || e || n.hostModel).getModel(t)) } }, getLevelModel: function () { return (this.hostTree.levelModels || [])[this.depth] }, getLeavesModel: function () { return this.hostTree.leavesModel }, setVisual: function (t, e) { this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, t, e) }, getVisual: function (t, e) { return this.hostTree.data.getItemVisual(this.dataIndex, t, e) }, getRawIndex: function () { return this.hostTree.data.getRawIndex(this.dataIndex) }, getId: function () { return this.hostTree.data.getId(this.dataIndex) }, isAncestorOf: function (t) { for (var e = t.parentNode; e;) { if (e === this) return !0; e = e.parentNode } return !1 }, isDescendantOf: function (t) { return t !== this && t.isAncestorOf(this) } }, u.prototype = { constructor: u, type: 'tree', eachNode: function (t, e, n) { this.root.eachNode(t, e, n) }, getNodeByDataIndex: function (t) { var e = this.data.getRawIndex(t); return this._nodes[e] }, getNodeByName: function (t) { return this.root.getNodeByName(t) }, update: function () { for (var t = this.data, e = this._nodes, n = 0, i = e.length; n < i; n++)e[n].dataIndex = -1; for (n = 0, i = t.count(); n < i; n++)e[t.getRawIndex(n)].dataIndex = n }, clearLayouts: function () { this.data.clearItemLayouts() } }, u.createTree = function (t, e, n) { var r = new u(e, n.levels, n.leaves); var c = []; var h = 1; !(function t (e, n) { var a = e.value; h = Math.max(h, i.isArray(a) ? a.length : 1), c.push(e); var o = new l(e.name, r); n ? (function (t, e) { var n = e.children; if (t.parentNode === e) return; n.push(t), t.parentNode = e }(o, n)) : r.root = o, r._nodes.push(o); var s = e.children; if (s) for (var u = 0; u < s.length; u++)t(s[u], o) }(t)), r.root.updateDepthAndHeight(0); var d = s(c, { coordDimensions: ['value'], dimensionsCount: h }); var f = new o(d, e); return f.initData(c), a({ mainData: f, struct: r, structAttr: 'tree' }), r.update(), r }; var c = u; t.exports = c }, function (t, e, n) { var i = n(2); var r = n(106); function a (t) { this._ctor = t || r, this.group = new i.Group() } var o = a.prototype; function s (t) { var e = t.hostModel; return { lineStyle: e.getModel('lineStyle').getLineStyle(), hoverLineStyle: e.getModel('emphasis.lineStyle').getLineStyle(), labelModel: e.getModel('label'), hoverLabelModel: e.getModel('emphasis.label') } } function l (t) { return isNaN(t[0]) || isNaN(t[1]) } function u (t) { return !l(t[0]) && !l(t[1]) }o.isPersistent = function () { return !0 }, o.updateData = function (t) { var e = this; var n = e.group; var i = e._lineData; e._lineData = t, i || n.removeAll(); var r = s(t); t.diff(i).add(function (n) { !(function (t, e, n, i) { if (!u(e.getItemLayout(n))) return; var r = new t._ctor(e, n, i); e.setItemGraphicEl(n, r), t.group.add(r) }(e, t, n, r)) }).update(function (n, a) { !(function (t, e, n, i, r, a) { var o = e.getItemGraphicEl(i); if (!u(n.getItemLayout(r))) return void t.group.remove(o); o ? o.updateData(n, r, a) : o = new t._ctor(n, r, a); n.setItemGraphicEl(r, o), t.group.add(o) }(e, i, t, a, n, r)) }).remove(function (t) { n.remove(i.getItemGraphicEl(t)) }).execute() }, o.updateLayout = function () { var t = this._lineData; t && t.eachItemGraphicEl(function (e, n) { e.updateLayout(t, n) }, this) }, o.incrementalPrepareUpdate = function (t) { this._seriesScope = s(t), this._lineData = null, this.group.removeAll() }, o.incrementalUpdate = function (t, e) { function n (t) { t.isGroup || (t.incremental = t.useHoverLayer = !0) } for (var i = t.start; i < t.end; i++) { if (u(e.getItemLayout(i))) { var r = new this._ctor(e, i, this._seriesScope); r.traverse(n), this.group.add(r), e.setItemGraphicEl(i, r) } } }, o.remove = function () { this._clearIncremental(), this._incremental = null, this.group.removeAll() }, o._clearIncremental = function () { var t = this._incremental; t && t.clearDisplaybles() }; var c = a; t.exports = c }, function (t, e, n) { var i = n(0); var r = n(7); var a = n(19); var o = n(343); var s = n(2); var l = n(3).round; var u = ['fromSymbol', 'toSymbol']; function c (t) { return '_' + t + 'Type' } function h (t, e, n) { var r = e.getItemVisual(n, 'color'); var o = e.getItemVisual(n, t); var s = e.getItemVisual(n, t + 'Size'); if (o && o !== 'none') { i.isArray(s) || (s = [s, s]); var l = a.createSymbol(o, -s[0] / 2, -s[1] / 2, s[0], s[1], r); return l.name = t, l } } function d (t, e) { t.x1 = e[0][0], t.y1 = e[0][1], t.x2 = e[1][0], t.y2 = e[1][1], t.percent = 1; var n = e[2]; n ? (t.cpx1 = n[0], t.cpy1 = n[1]) : (t.cpx1 = NaN, t.cpy1 = NaN) } function f (t, e, n) { s.Group.call(this), this._createLine(t, e, n) } var p = f.prototype; p.beforeUpdate = function () { var t = this.childOfName('fromSymbol'); var e = this.childOfName('toSymbol'); var n = this.childOfName('label'); if (t || e || !n.ignore) { for (var i = 1, a = this.parent; a;)a.scale && (i /= a.scale[0]), a = a.parent; var o = this.childOfName('line'); if (this.__dirty || o.__dirty) { var s = o.shape.percent; var l = o.pointAt(0); var u = o.pointAt(s); var c = r.sub([], u, l); if (r.normalize(c, c), t) { t.attr('position', l); var h = o.tangentAt(0); t.attr('rotation', Math.PI / 2 - Math.atan2(h[1], h[0])), t.attr('scale', [i * s, i * s]) } if (e) { e.attr('position', u); h = o.tangentAt(1); e.attr('rotation', -Math.PI / 2 - Math.atan2(h[1], h[0])), e.attr('scale', [i * s, i * s]) } if (!n.ignore) { var d, f, p; n.attr('position', u); var g = 5 * i; if (n.__position === 'end')d = [c[0] * g + u[0], c[1] * g + u[1]], f = c[0] > 0.8 ? 'left' : c[0] < -0.8 ? 'right' : 'center', p = c[1] > 0.8 ? 'top' : c[1] < -0.8 ? 'bottom' : 'middle'; else if (n.__position === 'middle') { var v = s / 2; var m = [(h = o.tangentAt(v))[1], -h[0]]; var y = o.pointAt(v); m[1] > 0 && (m[0] = -m[0], m[1] = -m[1]), d = [y[0] + m[0] * g, y[1] + m[1] * g], f = 'center', p = 'bottom'; var x = -Math.atan2(h[1], h[0]); u[0] < l[0] && (x = Math.PI + x), n.attr('rotation', x) } else d = [-c[0] * g + l[0], -c[1] * g + l[1]], f = c[0] > 0.8 ? 'right' : c[0] < -0.8 ? 'left' : 'center', p = c[1] > 0.8 ? 'bottom' : c[1] < -0.8 ? 'top' : 'middle'; n.attr({ style: { textVerticalAlign: n.__verticalAlign || p, textAlign: n.__textAlign || f }, position: d, scale: [i, i] }) } } } }, p._createLine = function (t, e, n) { var r = t.hostModel; var a = (function (t) { var e = new o({ name: 'line', subPixelOptimize: !0 }); return d(e.shape, t), e }(t.getItemLayout(e))); a.shape.percent = 0, s.initProps(a, { shape: { percent: 1 } }, r, e), this.add(a); var l = new s.Text({ name: 'label', lineLabelOriginalOpacity: 1 }); this.add(l), i.each(u, function (n) { var i = h(n, t, e); this.add(i), this[c(n)] = t.getItemVisual(e, n) }, this), this._updateCommonStl(t, e, n) }, p.updateData = function (t, e, n) { var r = t.hostModel; var a = this.childOfName('line'); var o = t.getItemLayout(e); var l = { shape: {} }; d(l.shape, o), s.updateProps(a, l, r, e), i.each(u, function (n) { var i = t.getItemVisual(e, n); var r = c(n); if (this[r] !== i) { this.remove(this.childOfName(n)); var a = h(n, t, e); this.add(a) } this[r] = i }, this), this._updateCommonStl(t, e, n) }, p._updateCommonStl = function (t, e, n) { var r = t.hostModel; var a = this.childOfName('line'); var o = n && n.lineStyle; var c = n && n.hoverLineStyle; var h = n && n.labelModel; var d = n && n.hoverLabelModel; if (!n || t.hasItemOption) { var f = t.getItemModel(e); o = f.getModel('lineStyle').getLineStyle(), c = f.getModel('emphasis.lineStyle').getLineStyle(), h = f.getModel('label'), d = f.getModel('emphasis.label') } var p = t.getItemVisual(e, 'color'); var g = i.retrieve3(t.getItemVisual(e, 'opacity'), o.opacity, 1); a.useStyle(i.defaults({ strokeNoScale: !0, fill: 'none', stroke: p, opacity: g }, o)), a.hoverStyle = c, i.each(u, function (t) { var e = this.childOfName(t); e && (e.setColor(p), e.setStyle({ opacity: g })) }, this); var v; var m; var y = h.getShallow('show'); var x = d.getShallow('show'); var _ = this.childOfName('label'); if ((y || x) && (v = p || '#000', (m = r.getFormattedLabel(e, 'normal', t.dataType)) == null)) { var b = r.getRawValue(e); m = b == null ? t.getName(e) : isFinite(b) ? l(b) : b } var w = y ? m : null; var S = x ? i.retrieve2(r.getFormattedLabel(e, 'emphasis', t.dataType), m) : null; var M = _.style; w == null && S == null || (s.setTextStyle(_.style, h, { text: w }, { autoColor: v }), _.__textAlign = M.textAlign, _.__verticalAlign = M.textVerticalAlign, _.__position = h.get('position') || 'middle'), _.hoverStyle = S != null ? { text: S, textFill: d.getTextColor(!0), fontStyle: d.getShallow('fontStyle'), fontWeight: d.getShallow('fontWeight'), fontSize: d.getShallow('fontSize'), fontFamily: d.getShallow('fontFamily') } : { text: null }, _.ignore = !y && !x, s.setHoverStyle(this) }, p.highlight = function () { this.trigger('emphasis') }, p.downplay = function () { this.trigger('normal') }, p.updateLayout = function (t, e) { this.setLinePoints(t.getItemLayout(e)) }, p.setLinePoints = function (t) { var e = this.childOfName('line'); d(e.shape, t), e.dirty() }, i.inherits(f, s.Group); var g = f; t.exports = g }, function (t, e) { e.getNodeGlobalScale = function (t) { var e = t.coordinateSystem; if (e.type !== 'view') return 1; var n = t.option.nodeScaleRatio; var i = e.scale; var r = i && i[0] || 1; return ((e.getZoom() - 1) * n + 1) / r }, e.getSymbolSize = function (t) { var e = t.getVisual('symbolSize'); return e instanceof Array && (e = (e[0] + e[1]) / 2), +e } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(34); var a = n(2); var o = n(173); var s = n(37); var l = i.curry; var u = i.each; var c = i.map; var h = Math.min; var d = Math.max; var f = Math.pow; var p = 1e4; var g = 6; var v = 6; var m = 'globalPan'; var y = { w: [0, 0], e: [0, 1], n: [1, 0], s: [1, 1] }; var x = { w: 'ew', e: 'ew', n: 'ns', s: 'ns', ne: 'nesw', sw: 'nesw', nw: 'nwse', se: 'nwse' }; var _ = { brushStyle: { lineWidth: 2, stroke: 'rgba(0,0,0,0.3)', fill: 'rgba(0,0,0,0.1)' }, transformable: !0, brushMode: 'single', removeOnClick: !1 }; var b = 0; function w (t) { r.call(this), this._zr = t, this.group = new a.Group(), this._brushType, this._brushOption, this._panels, this._track = [], this._dragging, this._lastMouseMovePoint = {}, this._covers = [], this._creatingCover, this._creatingPanel, this._enableGlobalPan, this._uid = 'brushController_' + b++, this._handlers = {}, u(Y, function (t, e) { this._handlers[e] = i.bind(t, this) }, this) } function S (t, e) { var n = q[e.brushType].createCover(t, e); return n.__brushOption = e, A(n, e), t.group.add(n), n } function M (t, e) { var n = C(e); return n.endCreating && (n.endCreating(t, e), A(e, e.__brushOption)), e } function I (t, e) { var n = e.__brushOption; C(e).updateCoverShape(t, e, n.range, n) } function A (t, e) { var n = e.z; n == null && (n = p), t.traverse(function (t) { t.z = n, t.z2 = n }) } function T (t, e) { C(e).updateCommon(t, e), I(t, e) } function C (t) { return q[t.__brushOption.brushType] } function D (t, e, n) { var i; var r = t._panels; if (!r) return !0; var a = t._transform; return u(r, function (t) { t.isTargetByCursor(e, n, a) && (i = t) }), i } function L (t, e) { var n = t._panels; if (!n) return !0; var i = e.__brushOption.panelId; return i == null || n[i] } function P (t) { var e = t._covers; var n = e.length; return u(e, function (e) { t.group.remove(e) }, t), e.length = 0, !!n } function k (t, e) { var n = c(t._covers, function (t) { var e = t.__brushOption; var n = i.clone(e.range); return { brushType: e.brushType, panelId: e.panelId, range: n } }); t.trigger('brush', n, { isEnd: !!e.isEnd, removeOnClick: !!e.removeOnClick }) } function O (t) { var e = t.length - 1; return e < 0 && (e = 0), [t[0], t[e]] } function E (t, e, n, i) { var r = new a.Group(); return r.add(new a.Rect({ name: 'main', style: B(n), silent: !0, draggable: !0, cursor: 'move', drift: l(t, e, r, 'nswe'), ondragend: l(k, e, { isEnd: !0 }) })), u(i, function (n) { r.add(new a.Rect({ name: n, style: { opacity: 0 }, draggable: !0, silent: !0, invisible: !0, drift: l(t, e, r, n), ondragend: l(k, e, { isEnd: !0 }) })) }), r } function R (t, e, n, i) { var r = i.brushStyle.lineWidth || 0; var a = d(r, v); var o = n[0][0]; var s = n[1][0]; var l = o - r / 2; var u = s - r / 2; var c = n[0][1]; var h = n[1][1]; var f = c - a + r / 2; var p = h - a + r / 2; var g = c - o; var m = h - s; var y = g + r; var x = m + r; z(t, e, 'main', o, s, g, m), i.transformable && (z(t, e, 'w', l, u, a, x), z(t, e, 'e', f, u, a, x), z(t, e, 'n', l, u, y, a), z(t, e, 's', l, p, y, a), z(t, e, 'nw', l, u, a, a), z(t, e, 'ne', f, u, a, a), z(t, e, 'sw', l, p, a, a), z(t, e, 'se', f, p, a, a)) } function N (t, e) { var n = e.__brushOption; var i = n.transformable; var r = e.childAt(0); r.useStyle(B(n)), r.attr({ silent: !i, cursor: i ? 'move' : 'default' }), u(['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw'], function (n) { var r = e.childOfName(n); var o = (function t (e, n) { if (n.length > 1) return n = n.split(''), ((i = [t(e, n[0]), t(e, n[1])])[0] === 'e' || i[0] === 'w') && i.reverse(), i.join(''); var i; return { left: 'w', right: 'e', top: 'n', bottom: 's' }[i = a.transformDirection({ w: 'left', e: 'right', n: 'top', s: 'bottom' }[n], (function (t) { return a.getTransform(t.group) }(e)))] }(t, n)); r && r.attr({ silent: !i, invisible: !i, cursor: i ? x[o] + '-resize' : null }) }) } function z (t, e, n, i, r, a, o) { var s; var l; var u; var c; var f; var p = e.childOfName(n); p && p.setShape((s = W(t, e, [[i, r], [i + a, r + o]]), l = h(s[0][0], s[1][0]), u = h(s[0][1], s[1][1]), c = d(s[0][0], s[1][0]), f = d(s[0][1], s[1][1]), { x: l, y: u, width: c - l, height: f - u })) } function B (t) { return i.defaults({ strokeNoScale: !0 }, t.brushStyle) } function V (t, e, n, i) { var r = [h(t, n), h(e, i)]; var a = [d(t, n), d(e, i)]; return [[r[0], a[0]], [r[1], a[1]]] } function F (t, e, n, i, r, a, o, s) { var l = i.__brushOption; var c = t(l.range); var h = H(n, a, o); u(r.split(''), function (t) { var e = y[t]; c[e[0]][e[1]] += h[e[0]] }), l.range = e(V(c[0][0], c[1][0], c[0][1], c[1][1])), T(n, i), k(n, { isEnd: !1 }) } function G (t, e, n, i, r) { var a = e.__brushOption.range; var o = H(t, n, i); u(a, function (t) { t[0] += o[0], t[1] += o[1] }), T(t, e), k(t, { isEnd: !1 }) } function H (t, e, n) { var i = t.group; var r = i.transformCoordToLocal(e, n); var a = i.transformCoordToLocal(0, 0); return [r[0] - a[0], r[1] - a[1]] } function W (t, e, n) { var r = L(t, e); return r && !0 !== r ? r.clipPath(n, t._transform) : i.clone(n) } function j (t) { var e = t.event; e.preventDefault && e.preventDefault() } function U (t, e, n) { return t.childOfName('main').contain(e, n) } function Z (t, e, n, r) { var a; var o = t._creatingCover; var s = t._creatingPanel; var l = t._brushOption; if (t._track.push(n.slice()), (function (t) { var e = t._track; if (!e.length) return !1; var n = e[e.length - 1]; var i = e[0]; var r = n[0] - i[0]; var a = n[1] - i[1]; return f(r * r + a * a, 0.5) > g }(t)) || o) { if (s && !o) { l.brushMode === 'single' && P(t); var u = i.clone(l); u.brushType = $(u.brushType, s), u.panelId = !0 === s ? null : s.panelId, o = t._creatingCover = S(t, u), t._covers.push(o) } if (o) { var c = q[$(t._brushType, s)]; o.__brushOption.range = c.getCreatingRange(W(t, o, t._track)), r && (M(t, o), c.updateCommon(t, o)), I(t, o), a = { isEnd: r } } } else r && l.brushMode === 'single' && l.removeOnClick && D(t, e, n) && P(t) && (a = { isEnd: r, removeOnClick: !0 }); return a } function $ (t, e) { return t === 'auto' ? e.defaultBrushType : t }w.prototype = { constructor: w, enableBrush: function (t) { var e, n; return this._brushType && (n = (e = this)._zr, o.release(n, m, e._uid), u(e._handlers, function (t, e) { n.off(e, t) }), e._brushType = e._brushOption = null), t.brushType && (function (t, e) { var n = t._zr; t._enableGlobalPan || o.take(n, m, t._uid); u(t._handlers, function (t, e) { n.on(e, t) }), t._brushType = e.brushType, t._brushOption = i.merge(i.clone(_), e, !0) }(this, t)), this }, setPanels: function (t) { if (t && t.length) { var e = this._panels = {}; i.each(t, function (t) { e[t.panelId] = i.clone(t) }) } else this._panels = null; return this }, mount: function (t) { t = t || {}, this._enableGlobalPan = t.enableGlobalPan; var e = this.group; return this._zr.add(e), e.attr({ position: t.position || [0, 0], rotation: t.rotation || 0, scale: t.scale || [1, 1] }), this._transform = e.getLocalTransform(), this }, eachCover: function (t, e) { u(this._covers, t, e) }, updateCovers: function (t) { t = i.map(t, function (t) { return i.merge(i.clone(_), t, !0) }); var e = '\0-brush-index-'; var n = this._covers; var r = this._covers = []; var a = this; var o = this._creatingCover; return new s(n, t, function (t, e) { return l(t.__brushOption, e) }, l).add(u).update(u).remove(function (t) { n[t] !== o && a.group.remove(n[t]) }).execute(), this; function l (t, n) { return (t.id != null ? t.id : e + n) + '-' + t.brushType } function u (e, i) { var s = t[e]; if (i != null && n[i] === o)r[e] = n[i]; else { var l = r[e] = i != null ? (n[i].__brushOption = s, n[i]) : M(a, S(a, s)); T(a, l) } } }, unmount: function () { return this.enableBrush(!1), P(this), this._zr.remove(this.group), this }, dispose: function () { this.unmount(), this.off() } }, i.mixin(w, r); var Y = { mousedown: function (t) { if (this._dragging)X(this, t); else if (!t.target || !t.target.draggable) { j(t); var e = this.group.transformCoordToLocal(t.offsetX, t.offsetY); this._creatingCover = null, (this._creatingPanel = D(this, t, e)) && (this._dragging = !0, this._track = [e.slice()]) } }, mousemove: function (t) { var e = this._lastMouseMovePoint; e.x = t.offsetX, e.y = t.offsetY; var n = this.group.transformCoordToLocal(e.x, e.y); if ((function (t, e, n) { if (t._brushType) { var i = t._zr; var r = t._covers; var a = D(t, e, n); if (!t._dragging) for (var o = 0; o < r.length; o++) { var s = r[o].__brushOption; if (a && (!0 === a || s.panelId === a.panelId) && q[s.brushType].contain(r[o], n[0], n[1])) return }a && i.setCursorStyle('crosshair') } }(this, t, n)), this._dragging) { j(t); var i = Z(this, t, n, !1); i && k(this, i) } }, mouseup: function (t) { X(this, t) }, globalout: function (t) { X(this, t, !0) } }; function X (t, e, n) { if (t._dragging) { !n && j(e); var i = e.offsetX; var r = e.offsetY; var a = t._lastMouseMovePoint; n && (i = a.x, r = a.y); var o = t.group.transformCoordToLocal(i, r); var s = Z(t, e, o, !0); t._dragging = !1, t._track = [], t._creatingCover = null, s && k(t, s) } } var q = { lineX: K(0), lineY: K(1), rect: { createCover: function (t, e) { return E(l(F, function (t) { return t }, function (t) { return t }), t, e, ['w', 'e', 'n', 's', 'se', 'sw', 'ne', 'nw']) }, getCreatingRange: function (t) { var e = O(t); return V(e[1][0], e[1][1], e[0][0], e[0][1]) }, updateCoverShape: function (t, e, n, i) { R(t, e, n, i) }, updateCommon: N, contain: U }, polygon: { createCover: function (t, e) { var n = new a.Group(); return n.add(new a.Polyline({ name: 'main', style: B(e), silent: !0 })), n }, getCreatingRange: function (t) { return t }, endCreating: function (t, e) { e.remove(e.childAt(0)), e.add(new a.Polygon({ name: 'main', draggable: !0, drift: l(G, t, e), ondragend: l(k, t, { isEnd: !0 }) })) }, updateCoverShape: function (t, e, n, i) { e.childAt(0).setShape({ points: W(t, e, n) }) }, updateCommon: N, contain: U } }; function K (t) { return { createCover: function (e, n) { return E(l(F, function (e) { var n = [e, [0, 100]]; return t && n.reverse(), n }, function (e) { return e[t] }), e, n, [['w', 'e'], ['n', 's']][t]) }, getCreatingRange: function (e) { var n = O(e); return [h(n[0][t], n[1][t]), d(n[0][t], n[1][t])] }, updateCoverShape: function (e, n, i, r) { var a; var o = L(e, n); if (!0 !== o && o.getLinearBrushOtherExtent)a = o.getLinearBrushOtherExtent(t, e._transform); else { var s = e._zr; a = [0, [s.getWidth(), s.getHeight()][1 - t]] } var l = [i, a]; t && l.reverse(), R(e, n, l, r) }, updateCommon: N, contain: U } } var J = w; t.exports = J }, function (t, e, n) { var i = n(0); var r = n(26); var a = n(2); var o = n(80); var s = n(22); var l = n(29); var u = (0, n(4).makeInner)(); var c = i.clone; var h = i.bind; function d () {} function f (t, e, n, r) { (function t (e, n) { if (i.isObject(e) && i.isObject(n)) { var r = !0; return i.each(n, function (n, i) { r = r && t(e[i], n) }), !!r } return e === n })(u(n).lastProp, r) || (u(n).lastProp = r, e ? a.updateProps(n, r, t) : (n.stopAnimation(), n.attr(r))) } function p (t, e) { t[e.get('label.show') ? 'show' : 'hide']() } function g (t) { return { position: t.position.slice(), rotation: t.rotation || 0 } } function v (t, e, n) { var i = e.get('z'); var r = e.get('zlevel'); t && t.traverse(function (t) { t.type !== 'group' && (i != null && (t.z = i), r != null && (t.zlevel = r), t.silent = n) }) }d.prototype = { _group: null, _lastGraphicKey: null, _handle: null, _dragging: !1, _lastValue: null, _lastStatus: null, _payloadInfo: null, animationThreshold: 15, render: function (t, e, n, r) { var o = e.get('value'); var s = e.get('status'); if (this._axisModel = t, this._axisPointerModel = e, this._api = n, r || this._lastValue !== o || this._lastStatus !== s) { this._lastValue = o, this._lastStatus = s; var l = this._group; var u = this._handle; if (!s || s === 'hide') return l && l.hide(), void (u && u.hide()); l && l.show(), u && u.show(); var c = {}; this.makeElOption(c, o, t, e, n); var h = c.graphicKey; h !== this._lastGraphicKey && this.clear(n), this._lastGraphicKey = h; var d = this._moveAnimation = this.determineAnimation(t, e); if (l) { var p = i.curry(f, e, d); this.updatePointerEl(l, c, p, e), this.updateLabelEl(l, c, p, e) } else l = this._group = new a.Group(), this.createPointerEl(l, c, t, e), this.createLabelEl(l, c, t, e), n.getZr().add(l); v(l, e, !0), this._renderHandle(o) } }, remove: function (t) { this.clear(t) }, dispose: function (t) { this.clear(t) }, determineAnimation: function (t, e) { var n = e.get('animation'); var i = t.axis; var r = i.type === 'category'; var a = e.get('snap'); if (!a && !r) return !1; if (n === 'auto' || n == null) { var s = this.animationThreshold; if (r && i.getBandWidth() > s) return !0; if (a) { var l = o.getAxisInfo(t).seriesDataCount; var u = i.getExtent(); return Math.abs(u[0] - u[1]) / l > s } return !1 } return !0 === n }, makeElOption: function (t, e, n, i, r) {}, createPointerEl: function (t, e, n, i) { var r = e.pointer; if (r) { var o = u(t).pointerEl = new a[r.type](c(e.pointer)); t.add(o) } }, createLabelEl: function (t, e, n, i) { if (e.label) { var r = u(t).labelEl = new a.Rect(c(e.label)); t.add(r), p(r, i) } }, updatePointerEl: function (t, e, n) { var i = u(t).pointerEl; i && e.pointer && (i.setStyle(e.pointer.style), n(i, { shape: e.pointer.shape })) }, updateLabelEl: function (t, e, n, i) { var r = u(t).labelEl; r && (r.setStyle(e.label.style), n(r, { shape: e.label.shape, position: e.label.position }), p(r, i)) }, _renderHandle: function (t) { if (!this._dragging && this.updateHandleTransform) { var e; var n = this._axisPointerModel; var r = this._api.getZr(); var o = this._handle; var u = n.getModel('handle'); var c = n.get('status'); if (!u.get('show') || !c || c === 'hide') return o && r.remove(o), void (this._handle = null); this._handle || (e = !0, o = this._handle = a.createIcon(u.get('icon'), { cursor: 'move', draggable: !0, onmousemove: function (t) { s.stop(t.event) }, onmousedown: h(this._onHandleDragMove, this, 0, 0), drift: h(this._onHandleDragMove, this), ondragend: h(this._onHandleDragEnd, this) }), r.add(o)), v(o, n, !1); o.setStyle(u.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); var d = u.get('size'); i.isArray(d) || (d = [d, d]), o.attr('scale', [d[0] / 2, d[1] / 2]), l.createOrUpdate(this, '_doDispatchAxisPointer', u.get('throttle') || 0, 'fixRate'), this._moveHandleToValue(t, e) } }, _moveHandleToValue: function (t, e) { f(this._axisPointerModel, !e && this._moveAnimation, this._handle, g(this.getHandleTransform(t, this._axisModel, this._axisPointerModel))) }, _onHandleDragMove: function (t, e) { var n = this._handle; if (n) { this._dragging = !0; var i = this.updateHandleTransform(g(n), [t, e], this._axisModel, this._axisPointerModel); this._payloadInfo = i, n.stopAnimation(), n.attr(g(i)), u(n).lastProp = null, this._doDispatchAxisPointer() } }, _doDispatchAxisPointer: function () { if (this._handle) { var t = this._payloadInfo; var e = this._axisModel; this._api.dispatchAction({ type: 'updateAxisPointer', x: t.cursorPoint[0], y: t.cursorPoint[1], tooltipOption: t.tooltipOption, axesInfo: [{ axisDim: e.axis.dim, axisIndex: e.componentIndex }] }) } }, _onHandleDragEnd: function (t) { if (this._dragging = !1, this._handle) { var e = this._axisPointerModel.get('value'); this._moveHandleToValue(e), this._api.dispatchAction({ type: 'hideTip' }) } }, getHandleTransform: null, updateHandleTransform: null, clear: function (t) { this._lastValue = null, this._lastStatus = null; var e = t.getZr(); var n = this._group; var i = this._handle; e && n && (this._lastGraphicKey = null, n && e.remove(n), i && e.remove(i), this._group = null, this._handle = null, this._payloadInfo = null) }, doClear: function () {}, buildLabel: function (t, e, n) { return { x: t[n = n || 0], y: t[1 - n], width: e[n], height: e[1 - n] } } }, d.prototype.constructor = d, r.enableClassExtend(d); var m = d; t.exports = m }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(437); var a = n(3).parsePercent; var o = n(21); var s = o.createScaleByModel; var l = o.niceScaleExtent; var u = n(20); var c = n(25).getStackedDimension; function h (t, e) { var n = this; var r = n.getAngleAxis(); var a = n.getRadiusAxis(); if (r.scale.setExtent(1 / 0, -1 / 0), a.scale.setExtent(1 / 0, -1 / 0), t.eachSeries(function (t) { if (t.coordinateSystem === n) { var e = t.getData(); i.each(e.mapDimension('radius', !0), function (t) { a.scale.unionExtentFromData(e, c(e, t)) }), i.each(e.mapDimension('angle', !0), function (t) { r.scale.unionExtentFromData(e, c(e, t)) }) } }), l(r.scale, r.model), l(a.scale, a.model), r.type === 'category' && !r.onBand) { var o = r.getExtent(); var s = 360 / r.scale.count(); r.inverse ? o[1] += s : o[1] -= s, r.setExtent(o[0], o[1]) } } function d (t, e) { if (t.type = e.get('type'), t.scale = s(e), t.onBand = e.get('boundaryGap') && t.type === 'category', t.inverse = e.get('inverse'), e.mainType === 'angleAxis') { t.inverse ^= e.get('clockwise'); var n = e.get('startAngle'); t.setExtent(n, n + (t.inverse ? -360 : 360)) }e.axis = t, t.model = e }n(440); var f = { dimensions: r.prototype.dimensions, create: function (t, e) { var n = []; return t.eachComponent('polar', function (t, o) { var s = new r(o); s.update = h; var l = s.getRadiusAxis(); var u = s.getAngleAxis(); var c = t.findAxisModel('radiusAxis'); var f = t.findAxisModel('angleAxis'); d(l, c), d(u, f), (function (t, e, n) { var r = e.get('center'); var o = n.getWidth(); var s = n.getHeight(); t.cx = a(r[0], o), t.cy = a(r[1], s); var l = t.getRadiusAxis(); var u = Math.min(o, s) / 2; var c = e.get('radius'); c == null ? c = [0, '100%'] : i.isArray(c) || (c = [0, c]), c = [a(c[0], u), a(c[1], u)], l.inverse ? l.setExtent(c[1], c[0]) : l.setExtent(c[0], c[1]) }(s, t, e)), n.push(s), t.coordinateSystem = s, s.model = t }), t.eachSeries(function (e) { if (e.get('coordinateSystem') === 'polar') { var n = t.queryComponents({ mainType: 'polar', index: e.get('polarIndex'), id: e.get('polarId') })[0]; e.coordinateSystem = n.coordinateSystem } }), n } }; u.register('polar', f) }, function (t, e, n) { n(13).registerSubTypeDefaulter('dataZoom', function () { return 'slider' }) }, function (t, e, n) { var i = n(0); var r = n(9); var a = ['cartesian2d', 'polar', 'singleAxis']; function o (t, e) { t = t.slice(); var n = i.map(t, r.capitalFirst); e = (e || []).slice(); var a = i.map(e, r.capitalFirst); return function (r, o) { i.each(t, function (t, i) { for (var s = { name: t, capital: n[i] }, l = 0; l < e.length; l++)s[e[l]] = t + a[l]; r.call(o, s) }) } } var s = o(['x', 'y', 'z', 'radius', 'angle', 'single'], ['axisIndex', 'axis', 'index', 'id']); e.isCoordSupported = function (t) { return i.indexOf(a, t) >= 0 }, e.createNameEach = o, e.eachAxisDim = s, e.createLinkedNodesFinder = function (t, e, n) { return function (a) { var o; var s = { nodes: [], records: {} }; if (e(function (t) { s.records[t.name] = {} }), !a) return s; r(a, s); do { o = !1, t(l) } while (o);function l (t) { !(function (t, e) { return i.indexOf(e.nodes, t) >= 0 }(t, s)) && (function (t, r) { var a = !1; return e(function (e) { i.each(n(t, e) || [], function (t) { r.records[e.name][t] && (a = !0) }) }), a }(t, s)) && (r(t, s), o = !0) } return s }; function r (t, r) { r.nodes.push(t), e(function (e) { i.each(n(t, e) || [], function (t) { r.records[e.name][t] = !0 }) }) } } }, function (t, e, n) { var i = n(1); var r = n(0); var a = r.createHashMap; var o = r.each; i.registerProcessor({ getTargetSeries: function (t) { var e = a(); return t.eachComponent('dataZoom', function (t) { t.eachTargetAxis(function (t, n, i) { var r = i.getAxisProxy(t.name, n); o(r.getTargetSeriesModels(), function (t) { e.set(t.uid, t) }) }) }), e }, modifyOutputEnd: !0, overallReset: function (t, e) { t.eachComponent('dataZoom', function (t) { t.eachTargetAxis(function (t, n, i) { i.getAxisProxy(t.name, n).reset(i, e) }), t.eachTargetAxis(function (t, n, i) { i.getAxisProxy(t.name, n).filterData(i, e) }) }), t.eachComponent('dataZoom', function (t) { var e = t.findRepresentativeAxisProxy(); var n = e.getDataPercentWindow(); var i = e.getDataValueWindow(); t.setCalculatedRange({ start: n[0], end: n[1], startValue: i[0], endValue: i[1] }) }) } }) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(112); i.registerAction('dataZoom', function (t, e) { var n = a.createLinkedNodesFinder(r.bind(e.eachComponent, e, 'dataZoom'), a.eachAxisDim, function (t, e) { return t.get(e.axisIndex) }); var i = []; e.eachComponent({ mainType: 'dataZoom', query: t }, function (t, e) { i.push.apply(i, n(t).nodes) }), r.each(i, function (e, n) { e.setRawRange({ start: t.start, end: t.end, startValue: t.startValue, endValue: t.endValue }) }) }) }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(11); var o = n(4); var s = n(9); var l = n(94); var u = s.addCommas; var c = s.encodeHTML; function h (t) { o.defaultEmphasis(t, 'label', ['show']) } var d = i.extendComponentModel({ type: 'marker', dependencies: ['series', 'grid', 'polar', 'geo'], init: function (t, e, n) { this.mergeDefaultAndTheme(t, n), this._mergeOption(t, n, !1, !0) }, isAnimationEnabled: function () { if (a.node) return !1; var t = this.__hostSeries; return this.getShallow('animation') && t && t.isAnimationEnabled() }, mergeOption: function (t, e) { this._mergeOption(t, e, !1, !1) }, _mergeOption: function (t, e, n, i) { var a = this.constructor; var o = this.mainType + 'Model'; n || e.eachSeries(function (t) { var n = t.get(this.mainType, !0); var s = t[o]; n && n.data ? (s ? s._mergeOption(n, e, !0) : (i && h(n), r.each(n.data, function (t) { t instanceof Array ? (h(t[0]), h(t[1])) : h(t) }), s = new a(n, this, e), r.extend(s, { mainType: this.mainType, seriesIndex: t.seriesIndex, name: t.name, createdBySelf: !0 }), s.__hostSeries = t), t[o] = s) : t[o] = null }, this) }, formatTooltip: function (t) { var e = this.getData(); var n = this.getRawValue(t); var i = r.isArray(n) ? r.map(n, u).join(', ') : u(n); var a = e.getName(t); var o = c(this.name); return (n != null || a) && (o += '<br />'), a && (o += c(a), n != null && (o += ' : ')), n != null && (o += c(i)), o }, getData: function () { return this._data }, setData: function (t) { this._data = t } }); r.mixin(d, l); var f = d; t.exports = f }, function (t, e, n) { var i = n(0); var r = n(3); var a = n(25).isDimensionStacked; var o = i.indexOf; function s (t, e, n, i, o, s) { var l = []; var u = a(e, i) ? e.getCalculationInfo('stackResultDimension') : i; var c = h(e, u, t); var d = e.indicesOfNearest(u, c)[0]; l[o] = e.get(n, d), l[s] = e.get(i, d); var f = r.getPrecision(e.get(i, d)); return (f = Math.min(f, 20)) >= 0 && (l[s] = +l[s].toFixed(f)), l } var l = i.curry; var u = { min: l(s, 'min'), max: l(s, 'max'), average: l(s, 'average') }; function c (t, e, n, i) { var r = {}; return t.valueIndex != null || t.valueDim != null ? (r.valueDataDim = t.valueIndex != null ? e.getDimension(t.valueIndex) : t.valueDim, r.valueAxis = n.getAxis(function (t, e) { var n = t.getData(); var i = n.dimensions; e = n.getDimension(e); for (var r = 0; r < i.length; r++) { var a = n.getDimensionInfo(i[r]); if (a.name === e) return a.coordDim } }(i, r.valueDataDim)), r.baseAxis = n.getOtherAxis(r.valueAxis), r.baseDataDim = e.mapDimension(r.baseAxis.dim)) : (r.baseAxis = i.getBaseAxis(), r.valueAxis = n.getOtherAxis(r.baseAxis), r.baseDataDim = e.mapDimension(r.baseAxis.dim), r.valueDataDim = e.mapDimension(r.valueAxis.dim)), r } function h (t, e, n) { if (n === 'average') { var i = 0; var r = 0; return t.each(e, function (t, e) { isNaN(t) || (i += t, r++) }), i / r } return n === 'median' ? t.getMedian(e) : t.getDataExtent(e, !0)[n === 'max' ? 1 : 0] }e.dataTransform = function (t, e) { var n = t.getData(); var r = t.coordinateSystem; if (e && !(function (t) { return !isNaN(parseFloat(t.x)) && !isNaN(parseFloat(t.y)) }(e)) && !i.isArray(e.coord) && r) { var a = r.dimensions; var s = c(e, n, r, t); if ((e = i.clone(e)).type && u[e.type] && s.baseAxis && s.valueAxis) { var l = o(a, s.baseAxis.dim); var d = o(a, s.valueAxis.dim); e.coord = u[e.type](n, s.baseDataDim, s.valueDataDim, l, d), e.value = e.coord[d] } else { for (var f = [e.xAxis != null ? e.xAxis : e.radiusAxis, e.yAxis != null ? e.yAxis : e.angleAxis], p = 0; p < 2; p++)u[f[p]] && (f[p] = h(n, n.mapDimension(a[p]), f[p])); e.coord = f } } return e }, e.getAxisInfo = c, e.dataFilter = function (t, e) { return !(t && t.containData && e.coord && !(function (t) { return !(isNaN(parseFloat(t.x)) && isNaN(parseFloat(t.y))) }(e))) || t.containData(e.coord) }, e.dimValueGetter = function (t, e, n, i) { return i < 2 ? t.coord && t.coord[i] : t.value }, e.numCalculate = h }, function (t, e, n) { var i = n(1); var r = n(0); var a = i.extendComponentView({ type: 'marker', init: function () { this.markerGroupMap = r.createHashMap() }, render: function (t, e, n) { var i = this.markerGroupMap; i.each(function (t) { t.__keep = !1 }); var r = this.type + 'Model'; e.eachSeries(function (t) { var i = t[r]; i && this.renderSeries(t, i, e, n) }, this), i.each(function (t) { !t.__keep && this.group.remove(t.group) }, this) }, renderSeries: function () {} }); t.exports = a }, function (t, e, n) { var i = n(119).createElement; var r = n(45); var a = n(8); var o = n(15); var s = n(17); var l = n(70); var u = n(35); var c = r.CMD; var h = Array.prototype.join; var d = 'none'; var f = Math.round; var p = Math.sin; var g = Math.cos; var v = Math.PI; var m = 2 * Math.PI; var y = 180 / v; var x = 1e-4; function _ (t) { return f(1e4 * t) / 1e4 } function b (t) { return t < x && t > -x } function w (t, e) { e && S(t, 'transform', 'matrix(' + h.call(e, ',') + ')') } function S (t, e, n) { (!n || n.type !== 'linear' && n.type !== 'radial') && t.setAttribute(e, n) } function M (t, e, n, i) { if (function (t, e) { var n = e ? t.textFill : t.fill; return n != null && n !== d }(e, n)) { var r = n ? e.textFill : e.fill; S(t, 'fill', r = r === 'transparent' ? d : r), S(t, 'fill-opacity', e.fillOpacity != null ? e.fillOpacity * e.opacity : e.opacity) } else S(t, 'fill', d); if (function (t, e) { var n = e ? t.textStroke : t.stroke; return n != null && n !== d }(e, n)) { var a = n ? e.textStroke : e.stroke; S(t, 'stroke', a = a === 'transparent' ? d : a), S(t, 'stroke-width', (n ? e.textStrokeWidth : e.lineWidth) / (!n && e.strokeNoScale ? i.getLineScale() : 1)), S(t, 'paint-order', n ? 'stroke' : 'fill'), S(t, 'stroke-opacity', e.strokeOpacity != null ? e.strokeOpacity : e.opacity), e.lineDash ? (S(t, 'stroke-dasharray', e.lineDash.join(',')), S(t, 'stroke-dashoffset', f(e.lineDashOffset || 0))) : S(t, 'stroke-dasharray', ''), e.lineCap && S(t, 'stroke-linecap', e.lineCap), e.lineJoin && S(t, 'stroke-linejoin', e.lineJoin), e.miterLimit && S(t, 'stroke-miterlimit', e.miterLimit) } else S(t, 'stroke', d) } var I = {}; I.brush = function (t) { var e = t.style; var n = t.__svgEl; n || (n = i('path'), t.__svgEl = n), t.path || t.createPathProxy(); var r = t.path; if (t.__dirtyPath) { r.beginPath(), r.subPixelOptimize = !1, t.buildPath(r, t.shape), t.__dirtyPath = !1; var a = (function (t) { for (var e = [], n = t.data, i = t.len(), r = 0; r < i;) { var a = ''; var o = 0; switch (n[r++]) { case c.M:a = 'M', o = 2; break; case c.L:a = 'L', o = 2; break; case c.Q:a = 'Q', o = 4; break; case c.C:a = 'C', o = 6; break; case c.A:var s = n[r++]; var l = n[r++]; var u = n[r++]; var h = n[r++]; var d = n[r++]; var x = n[r++]; var w = n[r++]; var S = n[r++]; var M = Math.abs(x); var I = b(M - m) || (S ? x >= m : -x >= m); var A = x > 0 ? x % m : x % m + m; var T = !1; T = !!I || !b(M) && A >= v == !!S; var C = _(s + u * g(d)); var D = _(l + h * p(d)); I && (x = S ? m - 1e-4 : 1e-4 - m, T = !0, r === 9 && e.push('M', C, D)); var L = _(s + u * g(d + x)); var P = _(l + h * p(d + x)); e.push('A', _(u), _(h), f(w * y), +T, +S, L, P); break; case c.Z:a = 'Z'; break; case c.R:L = _(n[r++]), P = _(n[r++]); var k = _(n[r++]); var O = _(n[r++]); e.push('M', L, P, 'L', L + k, P, 'L', L + k, P + O, 'L', L, P + O, 'L', L, P) }a && e.push(a); for (var E = 0; E < o; E++)e.push(_(n[r++])) } return e.join(' ') }(r)); a.indexOf('NaN') < 0 && S(n, 'd', a) }M(n, e, !1, t), w(n, t.transform), e.text != null && k(t, t.getBoundingRect()) }; var A = { brush: function (t) { var e = t.style; var n = e.image; n instanceof HTMLImageElement && (n = n.src); if (n) { var r = e.x || 0; var a = e.y || 0; var o = e.width; var s = e.height; var l = t.__svgEl; l || (l = i('image'), t.__svgEl = l), n !== t.__imageSrc && (!(function (t, e, n) { t.setAttributeNS('http://www.w3.org/1999/xlink', e, n) }(l, 'href', n)), t.__imageSrc = n), S(l, 'width', o), S(l, 'height', s), S(l, 'x', r), S(l, 'y', a), w(l, t.transform), e.text != null && k(t, t.getBoundingRect()) } } }; var T = {}; var C = new a(); var D = {}; var L = []; var P = { left: 'start', right: 'end', center: 'middle', middle: 'middle' }; var k = function (t, e) { var n = t.style; var r = t.transform; var a = t instanceof u || n.transformText; t.__dirty && l.normalizeTextStyle(n, !0); var c = n.text; if (c != null && (c += ''), l.needDrawText(c, n)) { c == null && (c = ''), !a && r && (C.copy(e), C.applyTransform(r), e = C); var h = t.__textSvgEl; h || (h = i('text'), t.__textSvgEl = h); var d = h.style; var f = n.font || s.DEFAULT_FONT; var p = h.__computedFont; f !== h.__styleFont && (d.font = h.__styleFont = f, p = h.__computedFont = d.font); var g = n.textPadding; var v = n.textLineHeight; var m = t.__textCotentBlock; m && !t.__dirtyText || (m = t.__textCotentBlock = s.parsePlainText(c, p, g, v, n.truncate)); var y = m.outerHeight; var x = m.lineHeight; l.getBoxPosition(D, t, n, e); var _ = D.baseX; var b = D.baseY; var S = D.textAlign || 'left'; var I = D.textVerticalAlign; !(function (t, e, n, i, r, a, s) { o.identity(L), e && n && o.copy(L, n); var l = i.textRotation; if (r && l) { var u = i.textOrigin; u === 'center' ? (a = r.width / 2 + r.x, s = r.height / 2 + r.y) : u && (a = u[0] + r.x, s = u[1] + r.y), L[4] -= a, L[5] -= s, o.rotate(L, L, l), L[4] += a, L[5] += s }w(t, L) }(h, a, r, n, e, _, b)); var A = _; var T = s.adjustTextY(b, y, I); g && (A = (function (t, e, n) { return e === 'right' ? t - n[1] : e === 'center' ? t + n[3] / 2 - n[1] / 2 : t + n[3] }(_, S, g)), T += g[0]), T += x / 2, M(h, n, !0, t); var P = m.canCacheByTextString; var k = t.__tspanList || (t.__tspanList = []); var E = k.length; if (P && t.__canCacheByTextString && t.__text === c) { if (t.__dirtyText && E) for (var R = 0; R < E; ++R)O(k[R], S, A, T + R * x) } else { t.__text = c, t.__canCacheByTextString = P; var N = m.lines; var z = N.length; for (R = 0; R < z; R++) { var B = k[R]; var V = N[R]; B ? B.__zrText !== V && (B.innerHTML = '', B.appendChild(document.createTextNode(V))) : (B = k[R] = i('tspan'), h.appendChild(B), B.appendChild(document.createTextNode(V))), O(B, S, A, T + R * x) } if (E > z) { for (;R < E; R++)h.removeChild(k[R]); k.length = z } } } }; function O (t, e, n, i) { S(t, 'dominant-baseline', 'middle'), S(t, 'text-anchor', P[e]), S(t, 'x', n), S(t, 'y', i) }T.drawRectText = k, T.brush = function (t) { t.style.text != null && k(t, !1) }, e.path = I, e.image = A, e.text = T }, function (t, e) { var n = 'http://www.w3.org/2000/svg'; e.createElement = function (t) { return document.createElementNS(n, t) } }, function (t, e, n) { var i = n(119).createElement; var r = n(0); var a = n(10); var o = n(43); var s = n(35); var l = n(118); var u = l.path; var c = l.image; var h = l.text; function d (t, e, n, i, r) { this._zrId = t, this._svgRoot = e, this._tagNames = typeof n === 'string' ? [n] : n, this._markLabel = i, this._domName = r || '_dom', this.nextId = 0 }d.prototype.createElement = i, d.prototype.getDefs = function (t) { var e = this._svgRoot; var n = this._svgRoot.getElementsByTagName('defs'); return n.length === 0 ? t ? ((n = e.insertBefore(this.createElement('defs'), e.firstChild)).contains || (n.contains = function (t) { var e = n.children; if (!e) return !1; for (var i = e.length - 1; i >= 0; --i) if (e[i] === t) return !0; return !1 }), n) : null : n[0] }, d.prototype.update = function (t, e) { if (t) { var n = this.getDefs(!1); if (t[this._domName] && n.contains(t[this._domName])) typeof e === 'function' && e(t); else { var i = this.add(t); i && (t[this._domName] = i) } } }, d.prototype.addDom = function (t) { this.getDefs(!0).appendChild(t) }, d.prototype.removeDom = function (t) { var e = this.getDefs(!1); e && t[this._domName] && (e.removeChild(t[this._domName]), t[this._domName] = null) }, d.prototype.getDoms = function () { var t = this.getDefs(!1); if (!t) return []; var e = []; return r.each(this._tagNames, function (n) { var i = t.getElementsByTagName(n); e = e.concat([].slice.call(i)) }), e }, d.prototype.markAllUnused = function () { var t = this.getDoms(); var e = this; r.each(t, function (t) { t[e._markLabel] = '0' }) }, d.prototype.markUsed = function (t) { t && (t[this._markLabel] = '1') }, d.prototype.removeUnused = function () { var t = this.getDefs(!1); if (t) { var e = this.getDoms(); var n = this; r.each(e, function (e) { e[n._markLabel] !== '1' && t.removeChild(e) }) } }, d.prototype.getSvgProxy = function (t) { return t instanceof a ? u : t instanceof o ? c : t instanceof s ? h : u }, d.prototype.getTextSvgElement = function (t) { return t.__textSvgEl }, d.prototype.getSvgElement = function (t) { return t.__svgEl }; var f = d; t.exports = f }, function (t, e, n) { 'use strict'; t.exports = function (t, e) { return function () { for (var n = new Array(arguments.length), i = 0; i < n.length; i++)n[i] = arguments[i]; return t.apply(e, n) } } }, function (t, e, n) { 'use strict'; var i = n(16); function r (t) { return encodeURIComponent(t).replace(/%40/gi, '@').replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%20/g, '+').replace(/%5B/gi, '[').replace(/%5D/gi, ']') }t.exports = function (t, e, n) { if (!e) return t; var a; if (n)a = n(e); else if (i.isURLSearchParams(e))a = e.toString(); else { var o = []; i.forEach(e, function (t, e) { t != null && (i.isArray(t) ? e += '[]' : t = [t], i.forEach(t, function (t) { i.isDate(t) ? t = t.toISOString() : i.isObject(t) && (t = JSON.stringify(t)), o.push(r(e) + '=' + r(t)) })) }), a = o.join('&') } if (a) { var s = t.indexOf('#'); s !== -1 && (t = t.slice(0, s)), t += (t.indexOf('?') === -1 ? '?' : '&') + a } return t } }, function (t, e, n) { 'use strict'; t.exports = function (t) { return !(!t || !t.__CANCEL__) } }, function (t, e, n) { 'use strict'; (function (e) { var i = n(16); var r = n(220); var a = { 'Content-Type': 'application/x-www-form-urlencoded' }; function o (t, e) { !i.isUndefined(t) && i.isUndefined(t['Content-Type']) && (t['Content-Type'] = e) } var s; var l = { adapter: (void 0 !== e && Object.prototype.toString.call(e) === '[object process]' ? s = n(126) : typeof XMLHttpRequest !== 'undefined' && (s = n(126)), s), transformRequest: [function (t, e) { return r(e, 'Accept'), r(e, 'Content-Type'), i.isFormData(t) || i.isArrayBuffer(t) || i.isBuffer(t) || i.isStream(t) || i.isFile(t) || i.isBlob(t) ? t : i.isArrayBufferView(t) ? t.buffer : i.isURLSearchParams(t) ? (o(e, 'application/x-www-form-urlencoded;charset=utf-8'), t.toString()) : i.isObject(t) ? (o(e, 'application/json;charset=utf-8'), JSON.stringify(t)) : t }], transformResponse: [function (t) { if (typeof t === 'string') try { t = JSON.parse(t) } catch (t) {} return t }], timeout: 0, xsrfCookieName: 'XSRF-TOKEN', xsrfHeaderName: 'X-XSRF-TOKEN', maxContentLength: -1, validateStatus: function (t) { return t >= 200 && t < 300 } }; l.headers = { common: { Accept: 'application/json, text/plain, */*' } }, i.forEach(['delete', 'get', 'head'], function (t) { l.headers[t] = {} }), i.forEach(['post', 'put', 'patch'], function (t) { l.headers[t] = i.merge(a) }), t.exports = l }).call(this, n(125)) }, function (t, e) { var n; var i; var r = t.exports = {}; function a () { throw new Error('setTimeout has not been defined') } function o () { throw new Error('clearTimeout has not been defined') } function s (t) { if (n === setTimeout) return setTimeout(t, 0); if ((n === a || !n) && setTimeout) return n = setTimeout, setTimeout(t, 0); try { return n(t, 0) } catch (e) { try { return n.call(null, t, 0) } catch (e) { return n.call(this, t, 0) } } }!(function () { try { n = typeof setTimeout === 'function' ? setTimeout : a } catch (t) { n = a } try { i = typeof clearTimeout === 'function' ? clearTimeout : o } catch (t) { i = o } }()); var l; var u = []; var c = !1; var h = -1; function d () { c && l && (c = !1, l.length ? u = l.concat(u) : h = -1, u.length && f()) } function f () { if (!c) { var t = s(d); c = !0; for (var e = u.length; e;) { for (l = u, u = []; ++h < e;)l && l[h].run(); h = -1, e = u.length }l = null, c = !1, (function (t) { if (i === clearTimeout) return clearTimeout(t); if ((i === o || !i) && clearTimeout) return i = clearTimeout, clearTimeout(t); try { i(t) } catch (e) { try { return i.call(null, t) } catch (e) { return i.call(this, t) } } }(t)) } } function p (t, e) { this.fun = t, this.array = e } function g () {}r.nextTick = function (t) { var e = new Array(arguments.length - 1); if (arguments.length > 1) for (var n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; u.push(new p(t, e)), u.length !== 1 || c || s(f) }, p.prototype.run = function () { this.fun.apply(null, this.array) }, r.title = 'browser', r.browser = !0, r.env = {}, r.argv = [], r.version = '', r.versions = {}, r.on = g, r.addListener = g, r.once = g, r.off = g, r.removeListener = g, r.removeAllListeners = g, r.emit = g, r.prependListener = g, r.prependOnceListener = g, r.listeners = function (t) { return [] }, r.binding = function (t) { throw new Error('process.binding is not supported') }, r.cwd = function () { return '/' }, r.chdir = function (t) { throw new Error('process.chdir is not supported') }, r.umask = function () { return 0 } }, function (t, e, n) { 'use strict'; var i = n(16); var r = n(221); var a = n(122); var o = n(223); var s = n(224); var l = n(127); t.exports = function (t) { return new Promise(function (e, u) { var c = t.data; var h = t.headers; i.isFormData(c) && delete h['Content-Type']; var d = new XMLHttpRequest(); if (t.auth) { var f = t.auth.username || ''; var p = t.auth.password || ''; h.Authorization = 'Basic ' + btoa(f + ':' + p) } if (d.open(t.method.toUpperCase(), a(t.url, t.params, t.paramsSerializer), !0), d.timeout = t.timeout, d.onreadystatechange = function () { if (d && d.readyState === 4 && (d.status !== 0 || d.responseURL && d.responseURL.indexOf('file:') === 0)) { var n = 'getAllResponseHeaders' in d ? o(d.getAllResponseHeaders()) : null; var i = { data: t.responseType && t.responseType !== 'text' ? d.response : d.responseText, status: d.status, statusText: d.statusText, headers: n, config: t, request: d }; r(e, u, i), d = null } }, d.onabort = function () { d && (u(l('Request aborted', t, 'ECONNABORTED', d)), d = null) }, d.onerror = function () { u(l('Network Error', t, null, d)), d = null }, d.ontimeout = function () { u(l('timeout of ' + t.timeout + 'ms exceeded', t, 'ECONNABORTED', d)), d = null }, i.isStandardBrowserEnv()) { var g = n(225); var v = (t.withCredentials || s(t.url)) && t.xsrfCookieName ? g.read(t.xsrfCookieName) : void 0; v && (h[t.xsrfHeaderName] = v) } if ('setRequestHeader' in d && i.forEach(h, function (t, e) { void 0 === c && e.toLowerCase() === 'content-type' ? delete h[e] : d.setRequestHeader(e, t) }), t.withCredentials && (d.withCredentials = !0), t.responseType) try { d.responseType = t.responseType } catch (e) { if (t.responseType !== 'json') throw e } typeof t.onDownloadProgress === 'function' && d.addEventListener('progress', t.onDownloadProgress), typeof t.onUploadProgress === 'function' && d.upload && d.upload.addEventListener('progress', t.onUploadProgress), t.cancelToken && t.cancelToken.promise.then(function (t) { d && (d.abort(), u(t), d = null) }), void 0 === c && (c = null), d.send(c) }) } }, function (t, e, n) { 'use strict'; var i = n(222); t.exports = function (t, e, n, r, a) { var o = new Error(t); return i(o, e, n, r, a) } }, function (t, e, n) { 'use strict'; var i = n(16); t.exports = function (t, e) { e = e || {}; var n = {}; return i.forEach(['url', 'method', 'params', 'data'], function (t) { void 0 !== e[t] && (n[t] = e[t]) }), i.forEach(['headers', 'auth', 'proxy'], function (r) { i.isObject(e[r]) ? n[r] = i.deepMerge(t[r], e[r]) : void 0 !== e[r] ? n[r] = e[r] : i.isObject(t[r]) ? n[r] = i.deepMerge(t[r]) : void 0 !== t[r] && (n[r] = t[r]) }), i.forEach(['baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer', 'timeout', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName', 'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'maxContentLength', 'validateStatus', 'maxRedirects', 'httpAgent', 'httpsAgent', 'cancelToken', 'socketPath'], function (i) { void 0 !== e[i] ? n[i] = e[i] : void 0 !== t[i] && (n[i] = t[i]) }), n } }, function (t, e, n) { 'use strict'; function i (t) { this.message = t }i.prototype.toString = function () { return 'Cancel' + (this.message ? ': ' + this.message : '') }, i.prototype.__CANCEL__ = !0, t.exports = i }, function (t, e) { var n = 2311; t.exports = function () { return n++ } }, function (t, e, n) { var i = n(130); var r = n(34); var a = n(86); var o = n(236); var s = n(0); var l = function (t) { a.call(this, t), r.call(this, t), o.call(this, t), this.id = t.id || i() }; l.prototype = { type: 'element', name: '', __zr: null, ignore: !1, clipPath: null, isGroup: !1, drift: function (t, e) { switch (this.draggable) { case 'horizontal':e = 0; break; case 'vertical':t = 0 } var n = this.transform; n || (n = this.transform = [1, 0, 0, 1, 0, 0]), n[4] += t, n[5] += e, this.decomposeTransform(), this.dirty(!1) }, beforeUpdate: function () {}, afterUpdate: function () {}, update: function () { this.updateTransform() }, traverse: function (t, e) {}, attrKV: function (t, e) { if (t === 'position' || t === 'scale' || t === 'origin') { if (e) { var n = this[t]; n || (n = this[t] = []), n[0] = e[0], n[1] = e[1] } } else this[t] = e }, hide: function () { this.ignore = !0, this.__zr && this.__zr.refresh() }, show: function () { this.ignore = !1, this.__zr && this.__zr.refresh() }, attr: function (t, e) { if (typeof t === 'string') this.attrKV(t, e); else if (s.isObject(t)) for (var n in t)t.hasOwnProperty(n) && this.attrKV(n, t[n]); return this.dirty(!1), this }, setClipPath: function (t) { var e = this.__zr; e && t.addSelfToZr(e), this.clipPath && this.clipPath !== t && this.removeClipPath(), this.clipPath = t, t.__zr = e, t.__clipTarget = this, this.dirty(!1) }, removeClipPath: function () { var t = this.clipPath; t && (t.__zr && t.removeSelfFromZr(t.__zr), t.__zr = null, t.__clipTarget = null, this.clipPath = null, this.dirty(!1)) }, addSelfToZr: function (t) { this.__zr = t; var e = this.animators; if (e) for (var n = 0; n < e.length; n++)t.animation.addAnimator(e[n]); this.clipPath && this.clipPath.addSelfToZr(t) }, removeSelfFromZr: function (t) { this.__zr = null; var e = this.animators; if (e) for (var n = 0; n < e.length; n++)t.animation.removeAnimator(e[n]); this.clipPath && this.clipPath.removeSelfFromZr(t) } }, s.mixin(l, o), s.mixin(l, a), s.mixin(l, r); var u = l; t.exports = u }, function (t, e, n) { var i = n(237); var r = n(23); var a = n(0).isArrayLike; var o = Array.prototype.slice; function s (t, e) { return t[e] } function l (t, e, n) { t[e] = n } function u (t, e, n) { return (e - t) * n + t } function c (t, e, n) { return n > 0.5 ? e : t } function h (t, e, n, i, r) { var a = t.length; if (r === 1) for (var o = 0; o < a; o++)i[o] = u(t[o], e[o], n); else { var s = a && t[0].length; for (o = 0; o < a; o++) for (var l = 0; l < s; l++)i[o][l] = u(t[o][l], e[o][l], n) } } function d (t, e, n) { var i = t.length; var r = e.length; if (i !== r) if (i > r)t.length = r; else for (var a = i; a < r; a++)t.push(n === 1 ? e[a] : o.call(e[a])); var s = t[0] && t[0].length; for (a = 0; a < t.length; a++) if (n === 1)isNaN(t[a]) && (t[a] = e[a]); else for (var l = 0; l < s; l++)isNaN(t[a][l]) && (t[a][l] = e[a][l]) } function f (t, e, n) { if (t === e) return !0; var i = t.length; if (i !== e.length) return !1; if (n === 1) { for (var r = 0; r < i; r++) if (t[r] !== e[r]) return !1 } else { var a = t[0].length; for (r = 0; r < i; r++) for (var o = 0; o < a; o++) if (t[r][o] !== e[r][o]) return !1 } return !0 } function p (t, e, n, i, r, a, o, s, l) { var u = t.length; if (l === 1) for (var c = 0; c < u; c++)s[c] = g(t[c], e[c], n[c], i[c], r, a, o); else { var h = t[0].length; for (c = 0; c < u; c++) for (var d = 0; d < h; d++)s[c][d] = g(t[c][d], e[c][d], n[c][d], i[c][d], r, a, o) } } function g (t, e, n, i, r, a, o) { var s = 0.5 * (n - t); var l = 0.5 * (i - e); return (2 * (e - n) + s + l) * o + (-3 * (e - n) - 2 * s - l) * a + s * r + e } function v (t) { if (a(t)) { var e = t.length; if (a(t[0])) { for (var n = [], i = 0; i < e; i++)n.push(o.call(t[i])); return n } return o.call(t) } return t } function m (t) { return t[0] = Math.floor(t[0]), t[1] = Math.floor(t[1]), t[2] = Math.floor(t[2]), 'rgba(' + t.join(',') + ')' } function y (t, e, n, o, s, l) { var v = t._getter; var y = t._setter; var x = e === 'spline'; var _ = o.length; if (_) { var b; var w = o[0].value; var S = a(w); var M = !1; var I = !1; var A = S ? (function (t) { var e = t[t.length - 1].value; return a(e && e[0]) ? 2 : 1 }(o)) : 0; o.sort(function (t, e) { return t.time - e.time }), b = o[_ - 1].time; for (var T = [], C = [], D = o[0].value, L = !0, P = 0; P < _; P++) { T.push(o[P].time / b); var k = o[P].value; if (S && f(k, D, A) || !S && k === D || (L = !1), D = k, typeof k === 'string') { var O = r.parse(k); O ? (k = O, M = !0) : I = !0 }C.push(k) } if (l || !L) { var E = C[_ - 1]; for (P = 0; P < _ - 1; P++)S ? d(C[P], E, A) : !isNaN(C[P]) || isNaN(E) || I || M || (C[P] = E); S && d(v(t._target, s), E, A); var R; var N; var z; var B; var V; var F = 0; var G = 0; if (M) var H = [0, 0, 0, 0]; var W = new i({ target: t._target, life: b, loop: t._loop, delay: t._delay, onframe: function (t, e) { var n; if (e < 0)n = 0; else if (e < G) { for (n = Math.min(F + 1, _ - 1); n >= 0 && !(T[n] <= e); n--);n = Math.min(n, _ - 2) } else { for (n = F; n < _ && !(T[n] > e); n++);n = Math.min(n - 1, _ - 2) }F = n, G = e; var i = T[n + 1] - T[n]; if (i !== 0) if (R = (e - T[n]) / i, x) if (z = C[n], N = C[n === 0 ? n : n - 1], B = C[n > _ - 2 ? _ - 1 : n + 1], V = C[n > _ - 3 ? _ - 1 : n + 2], S)p(N, z, B, V, R, R * R, R * R * R, v(t, s), A); else { if (M)r = p(N, z, B, V, R, R * R, R * R * R, H, 1), r = m(H); else { if (I) return c(z, B, R); r = g(N, z, B, V, R, R * R, R * R * R) }y(t, s, r) } else if (S)h(C[n], C[n + 1], R, v(t, s), A); else { var r; if (M)h(C[n], C[n + 1], R, H, 1), r = m(H); else { if (I) return c(C[n], C[n + 1], R); r = u(C[n], C[n + 1], R) }y(t, s, r) } }, ondestroy: n }); return e && e !== 'spline' && (W.easing = e), W } } } var x = function (t, e, n, i) { this._tracks = {}, this._target = t, this._loop = e || !1, this._getter = n || s, this._setter = i || l, this._clipCount = 0, this._delay = 0, this._doneList = [], this._onframeList = [], this._clipList = [] }; x.prototype = { when: function (t, e) { var n = this._tracks; for (var i in e) if (e.hasOwnProperty(i)) { if (!n[i]) { n[i] = []; var r = this._getter(this._target, i); if (r == null) continue; t !== 0 && n[i].push({ time: 0, value: v(r) }) }n[i].push({ time: t, value: e[i] }) } return this }, during: function (t) { return this._onframeList.push(t), this }, pause: function () { for (var t = 0; t < this._clipList.length; t++) this._clipList[t].pause(); this._paused = !0 }, resume: function () { for (var t = 0; t < this._clipList.length; t++) this._clipList[t].resume(); this._paused = !1 }, isPaused: function () { return !!this._paused }, _doneCallback: function () { this._tracks = {}, this._clipList.length = 0; for (var t = this._doneList, e = t.length, n = 0; n < e; n++)t[n].call(this) }, start: function (t, e) { var n; var i = this; var r = 0; var a = function () { --r || i._doneCallback() }; for (var o in this._tracks) if (this._tracks.hasOwnProperty(o)) { var s = y(this, t, a, this._tracks[o], o, e); s && (this._clipList.push(s), r++, this.animation && this.animation.addClip(s), n = s) } if (n) { var l = n.onframe; n.onframe = function (t, e) { l(t, e); for (var n = 0; n < i._onframeList.length; n++)i._onframeList[n](t, e) } } return r || this._doneCallback(), this }, stop: function (t) { for (var e = this._clipList, n = this.animation, i = 0; i < e.length; i++) { var r = e[i]; t && r.onframe(this._target, 1), n && n.removeClip(r) }e.length = 0 }, delay: function (t) { return this._delay = t, this }, done: function (t) { return t && this._doneList.push(t), this }, getClips: function () { return this._clipList } }; var _ = x; t.exports = _ }, function (t, e) { var n = function () { this.head = null, this.tail = null, this._len = 0 }; var i = n.prototype; i.insert = function (t) { var e = new r(t); return this.insertEntry(e), e }, i.insertEntry = function (t) { this.head ? (this.tail.next = t, t.prev = this.tail, t.next = null, this.tail = t) : this.head = this.tail = t, this._len++ }, i.remove = function (t) { var e = t.prev; var n = t.next; e ? e.next = n : this.head = n, n ? n.prev = e : this.tail = e, t.next = t.prev = null, this._len-- }, i.len = function () { return this._len }, i.clear = function () { this.head = this.tail = null, this._len = 0 }; var r = function (t) { this.value = t, this.next, this.prev }; var a = function (t) { this._list = new n(), this._map = {}, this._maxSize = t || 10, this._lastRemovedEntry = null }; var o = a.prototype; o.put = function (t, e) { var n = this._list; var i = this._map; var a = null; if (i[t] == null) { var o = n.len(); var s = this._lastRemovedEntry; if (o >= this._maxSize && o > 0) { var l = n.head; n.remove(l), delete i[l.key], a = l.value, this._lastRemovedEntry = l }s ? s.value = e : s = new r(e), s.key = t, n.insertEntry(s), i[t] = s } return a }, o.get = function (t) { var e = this._map[t]; var n = this._list; if (e != null) return e !== n.tail && (n.remove(e), n.insertEntry(e)), e.value }, o.clear = function () { this._list.clear(), this._map = {} }; var s = a; t.exports = s }, function (t, e) { var n = { shadowBlur: 1, shadowOffsetX: 1, shadowOffsetY: 1, textShadowBlur: 1, textShadowOffsetX: 1, textShadowOffsetY: 1, textBoxShadowBlur: 1, textBoxShadowOffsetX: 1, textBoxShadowOffsetY: 1 }; t.exports = function (t, e, i) { return n.hasOwnProperty(e) ? i * t.dpr : i } }, function (t, e) { var n = function (t, e) { this.image = t, this.repeat = e, this.type = 'pattern' }; n.prototype.getCanvasPattern = function (t) { return t.createPattern(this.image, this.repeat || 'repeat') }; var i = n; t.exports = i }, function (t, e) { var n = typeof window !== 'undefined' && (window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window) || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame) || function (t) { setTimeout(t, 16) }; t.exports = n }, function (t, e, n) { var i = n(70); var r = n(8); var a = n(69).WILL_BE_RESTORED; var o = new r(); var s = function () {}; s.prototype = { constructor: s, drawRectText: function (t, e) { var n = this.style; e = n.textRect || e, this.__dirty && i.normalizeTextStyle(n, !0); var r = n.text; if (r != null && (r += ''), i.needDrawText(r, n)) { t.save(); var s = this.transform; n.transformText ? this.setTransform(t) : s && (o.copy(e), o.applyTransform(s), e = o), i.renderText(this, t, r, n, e, a), t.restore() } } }; var l = s; t.exports = l }, function (t, e) { e.buildPath = function (t, e) { var n; var i; var r; var a; var o; var s = e.x; var l = e.y; var u = e.width; var c = e.height; var h = e.r; u < 0 && (s += u, u = -u), c < 0 && (l += c, c = -c), typeof h === 'number' ? n = i = r = a = h : h instanceof Array ? h.length === 1 ? n = i = r = a = h[0] : h.length === 2 ? (n = r = h[0], i = a = h[1]) : h.length === 3 ? (n = h[0], i = a = h[1], r = h[2]) : (n = h[0], i = h[1], r = h[2], a = h[3]) : n = i = r = a = 0, n + i > u && (n *= u / (o = n + i), i *= u / o), r + a > u && (r *= u / (o = r + a), a *= u / o), i + r > c && (i *= c / (o = i + r), r *= c / o), n + a > c && (n *= c / (o = n + a), a *= c / o), t.moveTo(s + n, l), t.lineTo(s + u - i, l), i !== 0 && t.arc(s + u - i, l + i, i, -Math.PI / 2, 0), t.lineTo(s + u, l + c - r), r !== 0 && t.arc(s + u - r, l + c - r, r, 0, Math.PI / 2), t.lineTo(s + a, l + c), a !== 0 && t.arc(s + a, l + c - a, a, Math.PI / 2, Math.PI), t.lineTo(s, l + n), n !== 0 && t.arc(s + n, l + n, n, Math.PI, 1.5 * Math.PI) } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = i.each; var a = i.filter; var o = i.map; var s = i.isArray; var l = i.indexOf; var u = i.isObject; var c = i.isString; var h = i.createHashMap; var d = i.assert; var f = i.clone; var p = i.merge; var g = i.extend; var v = i.mixin; var m = n(4); var y = n(12); var x = n(13); var _ = n(260); var b = n(151); var w = n(73).resetSourceDefaulter; var S = '\0_ec_inner'; var M = y.extend({ init: function (t, e, n, i) { n = n || {}, this.option = null, this._theme = new y(n), this._optionManager = i }, setOption: function (t, e) { d(!(S in t), 'please use chart.getOption()'), this._optionManager.setOption(t, e), this.resetOption(null) }, resetOption: function (t) { var e = !1; var n = this._optionManager; if (!t || t === 'recreate') { var i = n.mountOption(t === 'recreate'); this.option && t !== 'recreate' ? (this.restoreData(), this.mergeOption(i)) : I.call(this, i), e = !0 } if (t !== 'timeline' && t !== 'media' || this.restoreData(), !t || t === 'recreate' || t === 'timeline') { var a = n.getTimelineOption(this); a && (this.mergeOption(a), e = !0) } if (!t || t === 'recreate' || t === 'media') { var o = n.getMediaOption(this, this._api); o.length && r(o, function (t) { this.mergeOption(t, e = !0) }, this) } return e }, mergeOption: function (t) { var e = this.option; var n = this._componentsMap; var i = []; w(this), r(t, function (t, n) { t != null && (x.hasClass(n) ? n && i.push(n) : e[n] = e[n] == null ? f(t) : p(e[n], t, !0)) }), x.topologicalTravel(i, x.getAllClassMainTypes(), function (i, a) { var o = m.normalizeToArray(t[i]); var l = m.mappingToExists(n.get(i), o); m.makeIdAndName(l), r(l, function (t, e) { var n = t.option; u(n) && (t.keyInfo.mainType = i, t.keyInfo.subType = (function (t, e, n) { return e.type ? e.type : n ? n.subType : x.determineSubType(t, e) }(i, n, t.exist))) }); var c = (function (t, e) { s(e) || (e = e ? [e] : []); var n = {}; return r(e, function (e) { n[e] = (t.get(e) || []).slice() }), n }(n, a)); e[i] = [], n.set(i, []), r(l, function (t, r) { var a = t.exist; var o = t.option; if (d(u(o) || a, 'Empty component definition'), o) { var s = x.getClass(i, t.keyInfo.subType, !0); if (a && a.constructor === s)a.name = t.keyInfo.name, a.mergeOption(o, this), a.optionUpdated(o, !1); else { var l = g({ dependentModels: c, componentIndex: r }, t.keyInfo); a = new s(o, this, this, l), g(a, l), a.init(o, this, this, l), a.optionUpdated(null, !0) } } else a.mergeOption({}, this), a.optionUpdated({}, !1); n.get(i)[r] = a, e[i][r] = a.option }, this), i === 'series' && A(this, n.get('series')) }, this), this._seriesIndicesMap = h(this._seriesIndices = this._seriesIndices || []) }, getOption: function () { var t = f(this.option); return r(t, function (e, n) { if (x.hasClass(n)) { for (var i = (e = m.normalizeToArray(e)).length - 1; i >= 0; i--)m.isIdInner(e[i]) && e.splice(i, 1); t[n] = e } }), delete t[S], t }, getTheme: function () { return this._theme }, getComponent: function (t, e) { var n = this._componentsMap.get(t); if (n) return n[e || 0] }, queryComponents: function (t) { var e = t.mainType; if (!e) return []; var n; var i = t.index; var r = t.id; var u = t.name; var c = this._componentsMap.get(e); if (!c || !c.length) return []; if (i != null)s(i) || (i = [i]), n = a(o(i, function (t) { return c[t] }), function (t) { return !!t }); else if (r != null) { var h = s(r); n = a(c, function (t) { return h && l(r, t.id) >= 0 || !h && t.id === r }) } else if (u != null) { var d = s(u); n = a(c, function (t) { return d && l(u, t.name) >= 0 || !d && t.name === u }) } else n = c.slice(); return T(n, t) }, findComponents: function (t) { var e; var n; var i; var r; var o; var s = t.query; var l = t.mainType; var u = (n = l + 'Index', i = l + 'Id', r = l + 'Name', !(e = s) || e[n] == null && e[i] == null && e[r] == null ? null : { mainType: l, index: e[n], id: e[i], name: e[r] }); var c = u ? this.queryComponents(u) : this._componentsMap.get(l); return o = T(c, t), t.filter ? a(o, t.filter) : o }, eachComponent: function (t, e, n) { var i = this._componentsMap; if (typeof t === 'function')n = e, e = t, i.each(function (t, i) { r(t, function (t, r) { e.call(n, i, t, r) }) }); else if (c(t))r(i.get(t), e, n); else if (u(t)) { var a = this.findComponents(t); r(a, e, n) } }, getSeriesByName: function (t) { var e = this._componentsMap.get('series'); return a(e, function (e) { return e.name === t }) }, getSeriesByIndex: function (t) { return this._componentsMap.get('series')[t] }, getSeriesByType: function (t) { var e = this._componentsMap.get('series'); return a(e, function (e) { return e.subType === t }) }, getSeries: function () { return this._componentsMap.get('series').slice() }, getSeriesCount: function () { return this._componentsMap.get('series').length }, eachSeries: function (t, e) { r(this._seriesIndices, function (n) { var i = this._componentsMap.get('series')[n]; t.call(e, i, n) }, this) }, eachRawSeries: function (t, e) { r(this._componentsMap.get('series'), t, e) }, eachSeriesByType: function (t, e, n) { r(this._seriesIndices, function (i) { var r = this._componentsMap.get('series')[i]; r.subType === t && e.call(n, r, i) }, this) }, eachRawSeriesByType: function (t, e, n) { return r(this.getSeriesByType(t), e, n) }, isSeriesFiltered: function (t) { return this._seriesIndicesMap.get(t.componentIndex) == null }, getCurrentSeriesIndices: function () { return (this._seriesIndices || []).slice() }, filterSeries: function (t, e) { A(this, a(this._componentsMap.get('series'), t, e)) }, restoreData: function (t) { var e = this._componentsMap; A(this, e.get('series')); var n = []; e.each(function (t, e) { n.push(e) }), x.topologicalTravel(n, x.getAllClassMainTypes(), function (n, i) { r(e.get(n), function (e) { (n !== 'series' || !(function (t, e) { if (e) { var n = e.seiresIndex; var i = e.seriesId; var r = e.seriesName; return n != null && t.componentIndex !== n || i != null && t.id !== i || r != null && t.name !== r } }(e, t))) && e.restoreData() }) }) } }); function I (t) { var e, n, i; t = t, this.option = {}, this.option[S] = 1, this._componentsMap = h({ series: [] }), this._seriesIndices, this._seriesIndicesMap, e = t, n = this._theme.option, i = e.color && !e.colorLayer, r(n, function (t, n) { n === 'colorLayer' && i || x.hasClass(n) || (typeof t === 'object' ? e[n] = e[n] ? p(e[n], t, !1) : f(t) : e[n] == null && (e[n] = t)) }), p(t, _, !1), this.mergeOption(t) } function A (t, e) { t._seriesIndicesMap = h(t._seriesIndices = o(e, function (t) { return t.componentIndex }) || []) } function T (t, e) { return e.hasOwnProperty('subType') ? a(t, function (t) { return t.subType === e.subType }) : t }v(M, b); var C = M; t.exports = C }, function (t, e, n) { var i = n(10); var r = n(45); var a = n(249); var o = Math.sqrt; var s = Math.sin; var l = Math.cos; var u = Math.PI; var c = function (t) { return Math.sqrt(t[0] * t[0] + t[1] * t[1]) }; var h = function (t, e) { return (t[0] * e[0] + t[1] * e[1]) / (c(t) * c(e)) }; var d = function (t, e) { return (t[0] * e[1] < t[1] * e[0] ? -1 : 1) * Math.acos(h(t, e)) }; function f (t, e, n, i, r, a, c, f, p, g, v) { var m = p * (u / 180); var y = l(m) * (t - n) / 2 + s(m) * (e - i) / 2; var x = -1 * s(m) * (t - n) / 2 + l(m) * (e - i) / 2; var _ = y * y / (c * c) + x * x / (f * f); _ > 1 && (c *= o(_), f *= o(_)); var b = (r === a ? -1 : 1) * o((c * c * (f * f) - c * c * (x * x) - f * f * (y * y)) / (c * c * (x * x) + f * f * (y * y))) || 0; var w = b * c * x / f; var S = b * -f * y / c; var M = (t + n) / 2 + l(m) * w - s(m) * S; var I = (e + i) / 2 + s(m) * w + l(m) * S; var A = d([1, 0], [(y - w) / c, (x - S) / f]); var T = [(y - w) / c, (x - S) / f]; var C = [(-1 * y - w) / c, (-1 * x - S) / f]; var D = d(T, C); h(T, C) <= -1 && (D = u), h(T, C) >= 1 && (D = 0), a === 0 && D > 0 && (D -= 2 * u), a === 1 && D < 0 && (D += 2 * u), v.addData(g, M, I, c, f, A, D, m, a) } var p = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi; var g = /-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g; function v (t, e) { var n = (function (t) { if (!t) return new r(); for (var e, n = 0, i = 0, a = n, o = i, s = new r(), l = r.CMD, u = t.match(p), c = 0; c < u.length; c++) { for (var h, d = u[c], v = d.charAt(0), m = d.match(g) || [], y = m.length, x = 0; x < y; x++)m[x] = parseFloat(m[x]); for (var _ = 0; _ < y;) { var b; var w; var S; var M; var I; var A; var T; var C = n; var D = i; switch (v) { case 'l':n += m[_++], i += m[_++], h = l.L, s.addData(h, n, i); break; case 'L':n = m[_++], i = m[_++], h = l.L, s.addData(h, n, i); break; case 'm':n += m[_++], i += m[_++], h = l.M, s.addData(h, n, i), a = n, o = i, v = 'l'; break; case 'M':n = m[_++], i = m[_++], h = l.M, s.addData(h, n, i), a = n, o = i, v = 'L'; break; case 'h':n += m[_++], h = l.L, s.addData(h, n, i); break; case 'H':n = m[_++], h = l.L, s.addData(h, n, i); break; case 'v':i += m[_++], h = l.L, s.addData(h, n, i); break; case 'V':i = m[_++], h = l.L, s.addData(h, n, i); break; case 'C':h = l.C, s.addData(h, m[_++], m[_++], m[_++], m[_++], m[_++], m[_++]), n = m[_ - 2], i = m[_ - 1]; break; case 'c':h = l.C, s.addData(h, m[_++] + n, m[_++] + i, m[_++] + n, m[_++] + i, m[_++] + n, m[_++] + i), n += m[_ - 2], i += m[_ - 1]; break; case 'S':b = n, w = i; var L = s.len(); var P = s.data; e === l.C && (b += n - P[L - 4], w += i - P[L - 3]), h = l.C, C = m[_++], D = m[_++], n = m[_++], i = m[_++], s.addData(h, b, w, C, D, n, i); break; case 's':b = n, w = i; L = s.len(), P = s.data; e === l.C && (b += n - P[L - 4], w += i - P[L - 3]), h = l.C, C = n + m[_++], D = i + m[_++], n += m[_++], i += m[_++], s.addData(h, b, w, C, D, n, i); break; case 'Q':C = m[_++], D = m[_++], n = m[_++], i = m[_++], h = l.Q, s.addData(h, C, D, n, i); break; case 'q':C = m[_++] + n, D = m[_++] + i, n += m[_++], i += m[_++], h = l.Q, s.addData(h, C, D, n, i); break; case 'T':b = n, w = i; L = s.len(), P = s.data; e === l.Q && (b += n - P[L - 4], w += i - P[L - 3]), n = m[_++], i = m[_++], h = l.Q, s.addData(h, b, w, n, i); break; case 't':b = n, w = i; L = s.len(), P = s.data; e === l.Q && (b += n - P[L - 4], w += i - P[L - 3]), n += m[_++], i += m[_++], h = l.Q, s.addData(h, b, w, n, i); break; case 'A':S = m[_++], M = m[_++], I = m[_++], A = m[_++], T = m[_++], f(C = n, D = i, n = m[_++], i = m[_++], A, T, S, M, I, h = l.A, s); break; case 'a':S = m[_++], M = m[_++], I = m[_++], A = m[_++], T = m[_++], f(C = n, D = i, n += m[_++], i += m[_++], A, T, S, M, I, h = l.A, s) } }v !== 'z' && v !== 'Z' || (h = l.Z, s.addData(h), n = a, i = o), e = h } return s.toStatic(), s }(t)); return (e = e || {}).buildPath = function (t) { if (t.setData) { t.setData(n.data), (e = t.getContext()) && t.rebuildPath(e) } else { var e = t; n.rebuildPath(e) } }, e.applyTransform = function (t) { a(n, t), this.dirty(!0) }, e }e.createFromString = function (t, e) { return new i(v(t, e)) }, e.extendFromString = function (t, e) { return i.extend(v(t, e)) }, e.mergePath = function (t, e) { for (var n = [], r = t.length, a = 0; a < r; a++) { var o = t[a]; o.path || o.createPathProxy(), o.__dirtyPath && o.buildPath(o.path, o.shape, !0), n.push(o.path) } var s = new i(e); return s.createPathProxy(), s.buildPath = function (t) { t.appendPath(n); var e = t.getContext(); e && t.rebuildPath(e) }, s } }, function (t, e) { e.containStroke = function (t, e, n, i, r, a, o) { if (r === 0) return !1; var s = r; var l = 0; if (o > e + s && o > i + s || o < e - s && o < i - s || a > t + s && a > n + s || a < t - s && a < n - s) return !1; if (t === n) return Math.abs(a - t) <= s / 2; var u = (l = (e - i) / (t - n)) * a - o + (t * i - n * e) / (t - n); return u * u / (l * l + 1) <= s / 2 * s / 2 } }, function (t, e, n) { var i = n(28).quadraticProjectPoint; e.containStroke = function (t, e, n, r, a, o, s, l, u) { if (s === 0) return !1; var c = s; return !(u > e + c && u > r + c && u > o + c || u < e - c && u < r - c && u < o - c || l > t + c && l > n + c && l > a + c || l < t - c && l < n - c && l < a - c) && i(t, e, n, r, a, o, l, u, null) <= c / 2 } }, function (t, e) { var n = 2 * Math.PI; e.normalizeRadian = function (t) { return (t %= n) < 0 && (t += n), t } }, function (t, e) { t.exports = function (t, e, n, i, r, a) { if (a > e && a > i || a < e && a < i) return 0; if (i === e) return 0; var o = i < e ? 1 : -1; var s = (a - e) / (i - e); s !== 1 && s !== 0 || (o = i < e ? 0.5 : -0.5); var l = s * (n - t) + t; return l === r ? 1 / 0 : l > r ? o : 0 } }, function (t, e, n) { var i = n(10).extend({ type: 'circle', shape: { cx: 0, cy: 0, r: 0 }, buildPath: function (t, e, n) { n && t.moveTo(e.cx + e.r, e.cy), t.arc(e.cx, e.cy, e.r, 0, 2 * Math.PI, !0) } }); t.exports = i }, function (t, e, n) { var i = n(11); var r = [['shadowBlur', 0], ['shadowColor', '#000'], ['shadowOffsetX', 0], ['shadowOffsetY', 0]]; t.exports = function (t) { return i.browser.ie && i.browser.version >= 11 ? function () { var e; var n = this.__clipPaths; var i = this.style; if (n) for (var a = 0; a < n.length; a++) { var o = n[a]; var s = o && o.shape; var l = o && o.type; if (s && (l === 'sector' && s.startAngle === s.endAngle || l === 'rect' && (!s.width || !s.height))) { for (var u = 0; u < r.length; u++)r[u][2] = i[r[u][0]], i[r[u][0]] = r[u][1]; e = !0; break } } if (t.apply(this, arguments), e) for (u = 0; u < r.length; u++)i[r[u][0]] = r[u][2] } : t } }, function (t, e, n) { var i = n(10); var r = n(148); var a = i.extend({ type: 'polygon', shape: { points: null, smooth: !1, smoothConstraint: null }, buildPath: function (t, e) { r.buildPath(t, e, !0) } }); t.exports = a }, function (t, e, n) { var i = n(252); var r = n(253); e.buildPath = function (t, e, n) { var a = e.points; var o = e.smooth; if (a && a.length >= 2) { if (o && o !== 'spline') { var s = r(a, o, n, e.smoothConstraint); t.moveTo(a[0][0], a[0][1]); for (var l = a.length, u = 0; u < (n ? l : l - 1); u++) { var c = s[2 * u]; var h = s[2 * u + 1]; var d = a[(u + 1) % l]; t.bezierCurveTo(c[0], c[1], h[0], h[1], d[0], d[1]) } } else { o === 'spline' && (a = i(a, n)), t.moveTo(a[0][0], a[0][1]); u = 1; for (var f = a.length; u < f; u++)t.lineTo(a[u][0], a[u][1]) }n && t.closePath() } } }, function (t, e, n) { var i = n(10); var r = n(148); var a = i.extend({ type: 'polyline', shape: { points: null, smooth: !1, smoothConstraint: null }, style: { stroke: '#000', fill: null }, buildPath: function (t, e) { r.buildPath(t, e, !1) } }); t.exports = a }, function (t, e, n) { var i = n(10); var r = n(91).subPixelOptimizeLine; var a = {}; var o = i.extend({ type: 'line', shape: { x1: 0, y1: 0, x2: 0, y2: 0, percent: 1 }, style: { stroke: '#000', fill: null }, buildPath: function (t, e) { var n, i, o, s; this.subPixelOptimize ? (r(a, e, this.style), n = a.x1, i = a.y1, o = a.x2, s = a.y2) : (n = e.x1, i = e.y1, o = e.x2, s = e.y2); var l = e.percent; l !== 0 && (t.moveTo(n, i), l < 1 && (o = n * (1 - l) + o * l, s = i * (1 - l) + s * l), t.lineTo(o, s)) }, pointAt: function (t) { var e = this.shape; return [e.x1 * (1 - t) + e.x2 * t, e.y1 * (1 - t) + e.y2 * t] } }); t.exports = o }, function (t, e, n) { var i = n(4); var r = i.makeInner; var a = i.normalizeToArray; var o = r(); var s = { clearColorPalette: function () { o(this).colorIdx = 0, o(this).colorNameMap = {} }, getColorFromPalette: function (t, e, n) { var i = o(e = e || this); var r = i.colorIdx || 0; var s = i.colorNameMap = i.colorNameMap || {}; if (s.hasOwnProperty(t)) return s[t]; var l = a(this.get('color', !0)); var u = this.get('colorLayer', !0); var c = n != null && u ? (function (t, e) { for (var n = t.length, i = 0; i < n; i++) if (t[i].length > e) return t[i]; return t[n - 1] }(u, n)) : l; if ((c = c || l) && c.length) { var h = c[r]; return t && (s[t] = h), i.colorIdx = (r + 1) % c.length, h } } }; t.exports = s }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = i.createHashMap; var a = (i.retrieve, i.each); var o = { cartesian2d: function (t, e, n, i) { var r = t.getReferringComponents('xAxis')[0]; var a = t.getReferringComponents('yAxis')[0]; e.coordSysDims = ['x', 'y'], n.set('x', r), n.set('y', a), s(r) && (i.set('x', r), e.firstCategoryDimIndex = 0), s(a) && (i.set('y', a), e.firstCategoryDimIndex = 1) }, singleAxis: function (t, e, n, i) { var r = t.getReferringComponents('singleAxis')[0]; e.coordSysDims = ['single'], n.set('single', r), s(r) && (i.set('single', r), e.firstCategoryDimIndex = 0) }, polar: function (t, e, n, i) { var r = t.getReferringComponents('polar')[0]; var a = r.findAxisModel('radiusAxis'); var o = r.findAxisModel('angleAxis'); e.coordSysDims = ['radius', 'angle'], n.set('radius', a), n.set('angle', o), s(a) && (i.set('radius', a), e.firstCategoryDimIndex = 0), s(o) && (i.set('angle', o), e.firstCategoryDimIndex = 1) }, geo: function (t, e, n, i) { e.coordSysDims = ['lng', 'lat'] }, parallel: function (t, e, n, i) { var r = t.ecModel; var o = r.getComponent('parallel', t.get('parallelIndex')); var l = e.coordSysDims = o.dimensions.slice(); a(o.parallelAxisIndex, function (t, a) { var o = r.getComponent('parallelAxis', t); var u = l[a]; n.set(u, o), s(o) && e.firstCategoryDimIndex == null && (i.set(u, o), e.firstCategoryDimIndex = a) }) } }; function s (t) { return t.get('type') === 'category' }e.getCoordSysDefineBySeries = function (t) { var e = t.get('coordinateSystem'); var n = { coordSysName: e, coordSysDims: [], axisMap: r(), categoryAxisMap: r() }; var i = o[e]; if (i) return i(t, n, n.axisMap, n.categoryAxisMap), n } }, function (t, e, n) { var i = n(0); var r = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL', 'getModel', 'getOption', 'getViewOfComponentModel', 'getViewOfSeriesModel']; var a = function (t) { i.each(r, function (e) { this[e] = i.bind(t[e], t) }, this) }; t.exports = a }, function (t, e, n) { var i = n(13); var r = n(74); var a = n(73).detectSourceFormat; var o = n(57).SERIES_LAYOUT_BY_COLUMN; i.extend({ type: 'dataset', defaultOption: { seriesLayoutBy: o, sourceHeader: null, dimensions: null, source: null }, optionUpdated: function () { a(this) } }), r.extend({ type: 'dataset' }) }, function (t, e, n) { var i = n(42); var r = n(43); var a = n(35); var o = n(145); var s = n(90); var l = n(271); var u = n(150); var c = n(10); var h = n(147); var d = n(149); var f = n(92); var p = n(88); var g = n(15); var v = n(140).createFromString; var m = n(0); var y = m.isString; var x = m.extend; var _ = m.defaults; var b = m.trim; var w = m.each; var S = /[\s,]+/; function M (t) { y(t) && (t = (new DOMParser()).parseFromString(t, 'text/xml')); for (t.nodeType === 9 && (t = t.firstChild); t.nodeName.toLowerCase() !== 'svg' || t.nodeType !== 1;)t = t.nextSibling; return t } function I () { this._defs = {}, this._root = null, this._isDefine = !1, this._isText = !1 }I.prototype.parse = function (t, e) { e = e || {}; var n = M(t); if (!n) throw new Error('Illegal svg'); var r = new i(); this._root = r; var a = n.getAttribute('viewBox') || ''; var o = parseFloat(n.getAttribute('width') || e.width); var l = parseFloat(n.getAttribute('height') || e.height); isNaN(o) && (o = null), isNaN(l) && (l = null), P(n, r, null, !0); for (var u, c, h = n.firstChild; h;) this._parseNode(h, r), h = h.nextSibling; if (a) { var d = b(a).split(S); d.length >= 4 && (u = { x: parseFloat(d[0] || 0), y: parseFloat(d[1] || 0), width: parseFloat(d[2]), height: parseFloat(d[3]) }) } if (u && o != null && l != null && (c = N(u, o, l), !e.ignoreViewBox)) { var f = r; (r = new i()).add(f), f.scale = c.scale.slice(), f.position = c.position.slice() } return e.ignoreRootClip || o == null || l == null || r.setClipPath(new s({ shape: { x: 0, y: 0, width: o, height: l } })), { root: r, width: o, height: l, viewBoxRect: u, viewBoxTransform: c } }, I.prototype._parseNode = function (t, e) { var n; var i; var r = t.nodeName.toLowerCase(); if (r === 'defs' ? this._isDefine = !0 : r === 'text' && (this._isText = !0), this._isDefine) { if (i = T[r]) { var a = i.call(this, t); var o = t.getAttribute('id'); o && (this._defs[o] = a) } } else (i = A[r]) && (n = i.call(this, t, e), e.add(n)); for (var s = t.firstChild; s;)s.nodeType === 1 && this._parseNode(s, n), s.nodeType === 3 && this._isText && this._parseText(s, n), s = s.nextSibling; r === 'defs' ? this._isDefine = !1 : r === 'text' && (this._isText = !1) }, I.prototype._parseText = function (t, e) { if (t.nodeType === 1) { var n = t.getAttribute('dx') || 0; var i = t.getAttribute('dy') || 0; this._textX += parseFloat(n), this._textY += parseFloat(i) } var r = new a({ style: { text: t.textContent, transformText: !0 }, position: [this._textX || 0, this._textY || 0] }); C(e, r), P(t, r, this._defs); var o = r.style.fontSize; o && o < 9 && (r.style.fontSize = 9, r.scale = r.scale || [1, 1], r.scale[0] *= o / 9, r.scale[1] *= o / 9); var s = r.getBoundingRect(); return this._textX += s.width, e.add(r), r }; var A = { g: function (t, e) { var n = new i(); return C(e, n), P(t, n, this._defs), n }, rect: function (t, e) { var n = new s(); return C(e, n), P(t, n, this._defs), n.setShape({ x: parseFloat(t.getAttribute('x') || 0), y: parseFloat(t.getAttribute('y') || 0), width: parseFloat(t.getAttribute('width') || 0), height: parseFloat(t.getAttribute('height') || 0) }), n }, circle: function (t, e) { var n = new o(); return C(e, n), P(t, n, this._defs), n.setShape({ cx: parseFloat(t.getAttribute('cx') || 0), cy: parseFloat(t.getAttribute('cy') || 0), r: parseFloat(t.getAttribute('r') || 0) }), n }, line: function (t, e) { var n = new u(); return C(e, n), P(t, n, this._defs), n.setShape({ x1: parseFloat(t.getAttribute('x1') || 0), y1: parseFloat(t.getAttribute('y1') || 0), x2: parseFloat(t.getAttribute('x2') || 0), y2: parseFloat(t.getAttribute('y2') || 0) }), n }, ellipse: function (t, e) { var n = new l(); return C(e, n), P(t, n, this._defs), n.setShape({ cx: parseFloat(t.getAttribute('cx') || 0), cy: parseFloat(t.getAttribute('cy') || 0), rx: parseFloat(t.getAttribute('rx') || 0), ry: parseFloat(t.getAttribute('ry') || 0) }), n }, polygon: function (t, e) { var n = t.getAttribute('points'); n && (n = D(n)); var i = new h({ shape: { points: n || [] } }); return C(e, i), P(t, i, this._defs), i }, polyline: function (t, e) { var n = new c(); C(e, n), P(t, n, this._defs); var i = t.getAttribute('points'); return i && (i = D(i)), new d({ shape: { points: i || [] } }) }, image: function (t, e) { var n = new r(); return C(e, n), P(t, n, this._defs), n.setStyle({ image: t.getAttribute('xlink:href'), x: t.getAttribute('x'), y: t.getAttribute('y'), width: t.getAttribute('width'), height: t.getAttribute('height') }), n }, text: function (t, e) { var n = t.getAttribute('x') || 0; var r = t.getAttribute('y') || 0; var a = t.getAttribute('dx') || 0; var o = t.getAttribute('dy') || 0; this._textX = parseFloat(n) + parseFloat(a), this._textY = parseFloat(r) + parseFloat(o); var s = new i(); return C(e, s), P(t, s, this._defs), s }, tspan: function (t, e) { var n = t.getAttribute('x'); var r = t.getAttribute('y'); n != null && (this._textX = parseFloat(n)), r != null && (this._textY = parseFloat(r)); var a = t.getAttribute('dx') || 0; var o = t.getAttribute('dy') || 0; var s = new i(); return C(e, s), P(t, s, this._defs), this._textX += a, this._textY += o, s }, path: function (t, e) { var n = t.getAttribute('d') || ''; var i = v(n); return C(e, i), P(t, i, this._defs), i } }; var T = { lineargradient: function (t) { var e = parseInt(t.getAttribute('x1') || 0, 10); var n = parseInt(t.getAttribute('y1') || 0, 10); var i = parseInt(t.getAttribute('x2') || 10, 10); var r = parseInt(t.getAttribute('y2') || 0, 10); var a = new f(e, n, i, r); return (function (t, e) { var n = t.firstChild; for (;n;) { if (n.nodeType === 1) { var i = n.getAttribute('offset'); i = i.indexOf('%') > 0 ? parseInt(i, 10) / 100 : i ? parseFloat(i) : 0; var r = n.getAttribute('stop-color') || '#000000'; e.addColorStop(i, r) }n = n.nextSibling } }(t, a)), a }, radialgradient: function (t) {} }; function C (t, e) { t && t.__inheritedStyle && (e.__inheritedStyle || (e.__inheritedStyle = {}), _(e.__inheritedStyle, t.__inheritedStyle)) } function D (t) { for (var e = b(t).split(S), n = [], i = 0; i < e.length; i += 2) { var r = parseFloat(e[i]); var a = parseFloat(e[i + 1]); n.push([r, a]) } return n } var L = { fill: 'fill', stroke: 'stroke', 'stroke-width': 'lineWidth', opacity: 'opacity', 'fill-opacity': 'fillOpacity', 'stroke-opacity': 'strokeOpacity', 'stroke-dasharray': 'lineDash', 'stroke-dashoffset': 'lineDashOffset', 'stroke-linecap': 'lineCap', 'stroke-linejoin': 'lineJoin', 'stroke-miterlimit': 'miterLimit', 'font-family': 'fontFamily', 'font-size': 'fontSize', 'font-style': 'fontStyle', 'font-weight': 'fontWeight', 'text-align': 'textAlign', 'alignment-baseline': 'textBaseline' }; function P (t, e, n, i) { var r = e.__inheritedStyle || {}; var a = e.type === 'text'; if (t.nodeType === 1 && ((function (t, e) { var n = t.getAttribute('transform'); if (n) { n = n.replace(/,/g, ' '); var i = null; var r = []; n.replace(E, function (t, e, n) { r.push(e, n) }); for (var a = r.length - 1; a > 0; a -= 2) { var o = r[a]; var s = r[a - 1]; switch (i = i || g.create(), s) { case 'translate':o = b(o).split(S), g.translate(i, i, [parseFloat(o[0]), parseFloat(o[1] || 0)]); break; case 'scale':o = b(o).split(S), g.scale(i, i, [parseFloat(o[0]), parseFloat(o[1] || o[0])]); break; case 'rotate':o = b(o).split(S), g.rotate(i, i, parseFloat(o[0])); break; case 'skew':o = b(o).split(S), console.warn('Skew transform is not supported yet'); break; case 'matrix':o = b(o).split(S); i[0] = parseFloat(o[0]), i[1] = parseFloat(o[1]), i[2] = parseFloat(o[2]), i[3] = parseFloat(o[3]), i[4] = parseFloat(o[4]), i[5] = parseFloat(o[5]) } }e.setLocalTransform(i) } }(t, e)), x(r, (function (t) { var e = t.getAttribute('style'); var n = {}; if (!e) return n; var i; var r = {}; R.lastIndex = 0; for (;(i = R.exec(e)) != null;)r[i[1]] = i[2]; for (var a in L)L.hasOwnProperty(a) && r[a] != null && (n[L[a]] = r[a]); return n }(t))), !i)) for (var o in L) if (L.hasOwnProperty(o)) { var s = t.getAttribute(o); s != null && (r[L[o]] = s) } var l = a ? 'textFill' : 'fill'; var u = a ? 'textStroke' : 'stroke'; e.style = e.style || new p(); var c = e.style; r.fill != null && c.set(l, O(r.fill, n)), r.stroke != null && c.set(u, O(r.stroke, n)), w(['lineWidth', 'opacity', 'fillOpacity', 'strokeOpacity', 'miterLimit', 'fontSize'], function (t) { var e = t === 'lineWidth' && a ? 'textStrokeWidth' : t; r[t] != null && c.set(e, parseFloat(r[t])) }), r.textBaseline && r.textBaseline !== 'auto' || (r.textBaseline = 'alphabetic'), r.textBaseline === 'alphabetic' && (r.textBaseline = 'bottom'), r.textAlign === 'start' && (r.textAlign = 'left'), r.textAlign === 'end' && (r.textAlign = 'right'), w(['lineDashOffset', 'lineCap', 'lineJoin', 'fontWeight', 'fontFamily', 'fontStyle', 'textAlign', 'textBaseline'], function (t) { r[t] != null && c.set(t, r[t]) }), r.lineDash && (e.style.lineDash = b(r.lineDash).split(S)), c[u] && c[u] !== 'none' && (e[u] = !0), e.__inheritedStyle = r } var k = /url\(\s*#(.*?)\)/; function O (t, e) { var n = e && t && t.match(k); return n ? e[b(n[1])] : t } var E = /(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g; var R = /([^\s:;]+)\s*:\s*([^:;]+)/g; function N (t, e, n) { var i = e / t.width; var r = n / t.height; var a = Math.min(i, r); return { scale: [a, a], position: [-(t.x + t.width / 2) * a + e / 2, -(t.y + t.height / 2) * a + n / 2] } }e.parseXML = M, e.makeViewBoxTransform = N, e.parseSVG = function (t, e) { return (new I()).parse(t, e) } }, function (t, e, n) { var i = n(67); e.zrender = i; var r = n(15); e.matrix = r; var a = n(7); e.vector = a; var o = n(0); var s = n(23); e.color = s; var l = n(2); var u = n(3); e.number = u; var c = n(9); e.format = c; var h = n(29); h.throttle; e.throttle = h.throttle; var d = n(272); e.helper = d; var f = n(161); e.parseGeoJSON = f; var p = n(18); e.List = p; var g = n(12); e.Model = g; var v = n(31); e.Axis = v; var m = n(11); e.env = m; var y = f; var x = {}; o.each(['map', 'each', 'filter', 'indexOf', 'inherits', 'reduce', 'filter', 'bind', 'curry', 'isArray', 'isString', 'isObject', 'isFunction', 'extend', 'defaults', 'clone', 'merge'], function (t) { x[t] = o[t] }); var _ = {}; o.each(['extendShape', 'extendPath', 'makePath', 'makeImage', 'mergePath', 'resizePath', 'createIcon', 'setHoverStyle', 'setLabelStyle', 'setTextStyle', 'setText', 'getFont', 'updateProps', 'initProps', 'getTransform', 'clipPointsByRect', 'clipRectByRect', 'registerShape', 'getShapeClass', 'Group', 'Image', 'Text', 'Circle', 'Sector', 'Ring', 'Polygon', 'Polyline', 'Rect', 'Line', 'BezierCurve', 'Arc', 'IncrementalDisplayable', 'CompoundPath', 'LinearGradient', 'RadialGradient', 'BoundingRect'], function (t) { _[t] = l[t] }), e.parseGeoJson = y, e.util = x, e.graphic = _ }, function (t, e, n) { var i = n(0); var r = i.createHashMap; var a = i.each; var o = i.isString; var s = i.defaults; var l = i.extend; var u = i.isObject; var c = i.clone; var h = n(4).normalizeToArray; var d = n(73).guessOrdinal; var f = n(56); var p = n(58).OTHER_DIMENSIONS; function g (t, e, n) { if (n || e.get(t) != null) { for (var i = 0; e.get(t + i) != null;)i++; t += i } return e.set(t, !0), t } var v = function (t, e, n) { f.isInstance(e) || (e = f.seriesDataToSource(e)), n = n || {}, t = (t || []).slice(); for (var i = (n.dimsDef || []).slice(), v = r(n.encodeDef), m = r(), y = r(), x = [], _ = (function (t, e, n, i) { var r = Math.max(t.dimensionsDetectCount || 1, e.length, n.length, i || 0); return a(e, function (t) { var e = t.dimsDef; e && (r = Math.max(r, e.length)) }), r }(e, t, i, n.dimCount)), b = 0; b < _; b++) { var w = i[b] = l({}, u(i[b]) ? i[b] : { name: i[b] }); var S = w.name; var M = x[b] = { otherDims: {} }; S != null && m.get(S) == null && (M.name = M.displayName = S, m.set(S, b)), w.type != null && (M.type = w.type), w.displayName != null && (M.displayName = w.displayName) }v.each(function (t, e) { if ((t = h(t).slice()).length === 1 && !o(t[0]) && t[0] < 0)v.set(e, !1); else { var n = v.set(e, []); a(t, function (t, i) { o(t) && (t = m.get(t)), t != null && t < _ && (n[i] = t, A(x[t], e, i)) }) } }); var I = 0; function A (t, e, n) { p.get(e) != null ? t.otherDims[e] = n : (t.coordDim = e, t.coordDimIndex = n, y.set(e, !0)) }a(t, function (t, e) { var n, i, r; if (o(t))n = t, t = {}; else { n = t.name; var l = t.ordinalMeta; t.ordinalMeta = null, (t = c(t)).ordinalMeta = l, i = t.dimsDef, r = t.otherDims, t.name = t.coordDim = t.coordDimIndex = t.dimsDef = t.otherDims = null } if (!1 !== (d = v.get(n))) { var d; if (!(d = h(d)).length) for (var f = 0; f < (i && i.length || 1); f++) { for (;I < x.length && x[I].coordDim != null;)I++; I < x.length && d.push(I++) }a(d, function (e, a) { var o = x[e]; if (A(s(o, t), n, a), o.name == null && i) { var l = i[a]; !u(l) && (l = { name: l }), o.name = o.displayName = l.name, o.defaultTooltip = l.defaultTooltip }r && s(o.otherDims, r) }) } }); var T = n.generateCoord; var C = n.generateCoordCount; var D = C != null; C = T ? C || 1 : 0; for (var L = T || 'value', P = 0; P < _; P++) { (M = x[P] = x[P] || {}).coordDim == null && (M.coordDim = g(L, y, D), M.coordDimIndex = 0, (!T || C <= 0) && (M.isExtraCoord = !0), C--), M.name == null && (M.name = g(M.coordDim, m)), M.type == null && d(e, P, M.name) && (M.type = 'ordinal') } return x }; t.exports = v }, function (t, e, n) { var i = n(0); var r = i.createHashMap; var a = i.isObject; var o = i.map; function s (t) { this.categories = t.categories || [], this._needCollect = t.needCollect, this._deduplication = t.deduplication, this._map }s.createByAxisModel = function (t) { var e = t.option; var n = e.data; var i = n && o(n, c); return new s({ categories: i, needCollect: !i, deduplication: !1 !== e.dedplication }) }; var l = s.prototype; function u (t) { return t._map || (t._map = r(t.categories)) } function c (t) { return a(t) && t.value != null ? t.value : t + '' }l.getOrdinal = function (t) { return u(this).get(t) }, l.parseAndCollect = function (t) { var e; var n = this._needCollect; if (typeof t !== 'string' && !n) return t; if (n && !this._deduplication) return e = this.categories.length, this.categories[e] = t, e; var i = u(this); return (e = i.get(t)) == null && (n ? (e = this.categories.length, this.categories[e] = t, i.set(t, e)) : e = NaN), e }; var h = s; t.exports = h }, function (t, e, n) { var i = n(3); var r = i.round; function a (t) { return i.getPrecisionSafe(t) + 2 } function o (t, e, n) { t[e] = Math.max(Math.min(t[e], n[1]), n[0]) } function s (t, e) { !isFinite(t[0]) && (t[0] = e[0]), !isFinite(t[1]) && (t[1] = e[1]), o(t, 0, e), o(t, 1, e), t[0] > t[1] && (t[0] = t[1]) }e.intervalScaleNiceTicks = function (t, e, n, o) { var l = {}; var u = t[1] - t[0]; var c = l.interval = i.nice(u / e, !0); n != null && c < n && (c = l.interval = n), o != null && c > o && (c = l.interval = o); var h = l.intervalPrecision = a(c); return s(l.niceTickExtent = [r(Math.ceil(t[0] / c) * c, h), r(Math.floor(t[1] / c) * c, h)], t), l }, e.getIntervalPrecision = a, e.fixExtent = s, e.intervalScaleGetTicks = function (t, e, n, i) { var a = []; if (!t) return a; e[0] < n[0] && a.push(e[0]); for (var o = n[0]; o <= n[1] && (a.push(o), (o = r(o + t, i)) !== a[a.length - 1]);) if (a.length > 1e4) return []; return e[1] > (a.length ? a[a.length - 1] : n[1]) && a.push(e[1]), a } }, function (t, e, n) { var i = n(0); var r = n(75); var a = n(3); var o = n(76); var s = r.prototype; var l = o.prototype; var u = a.getPrecisionSafe; var c = a.round; var h = Math.floor; var d = Math.ceil; var f = Math.pow; var p = Math.log; var g = r.extend({ type: 'log', base: 10, $constructor: function () { r.apply(this, arguments), this._originalScale = new o() }, getTicks: function () { var t = this._originalScale; var e = this._extent; var n = t.getExtent(); return i.map(l.getTicks.call(this), function (i) { var r = a.round(f(this.base, i)); return r = i === e[0] && t.__fixMin ? v(r, n[0]) : r, r = i === e[1] && t.__fixMax ? v(r, n[1]) : r }, this) }, getLabel: l.getLabel, scale: function (t) { return t = s.scale.call(this, t), f(this.base, t) }, setExtent: function (t, e) { var n = this.base; t = p(t) / p(n), e = p(e) / p(n), l.setExtent.call(this, t, e) }, getExtent: function () { var t = this.base; var e = s.getExtent.call(this); e[0] = f(t, e[0]), e[1] = f(t, e[1]); var n = this._originalScale; var i = n.getExtent(); return n.__fixMin && (e[0] = v(e[0], i[0])), n.__fixMax && (e[1] = v(e[1], i[1])), e }, unionExtent: function (t) { this._originalScale.unionExtent(t); var e = this.base; t[0] = p(t[0]) / p(e), t[1] = p(t[1]) / p(e), s.unionExtent.call(this, t) }, unionExtentFromData: function (t, e) { this.unionExtent(t.getApproximateExtent(e)) }, niceTicks: function (t) { t = t || 10; var e = this._extent; var n = e[1] - e[0]; if (!(n === 1 / 0 || n <= 0)) { var i = a.quantity(n); for (t / n * i <= 0.5 && (i *= 10); !isNaN(i) && Math.abs(i) < 1 && Math.abs(i) > 0;)i *= 10; var r = [a.round(d(e[0] / i) * i), a.round(h(e[1] / i) * i)]; this._interval = i, this._niceExtent = r } }, niceExtent: function (t) { l.niceExtent.call(this, t); var e = this._originalScale; e.__fixMin = t.fixMin, e.__fixMax = t.fixMax } }); function v (t, e) { return c(t, u(e)) }i.each(['contain', 'normalize'], function (t) { g.prototype[t] = function (e) { return e = p(e) / p(this.base), s[t].call(this, e) } }), g.create = function () { return new g() }; var m = g; t.exports = m }, function (t, e, n) { var i = n(0); var r = n(162); function a (t, e, n) { for (var i = [], r = e[0], a = e[1], o = 0; o < t.length; o += 2) { var s = t.charCodeAt(o) - 64; var l = t.charCodeAt(o + 1) - 64; s = s >> 1 ^ -(1 & s), l = l >> 1 ^ -(1 & l), r = s += r, a = l += a, i.push([s / n, l / n]) } return i }t.exports = function (t) { return (function (t) { if (!t.UTF8Encoding) return t; var e = t.UTF8Scale; e == null && (e = 1024); for (var n = t.features, i = 0; i < n.length; i++) for (var r = n[i].geometry, o = r.coordinates, s = r.encodeOffsets, l = 0; l < o.length; l++) { var u = o[l]; if (r.type === 'Polygon')o[l] = a(u, s[l], e); else if (r.type === 'MultiPolygon') for (var c = 0; c < u.length; c++) { var h = u[c]; u[c] = a(h, s[l][c], e) } }t.UTF8Encoding = !1 }(t)), i.map(i.filter(t.features, function (t) { return t.geometry && t.properties && t.geometry.coordinates.length > 0 }), function (t) { var e = t.properties; var n = t.geometry; var a = n.coordinates; var o = []; n.type === 'Polygon' && o.push({ type: 'polygon', exterior: a[0], interiors: a.slice(1) }), n.type === 'MultiPolygon' && i.each(a, function (t) { t[0] && o.push({ type: 'polygon', exterior: t[0], interiors: t.slice(1) }) }); var s = new r(e.name, o, e.cp); return s.properties = e, s }) } }, function (t, e, n) { var i = n(8); var r = n(71); var a = n(7); var o = n(163); function s (t, e, n) { if (this.name = t, this.geometries = e, n)n = [n[0], n[1]]; else { var i = this.getBoundingRect(); n = [i.x + i.width / 2, i.y + i.height / 2] } this.center = n }s.prototype = { constructor: s, properties: null, getBoundingRect: function () { var t = this._rect; if (t) return t; for (var e = Number.MAX_VALUE, n = [e, e], o = [-e, -e], s = [], l = [], u = this.geometries, c = 0; c < u.length; c++) if (u[c].type === 'polygon') { var h = u[c].exterior; r.fromPoints(h, s, l), a.min(n, n, s), a.max(o, o, l) } return c === 0 && (n[0] = n[1] = o[0] = o[1] = 0), this._rect = new i(n[0], n[1], o[0] - n[0], o[1] - n[1]) }, contain: function (t) { var e = this.getBoundingRect(); var n = this.geometries; if (!e.contain(t[0], t[1])) return !1; t:for (var i = 0, r = n.length; i < r; i++) if (n[i].type === 'polygon') { var a = n[i].exterior; var s = n[i].interiors; if (o.contain(a, t[0], t[1])) { for (var l = 0; l < (s ? s.length : 0); l++) if (o.contain(s[l])) continue t; return !0 } } return !1 }, transformTo: function (t, e, n, r) { var o = this.getBoundingRect(); var s = o.width / o.height; n ? r || (r = n / s) : n = s * r; for (var l = new i(t, e, n, r), u = o.calculateTransform(l), c = this.geometries, h = 0; h < c.length; h++) if (c[h].type === 'polygon') { for (var d = c[h].exterior, f = c[h].interiors, p = 0; p < d.length; p++)a.applyTransform(d[p], d[p], u); for (var g = 0; g < (f ? f.length : 0); g++) for (p = 0; p < f[g].length; p++)a.applyTransform(f[g][p], f[g][p], u) }(o = this._rect).copy(l), this.center = [o.x + o.width / 2, o.y + o.height / 2] }, cloneShallow: function (t) { t == null && (t = this.name); var e = new s(t, this.geometries, this.center); return e._rect = this._rect, e.transformTo = null, e } }; var l = s; t.exports = l }, function (t, e, n) { var i = n(144); var r = 1e-8; function a (t, e) { return Math.abs(t - e) < r }e.contain = function (t, e, n) { var r = 0; var o = t[0]; if (!o) return !1; for (var s = 1; s < t.length; s++) { var l = t[s]; r += i(o[0], o[1], l[0], l[1], e, n), o = l } var u = t[0]; return a(o[0], u[0]) && a(o[1], u[1]) || (r += i(o[0], o[1], u[0], u[1], e, n)), r !== 0 } }, function (t, e, n) { var i = n(25).isDimensionStacked; var r = n(0).map; e.prepareDataCoordInfo = function (t, e, n) { var a; var o = t.getBaseAxis(); var s = t.getOtherAxis(o); var l = (function (t, e) { var n = 0; var i = t.scale.getExtent(); e === 'start' ? n = i[0] : e === 'end' ? n = i[1] : i[0] > 0 ? n = i[0] : i[1] < 0 && (n = i[1]); return n }(s, n)); var u = o.dim; var c = s.dim; var h = e.mapDimension(c); var d = e.mapDimension(u); var f = c === 'x' || c === 'radius' ? 1 : 0; var p = r(t.dimensions, function (t) { return e.mapDimension(t) }); var g = e.getCalculationInfo('stackResultDimension'); return (a |= i(e, p[0])) && (p[0] = g), (a |= i(e, p[1])) && (p[1] = g), { dataDimsForPoint: p, valueStart: l, valueAxisDim: c, baseAxisDim: u, stacked: !!a, valueDim: h, baseDim: d, baseDataOffset: f, stackedOverDimension: e.getCalculationInfo('stackedOverDimension') } }, e.getStackedOnPoint = function (t, e, n, i) { var r = NaN; t.stacked && (r = n.get(n.getCalculationInfo('stackedOverDimension'), i)), isNaN(r) && (r = t.valueStart); var a = t.baseDataOffset; var o = []; return o[a] = n.get(t.baseDim, i), o[1 - a] = r, e.dataToPoint(o) } }, function (t, e, n) { var i = n(10); var r = n(7); var a = n(146); var o = r.min; var s = r.max; var l = r.scaleAndAdd; var u = r.copy; var c = []; var h = []; var d = []; function f (t) { return isNaN(t[0]) || isNaN(t[1]) } function p (t, e, n, i, r, a, o, s, l, u, c) { return u !== 'none' && u ? g.apply(this, arguments) : v.apply(this, arguments) } function g (t, e, n, i, r, a, o, s, l, c, p) { for (var g = 0, v = n, m = 0; m < i; m++) { var y = e[v]; if (v >= r || v < 0) break; if (f(y)) { if (p) { v += a; continue } break } if (v === n)t[a > 0 ? 'moveTo' : 'lineTo'](y[0], y[1]); else if (l > 0) { var x = e[g]; var _ = c === 'y' ? 1 : 0; var b = (y[_] - x[_]) * l; u(h, x), h[_] = x[_] + b, u(d, y), d[_] = y[_] - b, t.bezierCurveTo(h[0], h[1], d[0], d[1], y[0], y[1]) } else t.lineTo(y[0], y[1]); g = v, v += a } return m } function v (t, e, n, i, a, p, g, v, m, y, x) { for (var _ = 0, b = n, w = 0; w < i; w++) { var S = e[b]; if (b >= a || b < 0) break; if (f(S)) { if (x) { b += p; continue } break } if (b === n)t[p > 0 ? 'moveTo' : 'lineTo'](S[0], S[1]), u(h, S); else if (m > 0) { var M = b + p; var I = e[M]; if (x) for (;I && f(e[M]);)I = e[M += p]; var A = 0.5; var T = e[_]; if (!(I = e[M]) || f(I))u(d, S); else { var C, D; if (f(I) && !x && (I = S), r.sub(c, I, T), y === 'x' || y === 'y') { var L = y === 'x' ? 0 : 1; C = Math.abs(S[L] - T[L]), D = Math.abs(S[L] - I[L]) } else C = r.dist(S, T), D = r.dist(S, I); l(d, S, c, -m * (1 - (A = D / (D + C)))) }o(h, h, v), s(h, h, g), o(d, d, v), s(d, d, g), t.bezierCurveTo(h[0], h[1], d[0], d[1], S[0], S[1]), l(h, S, c, m * A) } else t.lineTo(S[0], S[1]); _ = b, b += p } return w } function m (t, e) { var n = [1 / 0, 1 / 0]; var i = [-1 / 0, -1 / 0]; if (e) for (var r = 0; r < t.length; r++) { var a = t[r]; a[0] < n[0] && (n[0] = a[0]), a[1] < n[1] && (n[1] = a[1]), a[0] > i[0] && (i[0] = a[0]), a[1] > i[1] && (i[1] = a[1]) } return { min: e ? n : i, max: e ? i : n } } var y = i.extend({ type: 'ec-polyline', shape: { points: [], smooth: 0, smoothConstraint: !0, smoothMonotone: null, connectNulls: !1 }, style: { fill: null, stroke: '#000' }, brush: a(i.prototype.brush), buildPath: function (t, e) { var n = e.points; var i = 0; var r = n.length; var a = m(n, e.smoothConstraint); if (e.connectNulls) { for (;r > 0 && f(n[r - 1]); r--);for (;i < r && f(n[i]); i++); } for (;i < r;)i += p(t, n, i, r, r, 1, a.min, a.max, e.smooth, e.smoothMonotone, e.connectNulls) + 1 } }); var x = i.extend({ type: 'ec-polygon', shape: { points: [], stackedOnPoints: [], smooth: 0, stackedOnSmooth: 0, smoothConstraint: !0, smoothMonotone: null, connectNulls: !1 }, brush: a(i.prototype.brush), buildPath: function (t, e) { var n = e.points; var i = e.stackedOnPoints; var r = 0; var a = n.length; var o = e.smoothMonotone; var s = m(n, e.smoothConstraint); var l = m(i, e.smoothConstraint); if (e.connectNulls) { for (;a > 0 && f(n[a - 1]); a--);for (;r < a && f(n[r]); r++); } for (;r < a;) { var u = p(t, n, r, a, a, 1, s.min, s.max, e.smooth, o, e.connectNulls); p(t, i, r + u - 1, u, a, -1, l.min, l.max, e.stackedOnSmooth, o, e.connectNulls), r += u + 1, t.closePath() } } }); e.Polyline = y, e.Polygon = x }, function (t, e, n) { var i = n(0); var r = n(13); var a = n(79); var o = n(48); var s = r.extend({ type: 'cartesian2dAxis', axis: null, init: function () { s.superApply(this, 'init', arguments), this.resetRange() }, mergeOption: function () { s.superApply(this, 'mergeOption', arguments), this.resetRange() }, restoreData: function () { s.superApply(this, 'restoreData', arguments), this.resetRange() }, getCoordSysModel: function () { return this.ecModel.queryComponents({ mainType: 'grid', index: this.option.gridIndex, id: this.option.gridId })[0] } }); function l (t, e) { return e.type || (e.data ? 'category' : 'value') }i.merge(s.prototype, o); var u = { offset: 0 }; a('x', s, l, u), a('y', s, l, u); var c = s; t.exports = c }, function (t, e, n) { var i = n(0); var r = { show: !0, zlevel: 0, z: 0, inverse: !1, name: '', nameLocation: 'end', nameRotate: null, nameTruncate: { maxWidth: null, ellipsis: '...', placeholder: '.' }, nameTextStyle: {}, nameGap: 15, silent: !1, triggerEvent: !1, tooltip: { show: !1 }, axisPointer: {}, axisLine: { show: !0, onZero: !0, onZeroAxisIndex: null, lineStyle: { color: '#333', width: 1, type: 'solid' }, symbol: ['none', 'none'], symbolSize: [10, 15] }, axisTick: { show: !0, inside: !1, length: 5, lineStyle: { width: 1 } }, axisLabel: { show: !0, inside: !1, rotate: 0, showMinLabel: null, showMaxLabel: null, margin: 8, fontSize: 12 }, splitLine: { show: !0, lineStyle: { color: ['#ccc'], width: 1, type: 'solid' } }, splitArea: { show: !1, areaStyle: { color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)'] } } }; var a = {}; a.categoryAxis = i.merge({ boundaryGap: !0, deduplication: null, splitLine: { show: !1 }, axisTick: { alignWithLabel: !1, interval: 'auto' }, axisLabel: { interval: 'auto' } }, r), a.valueAxis = i.merge({ boundaryGap: [0, 0], splitNumber: 5 }, r), a.timeAxis = i.defaults({ scale: !0, min: 'dataMin', max: 'dataMax' }, a.valueAxis), a.logAxis = i.defaults({ scale: !0, logBase: 10 }, a.valueAxis); var o = a; t.exports = o }, function (t, e, n) { var i = n(0); e.layout = function (t, e, n) { n = n || {}; var r = t.coordinateSystem; var a = e.axis; var o = {}; var s = a.getAxesOnZeroOf()[0]; var l = a.position; var u = s ? 'onZero' : l; var c = a.dim; var h = r.getRect(); var d = [h.x, h.x + h.width, h.y, h.y + h.height]; var f = { left: 0, right: 1, top: 0, bottom: 1, onZero: 2 }; var p = e.get('offset') || 0; var g = c === 'x' ? [d[2] - p, d[3] + p] : [d[0] - p, d[1] + p]; if (s) { var v = s.toGlobalCoord(s.dataToCoord(0)); g[f.onZero] = Math.max(Math.min(v, g[1]), g[0]) }o.position = [c === 'y' ? g[f[u]] : d[0], c === 'x' ? g[f[u]] : d[3]], o.rotation = Math.PI / 2 * (c === 'x' ? 0 : 1), o.labelDirection = o.tickDirection = o.nameDirection = { top: -1, bottom: 1, left: -1, right: 1 }[l], o.labelOffset = s ? g[f[l]] - g[f.onZero] : 0, e.get('axisTick.inside') && (o.tickDirection = -o.tickDirection), i.retrieve(n.labelInside, e.get('axisLabel.inside')) && (o.labelDirection = -o.labelDirection); var m = e.get('axisLabel.rotate'); return o.labelRotate = u === 'top' ? -m : m, o.z2 = 1, o } }, function (t, e, n) { var i = n(14); var r = n(27); var a = i.extend({ type: 'series.__base_bar__', getInitialData: function (t, e) { return r(this.getSource(), this) }, getMarkerPosition: function (t) { var e = this.coordinateSystem; if (e) { var n = e.dataToPoint(e.clampData(t)); var i = this.getData(); var r = i.getLayout('offset'); var a = i.getLayout('size'); return n[e.getBaseAxis().isHorizontal() ? 0 : 1] += r + a / 2, n } return [NaN, NaN] }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'cartesian2d', legendHoverLink: !0, barMinHeight: 0, barMinAngle: 0, large: !1, largeThreshold: 400, progressive: 3e3, progressiveChunkMode: 'mod', itemStyle: {}, emphasis: {} } }); t.exports = a }, function (t, e, n) { var i = n(2); var r = n(97).getDefaultLabel; function a (t, e) { t.textPosition === 'outside' && (t.textPosition = e) }e.setLabel = function (t, e, n, o, s, l, u) { var c = n.getModel('label'); var h = n.getModel('emphasis.label'); i.setLabelStyle(t, e, c, h, { labelFetcher: s, labelDataIndex: l, defaultText: r(s.getData(), l), isRectText: !0, autoColor: o }), a(t), a(e) } }, function (t, e, n) { var i = n(1); var r = n(0); t.exports = function (t, e) { r.each(e, function (e) { e.update = 'updateView', i.registerAction(e, function (n, i) { var r = {}; return i.eachComponent({ mainType: 'series', subType: t, query: n }, function (t) { t[e.method] && t[e.method](n.name, n.dataIndex); var i = t.getData(); i.each(function (e) { var n = i.getName(e); r[n] = t.isSelected(n) || !1 }) }), { name: n.name, selected: r, seriesId: n.seriesId } }) }) } }, function (t, e, n) { var i = n(0); var r = n(64); var a = n(100); var o = n(83).onIrrelevantElement; var s = n(2); var l = n(82); var u = n(55).getUID; function c (t) { var e = t.getItemStyle(); var n = t.get('areaColor'); return n != null && (e.fill = n), e } function h (t, e) { e.eachChild(function (e) { i.each(e.__regions, function (n) { e.trigger(t.isSelected(n.name) ? 'emphasis' : 'normal') }) }) } function d (t, e) { var n = new s.Group(); this.uid = u('ec_map_draw'), this._controller = new r(t.getZr()), this._controllerHost = { target: e ? n : null }, this.group = n, this._updateGroup = e, this._mouseDownFlag, this._mapName, this._initialized, n.add(this._regionsGroup = new s.Group()), n.add(this._backgroundGroup = new s.Group()) }d.prototype = { constructor: d, draw: function (t, e, n, r, a) { var o = t.mainType === 'geo'; var l = t.getData && t.getData(); o && e.eachComponent({ mainType: 'series', subType: 'map' }, function (e) { l || e.getHostGeoModel() !== t || (l = e.getData()) }); var u = t.coordinateSystem; this._updateBackground(u); var d = this._regionsGroup; var f = this.group; u._roamTransformable.transform && (f.transform = u._roamTransformable.transform.slice(), f.decomposeTransform()); var p = u._rawTransformable.scale; var g = u._rawTransformable.position; d.removeAll(); var v = ['itemStyle']; var m = ['emphasis', 'itemStyle']; var y = ['label']; var x = ['emphasis', 'label']; var _ = i.createHashMap(); i.each(u.regions, function (e) { var n = _.get(e.name) || _.set(e.name, new s.Group()); var r = new s.CompoundPath({ segmentIgnoreThreshold: 1, shape: { paths: [] } }); n.add(r); var a; var u = (E = t.getRegionModel(e.name) || t).getModel(v); var h = E.getModel(m); var b = c(u); var w = c(h); var S = E.getModel(y); var M = E.getModel(x); if (l) { a = l.indexOfName(e.name); var I = l.getItemVisual(a, 'color', !0); I && (b.fill = I) } var A = function (t) { return [t[0] * p[0] + g[0], t[1] * p[1] + g[1]] }; i.each(e.geometries, function (t) { if (t.type === 'polygon') { for (var e = [], n = 0; n < t.exterior.length; ++n)e.push(A(t.exterior[n])); r.shape.paths.push(new s.Polygon({ segmentIgnoreThreshold: 1, shape: { points: e } })); for (n = 0; n < (t.interiors ? t.interiors.length : 0); ++n) { for (var i = t.interiors[n], a = (e = [], 0); a < i.length; ++a)e.push(A(i[a])); r.shape.paths.push(new s.Polygon({ segmentIgnoreThreshold: 1, shape: { points: e } })) } } }), r.setStyle(b), r.style.strokeNoScale = !0, r.culling = !0; var T = S.get('show'); var C = M.get('show'); var D = l && isNaN(l.get(l.mapDimension('value'), a)); var L = l && l.getItemLayout(a); if (o || D && (T || C) || L && L.showLabel) { var P; var k = o ? e.name : a; (!l || a >= 0) && (P = t); var O = new s.Text({ position: A(e.center.slice()), scale: [1 / f.scale[0], 1 / f.scale[1]], z2: 10, silent: !0 }); s.setLabelStyle(O.style, O.hoverStyle = {}, S, M, { labelFetcher: P, labelDataIndex: k, defaultText: e.name, useInsideStyle: !1 }, { textAlign: 'center', textVerticalAlign: 'middle' }), n.add(O) } if (l)l.setItemGraphicEl(a, n); else { var E = t.getRegionModel(e.name); r.eventData = { componentType: 'geo', componentIndex: t.componentIndex, geoIndex: t.componentIndex, name: e.name, region: E && E.option || {} } }(n.__regions || (n.__regions = [])).push(e), n.highDownSilentOnTouch = !!t.get('selectedMode'), s.setHoverStyle(n, w), d.add(n) }), this._updateController(t, e, n), (function (t, e, n, r, a) { n.off('click'), n.off('mousedown'), e.get('selectedMode') && (n.on('mousedown', function () { t._mouseDownFlag = !0 }), n.on('click', function (o) { if (t._mouseDownFlag) { t._mouseDownFlag = !1; for (var s = o.target; !s.__regions;)s = s.parent; if (s) { var l = { type: (e.mainType === 'geo' ? 'geo' : 'map') + 'ToggleSelect', batch: i.map(s.__regions, function (t) { return { name: t.name, from: a.uid } }) }; l[e.mainType + 'Id'] = e.id, r.dispatchAction(l), h(e, n) } } })) }(this, t, d, n, r)), h(t, d) }, remove: function () { this._regionsGroup.removeAll(), this._backgroundGroup.removeAll(), this._controller.dispose(), this._mapName && l.removeGraphic(this._mapName, this.uid), this._mapName = null, this._controllerHost = {} }, _updateBackground: function (t) { var e = t.map; this._mapName !== e && i.each(l.makeGraphic(e, this.uid), function (t) { this._backgroundGroup.add(t) }, this), this._mapName = e }, _updateController: function (t, e, n) { var r = t.coordinateSystem; var s = this._controller; var l = this._controllerHost; l.zoomLimit = t.get('scaleLimit'), l.zoom = r.getZoom(), s.enable(t.get('roam') || !1); var u = t.mainType; function c () { var e = { type: 'geoRoam', componentType: u }; return e[u + 'Id'] = t.id, e }s.off('pan').on('pan', function (t) { this._mouseDownFlag = !1, a.updateViewOnPan(l, t.dx, t.dy), n.dispatchAction(i.extend(c(), { dx: t.dx, dy: t.dy })) }, this), s.off('zoom').on('zoom', function (t) { if (this._mouseDownFlag = !1, a.updateViewOnZoom(l, t.scale, t.originX, t.originY), n.dispatchAction(i.extend(c(), { zoom: t.scale, originX: t.originX, originY: t.originY })), this._updateGroup) { var e = this.group.scale; this._regionsGroup.traverse(function (t) { t.type === 'text' && t.attr('scale', [1 / e[0], 1 / e[1]]) }) } }, this), s.setPointerChecker(function (e, i, a) { return r.getViewRectAfterRoam().contain(i, a) && !o(e, n, t) }) } }; var f = d; t.exports = f }, function (t, e, n) { var i = n(1); var r = '\0_ec_interaction_mutex'; function a (t) { return t[r] || (t[r] = {}) }i.registerAction({ type: 'takeGlobalCursor', event: 'globalCursorTaken', update: 'update' }, function () {}), e.take = function (t, e, n) { a(t)[e] = n }, e.release = function (t, e, n) { var i = a(t); i[e] === n && (i[e] = null) }, e.isTaken = function (t, e) { return !!a(t)[e] } }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(101).updateCenterAndZoom; i.registerAction({ type: 'geoRoam', event: 'geoRoam', update: 'updateTransform' }, function (t, e) { var n = t.componentType || 'series'; e.eachComponent({ mainType: n, query: t }, function (e) { var i = e.coordinateSystem; if (i.type === 'geo') { var o = a(i, t, e.get('scaleLimit')); e.setCenter && e.setCenter(o.center), e.setZoom && e.setZoom(o.zoom), n === 'series' && r.each(e.seriesGroup, function (t) { t.setCenter(o.center), t.setZoom(o.zoom) }) } }) }) }, function (t, e, n) { var i = n(0); var r = i.each; var a = '\0__link_datas'; var o = '\0__link_mainData'; function s (t, e) { if ((r = this)[o] === r) { var n = i.extend({}, this[a]); n[this.dataType] = e, h(e, n, t) } else d(e, this.dataType, this[o], t); var r; return e } function l (t, e) { return t.struct && t.struct.update(this), e } function u (t, e) { return r(e[a], function (n, i) { n !== e && d(n.cloneShallow(), i, e, t) }), e } function c (t) { var e = this[o]; return t == null || e == null ? e : e[a][t] } function h (t, e, n) { t[a] = {}, r(e, function (e, i) { d(e, i, t, n) }) } function d (t, e, n, i) { n[a][e] = t, t[o] = n, t.dataType = e, i.struct && (t[i.structAttr] = i.struct, i.struct[i.datasAttr[e]] = t), t.getLinkedData = c } var f = function (t) { var e = t.mainData; var n = t.datas; n || (n = { main: e }, t.datasAttr = { main: 'data' }), t.datas = t.mainData = null, h(e, n, t), r(n, function (n) { r(e.TRANSFERABLE_METHODS, function (e) { n.wrapMethod(e, i.curry(s, t)) }) }), e.wrapMethod('cloneShallow', i.curry(u, t)), r(e.CHANGABLE_METHODS, function (n) { e.wrapMethod(n, i.curry(l, t)) }), i.assert(n[e.dataType] === e) }; t.exports = f }, function (t, e, n) { var i = n(6); function r (t) { var e = t.children; return e.length && t.isExpand ? e[e.length - 1] : t.hierNode.thread } function a (t) { var e = t.children; return e.length && t.isExpand ? e[0] : t.hierNode.thread } function o (t, e, n) { return t.hierNode.ancestor.parentNode === e.parentNode ? t.hierNode.ancestor : n } function s (t, e, n) { var i = n / (e.hierNode.i - t.hierNode.i); e.hierNode.change -= i, e.hierNode.shift += n, e.hierNode.modifier += n, e.hierNode.prelim += n, t.hierNode.change += i } function l (t, e) { return t.parentNode === e.parentNode ? 1 : 2 }e.init = function (t) { t.hierNode = { defaultAncestor: null, ancestor: t, prelim: 0, modifier: 0, change: 0, shift: 0, i: 0, thread: null }; for (var e, n, i = [t]; e = i.pop();) if (n = e.children, e.isExpand && n.length) for (var r = n.length - 1; r >= 0; r--) { var a = n[r]; a.hierNode = { defaultAncestor: null, ancestor: a, prelim: 0, modifier: 0, change: 0, shift: 0, i: r, thread: null }, i.push(a) } }, e.firstWalk = function (t, e) { var n = t.isExpand ? t.children : []; var i = t.parentNode.children; var l = t.hierNode.i ? i[t.hierNode.i - 1] : null; if (n.length) { !(function (t) { var e = t.children; var n = e.length; var i = 0; var r = 0; for (;--n >= 0;) { var a = e[n]; a.hierNode.prelim += i, a.hierNode.modifier += i, r += a.hierNode.change, i += a.hierNode.shift + r } }(t)); var u = (n[0].hierNode.prelim + n[n.length - 1].hierNode.prelim) / 2; l ? (t.hierNode.prelim = l.hierNode.prelim + e(t, l), t.hierNode.modifier = t.hierNode.prelim - u) : t.hierNode.prelim = u } else l && (t.hierNode.prelim = l.hierNode.prelim + e(t, l)); t.parentNode.hierNode.defaultAncestor = (function (t, e, n, i) { if (e) { for (var l = t, u = t, c = u.parentNode.children[0], h = e, d = l.hierNode.modifier, f = u.hierNode.modifier, p = c.hierNode.modifier, g = h.hierNode.modifier; h = r(h), u = a(u), h && u;) { l = r(l), c = a(c), l.hierNode.ancestor = t; var v = h.hierNode.prelim + g - u.hierNode.prelim - f + i(h, u); v > 0 && (s(o(h, t, n), t, v), f += v, d += v), g += h.hierNode.modifier, f += u.hierNode.modifier, d += l.hierNode.modifier, p += c.hierNode.modifier }h && !r(l) && (l.hierNode.thread = h, l.hierNode.modifier += g - d), u && !a(c) && (c.hierNode.thread = u, c.hierNode.modifier += f - p, n = t) } return n }(t, l, t.parentNode.hierNode.defaultAncestor || i[0], e)) }, e.secondWalk = function (t) { var e = t.hierNode.prelim + t.parentNode.hierNode.modifier; t.setLayout({ x: e }, !0), t.hierNode.modifier += t.parentNode.hierNode.modifier }, e.separation = function (t) { return arguments.length ? t : l }, e.radialCoordinate = function (t, e) { var n = {}; return t -= Math.PI / 2, n.x = e * Math.cos(t), n.y = e * Math.sin(t), n }, e.getViewRect = function (t, e) { return i.getLayoutRect(t.getBoxLayoutParams(), { width: e.getWidth(), height: e.getHeight() }) } }, function (t, e, n) { var i = n(0); var r = n(18); var a = n(341); var o = n(175); var s = n(47); var l = n(20); var u = n(27); t.exports = function (t, e, n, c, h) { for (var d = new a(c), f = 0; f < t.length; f++)d.addNode(i.retrieve(t[f].id, t[f].name, f), f); var p = []; var g = []; var v = 0; for (f = 0; f < e.length; f++) { var m = e[f]; var y = m.source; var x = m.target; d.addEdge(y, x, v) && (g.push(m), p.push(i.retrieve(m.id, y + ' > ' + x)), v++) } var _; var b = n.get('coordinateSystem'); if (b === 'cartesian2d' || b === 'polar')_ = u(t, n); else { var w = l.get(b); var S = w && w.type !== 'view' && w.dimensions || []; i.indexOf(S, 'value') < 0 && S.concat(['value']); var M = s(t, { coordDimensions: S }); (_ = new r(M, n)).initData(t) } var I = new r(['value'], n); return I.initData(g, p), h && h(_, I), o({ mainData: _, struct: d, structAttr: 'graph', datas: { node: _, edge: I }, datasAttr: { node: 'data', edge: 'edgeData' } }), d.update(), d } }, function (t, e, n) { var i = n(1); i.registerAction({ type: 'focusNodeAdjacency', event: 'focusNodeAdjacency', update: 'series:focusNodeAdjacency' }, function () {}), i.registerAction({ type: 'unfocusNodeAdjacency', event: 'unfocusNodeAdjacency', update: 'series:unfocusNodeAdjacency' }, function () {}) }, function (t, e, n) { var i = n(7); function r (t) { t.eachEdge(function (t) { var e = t.getModel().get('lineStyle.curveness') || 0; var n = i.clone(t.node1.getLayout()); var r = i.clone(t.node2.getLayout()); var a = [n, r]; +e && a.push([(n[0] + r[0]) / 2 - (n[1] - r[1]) * e, (n[1] + r[1]) / 2 - (r[0] - n[0]) * e]), t.setLayout(a) }) }e.simpleLayout = function (t) { var e = t.coordinateSystem; if (!e || e.type === 'view') { var n = t.getGraph(); n.eachNode(function (t) { var e = t.getModel(); t.setLayout([+e.get('x'), +e.get('y')]) }), r(n) } }, e.simpleLayoutEdge = r }, function (t, e, n) { var i = n(7); var r = n(107); var a = r.getSymbolSize; var o = r.getNodeGlobalScale; var s = Math.PI; var l = []; var u = { value: function (t, e, n, i, r, a, o, s) { var l = 0; var u = i.getSum('value'); var c = 2 * Math.PI / (u || s); n.eachNode(function (t) { var e = t.getValue('value'); var n = c * (u ? e : 1) / 2; l += n, t.setLayout([r * Math.cos(l) + a, r * Math.sin(l) + o]), l += n }) }, symbolSize: function (t, e, n, i, r, u, c, h) { var d = 0; l.length = h; var f = o(t); n.eachNode(function (t) { var e = a(t); isNaN(e) && (e = 2), e < 0 && (e = 0), e *= f; var n = Math.asin(e / 2 / r); isNaN(n) && (n = s / 2), l[t.dataIndex] = n, d += 2 * n }); var p = (2 * s - d) / h / 2; var g = 0; n.eachNode(function (t) { var e = p + l[t.dataIndex]; g += e, t.setLayout([r * Math.cos(g) + u, r * Math.sin(g) + c]), g += e }) } }; e.circularLayout = function (t, e) { var n = t.coordinateSystem; if (!n || n.type === 'view') { var r = n.getBoundingRect(); var a = t.getData(); var o = a.graph; var s = r.width / 2 + r.x; var l = r.height / 2 + r.y; var c = Math.min(r.width, r.height) / 2; var h = a.count(); a.setLayout({ cx: s, cy: l }), h && (u[e](t, n, o, a, c, s, l, h), o.eachEdge(function (t) { var e; var n = t.getModel().get('lineStyle.curveness') || 0; var r = i.clone(t.node1.getLayout()); var a = i.clone(t.node2.getLayout()); var o = (r[0] + a[0]) / 2; var u = (r[1] + a[1]) / 2; +n && (e = [s * (n *= 3) + o * (1 - n), l * n + u * (1 - n)]), t.setLayout([r, a, e]) })) } } }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(29); var o = n(363); n(182), n(366), n(368); i.extendComponentView({ type: 'parallel', render: function (t, e, n) { this._model = t, this._api = n, this._handlers || (this._handlers = {}, r.each(s, function (t, e) { n.getZr().on(e, this._handlers[e] = r.bind(t, this)) }, this)), a.createOrUpdate(this, '_throttledDispatchExpand', t.get('axisExpandRate'), 'fixRate') }, dispose: function (t, e) { r.each(this._handlers, function (t, n) { e.getZr().off(n, t) }), this._handlers = null }, _throttledDispatchExpand: function (t) { this._dispatchExpand(t) }, _dispatchExpand: function (t) { t && this._api.dispatchAction(r.extend({ type: 'parallelAxisExpand' }, t)) } }); var s = { mousedown: function (t) { l(this, 'click') && (this._mouseDownPoint = [t.offsetX, t.offsetY]) }, mouseup: function (t) { var e = this._mouseDownPoint; if (l(this, 'click') && e) { var n = [t.offsetX, t.offsetY]; if (Math.pow(e[0] - n[0], 2) + Math.pow(e[1] - n[1], 2) > 5) return; var i = this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX, t.offsetY]); i.behavior !== 'none' && this._dispatchExpand({ axisExpandWindow: i.axisExpandWindow }) } this._mouseDownPoint = null }, mousemove: function (t) { if (!this._mouseDownPoint && l(this, 'mousemove')) { var e = this._model; var n = e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX, t.offsetY]); var i = n.behavior; i === 'jump' && this._throttledDispatchExpand.debounceNextCall(e.get('axisExpandDebounce')), this._throttledDispatchExpand(i === 'none' ? null : { axisExpandWindow: n.axisExpandWindow, animation: i === 'jump' && null }) } } }; function l (t, e) { var n = t._model; return n.get('axisExpandable') && n.get('axisExpandTriggerOn') === e }i.registerPreprocessor(o) }, function (t, e, n) { var i = n(364); n(20).register('parallel', { create: function (t, e) { var n = []; return t.eachComponent('parallel', function (r, a) { var o = new i(r, t, e); o.name = 'parallel_' + a, o.resize(r, e), r.coordinateSystem = o, o.model = r, n.push(o) }), t.eachSeries(function (e) { if (e.get('coordinateSystem') === 'parallel') { var n = t.queryComponents({ mainType: 'parallel', index: e.get('parallelIndex'), id: e.get('parallelId') })[0]; e.coordinateSystem = n.coordinateSystem } }), n } }) }, function (t, e, n) { var i = n(8); var r = n(83).onIrrelevantElement; var a = n(2); function o (t) { return i.create(t) }e.makeRectPanelClipPath = function (t) { return t = o(t), function (e, n) { return a.clipPointsByRect(e, t) } }, e.makeLinearBrushOtherExtent = function (t, e) { return t = o(t), function (n) { var i = e != null ? e : n; var r = i ? t.width : t.height; var a = i ? t.x : t.y; return [a, a + (r || 0)] } }, e.makeRectIsTargetByCursor = function (t, e, n) { return t = o(t), function (i, a, o) { return t.contain(a[0], a[1]) && !r(i, e, n) } } }, function (t, e, n) { var i = n(49); var r = n(0); var a = n(58).getDimensionTypeByAxis; var o = { _baseAxisDim: null, getInitialData: function (t, e) { var n; var o; var s = e.getComponent('xAxis', this.get('xAxisIndex')); var l = e.getComponent('yAxis', this.get('yAxisIndex')); var u = s.get('type'); var c = l.get('type'); u === 'category' ? (t.layout = 'horizontal', n = s.getOrdinalMeta(), o = !0) : c === 'category' ? (t.layout = 'vertical', n = l.getOrdinalMeta(), o = !0) : t.layout = t.layout || 'horizontal'; var h = ['x', 'y']; var d = t.layout === 'horizontal' ? 0 : 1; var f = this._baseAxisDim = h[d]; var p = h[1 - d]; var g = [s, l]; var v = g[d].get('type'); var m = g[1 - d].get('type'); var y = t.data; if (y && o) { var x = []; r.each(y, function (t, e) { var n; t.value && r.isArray(t.value) ? (n = t.value.slice(), t.value.unshift(e)) : r.isArray(t) ? (n = t.slice(), t.unshift(e)) : n = t, x.push(n) }), t.data = x } var _ = this.defaultValueDimensions; return i(this, { coordDimensions: [{ name: f, type: a(v), ordinalMeta: n, otherDims: { tooltip: !1, itemName: 0 }, dimsDef: ['base'] }, { name: p, type: a(m), dimsDef: _.slice() }], dimensionsCount: _.length + 1 }) }, getBaseAxis: function () { var t = this._baseAxisDim; return this.ecModel.getComponent(t + 'Axis', this.get(t + 'AxisIndex')).axis } }; e.seriesModelMixin = o }, function (t, e, n) { var i = n(2); var r = n(106); var a = n(0); var o = n(19).createSymbol; var s = n(7); var l = n(28); function u (t, e, n) { i.Group.call(this), this.add(this.createLine(t, e, n)), this._updateEffectSymbol(t, e) } var c = u.prototype; c.createLine = function (t, e, n) { return new r(t, e, n) }, c._updateEffectSymbol = function (t, e) { var n = t.getItemModel(e).getModel('effect'); var i = n.get('symbolSize'); var r = n.get('symbol'); a.isArray(i) || (i = [i, i]); var s = n.get('color') || t.getItemVisual(e, 'color'); var l = this.childAt(1); this._symbolType !== r && (this.remove(l), (l = o(r, -0.5, -0.5, 1, 1, s)).z2 = 100, l.culling = !0, this.add(l)), l && (l.setStyle('shadowColor', s), l.setStyle(n.getItemStyle(['color'])), l.attr('scale', i), l.setColor(s), l.attr('scale', i), this._symbolType = r, this._updateEffectAnimation(t, n, e)) }, c._updateEffectAnimation = function (t, e, n) { var i = this.childAt(1); if (i) { var r = this; var o = t.getItemLayout(n); var s = 1e3 * e.get('period'); var l = e.get('loop'); var u = e.get('constantSpeed'); var c = a.retrieve(e.get('delay'), function (e) { return e / t.count() * s / 3 }); var h = typeof c === 'function'; if (i.ignore = !0, this.updateAnimationPoints(i, o), u > 0 && (s = this.getLineLength(i) / u * 1e3), s !== this._period || l !== this._loop) { i.stopAnimation(); var d = c; h && (d = c(n)), i.__t > 0 && (d = -s * i.__t), i.__t = 0; var f = i.animate('', l).when(s, { __t: 1 }).delay(d).during(function () { r.updateSymbolPosition(i) }); l || f.done(function () { r.remove(i) }), f.start() } this._period = s, this._loop = l } }, c.getLineLength = function (t) { return s.dist(t.__p1, t.__cp1) + s.dist(t.__cp1, t.__p2) }, c.updateAnimationPoints = function (t, e) { t.__p1 = e[0], t.__p2 = e[1], t.__cp1 = e[2] || [(e[0][0] + e[1][0]) / 2, (e[0][1] + e[1][1]) / 2] }, c.updateData = function (t, e, n) { this.childAt(0).updateData(t, e, n), this._updateEffectSymbol(t, e) }, c.updateSymbolPosition = function (t) { var e = t.__p1; var n = t.__p2; var i = t.__cp1; var r = t.__t; var a = t.position; var o = l.quadraticAt; var s = l.quadraticDerivativeAt; a[0] = o(e[0], i[0], n[0], r), a[1] = o(e[1], i[1], n[1], r); var u = s(e[0], i[0], n[0], r); var c = s(e[1], i[1], n[1], r); t.rotation = -Math.atan2(c, u) - Math.PI / 2, t.ignore = !1 }, c.updateLayout = function (t, e) { this.childAt(0).updateLayout(t, e); var n = t.getItemModel(e).getModel('effect'); this._updateEffectAnimation(t, n, e) }, a.inherits(u, i.Group); var h = u; t.exports = h }, function (t, e, n) { var i = n(2); var r = n(0); function a (t, e, n) { i.Group.call(this), this._createPolyline(t, e, n) } var o = a.prototype; o._createPolyline = function (t, e, n) { var r = t.getItemLayout(e); var a = new i.Polyline({ shape: { points: r } }); this.add(a), this._updateCommonStl(t, e, n) }, o.updateData = function (t, e, n) { var r = t.hostModel; var a = this.childAt(0); var o = { shape: { points: t.getItemLayout(e) } }; i.updateProps(a, o, r, e), this._updateCommonStl(t, e, n) }, o._updateCommonStl = function (t, e, n) { var a = this.childAt(0); var o = t.getItemModel(e); var s = t.getItemVisual(e, 'color'); var l = n && n.lineStyle; var u = n && n.hoverLineStyle; n && !t.hasItemOption || (l = o.getModel('lineStyle').getLineStyle(), u = o.getModel('emphasis.lineStyle').getLineStyle()), a.useStyle(r.defaults({ strokeNoScale: !0, fill: 'none', stroke: s }, l)), a.hoverStyle = u, i.setHoverStyle(this) }, o.updateLayout = function (t, e) { this.childAt(0).setShape('points', t.getItemLayout(e)) }, r.inherits(a, i.Group); var s = a; t.exports = s }, function (t, e, n) { var i = { seriesType: 'lines', plan: n(46)(), reset: function (t) { var e = t.coordinateSystem; var n = t.get('polyline'); var i = t.pipelineContext.large; return { progress: function (r, a) { var o = []; if (i) { var s; var l = r.end - r.start; if (n) { for (var u = 0, c = r.start; c < r.end; c++)u += t.getLineCoordsCount(c); s = new Float32Array(l + 2 * u) } else s = new Float32Array(4 * l); var h = 0; var d = []; for (c = r.start; c < r.end; c++) { var f = t.getLineCoords(c, o); n && (s[h++] = f); for (var p = 0; p < f; p++)d = e.dataToPoint(o[p], !1, d), s[h++] = d[0], s[h++] = d[1] }a.setLayout('linesPoints', s) } else for (c = r.start; c < r.end; c++) { var g = a.getItemModel(c); var v = (f = t.getLineCoords(c, o), []); if (n) for (var m = 0; m < f; m++)v.push(e.dataToPoint(o[m])); else { v[0] = e.dataToPoint(o[0]), v[1] = e.dataToPoint(o[1]); var y = g.get('lineStyle.curveness'); +y && (v[2] = [(v[0][0] + v[1][0]) / 2 - (v[0][1] - v[1][1]) * y, (v[0][1] + v[1][1]) / 2 - (v[1][0] - v[0][0]) * y]) }a.setItemLayout(c, v) } } } } }; t.exports = i }, function (t, e, n) { var i = n(1); n(409), n(412), n(413), n(65), n(417), i.extendComponentView({ type: 'single' }) }, function (t, e, n) { var i = n(0); e.layout = function (t, e) { e = e || {}; var n = t.coordinateSystem; var r = t.axis; var a = {}; var o = r.position; var s = r.orient; var l = n.getRect(); var u = [l.x, l.x + l.width, l.y, l.y + l.height]; var c = { horizontal: { top: u[2], bottom: u[3] }, vertical: { left: u[0], right: u[1] } }; a.position = [s === 'vertical' ? c.vertical[o] : u[0], s === 'horizontal' ? c.horizontal[o] : u[3]], a.rotation = Math.PI / 2 * { horizontal: 0, vertical: 1 }[s], a.labelDirection = a.tickDirection = a.nameDirection = { top: -1, bottom: 1, right: 1, left: -1 }[o], t.get('axisTick.inside') && (a.tickDirection = -a.tickDirection), i.retrieve(e.labelInside, t.get('axisLabel.inside')) && (a.labelDirection = -a.labelDirection); var h = e.rotate; return h == null && (h = t.get('axisLabel.rotate')), a.labelRotation = o === 'top' ? -h : h, a.z2 = 1, a } }, function (t, e, n) { var i = n(0); var r = n(4); t.exports = function (t, e) { var n; var a = []; var o = t.seriesIndex; if (o == null || !(n = e.getSeriesByIndex(o))) return { point: [] }; var s = n.getData(); var l = r.queryDataIndex(s, t); if (l == null || l < 0 || i.isArray(l)) return { point: [] }; var u = s.getItemGraphicEl(l); var c = n.coordinateSystem; if (n.getTooltipPosition)a = n.getTooltipPosition(l) || []; else if (c && c.dataToPoint)a = c.dataToPoint(s.getValues(i.map(c.dimensions, function (t) { return s.mapDimension(t) }), l, !0)) || []; else if (u) { var h = u.getBoundingRect().clone(); h.applyTransform(u.transform), a = [h.x + h.width / 2, h.y + h.height / 2] } return { point: a, el: u } } }, function (t, e, n) { var i = n(0); var r = n(11); var a = (0, n(4).makeInner)(); var o = i.each; function s (t, e, n) { t.handler('leave', null, n) } function l (t, e, n, i) { e.handler(t, n, i) }e.register = function (t, e, n) { if (!r.node) { var u = e.getZr(); a(u).records || (a(u).records = {}), (function (t, e) { if (a(t).initialized) return; function n (n, i) { t.on(n, function (n) { var r = (function (t) { var e = { showTip: [], hideTip: [] }; var n = function (i) { var r = e[i.type]; r ? r.push(i) : (i.dispatchAction = n, t.dispatchAction(i)) }; return { dispatchAction: n, pendings: e } }(e)); o(a(t).records, function (t) { t && i(t, n, r.dispatchAction) }), (function (t, e) { var n; var i = t.showTip.length; var r = t.hideTip.length; i ? n = t.showTip[i - 1] : r && (n = t.hideTip[r - 1]); n && (n.dispatchAction = null, e.dispatchAction(n)) }(r.pendings, e)) }) }a(t).initialized = !0, n('click', i.curry(l, 'click')), n('mousemove', i.curry(l, 'mousemove')), n('globalout', s) }(u, e)), (a(u).records[t] || (a(u).records[t] = {})).handler = n } }, e.unregister = function (t, e) { if (!r.node) { var n = e.getZr(); (a(n).records || {})[t] && (a(n).records[t] = null) } } }, function (t, e, n) { var i = n(109); var r = n(84); var a = n(168); var o = n(39); var s = i.extend({ makeElOption: function (t, e, n, i, o) { var s = n.axis; var c = s.grid; var h = i.get('type'); var d = l(c, s).getOtherAxis(s).getGlobalExtent(); var f = s.toGlobalCoord(s.dataToCoord(e, !0)); if (h && h !== 'none') { var p = r.buildElStyle(i); var g = u[h](s, f, d); g.style = p, t.graphicKey = g.type, t.pointer = g } var v = a.layout(c.model, n); r.buildCartesianSingleLabelElOption(e, t, v, n, i, o) }, getHandleTransform: function (t, e, n) { var i = a.layout(e.axis.grid.model, e, { labelInside: !1 }); return i.labelMargin = n.get('handle.margin'), { position: r.getTransformedPosition(e.axis, t, i), rotation: i.rotation + (i.labelDirection < 0 ? Math.PI : 0) } }, updateHandleTransform: function (t, e, n, i) { var r = n.axis; var a = r.grid; var o = r.getGlobalExtent(!0); var s = l(a, r).getOtherAxis(r).getGlobalExtent(); var u = r.dim === 'x' ? 0 : 1; var c = t.position; c[u] += e[u], c[u] = Math.min(o[1], c[u]), c[u] = Math.max(o[0], c[u]); var h = (s[1] + s[0]) / 2; var d = [h, h]; d[u] = c[u]; return { position: c, rotation: t.rotation, cursorPoint: d, tooltipOption: [{ verticalAlign: 'middle' }, { align: 'center' }][u] } } }); function l (t, e) { var n = {}; return n[e.dim + 'AxisIndex'] = e.index, t.getCartesian(n) } var u = { line: function (t, e, n) { return { type: 'Line', subPixelOptimize: !0, shape: r.makeLineShape([e, n[0]], [e, n[1]], c(t)) } }, shadow: function (t, e, n) { var i = Math.max(1, t.getBandWidth()); var a = n[1] - n[0]; return { type: 'Rect', shape: r.makeRectShape([e - i / 2, n[0]], [i, a], c(t)) } } }; function c (t) { return t.dim === 'x' ? 0 : 1 }o.registerAxisPointerClass('CartesianAxisPointer', s); var h = s; t.exports = h }, function (t, e, n) { var i = n(6); var r = i.getLayoutRect; var a = i.box; var o = i.positionElement; var s = n(9); var l = n(2); e.layout = function (t, e, n) { var i = e.getBoxLayoutParams(); var s = e.get('padding'); var l = { width: n.getWidth(), height: n.getHeight() }; var u = r(i, l, s); a(e.get('orient'), t, e.get('itemGap'), u.width, u.height), o(t, i, l, s) }, e.makeBackground = function (t, e) { var n = s.normalizeCssArray(e.get('padding')); var i = e.getItemStyle(['color', 'opacity']); return i.fill = e.get('backgroundColor'), t = new l.Rect({ shape: { x: t.x - n[3], y: t.y - n[0], width: t.width + n[1] + n[3], height: t.height + n[0] + n[2], r: e.get('borderRadius') }, style: i, silent: !0, z2: -1 }) } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(2); var a = n(4); var o = n(183); var s = i.each; var l = i.indexOf; var u = i.curry; var c = ['dataToPoint', 'pointToData']; var h = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap']; function d (t, e, n) { var i = this._targetInfoList = []; var r = {}; var a = g(e, t); s(v, function (t, e) { (!n || !n.include || l(n.include, e) >= 0) && t(a, i, r) }) } var f = d.prototype; function p (t) { return t[0] > t[1] && t.reverse(), t } function g (t, e) { return a.parseFinder(t, e, { includeMainTypes: h }) }f.setOutputRanges = function (t, e) { this.matchOutputRanges(t, e, function (t, e, n) { if ((t.coordRanges || (t.coordRanges = [])).push(e), !t.coordRange) { t.coordRange = e; var i = x[t.brushType](0, n, e); t.__rangeOffset = { offset: b[t.brushType](i.values, t.range, [1, 1]), xyMinMax: i.xyMinMax } } }) }, f.matchOutputRanges = function (t, e, n) { s(t, function (t) { var r = this.findTargetInfo(t, e); r && !0 !== r && i.each(r.coordSyses, function (i) { var r = x[t.brushType](1, i, t.range); n(t, r.values, i, e) }) }, this) }, f.setInputRanges = function (t, e) { s(t, function (t) { var n; var i; var r; var a; var o; var s = this.findTargetInfo(t, e); if (t.range = t.range || [], s && !0 !== s) { t.panelId = s.panelId; var l = x[t.brushType](0, s.coordSys, t.coordRange); var u = t.__rangeOffset; t.range = u ? b[t.brushType](l.values, u.offset, (n = l.xyMinMax, i = u.xyMinMax, r = S(n), a = S(i), o = [r[0] / a[0], r[1] / a[1]], isNaN(o[0]) && (o[0] = 1), isNaN(o[1]) && (o[1] = 1), o)) : l.values } }, this) }, f.makePanelOpts = function (t, e) { return i.map(this._targetInfoList, function (n) { var i = n.getPanelRect(); return { panelId: n.panelId, defaultBrushType: e && e(n), clipPath: o.makeRectPanelClipPath(i), isTargetByCursor: o.makeRectIsTargetByCursor(i, t, n.coordSysModel), getLinearBrushOtherExtent: o.makeLinearBrushOtherExtent(i) } }) }, f.controlSeries = function (t, e, n) { var i = this.findTargetInfo(t, n); return !0 === i || i && l(i.coordSyses, e.coordinateSystem) >= 0 }, f.findTargetInfo = function (t, e) { for (var n = this._targetInfoList, i = g(e, t), r = 0; r < n.length; r++) { var a = n[r]; var o = t.panelId; if (o) { if (a.panelId === o) return a } else for (r = 0; r < m.length; r++) if (m[r](i, a)) return a } return !0 }; var v = { grid: function (t, e) { var n = t.xAxisModels; var r = t.yAxisModels; var a = t.gridModels; var o = i.createHashMap(); var u = {}; var c = {}; (n || r || a) && (s(n, function (t) { var e = t.axis.grid.model; o.set(e.id, e), u[e.id] = !0 }), s(r, function (t) { var e = t.axis.grid.model; o.set(e.id, e), c[e.id] = !0 }), s(a, function (t) { o.set(t.id, t), u[t.id] = !0, c[t.id] = !0 }), o.each(function (t) { var i = t.coordinateSystem; var a = []; s(i.getCartesians(), function (t, e) { (l(n, t.getAxis('x').model) >= 0 || l(r, t.getAxis('y').model) >= 0) && a.push(t) }), e.push({ panelId: 'grid--' + t.id, gridModel: t, coordSysModel: t, coordSys: a[0], coordSyses: a, getPanelRect: y.grid, xAxisDeclared: u[t.id], yAxisDeclared: c[t.id] }) })) }, geo: function (t, e) { s(t.geoModels, function (t) { var n = t.coordinateSystem; e.push({ panelId: 'geo--' + t.id, geoModel: t, coordSysModel: t, coordSys: n, coordSyses: [n], getPanelRect: y.geo }) }) } }; var m = [function (t, e) { var n = t.xAxisModel; var i = t.yAxisModel; var r = t.gridModel; return !r && n && (r = n.axis.grid.model), !r && i && (r = i.axis.grid.model), r && r === e.gridModel }, function (t, e) { var n = t.geoModel; return n && n === e.geoModel }]; var y = { grid: function () { return this.coordSys.grid.getRect().clone() }, geo: function () { var t = this.coordSys; var e = t.getBoundingRect().clone(); return e.applyTransform(r.getTransform(t)), e } }; var x = { lineX: u(_, 0), lineY: u(_, 1), rect: function (t, e, n) { var i = e[c[t]]([n[0][0], n[1][0]]); var r = e[c[t]]([n[0][1], n[1][1]]); var a = [p([i[0], r[0]]), p([i[1], r[1]])]; return { values: a, xyMinMax: a } }, polygon: function (t, e, n) { var r = [[1 / 0, -1 / 0], [1 / 0, -1 / 0]]; return { values: i.map(n, function (n) { var i = e[c[t]](n); return r[0][0] = Math.min(r[0][0], i[0]), r[1][0] = Math.min(r[1][0], i[1]), r[0][1] = Math.max(r[0][1], i[0]), r[1][1] = Math.max(r[1][1], i[1]), i }), xyMinMax: r } } }; function _ (t, e, n, r) { var a = n.getAxis(['x', 'y'][t]); var o = p(i.map([0, 1], function (t) { return e ? a.coordToData(a.toLocalCoord(r[t])) : a.toGlobalCoord(a.dataToCoord(r[t])) })); var s = []; return s[t] = o, s[1 - t] = [NaN, NaN], { values: o, xyMinMax: s } } var b = { lineX: u(w, 0), lineY: u(w, 1), rect: function (t, e, n) { return [[t[0][0] - n[0] * e[0][0], t[0][1] - n[0] * e[0][1]], [t[1][0] - n[1] * e[1][0], t[1][1] - n[1] * e[1][1]]] }, polygon: function (t, e, n) { return i.map(t, function (t, i) { return [t[0] - n[0] * e[i][0], t[1] - n[1] * e[i][1]] }) } }; function w (t, e, n, i) { return [e[0] - i[t] * n[0], e[1] - i[t] * n[1]] } function S (t) { return t ? [t[0][1] - t[0][0], t[1][1] - t[1][0]] : [NaN, NaN] } var M = d; t.exports = M }, function (t, e, n) { var i = n(0).each; var r = '\0_ec_hist_store'; function a (t) { var e = t[r]; return e || (e = t[r] = [{}]), e }e.push = function (t, e) { var n = a(t); i(e, function (e, i) { for (var r = n.length - 1; r >= 0; r--) { if (n[r][i]) break } if (r < 0) { var a = t.queryComponents({ mainType: 'dataZoom', subType: 'select', id: i })[0]; if (a) { var o = a.getPercentRange(); n[0][i] = { dataZoomId: i, start: o[0], end: o[1] } } } }), n.push(e) }, e.pop = function (t) { var e = a(t); var n = e[e.length - 1]; e.length > 1 && e.pop(); var r = {}; return i(n, function (t, n) { for (var i = e.length - 1; i >= 0; i--) { if (t = e[i][n]) { r[n] = t; break } } }), r }, e.clear = function (t) { t[r] = null }, e.count = function (t) { return a(t).length } }, function (t, e, n) { var i = n(1); n(197), n(500), n(198); var r = n(501); var a = n(13); i.registerProcessor(i.PRIORITY.PROCESSOR.SERIES_FILTER, r), a.registerSubTypeDefaulter('legend', function () { return 'plain' }) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(12); var o = n(4).isNameSpecified; var s = n(30).legend.selector; var l = { all: { type: 'all', title: r.clone(s.all) }, inverse: { type: 'inverse', title: r.clone(s.inverse) } }; var u = i.extendComponentModel({ type: 'legend.plain', dependencies: ['series'], layoutMode: { type: 'box', ignoreSize: !0 }, init: function (t, e, n) { this.mergeDefaultAndTheme(t, n), t.selected = t.selected || {}, this._updateSelector(t) }, mergeOption: function (t) { u.superCall(this, 'mergeOption', t), this._updateSelector(t) }, _updateSelector: function (t) { var e = t.selector; !0 === e && (e = t.selector = ['all', 'inverse']), r.isArray(e) && r.each(e, function (t, n) { r.isString(t) && (t = { type: t }), e[n] = r.merge(t, l[t.type]) }) }, optionUpdated: function () { this._updateData(this.ecModel); var t = this._data; if (t[0] && this.get('selectedMode') === 'single') { for (var e = !1, n = 0; n < t.length; n++) { var i = t[n].get('name'); if (this.isSelected(i)) { this.select(i), e = !0; break } }!e && this.select(t[0].get('name')) } }, _updateData: function (t) { var e = []; var n = []; t.eachRawSeries(function (i) { var r; var a = i.name; if (n.push(a), i.legendDataProvider) { var s = i.legendDataProvider(); var l = s.mapArray(s.getName); t.isSeriesFiltered(i) || (n = n.concat(l)), l.length ? e = e.concat(l) : r = !0 } else r = !0; r && o(i) && e.push(i.name) }), this._availableNames = n; var i = this.get('data') || e; var s = r.map(i, function (t) { return typeof t !== 'string' && typeof t !== 'number' || (t = { name: t }), new a(t, this, this.ecModel) }, this); this._data = s }, getData: function () { return this._data }, select: function (t) { var e = this.option.selected; if (this.get('selectedMode') === 'single') { var n = this._data; r.each(n, function (t) { e[t.get('name')] = !1 }) }e[t] = !0 }, unSelect: function (t) { this.get('selectedMode') !== 'single' && (this.option.selected[t] = !1) }, toggleSelected: function (t) { var e = this.option.selected; e.hasOwnProperty(t) || (e[t] = !0), this[e[t] ? 'unSelect' : 'select'](t) }, allSelect: function () { var t = this._data; var e = this.option.selected; r.each(t, function (t) { e[t.get('name', !0)] = !0 }) }, inverseSelect: function () { var t = this._data; var e = this.option.selected; r.each(t, function (t) { var n = t.get('name', !0); e.hasOwnProperty(n) || (e[n] = !0), e[n] = !e[n] }) }, isSelected: function (t) { var e = this.option.selected; return !(e.hasOwnProperty(t) && !e[t]) && r.indexOf(this._availableNames, t) >= 0 }, getOrient: function () { return this.get('orient') === 'vertical' ? { index: 1, name: 'vertical' } : { index: 0, name: 'horizontal' } }, defaultOption: { zlevel: 0, z: 4, show: !0, orient: 'horizontal', left: 'center', top: 0, align: 'auto', backgroundColor: 'rgba(0,0,0,0)', borderColor: '#ccc', borderRadius: 0, borderWidth: 0, padding: 5, itemGap: 10, itemWidth: 25, itemHeight: 14, inactiveColor: '#ccc', inactiveBorderColor: '#ccc', itemStyle: { borderWidth: 0 }, textStyle: { color: '#333' }, selectedMode: !0, selector: !1, selectorLabel: { show: !0, borderRadius: 10, padding: [3, 5, 3, 5], fontSize: 12, fontFamily: ' sans-serif', color: '#666', borderWidth: 1, borderColor: '#666' }, emphasis: { selectorLabel: { show: !0, color: '#eee', backgroundColor: '#666' } }, selectorPosition: 'auto', selectorItemGap: 7, selectorButtonGap: 10, tooltip: { show: !1 } } }); var c = u; t.exports = c }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(19).createSymbol; var o = n(2); var s = n(193).makeBackground; var l = n(6); var u = r.curry; var c = r.each; var h = o.Group; var d = i.extendComponentView({ type: 'legend.plain', newlineDisabled: !1, init: function () { this.group.add(this._contentGroup = new h()), this._backgroundEl, this.group.add(this._selectorGroup = new h()), this._isFirstRender = !0 }, getContentGroup: function () { return this._contentGroup }, getSelectorGroup: function () { return this._selectorGroup }, render: function (t, e, n) { var i = this._isFirstRender; if (this._isFirstRender = !1, this.resetInner(), t.get('show', !0)) { var a = t.get('align'); var o = t.get('orient'); a && a !== 'auto' || (a = t.get('left') === 'right' && o === 'vertical' ? 'right' : 'left'); var u = t.get('selector', !0); var c = t.get('selectorPosition', !0); !u || c && c !== 'auto' || (c = o === 'horizontal' ? 'end' : 'start'), this.renderInner(a, t, e, n, u, o, c); var h = t.getBoxLayoutParams(); var d = { width: n.getWidth(), height: n.getHeight() }; var f = t.get('padding'); var p = l.getLayoutRect(h, d, f); var g = this.layoutInner(t, a, p, i, u, c); var v = l.getLayoutRect(r.defaults({ width: g.width, height: g.height }, h), d, f); this.group.attr('position', [v.x - g.x, v.y - g.y]), this.group.add(this._backgroundEl = s(g, t)) } }, resetInner: function () { this.getContentGroup().removeAll(), this._backgroundEl && this.group.remove(this._backgroundEl), this.getSelectorGroup().removeAll() }, renderInner: function (t, e, n, i, a, o, s) { var l = this.getContentGroup(); var d = r.createHashMap(); var f = e.get('selectedMode'); var m = []; n.eachRawSeries(function (t) { !t.get('legendHoverLink') && m.push(t.id) }), c(e.getData(), function (r, a) { var o = r.get('name'); if (this.newlineDisabled || o !== '' && o !== '\n') { var s = n.getSeriesByName(o)[0]; if (!d.get(o)) if (s) { var c = s.getData(); var y = c.getVisual('color'); var x = c.getVisual('borderColor'); typeof y === 'function' && (y = y(s.getDataParams(0))), typeof x === 'function' && (x = x(s.getDataParams(0))); var _ = c.getVisual('legendSymbol') || 'roundRect'; var b = c.getVisual('symbol'); this._createItem(o, a, r, e, _, b, t, y, x, f).on('click', u(p, o, i)).on('mouseover', u(g, s.name, null, i, m)).on('mouseout', u(v, s.name, null, i, m)), d.set(o, !0) } else n.eachRawSeries(function (n) { if (!d.get(o) && n.legendDataProvider) { var s = n.legendDataProvider(); var l = s.indexOfName(o); if (l < 0) return; var c = s.getItemVisual(l, 'color'); var h = s.getItemVisual(l, 'borderColor'); this._createItem(o, a, r, e, 'roundRect', null, t, c, h, f).on('click', u(p, o, i)).on('mouseover', u(g, null, o, i, m)).on('mouseout', u(v, null, o, i, m)), d.set(o, !0) } }, this) } else l.add(new h({ newline: !0 })) }, this), a && this._createSelector(a, e, i, o, s) }, _createSelector: function (t, e, n, i, r) { var a = this.getSelectorGroup(); c(t, function (t) { !(function (t) { var i = t.type; var r = new o.Text({ style: { x: 0, y: 0, align: 'center', verticalAlign: 'middle' }, onclick: function () { n.dispatchAction({ type: i === 'all' ? 'legendAllSelect' : 'legendInverseSelect' }) } }); a.add(r); var s = e.getModel('selectorLabel'); var l = e.getModel('emphasis.selectorLabel'); o.setLabelStyle(r.style, r.hoverStyle = {}, s, l, { defaultText: t.title, isRectText: !1 }), o.setHoverStyle(r) }(t)) }) }, _createItem: function (t, e, n, i, s, l, u, c, d, p) { var g = i.get('itemWidth'); var v = i.get('itemHeight'); var m = i.get('inactiveColor'); var y = i.get('inactiveBorderColor'); var x = i.get('symbolKeepAspect'); var _ = i.getModel('itemStyle'); var b = i.isSelected(t); var w = new h(); var S = n.getModel('textStyle'); var M = n.get('icon'); var I = n.getModel('tooltip'); var A = I.parentModel; var T = a(s = M || s, 0, 0, g, v, b ? c : m, x == null || x); if (w.add(f(T, s, _, d, y, b)), !M && l && (l !== s || l === 'none')) { var C = 0.8 * v; l === 'none' && (l = 'circle'); var D = a(l, (g - C) / 2, (v - C) / 2, C, C, b ? c : m, x == null || x); w.add(f(D, l, _, d, y, b)) } var L = u === 'left' ? g + 5 : -5; var P = u; var k = i.get('formatter'); var O = t; typeof k === 'string' && k ? O = k.replace('{name}', t != null ? t : '') : typeof k === 'function' && (O = k(t)), w.add(new o.Text({ style: o.setTextStyle({}, S, { text: O, x: L, y: v / 2, textFill: b ? S.getTextColor() : m, textAlign: P, textVerticalAlign: 'middle' }) })); var E = new o.Rect({ shape: w.getBoundingRect(), invisible: !0, tooltip: I.get('show') ? r.extend({ content: t, formatter: A.get('formatter', !0) || function () { return t }, formatterParams: { componentType: 'legend', legendIndex: i.componentIndex, name: t, $vars: ['name'] } }, I.option) : null }); return w.add(E), w.eachChild(function (t) { t.silent = !0 }), E.silent = !p, this.getContentGroup().add(w), o.setHoverStyle(w), w.__legendDataIndex = e, w }, layoutInner: function (t, e, n, i, r, a) { var o = this.getContentGroup(); var s = this.getSelectorGroup(); l.box(t.get('orient'), o, t.get('itemGap'), n.width, n.height); var u = o.getBoundingRect(); var c = [-u.x, -u.y]; if (r) { l.box('horizontal', s, t.get('selectorItemGap', !0)); var h = s.getBoundingRect(); var d = [-h.x, -h.y]; var f = t.get('selectorButtonGap', !0); var p = t.getOrient().index; var g = p === 0 ? 'width' : 'height'; var v = p === 0 ? 'height' : 'width'; var m = p === 0 ? 'y' : 'x'; a === 'end' ? d[p] += u[g] + f : c[p] += h[g] + f, d[1 - p] += u[v] / 2 - h[v] / 2, s.attr('position', d), o.attr('position', c); var y = { x: 0, y: 0 }; return y[g] = u[g] + f + h[g], y[v] = Math.max(u[v], h[v]), y[m] = Math.min(0, h[m] + d[1 - p]), y } return o.attr('position', c), this.group.getBoundingRect() }, remove: function () { this.getContentGroup().removeAll(), this._isFirstRender = !0 } }); function f (t, e, n, i, r, a) { var o; return e !== 'line' && e.indexOf('empty') < 0 ? (o = n.getItemStyle(), t.style.stroke = i, a || (o.stroke = r)) : o = n.getItemStyle(['borderWidth', 'borderColor']), t.setStyle(o) } function p (t, e) { e.dispatchAction({ type: 'legendToggleSelect', name: t }) } function g (t, e, n, i) { var r = n.getZr().storage.getDisplayList()[0]; r && r.useHoverLayer || n.dispatchAction({ type: 'highlight', seriesName: t, name: e, excludeSeriesId: i }) } function v (t, e, n, i) { var r = n.getZr().storage.getDisplayList()[0]; r && r.useHoverLayer || n.dispatchAction({ type: 'downplay', seriesName: t, name: e, excludeSeriesId: i }) }t.exports = d }, function (t, e, n) { n(111), n(51), n(52), n(506), n(507), n(113), n(114) }, function (t, e, n) { n(111), n(51), n(52), n(508), n(509), n(113), n(114) }, function (t, e, n) { var i = n(1); var r = n(202); n(203), n(204), n(512), n(513), n(209), i.registerPreprocessor(r) }, function (t, e, n) { var i = n(0); var r = i.each; function a (t, e) { return t && t.hasOwnProperty && t.hasOwnProperty(e) }t.exports = function (t) { var e = t && t.visualMap; i.isArray(e) || (e = e ? [e] : []), r(e, function (t) { if (t) { a(t, 'splitList') && !a(t, 'pieces') && (t.pieces = t.splitList, delete t.splitList); var e = t.pieces; e && i.isArray(e) && r(e, function (t) { i.isObject(t) && (a(t, 'start') && !a(t, 'min') && (t.min = t.start), a(t, 'end') && !a(t, 'max') && (t.max = t.end)) }) } }) } }, function (t, e, n) { n(13).registerSubTypeDefaulter('visualMap', function (t) { return t.categories || (t.pieces ? t.pieces.length > 0 : t.splitNumber > 0) && !t.calculable ? 'piecewise' : 'continuous' }) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(85); var o = n(41); var s = i.PRIORITY.VISUAL.COMPONENT; function l (t, e, n, i) { for (var r = e.targetVisuals[i], a = o.prepareVisualTypes(r), s = { color: t.getData().getVisual('color') }, l = 0, u = a.length; l < u; l++) { var c = a[l]; var h = r[c === 'opacity' ? '__alphaForOpacity' : c]; h && h.applyVisual(n, d, f) } return s.color; function d (t) { return s[t] } function f (t, e) { s[t] = e } }i.registerVisual(s, { createOnAllSeries: !0, reset: function (t, e) { var n = []; return e.eachComponent('visualMap', function (e) { var i = t.pipelineContext; !e.isTargetSeries(t) || i && i.large || n.push(a.incrementalApplyVisual(e.stateList, e.targetVisuals, r.bind(e.getValueState, e), e.getDataDimension(t.getData()))) }), n } }), i.registerVisual(s, { createOnAllSeries: !0, reset: function (t, e) { var n = t.getData(); var i = []; e.eachComponent('visualMap', function (e) { if (e.isTargetSeries(t)) { var a = e.getVisualMeta(r.bind(l, null, t, e)) || { stops: [], outerColors: [] }; var o = e.getDataDimension(n); var s = n.getDimensionInfo(o); s != null && (a.dimension = s.index, i.push(a)) } }), t.getData().setVisual('visualMeta', i) } }) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(11); var o = n(206); var s = n(41); var l = n(85); var u = n(4); var c = n(3); var h = s.mapVisual; var d = s.eachVisual; var f = r.isArray; var p = r.each; var g = c.asc; var v = c.linearMap; var m = r.noop; var y = i.extendComponentModel({ type: 'visualMap', dependencies: ['series'], stateList: ['inRange', 'outOfRange'], replacableOptionKeys: ['inRange', 'outOfRange', 'target', 'controller', 'color'], dataBound: [-1 / 0, 1 / 0], layoutMode: { type: 'box', ignoreSize: !0 }, defaultOption: { show: !0, zlevel: 0, z: 4, seriesIndex: 'all', min: 0, max: 200, dimension: null, inRange: null, outOfRange: null, left: 0, right: null, top: null, bottom: 0, itemWidth: null, itemHeight: null, inverse: !1, orient: 'vertical', backgroundColor: 'rgba(0,0,0,0)', borderColor: '#ccc', contentColor: '#5793f3', inactiveColor: '#aaa', borderWidth: 0, padding: 5, textGap: 10, precision: 0, color: null, formatter: null, text: null, textStyle: { color: '#333' } }, init: function (t, e, n) { this._dataExtent, this.targetVisuals = {}, this.controllerVisuals = {}, this.textStyleModel, this.itemSize, this.mergeDefaultAndTheme(t, n) }, optionUpdated: function (t, e) { var n = this.option; a.canvasSupported || (n.realtime = !1), !e && l.replaceVisualOption(n, t, this.replacableOptionKeys), this.textStyleModel = this.getModel('textStyle'), this.resetItemSize(), this.completeVisualOption() }, resetVisual: function (t) { var e = this.stateList; t = r.bind(t, this), this.controllerVisuals = l.createVisualMappings(this.option.controller, e, t), this.targetVisuals = l.createVisualMappings(this.option.target, e, t) }, getTargetSeriesIndices: function () { var t = this.option.seriesIndex; var e = []; return t == null || t === 'all' ? this.ecModel.eachSeries(function (t, n) { e.push(n) }) : e = u.normalizeToArray(t), e }, eachTargetSeries: function (t, e) { r.each(this.getTargetSeriesIndices(), function (n) { t.call(e, this.ecModel.getSeriesByIndex(n)) }, this) }, isTargetSeries: function (t) { var e = !1; return this.eachTargetSeries(function (n) { n === t && (e = !0) }), e }, formatValueText: function (t, e, n) { var i; var a; var o = this.option; var s = o.precision; var l = this.dataBound; var u = o.formatter; return n = n || ['<', '>'], r.isArray(t) && (t = t.slice(), i = !0), a = e ? t : i ? [c(t[0]), c(t[1])] : c(t), r.isString(u) ? u.replace('{value}', i ? a[0] : a).replace('{value2}', i ? a[1] : a) : r.isFunction(u) ? i ? u(t[0], t[1]) : u(t) : i ? t[0] === l[0] ? n[0] + ' ' + a[1] : t[1] === l[1] ? n[1] + ' ' + a[0] : a[0] + ' - ' + a[1] : a; function c (t) { return t === l[0] ? 'min' : t === l[1] ? 'max' : (+t).toFixed(Math.min(s, 20)) } }, resetExtent: function () { var t = this.option; var e = g([t.min, t.max]); this._dataExtent = e }, getDataDimension: function (t) { var e = this.option.dimension; var n = t.dimensions; if (e != null || n.length) { if (e != null) return t.getDimension(e); for (var i = t.dimensions, r = i.length - 1; r >= 0; r--) { var a = i[r]; if (!t.getDimensionInfo(a).isCalculationCoord) return a } } }, getExtent: function () { return this._dataExtent.slice() }, completeVisualOption: function () { var t = this.ecModel; var e = this.option; var n = { inRange: e.inRange, outOfRange: e.outOfRange }; var i = e.target || (e.target = {}); var a = e.controller || (e.controller = {}); r.merge(i, n), r.merge(a, n); var l = this.isCategory(); function u (n) { f(e.color) && !n.inRange && (n.inRange = { color: e.color.slice().reverse() }), n.inRange = n.inRange || { color: t.get('gradientColor') }, p(this.stateList, function (t) { var e = n[t]; if (r.isString(e)) { var i = o.get(e, 'active', l); i ? (n[t] = {}, n[t][e] = i) : delete n[t] } }, this) }u.call(this, i), u.call(this, a), (function (t, e, n) { var i = t[e]; var r = t[n]; i && !r && (r = t[n] = {}, p(i, function (t, e) { if (s.isValidType(e)) { var n = o.get(e, 'inactive', l); n != null && (r[e] = n, e !== 'color' || r.hasOwnProperty('opacity') || r.hasOwnProperty('colorAlpha') || (r.opacity = [0, 0])) } })) }.call(this, i, 'inRange', 'outOfRange')), (function (t) { var e = (t.inRange || {}).symbol || (t.outOfRange || {}).symbol; var n = (t.inRange || {}).symbolSize || (t.outOfRange || {}).symbolSize; var i = this.get('inactiveColor'); p(this.stateList, function (a) { var o = this.itemSize; var s = t[a]; s || (s = t[a] = { color: l ? i : [i] }), s.symbol == null && (s.symbol = e && r.clone(e) || (l ? 'roundRect' : ['roundRect'])), s.symbolSize == null && (s.symbolSize = n && r.clone(n) || (l ? o[0] : [o[0], o[0]])), s.symbol = h(s.symbol, function (t) { return t === 'none' || t === 'square' ? 'roundRect' : t }); var u = s.symbolSize; if (u != null) { var c = -1 / 0; d(u, function (t) { t > c && (c = t) }), s.symbolSize = h(u, function (t) { return v(t, [0, c], [0, o[0]], !0) }) } }, this) }.call(this, a)) }, resetItemSize: function () { this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))] }, isCategory: function () { return !!this.option.categories }, setSelected: m, getValueState: m, getVisualMeta: m }); t.exports = y }, function (t, e, n) { var i = n(0); var r = { get: function (t, e, n) { var r = i.clone((a[t] || {})[e]); return n && i.isArray(r) ? r[r.length - 1] : r } }; var a = { color: { active: ['#006edd', '#e0ffff'], inactive: ['rgba(0,0,0,0)'] }, colorHue: { active: [0, 360], inactive: [0, 0] }, colorSaturation: { active: [0.3, 1], inactive: [0, 0] }, colorLightness: { active: [0.9, 0.5], inactive: [0, 0] }, colorAlpha: { active: [0.3, 1], inactive: [0, 0] }, opacity: { active: [0.3, 1], inactive: [0, 0] }, symbol: { active: ['circle', 'roundRect', 'diamond'], inactive: ['none'] }, symbolSize: { active: [10, 50], inactive: [0, 0] } }; var o = r; t.exports = o }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(2); var o = n(9); var s = n(6); var l = n(41); var u = i.extendComponentView({ type: 'visualMap', autoPositionValues: { left: 1, right: 1, top: 1, bottom: 1 }, init: function (t, e) { this.ecModel = t, this.api = e, this.visualMapModel }, render: function (t, e, n, i) { this.visualMapModel = t, !1 !== t.get('show') ? this.doRender.apply(this, arguments) : this.group.removeAll() }, renderBackground: function (t) { var e = this.visualMapModel; var n = o.normalizeCssArray(e.get('padding') || 0); var i = t.getBoundingRect(); t.add(new a.Rect({ z2: -1, silent: !0, shape: { x: i.x - n[3], y: i.y - n[0], width: i.width + n[3] + n[1], height: i.height + n[0] + n[2] }, style: { fill: e.get('backgroundColor'), stroke: e.get('borderColor'), lineWidth: e.get('borderWidth') } })) }, getControllerVisual: function (t, e, n) { var i = (n = n || {}).forceState; var a = this.visualMapModel; var o = {}; if (e === 'symbol' && (o.symbol = a.get('itemSymbol')), e === 'color') { var s = a.get('contentColor'); o.color = s } function u (t) { return o[t] } function c (t, e) { o[t] = e } var h = a.controllerVisuals[i || a.getValueState(t)]; var d = l.prepareVisualTypes(h); return r.each(d, function (i) { var r = h[i]; n.convertOpacityToAlpha && i === 'opacity' && (i = 'colorAlpha', r = h.__alphaForOpacity), l.dependsOn(i, e) && r && r.applyVisual(t, u, c) }), o[e] }, positionGroup: function (t) { var e = this.visualMapModel; var n = this.api; s.positionElement(t, e.getBoxLayoutParams(), { width: n.getWidth(), height: n.getHeight() }) }, doRender: r.noop }); t.exports = u }, function (t, e, n) { var i = n(0); var r = n(6).getLayoutRect; e.getItemAlign = function (t, e, n) { var i = t.option; var a = i.align; if (a != null && a !== 'auto') return a; for (var o = { width: e.getWidth(), height: e.getHeight() }, s = i.orient === 'horizontal' ? 1 : 0, l = [['left', 'right', 'width'], ['top', 'bottom', 'height']], u = l[s], c = [0, null, 10], h = {}, d = 0; d < 3; d++)h[l[1 - s][d]] = c[d], h[u[d]] = d === 2 ? n[0] : i[u[d]]; var f = [['x', 'width', 3], ['y', 'height', 0]][s]; var p = r(h, o, i.padding); return u[(p.margin[f[2]] || 0) + p[f[0]] + 0.5 * p[f[1]] < 0.5 * o[f[1]] ? 0 : 1] }, e.makeHighDownBatch = function (t, e) { return i.each(t || [], function (t) { t.dataIndex != null && (t.dataIndexInside = t.dataIndex, t.dataIndex = null), t.highlightKey = 'visualMap' + (e ? e.componentIndex : '') }), t } }, function (t, e, n) { n(1).registerAction({ type: 'selectDataRange', event: 'dataRangeSelected', update: 'update' }, function (t, e) { e.eachComponent({ mainType: 'visualMap', query: t }, function (e) { e.setSelected(t.selected) }) }) }, function (t, e, n) { var i = n(1); var r = n(202); n(203), n(204), n(514), n(515), n(209), i.registerPreprocessor(r) }, function (t, e, n) { var i; var r = n(11); var a = 'urn:schemas-microsoft-com:vml'; var o = typeof window === 'undefined' ? null : window; var s = !1; var l = o && o.document; if (l && !r.canvasSupported) try { !l.namespaces.zrvml && l.namespaces.add('zrvml', a), i = function (t) { return l.createElement('<zrvml:' + t + ' class="zrvml">') } } catch (t) { i = function (t) { return l.createElement('<' + t + ' xmlns="' + a + '" class="zrvml">') } }e.doc = l, e.createNode = function (t) { return i(t) }, e.initVML = function () { if (!s && l) { s = !0; var t = l.styleSheets; t.length < 31 ? l.createStyleSheet().addRule('.zrvml', 'behavior:url(#default#VML)') : t[0].addRule('.zrvml', 'behavior:url(#default#VML)') } } }, function (t, e, n) { t.exports = n }, function (t, e, n) { t.exports = n(214) }, function (t, e, n) { 'use strict'; var i = n(16); var r = n(121); var a = n(216); var o = n(128); function s (t) { var e = new a(t); var n = r(a.prototype.request, e); return i.extend(n, a.prototype, e), i.extend(n, e), n } var l = s(n(124)); l.Axios = a, l.create = function (t) { return s(o(l.defaults, t)) }, l.Cancel = n(129), l.CancelToken = n(228), l.isCancel = n(123), l.all = function (t) { return Promise.all(t) }, l.spread = n(229), t.exports = l, t.exports.default = l }, function (t, e) {
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
  t.exports = function (t) { return t != null && t.constructor != null && typeof t.constructor.isBuffer === 'function' && t.constructor.isBuffer(t) }
}, function (t, e, n) { 'use strict'; var i = n(16); var r = n(122); var a = n(217); var o = n(218); var s = n(128); function l (t) { this.defaults = t, this.interceptors = { request: new a(), response: new a() } }l.prototype.request = function (t) { typeof t === 'string' ? (t = arguments[1] || {}).url = arguments[0] : t = t || {}, (t = s(this.defaults, t)).method = t.method ? t.method.toLowerCase() : 'get'; var e = [o, void 0]; var n = Promise.resolve(t); for (this.interceptors.request.forEach(function (t) { e.unshift(t.fulfilled, t.rejected) }), this.interceptors.response.forEach(function (t) { e.push(t.fulfilled, t.rejected) }); e.length;)n = n.then(e.shift(), e.shift()); return n }, l.prototype.getUri = function (t) { return t = s(this.defaults, t), r(t.url, t.params, t.paramsSerializer).replace(/^\?/, '') }, i.forEach(['delete', 'get', 'head', 'options'], function (t) { l.prototype[t] = function (e, n) { return this.request(i.merge(n || {}, { method: t, url: e })) } }), i.forEach(['post', 'put', 'patch'], function (t) { l.prototype[t] = function (e, n, r) { return this.request(i.merge(r || {}, { method: t, url: e, data: n })) } }), t.exports = l }, function (t, e, n) { 'use strict'; var i = n(16); function r () { this.handlers = [] }r.prototype.use = function (t, e) { return this.handlers.push({ fulfilled: t, rejected: e }), this.handlers.length - 1 }, r.prototype.eject = function (t) { this.handlers[t] && (this.handlers[t] = null) }, r.prototype.forEach = function (t) { i.forEach(this.handlers, function (e) { e !== null && t(e) }) }, t.exports = r }, function (t, e, n) { 'use strict'; var i = n(16); var r = n(219); var a = n(123); var o = n(124); var s = n(226); var l = n(227); function u (t) { t.cancelToken && t.cancelToken.throwIfRequested() }t.exports = function (t) { return u(t), t.baseURL && !s(t.url) && (t.url = l(t.baseURL, t.url)), t.headers = t.headers || {}, t.data = r(t.data, t.headers, t.transformRequest), t.headers = i.merge(t.headers.common || {}, t.headers[t.method] || {}, t.headers || {}), i.forEach(['delete', 'get', 'head', 'post', 'put', 'patch', 'common'], function (e) { delete t.headers[e] }), (t.adapter || o.adapter)(t).then(function (e) { return u(t), e.data = r(e.data, e.headers, t.transformResponse), e }, function (e) { return a(e) || (u(t), e && e.response && (e.response.data = r(e.response.data, e.response.headers, t.transformResponse))), Promise.reject(e) }) } }, function (t, e, n) { 'use strict'; var i = n(16); t.exports = function (t, e, n) { return i.forEach(n, function (n) { t = n(t, e) }), t } }, function (t, e, n) { 'use strict'; var i = n(16); t.exports = function (t, e) { i.forEach(t, function (n, i) { i !== e && i.toUpperCase() === e.toUpperCase() && (t[e] = n, delete t[i]) }) } }, function (t, e, n) { 'use strict'; var i = n(127); t.exports = function (t, e, n) { var r = n.config.validateStatus; !r || r(n.status) ? t(n) : e(i('Request failed with status code ' + n.status, n.config, null, n.request, n)) } }, function (t, e, n) { 'use strict'; t.exports = function (t, e, n, i, r) { return t.config = e, n && (t.code = n), t.request = i, t.response = r, t.isAxiosError = !0, t.toJSON = function () { return { message: this.message, name: this.name, description: this.description, number: this.number, fileName: this.fileName, lineNumber: this.lineNumber, columnNumber: this.columnNumber, stack: this.stack, config: this.config, code: this.code } }, t } }, function (t, e, n) { 'use strict'; var i = n(16); var r = ['age', 'authorization', 'content-length', 'content-type', 'etag', 'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since', 'last-modified', 'location', 'max-forwards', 'proxy-authorization', 'referer', 'retry-after', 'user-agent']; t.exports = function (t) { var e; var n; var a; var o = {}; return t ? (i.forEach(t.split('\n'), function (t) { if (a = t.indexOf(':'), e = i.trim(t.substr(0, a)).toLowerCase(), n = i.trim(t.substr(a + 1)), e) { if (o[e] && r.indexOf(e) >= 0) return; o[e] = e === 'set-cookie' ? (o[e] ? o[e] : []).concat([n]) : o[e] ? o[e] + ', ' + n : n } }), o) : o } }, function (t, e, n) { 'use strict'; var i = n(16); t.exports = i.isStandardBrowserEnv() ? (function () { var t; var e = /(msie|trident)/i.test(navigator.userAgent); var n = document.createElement('a'); function r (t) { var i = t; return e && (n.setAttribute('href', i), i = n.href), n.setAttribute('href', i), { href: n.href, protocol: n.protocol ? n.protocol.replace(/:$/, '') : '', host: n.host, search: n.search ? n.search.replace(/^\?/, '') : '', hash: n.hash ? n.hash.replace(/^#/, '') : '', hostname: n.hostname, port: n.port, pathname: n.pathname.charAt(0) === '/' ? n.pathname : '/' + n.pathname } } return t = r(window.location.href), function (e) { var n = i.isString(e) ? r(e) : e; return n.protocol === t.protocol && n.host === t.host } }()) : function () { return !0 } }, function (t, e, n) { 'use strict'; var i = n(16); t.exports = i.isStandardBrowserEnv() ? { write: function (t, e, n, r, a, o) { var s = []; s.push(t + '=' + encodeURIComponent(e)), i.isNumber(n) && s.push('expires=' + new Date(n).toGMTString()), i.isString(r) && s.push('path=' + r), i.isString(a) && s.push('domain=' + a), !0 === o && s.push('secure'), document.cookie = s.join('; ') }, read: function (t) { var e = document.cookie.match(new RegExp('(^|;\\s*)(' + t + ')=([^;]*)')); return e ? decodeURIComponent(e[3]) : null }, remove: function (t) { this.write(t, '', Date.now() - 864e5) } } : { write: function () {}, read: function () { return null }, remove: function () {} } }, function (t, e, n) { 'use strict'; t.exports = function (t) { return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t) } }, function (t, e, n) { 'use strict'; t.exports = function (t, e) { return e ? t.replace(/\/+$/, '') + '/' + e.replace(/^\/+/, '') : t } }, function (t, e, n) { 'use strict'; var i = n(129); function r (t) { if (typeof t !== 'function') throw new TypeError('executor must be a function.'); var e; this.promise = new Promise(function (t) { e = t }); var n = this; t(function (t) { n.reason || (n.reason = new i(t), e(n.reason)) }) }r.prototype.throwIfRequested = function () { if (this.reason) throw this.reason }, r.source = function () { var t; return { token: new r(function (e) { t = e }), cancel: t } }, t.exports = r }, function (t, e, n) { 'use strict'; t.exports = function (t) { return function (e) { return t.apply(null, e) } } }, function (t, e, n) { var i = n(1); !(function () { for (var t in i) { if (i == null || !i.hasOwnProperty(t) || t === 'default' || t === '__esModule') return; e[t] = i[t] } }()); var r = n(156); !(function () { for (var t in r) { if (r == null || !r.hasOwnProperty(t) || t === 'default' || t === '__esModule') return; e[t] = r[t] } }()), n(154), n(276), n(287), n(292), n(297), n(301), n(311), n(325), n(331), n(339), n(354), n(358), n(362), n(374), n(380), n(385), n(391), n(395), n(401), n(405), n(408), n(422), n(428), n(434), n(435), n(447), n(188), n(181), n(450), n(454), n(455), n(467), n(65), n(472), n(480), n(481), n(490), n(493), n(496), n(499), n(196), n(505), n(200), n(199), n(511), n(201), n(210), n(516), n(519) }, function (t, e, n) { var i = n(0); var r = n(7); var a = n(232); var o = n(34); var s = n(22); var l = n(234); var u = 'silent'; function c (t) { s.stop(this.event) } function h () {}h.prototype.dispose = function () {}; var d = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu']; var f = function (t, e, n, i) { o.call(this), this.storage = t, this.painter = e, this.painterRoot = i, n = n || new h(), this.proxy = null, this._hovered = {}, this._lastTouchMoment, this._lastX, this._lastY, this._gestureMgr, a.call(this), this.setHandlerProxy(n) }; function p (t, e, n) { if (t[t.rectHover ? 'rectContain' : 'contain'](e, n)) { for (var i, r = t; r;) { if (r.clipPath && !r.clipPath.contain(e, n)) return !1; r.silent && (i = !0), r = r.parent } return !i || u } return !1 }f.prototype = { constructor: f, setHandlerProxy: function (t) { this.proxy && this.proxy.dispose(), t && (i.each(d, function (e) { t.on && t.on(e, this[e], this) }, this), t.handler = this), this.proxy = t }, mousemove: function (t) { var e = t.zrX; var n = t.zrY; var i = this._hovered; var r = i.target; r && !r.__zr && (r = (i = this.findHover(i.x, i.y)).target); var a = this._hovered = this.findHover(e, n); var o = a.target; var s = this.proxy; s.setCursor && s.setCursor(o ? o.cursor : 'default'), r && o !== r && this.dispatchToElement(i, 'mouseout', t), this.dispatchToElement(a, 'mousemove', t), o && o !== r && this.dispatchToElement(a, 'mouseover', t) }, mouseout: function (t) { this.dispatchToElement(this._hovered, 'mouseout', t); var e; var n = t.toElement || t.relatedTarget; do { n = n && n.parentNode } while (n && n.nodeType !== 9 && !(e = n === this.painterRoot));!e && this.trigger('globalout', { event: t }) }, resize: function (t) { this._hovered = {} }, dispatch: function (t, e) { var n = this[t]; n && n.call(this, e) }, dispose: function () { this.proxy.dispose(), this.storage = this.proxy = this.painter = null }, setCursorStyle: function (t) { var e = this.proxy; e.setCursor && e.setCursor(t) }, dispatchToElement: function (t, e, n) { var i = (t = t || {}).target; if (!i || !i.silent) { for (var r = 'on' + e, a = (function (t, e, n) { return { type: t, event: n, target: e.target, topTarget: e.topTarget, cancelBubble: !1, offsetX: n.zrX, offsetY: n.zrY, gestureEvent: n.gestureEvent, pinchX: n.pinchX, pinchY: n.pinchY, pinchScale: n.pinchScale, wheelDelta: n.zrDelta, zrByTouch: n.zrByTouch, which: n.which, stop: c } }(e, t, n)); i && (i[r] && (a.cancelBubble = i[r].call(i, a)), i.trigger(e, a), i = i.parent, !a.cancelBubble););a.cancelBubble || (this.trigger(e, a), this.painter && this.painter.eachOtherLayer(function (t) { typeof t[r] === 'function' && t[r].call(t, a), t.trigger && t.trigger(e, a) })) } }, findHover: function (t, e, n) { for (var i = this.storage.getDisplayList(), r = { x: t, y: e }, a = i.length - 1; a >= 0; a--) { var o; if (i[a] !== n && !i[a].ignore && (o = p(i[a], t, e)) && (!r.topTarget && (r.topTarget = i[a]), o !== u)) { r.target = i[a]; break } } return r }, processGesture: function (t, e) { this._gestureMgr || (this._gestureMgr = new l()); var n = this._gestureMgr; e === 'start' && n.clear(); var i = n.recognize(t, this.findHover(t.zrX, t.zrY, null).target, this.proxy.dom); if (e === 'end' && n.clear(), i) { var r = i.type; t.gestureEvent = r, this.dispatchToElement({ target: i.target }, r, i.event) } } }, i.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (t) { f.prototype[t] = function (e) { var n = this.findHover(e.zrX, e.zrY); var i = n.target; if (t === 'mousedown') this._downEl = i, this._downPoint = [e.zrX, e.zrY], this._upEl = i; else if (t === 'mouseup') this._upEl = i; else if (t === 'click') { if (this._downEl !== this._upEl || !this._downPoint || r.dist(this._downPoint, [e.zrX, e.zrY]) > 4) return; this._downPoint = null } this.dispatchToElement(n, t, e) } }), i.mixin(f, o), i.mixin(f, a); var g = f; t.exports = g }, function (t, e) { function n () { this.on('mousedown', this._dragStart, this), this.on('mousemove', this._drag, this), this.on('mouseup', this._dragEnd, this), this.on('globalout', this._dragEnd, this) } function i (t, e) { return { target: t, topTarget: e && e.topTarget } }n.prototype = { constructor: n, _dragStart: function (t) { var e = t.target; e && e.draggable && (this._draggingTarget = e, e.dragging = !0, this._x = t.offsetX, this._y = t.offsetY, this.dispatchToElement(i(e, t), 'dragstart', t.event)) }, _drag: function (t) { var e = this._draggingTarget; if (e) { var n = t.offsetX; var r = t.offsetY; var a = n - this._x; var o = r - this._y; this._x = n, this._y = r, e.drift(a, o, t), this.dispatchToElement(i(e, t), 'drag', t.event); var s = this.findHover(n, r, e).target; var l = this._dropTarget; this._dropTarget = s, e !== s && (l && s !== l && this.dispatchToElement(i(l, t), 'dragleave', t.event), s && s !== l && this.dispatchToElement(i(s, t), 'dragenter', t.event)) } }, _dragEnd: function (t) { var e = this._draggingTarget; e && (e.dragging = !1), this.dispatchToElement(i(e, t), 'dragend', t.event), this._dropTarget && this.dispatchToElement(i(this._dropTarget, t), 'drop', t.event), this._draggingTarget = null, this._dropTarget = null } }; var r = n; t.exports = r }, function (t, e) { var n = Math.log(2); function i (t, e, r, a, o, s) { var l = a + '-' + o; var u = t.length; if (s.hasOwnProperty(l)) return s[l]; if (e === 1) { var c = Math.round(Math.log((1 << u) - 1 & ~o) / n); return t[r][c] } for (var h = a | 1 << r, d = r + 1; a & 1 << d;)d++; for (var f = 0, p = 0, g = 0; p < u; p++) { var v = 1 << p; v & o || (f += (g % 2 ? -1 : 1) * t[r][p] * i(t, e - 1, d, h, o | v, s), g++) } return s[l] = f, f }e.buildTransformer = function (t, e) { var n = [[t[0], t[1], 1, 0, 0, 0, -e[0] * t[0], -e[0] * t[1]], [0, 0, 0, t[0], t[1], 1, -e[1] * t[0], -e[1] * t[1]], [t[2], t[3], 1, 0, 0, 0, -e[2] * t[2], -e[2] * t[3]], [0, 0, 0, t[2], t[3], 1, -e[3] * t[2], -e[3] * t[3]], [t[4], t[5], 1, 0, 0, 0, -e[4] * t[4], -e[4] * t[5]], [0, 0, 0, t[4], t[5], 1, -e[5] * t[4], -e[5] * t[5]], [t[6], t[7], 1, 0, 0, 0, -e[6] * t[6], -e[6] * t[7]], [0, 0, 0, t[6], t[7], 1, -e[7] * t[6], -e[7] * t[7]]]; var r = {}; var a = i(n, 8, 0, 0, 0, r); if (a !== 0) { for (var o = [], s = 0; s < 8; s++) for (var l = 0; l < 8; l++)o[l] == null && (o[l] = 0), o[l] += ((s + l) % 2 ? -1 : 1) * i(n, 7, s === 0 ? 1 : 0, 1 << s, 1 << l, r) / a * e[s]; return function (t, e, n) { var i = e * o[6] + n * o[7] + 1; t[0] = (e * o[0] + n * o[1] + o[2]) / i, t[1] = (e * o[3] + n * o[4] + o[5]) / i } } } }, function (t, e, n) { var i = n(22); var r = function () { this._track = [] }; function a (t) { var e = t[1][0] - t[0][0]; var n = t[1][1] - t[0][1]; return Math.sqrt(e * e + n * n) }r.prototype = { constructor: r, recognize: function (t, e, n) { return this._doTrack(t, e, n), this._recognize(t) }, clear: function () { return this._track.length = 0, this }, _doTrack: function (t, e, n) { var r = t.touches; if (r) { for (var a = { points: [], touches: [], target: e, event: t }, o = 0, s = r.length; o < s; o++) { var l = r[o]; var u = i.clientToLocal(n, l, {}); a.points.push([u.zrX, u.zrY]), a.touches.push(l) } this._track.push(a) } }, _recognize: function (t) { for (var e in o) if (o.hasOwnProperty(e)) { var n = o[e](this._track, t); if (n) return n } } }; var o = { pinch: function (t, e) { var n = t.length; if (n) { var i; var r = (t[n - 1] || {}).points; var o = (t[n - 2] || {}).points || r; if (o && o.length > 1 && r && r.length > 1) { var s = a(r) / a(o); !isFinite(s) && (s = 1), e.pinchScale = s; var l = [((i = r)[0][0] + i[1][0]) / 2, (i[0][1] + i[1][1]) / 2]; return e.pinchX = l[0], e.pinchY = l[1], { type: 'pinch', target: t[0].target, event: e } } } } }; var s = r; t.exports = s }, function (t, e, n) { var i = n(0); var r = n(11); var a = n(42); var o = n(87); function s (t, e) { return t.zlevel === e.zlevel ? t.z === e.z ? t.z2 - e.z2 : t.z - e.z : t.zlevel - e.zlevel } var l = function () { this._roots = [], this._displayList = [], this._displayListLen = 0 }; l.prototype = { constructor: l, traverse: function (t, e) { for (var n = 0; n < this._roots.length; n++) this._roots[n].traverse(t, e) }, getDisplayList: function (t, e) { return e = e || !1, t && this.updateDisplayList(e), this._displayList }, updateDisplayList: function (t) { this._displayListLen = 0; for (var e = this._roots, n = this._displayList, i = 0, a = e.length; i < a; i++) this._updateAndAddDisplayable(e[i], null, t); n.length = this._displayListLen, r.canvasSupported && o(n, s) }, _updateAndAddDisplayable: function (t, e, n) { if (!t.ignore || n) { t.beforeUpdate(), t.__dirty && t.update(), t.afterUpdate(); var i = t.clipPath; if (i) { e = e ? e.slice() : []; for (var r = i, a = t; r;)r.parent = a, r.updateTransform(), e.push(r), a = r, r = r.clipPath } if (t.isGroup) { for (var o = t._children, s = 0; s < o.length; s++) { var l = o[s]; t.__dirty && (l.__dirty = !0), this._updateAndAddDisplayable(l, e, n) }t.__dirty = !1 } else t.__clipPaths = e, this._displayList[this._displayListLen++] = t } }, addRoot: function (t) { t.__storage !== this && (t instanceof a && t.addChildrenToStorage(this), this.addToStorage(t), this._roots.push(t)) }, delRoot: function (t) { if (t == null) { for (var e = 0; e < this._roots.length; e++) { var n = this._roots[e]; n instanceof a && n.delChildrenFromStorage(this) } return this._roots = [], this._displayList = [], void (this._displayListLen = 0) } if (t instanceof Array) { e = 0; for (var r = t.length; e < r; e++) this.delRoot(t[e]) } else { var o = i.indexOf(this._roots, t); o >= 0 && (this.delFromStorage(t), this._roots.splice(o, 1), t instanceof a && t.delChildrenFromStorage(this)) } }, addToStorage: function (t) { return t && (t.__storage = this, t.dirty(!1)), this }, delFromStorage: function (t) { return t && (t.__storage = null), this }, dispose: function () { this._renderList = this._roots = null }, displayableSortFunc: s }; var u = l; t.exports = u }, function (t, e, n) { var i = n(132); var r = n(53); var a = n(0); var o = a.isString; var s = a.isFunction; var l = a.isObject; var u = a.isArrayLike; var c = a.indexOf; var h = function () { this.animators = [] }; function d (t, e, n, i, r, a, c, h) { o(i) ? (a = r, r = i, i = 0) : s(r) ? (a = r, r = 'linear', i = 0) : s(i) ? (a = i, i = 0) : s(n) ? (a = n, n = 500) : n || (n = 500), t.stopAnimation(), (function t (e, n, i, r, a, o, s) { var c = {}; var h = 0; for (var d in r)r.hasOwnProperty(d) && (i[d] != null ? l(r[d]) && !u(r[d]) ? t(e, n ? n + '.' + d : d, i[d], r[d], a, o, s) : (s ? (c[d] = i[d], f(e, n, d, r[d])) : c[d] = r[d], h++) : r[d] == null || s || f(e, n, d, r[d])); h > 0 && e.animate(n, !1).when(a == null ? 500 : a, c).delay(o || 0) }(t, '', t, e, n, i, h)); var d = t.animators.slice(); var p = d.length; function g () { --p || a && a() }p || a && a(); for (var v = 0; v < d.length; v++)d[v].done(g).start(r, c) } function f (t, e, n, i) { if (e) { var r = {}; r[e] = {}, r[e][n] = i, t.attr(r) } else t.attr(n, i) }h.prototype = { constructor: h, animate: function (t, e) { var n; var a = !1; var o = this; var s = this.__zr; if (t) { var l = t.split('.'); var u = o; a = l[0] === 'shape'; for (var h = 0, d = l.length; h < d; h++)u && (u = u[l[h]]); u && (n = u) } else n = o; if (n) { var f = o.animators; var p = new i(n, e); return p.during(function (t) { o.dirty(a) }).done(function () { f.splice(c(f, p), 1) }), f.push(p), s && s.animation.addAnimator(p), p }r('Property "' + t + '" is not existed in element ' + o.id) }, stopAnimation: function (t) { for (var e = this.animators, n = e.length, i = 0; i < n; i++)e[i].stop(t); return e.length = 0, this }, animateTo: function (t, e, n, i, r, a) { d(this, t, e, n, i, r, a) }, animateFrom: function (t, e, n, i, r, a) { d(this, t, e, n, i, r, a, !0) } }; var p = h; t.exports = p }, function (t, e, n) { var i = n(238); function r (t) { this._target = t.target, this._life = t.life || 1e3, this._delay = t.delay || 0, this._initialized = !1, this.loop = t.loop != null && t.loop, this.gap = t.gap || 0, this.easing = t.easing || 'Linear', this.onframe = t.onframe, this.ondestroy = t.ondestroy, this.onrestart = t.onrestart, this._pausedTime = 0, this._paused = !1 }r.prototype = { constructor: r, step: function (t, e) { if (this._initialized || (this._startTime = t + this._delay, this._initialized = !0), this._paused) this._pausedTime += e; else { var n = (t - this._startTime - this._pausedTime) / this._life; if (!(n < 0)) { n = Math.min(n, 1); var r = this.easing; var a = typeof r === 'string' ? i[r] : r; var o = typeof a === 'function' ? a(n) : n; return this.fire('frame', o), n === 1 ? this.loop ? (this.restart(t), 'restart') : (this._needsRemove = !0, 'destroy') : null } } }, restart: function (t) { var e = (t - this._startTime - this._pausedTime) % this._life; this._startTime = t - e + this.gap, this._pausedTime = 0, this._needsRemove = !1 }, fire: function (t, e) { this[t = 'on' + t] && this[t](this._target, e) }, pause: function () { this._paused = !0 }, resume: function () { this._paused = !1 } }; var a = r; t.exports = a }, function (t, e) { var n = { linear: function (t) { return t }, quadraticIn: function (t) { return t * t }, quadraticOut: function (t) { return t * (2 - t) }, quadraticInOut: function (t) { return (t *= 2) < 1 ? 0.5 * t * t : -0.5 * (--t * (t - 2) - 1) }, cubicIn: function (t) { return t * t * t }, cubicOut: function (t) { return --t * t * t + 1 }, cubicInOut: function (t) { return (t *= 2) < 1 ? 0.5 * t * t * t : 0.5 * ((t -= 2) * t * t + 2) }, quarticIn: function (t) { return t * t * t * t }, quarticOut: function (t) { return 1 - --t * t * t * t }, quarticInOut: function (t) { return (t *= 2) < 1 ? 0.5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2) }, quinticIn: function (t) { return t * t * t * t * t }, quinticOut: function (t) { return --t * t * t * t * t + 1 }, quinticInOut: function (t) { return (t *= 2) < 1 ? 0.5 * t * t * t * t * t : 0.5 * ((t -= 2) * t * t * t * t + 2) }, sinusoidalIn: function (t) { return 1 - Math.cos(t * Math.PI / 2) }, sinusoidalOut: function (t) { return Math.sin(t * Math.PI / 2) }, sinusoidalInOut: function (t) { return 0.5 * (1 - Math.cos(Math.PI * t)) }, exponentialIn: function (t) { return t === 0 ? 0 : Math.pow(1024, t - 1) }, exponentialOut: function (t) { return t === 1 ? 1 : 1 - Math.pow(2, -10 * t) }, exponentialInOut: function (t) { return t === 0 ? 0 : t === 1 ? 1 : (t *= 2) < 1 ? 0.5 * Math.pow(1024, t - 1) : 0.5 * (2 - Math.pow(2, -10 * (t - 1))) }, circularIn: function (t) { return 1 - Math.sqrt(1 - t * t) }, circularOut: function (t) { return Math.sqrt(1 - --t * t) }, circularInOut: function (t) { return (t *= 2) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1) }, elasticIn: function (t) { var e; var n = 0.1; return t === 0 ? 0 : t === 1 ? 1 : (!n || n < 1 ? (n = 1, e = 0.1) : e = 0.4 * Math.asin(1 / n) / (2 * Math.PI), -n * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / 0.4)) }, elasticOut: function (t) { var e; var n = 0.1; return t === 0 ? 0 : t === 1 ? 1 : (!n || n < 1 ? (n = 1, e = 0.1) : e = 0.4 * Math.asin(1 / n) / (2 * Math.PI), n * Math.pow(2, -10 * t) * Math.sin((t - e) * (2 * Math.PI) / 0.4) + 1) }, elasticInOut: function (t) { var e; var n = 0.1; return t === 0 ? 0 : t === 1 ? 1 : (!n || n < 1 ? (n = 1, e = 0.1) : e = 0.4 * Math.asin(1 / n) / (2 * Math.PI), (t *= 2) < 1 ? n * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / 0.4) * -0.5 : n * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / 0.4) * 0.5 + 1) }, backIn: function (t) { var e = 1.70158; return t * t * ((e + 1) * t - e) }, backOut: function (t) { var e = 1.70158; return --t * t * ((e + 1) * t + e) + 1 }, backInOut: function (t) { var e = 2.5949095; return (t *= 2) < 1 ? t * t * ((e + 1) * t - e) * 0.5 : 0.5 * ((t -= 2) * t * ((e + 1) * t + e) + 2) }, bounceIn: function (t) { return 1 - n.bounceOut(1 - t) }, bounceOut: function (t) { return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + 0.75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + 0.9375 : 7.5625 * (t -= 2.625 / 2.75) * t + 0.984375 }, bounceInOut: function (t) { return t < 0.5 ? 0.5 * n.bounceIn(2 * t) : 0.5 * n.bounceOut(2 * t - 1) + 0.5 } }; var i = n; t.exports = i }, function (t, e, n) { var i = n(68).devicePixelRatio; var r = n(0); var a = n(53); var o = n(8); var s = n(87); var l = n(240); var u = n(136); var c = n(43); var h = n(11); function d (t) { return parseInt(t, 10) } var f = new o(0, 0, 0, 0); var p = new o(0, 0, 0, 0); var g = function (t, e, n) { this.type = 'canvas'; var a = !t.nodeName || t.nodeName.toUpperCase() === 'CANVAS'; this._opts = n = r.extend({}, n || {}), this.dpr = n.devicePixelRatio || i, this._singleCanvas = a, this.root = t; var o = t.style; o && (o['-webkit-tap-highlight-color'] = 'transparent', o['-webkit-user-select'] = o['user-select'] = o['-webkit-touch-callout'] = 'none', t.innerHTML = ''), this.storage = e; var s = this._zlevelList = []; var u = this._layers = {}; if (this._layerConfig = {}, this._needsManuallyCompositing = !1, a) { var c = t.width; var h = t.height; n.width != null && (c = n.width), n.height != null && (h = n.height), this.dpr = n.devicePixelRatio || 1, t.width = c * this.dpr, t.height = h * this.dpr, this._width = c, this._height = h; var d = new l(t, this, this.dpr); d.__builtin__ = !0, d.initContext(), u[314159] = d, d.zlevel = 314159, s.push(314159), this._domRoot = t } else { this._width = this._getSize(0), this._height = this._getSize(1); var f = this._domRoot = (function (t, e) { var n = document.createElement('div'); return n.style.cssText = ['position:relative', 'width:' + t + 'px', 'height:' + e + 'px', 'padding:0', 'margin:0', 'border-width:0'].join(';') + ';', n }(this._width, this._height)); t.appendChild(f) } this._hoverlayer = null, this._hoverElements = [] }; g.prototype = { constructor: g, getType: function () { return 'canvas' }, isSingleCanvas: function () { return this._singleCanvas }, getViewportRoot: function () { return this._domRoot }, getViewportRootOffset: function () { var t = this.getViewportRoot(); if (t) return { offsetLeft: t.offsetLeft || 0, offsetTop: t.offsetTop || 0 } }, refresh: function (t) { var e = this.storage.getDisplayList(!0); var n = this._zlevelList; this._redrawId = Math.random(), this._paintList(e, t, this._redrawId); for (var i = 0; i < n.length; i++) { var r = n[i]; var a = this._layers[r]; if (!a.__builtin__ && a.refresh) { var o = i === 0 ? this._backgroundColor : null; a.refresh(o) } } return this.refreshHover(), this }, addHover: function (t, e) { if (!t.__hoverMir) { var n = new t.constructor({ style: t.style, shape: t.shape, z: t.z, z2: t.z2, silent: t.silent }); return n.__from = t, t.__hoverMir = n, e && n.setStyle(e), this._hoverElements.push(n), n } }, removeHover: function (t) { var e = t.__hoverMir; var n = this._hoverElements; var i = r.indexOf(n, e); i >= 0 && n.splice(i, 1), t.__hoverMir = null }, clearHover: function (t) { for (var e = this._hoverElements, n = 0; n < e.length; n++) { var i = e[n].__from; i && (i.__hoverMir = null) }e.length = 0 }, refreshHover: function () { var t = this._hoverElements; var e = t.length; var n = this._hoverlayer; if (n && n.clear(), e) { s(t, this.storage.displayableSortFunc), n || (n = this._hoverlayer = this.getLayer(1e5)); var i = {}; n.ctx.save(); for (var r = 0; r < e;) { var a = t[r]; var o = a.__from; o && o.__zr ? (r++, o.invisible || (a.transform = o.transform, a.invTransform = o.invTransform, a.__clipPaths = o.__clipPaths, this._doPaintEl(a, n, !0, i))) : (t.splice(r, 1), o.__hoverMir = null, e--) }n.ctx.restore() } }, getHoverLayer: function () { return this.getLayer(1e5) }, _paintList: function (t, e, n) { if (this._redrawId === n) { e = e || !1, this._updateLayerStatus(t); var i = this._doPaintList(t, e); if (this._needsManuallyCompositing && this._compositeManually(), !i) { var r = this; u(function () { r._paintList(t, e, n) }) } } }, _compositeManually: function () { var t = this.getLayer(314159).ctx; var e = this._domRoot.width; var n = this._domRoot.height; t.clearRect(0, 0, e, n), this.eachBuiltinLayer(function (i) { i.virtual && t.drawImage(i.dom, 0, 0, e, n) }) }, _doPaintList: function (t, e) { for (var n = [], i = 0; i < this._zlevelList.length; i++) { var a = this._zlevelList[i]; (l = this._layers[a]).__builtin__ && l !== this._hoverlayer && (l.__dirty || e) && n.push(l) } for (var o = !0, s = 0; s < n.length; s++) { var l; var u = (l = n[s]).ctx; var c = {}; u.save(); var d = e ? l.__startIndex : l.__drawIndex; var f = !e && l.incremental && Date.now; var p = f && Date.now(); var g = l.zlevel === this._zlevelList[0] ? this._backgroundColor : null; if (l.__startIndex === l.__endIndex)l.clear(!1, g); else if (d === l.__startIndex) { var v = t[d]; v.incremental && v.notClear && !e || l.clear(!1, g) }d === -1 && (console.error('For some unknown reason. drawIndex is -1'), d = l.__startIndex); for (var m = d; m < l.__endIndex; m++) { var y = t[m]; if (this._doPaintEl(y, l, e, c), y.__dirty = y.__dirtyText = !1, f) if (Date.now() - p > 15) break }l.__drawIndex = m, l.__drawIndex < l.__endIndex && (o = !1), c.prevElClipPaths && u.restore(), u.restore() } return h.wxa && r.each(this._layers, function (t) { t && t.ctx && t.ctx.draw && t.ctx.draw() }), o }, _doPaintEl: function (t, e, n, i) { var r = e.ctx; var a = t.transform; if ((e.__dirty || n) && !t.invisible && t.style.opacity !== 0 && (!a || a[0] || a[3]) && (!t.culling || !(function (t, e, n) { return f.copy(t.getBoundingRect()), t.transform && f.applyTransform(t.transform), p.width = e, p.height = n, !f.intersect(p) }(t, this._width, this._height)))) { var o = t.__clipPaths; var s = i.prevElClipPaths; s && !(function (t, e) { if (t === e) return !1; if (!t || !e || t.length !== e.length) return !0; for (var n = 0; n < t.length; n++) if (t[n] !== e[n]) return !0; return !1 }(o, s)) || (s && (r.restore(), i.prevElClipPaths = null, i.prevEl = null), o && (r.save(), (function (t, e) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.setTransform(e), e.beginPath(), i.buildPath(e, i.shape), e.clip(), i.restoreTransform(e) } }(o, r)), i.prevElClipPaths = o)), t.beforeBrush && t.beforeBrush(r), t.brush(r, i.prevEl || null), i.prevEl = t, t.afterBrush && t.afterBrush(r) } }, getLayer: function (t, e) { this._singleCanvas && !this._needsManuallyCompositing && (t = 314159); var n = this._layers[t]; return n || ((n = new l('zr_' + t, this, this.dpr)).zlevel = t, n.__builtin__ = !0, this._layerConfig[t] && r.merge(n, this._layerConfig[t], !0), e && (n.virtual = e), this.insertLayer(t, n), n.initContext()), n }, insertLayer: function (t, e) { var n = this._layers; var i = this._zlevelList; var r = i.length; var o = null; var s = -1; var l = this._domRoot; if (n[t])a('ZLevel ' + t + ' has been used already'); else if (function (t) { return !!t && (!!t.__builtin__ || typeof t.resize === 'function' && typeof t.refresh === 'function') }(e)) { if (r > 0 && t > i[0]) { for (s = 0; s < r - 1 && !(i[s] < t && i[s + 1] > t); s++);o = n[i[s]] } if (i.splice(s + 1, 0, t), n[t] = e, !e.virtual) if (o) { var u = o.dom; u.nextSibling ? l.insertBefore(e.dom, u.nextSibling) : l.appendChild(e.dom) } else l.firstChild ? l.insertBefore(e.dom, l.firstChild) : l.appendChild(e.dom) } else a('Layer of zlevel ' + t + ' is not valid') }, eachLayer: function (t, e) { var n; var i; var r = this._zlevelList; for (i = 0; i < r.length; i++)n = r[i], t.call(e, this._layers[n], n) }, eachBuiltinLayer: function (t, e) { var n; var i; var r; var a = this._zlevelList; for (r = 0; r < a.length; r++)i = a[r], (n = this._layers[i]).__builtin__ && t.call(e, n, i) }, eachOtherLayer: function (t, e) { var n; var i; var r; var a = this._zlevelList; for (r = 0; r < a.length; r++)i = a[r], (n = this._layers[i]).__builtin__ || t.call(e, n, i) }, getLayers: function () { return this._layers }, _updateLayerStatus: function (t) { function e (t) { i && (i.__endIndex !== t && (i.__dirty = !0), i.__endIndex = t) } if (this.eachBuiltinLayer(function (t, e) { t.__dirty = t.__used = !1 }), this._singleCanvas) for (var n = 1; n < t.length; n++) { if ((o = t[n]).zlevel !== t[n - 1].zlevel || o.incremental) { this._needsManuallyCompositing = !0; break } } var i = null; var r = 0; for (n = 0; n < t.length; n++) { var o; var s; var l = (o = t[n]).zlevel; o.incremental ? ((s = this.getLayer(l + 0.001, this._needsManuallyCompositing)).incremental = !0, r = 1) : s = this.getLayer(l + (r > 0 ? 0.01 : 0), this._needsManuallyCompositing), s.__builtin__ || a('ZLevel ' + l + ' has been used by unkown layer ' + s.id), s !== i && (s.__used = !0, s.__startIndex !== n && (s.__dirty = !0), s.__startIndex = n, s.incremental ? s.__drawIndex = -1 : s.__drawIndex = n, e(n), i = s), o.__dirty && (s.__dirty = !0, s.incremental && s.__drawIndex < 0 && (s.__drawIndex = n)) }e(n), this.eachBuiltinLayer(function (t, e) { !t.__used && t.getElementCount() > 0 && (t.__dirty = !0, t.__startIndex = t.__endIndex = t.__drawIndex = 0), t.__dirty && t.__drawIndex < 0 && (t.__drawIndex = t.__startIndex) }) }, clear: function () { return this.eachBuiltinLayer(this._clearLayer), this }, _clearLayer: function (t) { t.clear() }, setBackgroundColor: function (t) { this._backgroundColor = t }, configLayer: function (t, e) { if (e) { var n = this._layerConfig; n[t] ? r.merge(n[t], e, !0) : n[t] = e; for (var i = 0; i < this._zlevelList.length; i++) { var a = this._zlevelList[i]; if (a === t || a === t + 0.01) { var o = this._layers[a]; r.merge(o, n[t], !0) } } } }, delLayer: function (t) { var e = this._layers; var n = this._zlevelList; var i = e[t]; i && (i.dom.parentNode.removeChild(i.dom), delete e[t], n.splice(r.indexOf(n, t), 1)) }, resize: function (t, e) { if (this._domRoot.style) { var n = this._domRoot; n.style.display = 'none'; var i = this._opts; if (t != null && (i.width = t), e != null && (i.height = e), t = this._getSize(0), e = this._getSize(1), n.style.display = '', this._width !== t || e !== this._height) { for (var a in n.style.width = t + 'px', n.style.height = e + 'px', this._layers) this._layers.hasOwnProperty(a) && this._layers[a].resize(t, e); r.each(this._progressiveLayers, function (n) { n.resize(t, e) }), this.refresh(!0) } this._width = t, this._height = e } else { if (t == null || e == null) return; this._width = t, this._height = e, this.getLayer(314159).resize(t, e) } return this }, clearLayer: function (t) { var e = this._layers[t]; e && e.clear() }, dispose: function () { this.root.innerHTML = '', this.root = this.storage = this._domRoot = this._layers = null }, getRenderedCanvas: function (t) { if (t = t || {}, this._singleCanvas && !this._compositeManually) return this._layers[314159].dom; var e = new l('image', this, t.pixelRatio || this.dpr); if (e.initContext(), e.clear(!1, t.backgroundColor || this._backgroundColor), t.pixelRatio <= this.dpr) { this.refresh(); var n = e.dom.width; var i = e.dom.height; var r = e.ctx; this.eachLayer(function (t) { t.__builtin__ ? r.drawImage(t.dom, 0, 0, n, i) : t.renderToCanvas && (e.ctx.save(), t.renderToCanvas(e.ctx), e.ctx.restore()) }) } else for (var a = {}, o = this.storage.getDisplayList(!0), s = 0; s < o.length; s++) { var u = o[s]; this._doPaintEl(u, e, !0, a) } return e.dom }, getWidth: function () { return this._width }, getHeight: function () { return this._height }, _getSize: function (t) { var e = this._opts; var n = ['width', 'height'][t]; var i = ['clientWidth', 'clientHeight'][t]; var r = ['paddingLeft', 'paddingTop'][t]; var a = ['paddingRight', 'paddingBottom'][t]; if (e[n] != null && e[n] !== 'auto') return parseFloat(e[n]); var o = this.root; var s = document.defaultView.getComputedStyle(o); return (o[i] || d(s[n]) || d(o.style[n])) - (d(s[r]) || 0) - (d(s[a]) || 0) | 0 }, pathToImage: function (t, e) { e = e || this.dpr; var n = document.createElement('canvas'); var i = n.getContext('2d'); var r = t.getBoundingRect(); var a = t.style; var o = a.shadowBlur * e; var s = a.shadowOffsetX * e; var l = a.shadowOffsetY * e; var u = a.hasStroke() ? a.lineWidth : 0; var h = Math.max(u / 2, -s + o); var d = Math.max(u / 2, s + o); var f = Math.max(u / 2, -l + o); var p = Math.max(u / 2, l + o); var g = r.width + h + d; var v = r.height + f + p; n.width = g * e, n.height = v * e, i.scale(e, e), i.clearRect(0, 0, g, v), i.dpr = e; var m = { position: t.position, rotation: t.rotation, scale: t.scale }; t.position = [h - r.x, f - r.y], t.rotation = 0, t.scale = [1, 1], t.updateTransform(), t && t.brush(i); var y = new c({ style: { x: 0, y: 0, image: n } }); return m.position != null && (y.position = t.position = m.position), m.rotation != null && (y.rotation = t.rotation = m.rotation), m.scale != null && (y.scale = t.scale = m.scale), y } }; var v = g; t.exports = v }, function (t, e, n) { var i = n(0); var r = n(68).devicePixelRatio; var a = n(88); var o = n(135); function s () { return !1 } function l (t, e, n) { var r = i.createCanvas(); var a = e.getWidth(); var o = e.getHeight(); var s = r.style; return s && (s.position = 'absolute', s.left = 0, s.top = 0, s.width = a + 'px', s.height = o + 'px', r.setAttribute('data-zr-dom-id', t)), r.width = a * n, r.height = o * n, r } var u = function (t, e, n) { var a; n = n || r, typeof t === 'string' ? a = l(t, e, n) : i.isObject(t) && (t = (a = t).id), this.id = t, this.dom = a; var o = a.style; o && (a.onselectstart = s, o['-webkit-user-select'] = 'none', o['user-select'] = 'none', o['-webkit-touch-callout'] = 'none', o['-webkit-tap-highlight-color'] = 'rgba(0,0,0,0)', o.padding = 0, o.margin = 0, o['border-width'] = 0), this.domBack = null, this.ctxBack = null, this.painter = e, this.config = null, this.clearColor = 0, this.motionBlur = !1, this.lastFrameAlpha = 0.7, this.dpr = n }; u.prototype = { constructor: u, __dirty: !0, __used: !1, __drawIndex: 0, __startIndex: 0, __endIndex: 0, incremental: !1, getElementCount: function () { return this.__endIndex - this.__startIndex }, initContext: function () { this.ctx = this.dom.getContext('2d'), this.ctx.dpr = this.dpr }, createBackBuffer: function () { var t = this.dpr; this.domBack = l('back-' + this.id, this.painter, t), this.ctxBack = this.domBack.getContext('2d'), t !== 1 && this.ctxBack.scale(t, t) }, resize: function (t, e) { var n = this.dpr; var i = this.dom; var r = i.style; var a = this.domBack; r && (r.width = t + 'px', r.height = e + 'px'), i.width = t * n, i.height = e * n, a && (a.width = t * n, a.height = e * n, n !== 1 && this.ctxBack.scale(n, n)) }, clear: function (t, e) { var n; var i = this.dom; var r = this.ctx; var s = i.width; var l = i.height; var u = (e = e || this.clearColor, this.motionBlur && !t); var c = this.lastFrameAlpha; var h = this.dpr; (u && (this.domBack || this.createBackBuffer(), this.ctxBack.globalCompositeOperation = 'copy', this.ctxBack.drawImage(i, 0, 0, s / h, l / h)), r.clearRect(0, 0, s, l), e && e !== 'transparent') && (e.colorStops ? (n = e.__canvasGradient || a.getGradient(r, e, { x: 0, y: 0, width: s, height: l }), e.__canvasGradient = n) : e.image && (n = o.prototype.getCanvasPattern.call(e, r)), r.save(), r.fillStyle = n || e, r.fillRect(0, 0, s, l), r.restore()); if (u) { var d = this.domBack; r.save(), r.globalAlpha = c, r.drawImage(d, 0, 0, s, l), r.restore() } } }; var c = u; t.exports = c }, function (t, e, n) { var i = n(0); var r = n(22).Dispatcher; var a = n(136); var o = n(132); var s = function (t) { t = t || {}, this.stage = t.stage || {}, this.onframe = t.onframe || function () {}, this._clips = [], this._running = !1, this._time, this._pausedTime, this._pauseStart, this._paused = !1, r.call(this) }; s.prototype = { constructor: s, addClip: function (t) { this._clips.push(t) }, addAnimator: function (t) { t.animation = this; for (var e = t.getClips(), n = 0; n < e.length; n++) this.addClip(e[n]) }, removeClip: function (t) { var e = i.indexOf(this._clips, t); e >= 0 && this._clips.splice(e, 1) }, removeAnimator: function (t) { for (var e = t.getClips(), n = 0; n < e.length; n++) this.removeClip(e[n]); t.animation = null }, _update: function () { for (var t = (new Date()).getTime() - this._pausedTime, e = t - this._time, n = this._clips, i = n.length, r = [], a = [], o = 0; o < i; o++) { var s = n[o]; var l = s.step(t, e); l && (r.push(l), a.push(s)) } for (o = 0; o < i;)n[o]._needsRemove ? (n[o] = n[i - 1], n.pop(), i--) : o++; i = r.length; for (o = 0; o < i; o++)a[o].fire(r[o]); this._time = t, this.onframe(e), this.trigger('frame', e), this.stage.update && this.stage.update() }, _startLoop: function () { var t = this; this._running = !0, a(function e () { t._running && (a(e), !t._paused && t._update()) }) }, start: function () { this._time = (new Date()).getTime(), this._pausedTime = 0, this._startLoop() }, stop: function () { this._running = !1 }, pause: function () { this._paused || (this._pauseStart = (new Date()).getTime(), this._paused = !0) }, resume: function () { this._paused && (this._pausedTime += (new Date()).getTime() - this._pauseStart, this._paused = !1) }, clear: function () { this._clips = [] }, isFinished: function () { return !this._clips.length }, animate: function (t, e) { var n = new o(t, (e = e || {}).loop, e.getter, e.setter); return this.addAnimator(n), n } }, i.mixin(s, r); var l = s; t.exports = l }, function (t, e, n) { var i = n(22); var r = i.addEventListener; var a = i.removeEventListener; var o = i.normalizeEvent; var s = n(0); var l = n(34); var u = n(11); var c = ['click', 'dblclick', 'mousewheel', 'mouseout', 'mouseup', 'mousedown', 'mousemove', 'contextmenu']; var h = ['touchstart', 'touchend', 'touchmove']; var d = { pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1 }; var f = s.map(c, function (t) { var e = t.replace('mouse', 'pointer'); return d[e] ? e : t }); function p (t) { return t === 'mousewheel' && u.browser.firefox ? 'DOMMouseScroll' : t } function g (t) { t._touching = !0, clearTimeout(t._touchTimer), t._touchTimer = setTimeout(function () { t._touching = !1 }, 700) } var v = { mousemove: function (t) { t = o(this.dom, t), this.trigger('mousemove', t) }, mouseout: function (t) { var e = (t = o(this.dom, t)).toElement || t.relatedTarget; if (e !== this.dom) for (;e && e.nodeType !== 9;) { if (e === this.dom) return; e = e.parentNode } this.trigger('mouseout', t) }, touchstart: function (t) { (t = o(this.dom, t)).zrByTouch = !0, this._lastTouchMoment = new Date(), this.handler.processGesture(t, 'start'), v.mousemove.call(this, t), v.mousedown.call(this, t), g(this) }, touchmove: function (t) { (t = o(this.dom, t)).zrByTouch = !0, this.handler.processGesture(t, 'change'), v.mousemove.call(this, t), g(this) }, touchend: function (t) { (t = o(this.dom, t)).zrByTouch = !0, this.handler.processGesture(t, 'end'), v.mouseup.call(this, t), +new Date() - this._lastTouchMoment < 300 && v.click.call(this, t), g(this) }, pointerdown: function (t) { v.mousedown.call(this, t) }, pointermove: function (t) { m(t) || v.mousemove.call(this, t) }, pointerup: function (t) { v.mouseup.call(this, t) }, pointerout: function (t) { m(t) || v.mouseout.call(this, t) } }; function m (t) { var e = t.pointerType; return e === 'pen' || e === 'touch' } function y (t) { var e; function n (e, n) { s.each(e, function (e) { r(t, p(e), n._handlers[e]) }, n) }l.call(this), this.dom = t, this._touching = !1, this._touchTimer, this._handlers = {}, e = this, s.each(h, function (t) { e._handlers[t] = s.bind(v[t], e) }), s.each(f, function (t) { e._handlers[t] = s.bind(v[t], e) }), s.each(c, function (t) { e._handlers[t] = (function (t, e) { return function () { if (!e._touching) return t.apply(e, arguments) } }(v[t], e)) }), u.pointerEventsSupported ? n(f, this) : (u.touchEventsSupported && n(h, this), n(c, this)) }s.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (t) { v[t] = function (e) { e = o(this.dom, e), this.trigger(t, e) } }); var x = y.prototype; x.dispose = function () { for (var t = c.concat(h), e = 0; e < t.length; e++) { var n = t[e]; a(this.dom, p(n), this._handlers[n]) } }, x.setCursor = function (t) { this.dom.style && (this.dom.style.cursor = t || 'default') }, s.mixin(y, l); var _ = y; t.exports = _ }, function (t, e, n) { var i = n(44)([['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]); var r = { getLineStyle: function (t) { var e = i(this, t); return e.lineDash = this.getLineDash(e.lineWidth), e }, getLineDash: function (t) { t == null && (t = 1); var e = this.get('type'); var n = Math.max(t, 2); var i = 4 * t; return e !== 'solid' && e != null && (e === 'dashed' ? [i, i] : [n, n]) } }; t.exports = r }, function (t, e, n) { var i = n(44)([['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']]); var r = { getAreaStyle: function (t, e) { return i(this, t, e) } }; t.exports = r }, function (t, e, n) { var i = n(17); var r = n(2); var a = ['textStyle', 'color']; var o = { getTextColor: function (t) { var e = this.ecModel; return this.getShallow('color') || (!t && e ? e.get(a) : null) }, getFont: function () { return r.getFont({ fontStyle: this.getShallow('fontStyle'), fontWeight: this.getShallow('fontWeight'), fontSize: this.getShallow('fontSize'), fontFamily: this.getShallow('fontFamily') }, this.ecModel) }, getTextRect: function (t) { return i.getBoundingRect(t, this.getFont(), this.getShallow('align'), this.getShallow('verticalAlign') || this.getShallow('baseline'), this.getShallow('padding'), this.getShallow('lineHeight'), this.getShallow('rich'), this.getShallow('truncateText')) } }; t.exports = o }, function (t, e, n) { var i = n(45); var r = n(141); var a = n(247); var o = n(142); var s = n(248); var l = n(143).normalizeRadian; var u = n(28); var c = n(144); var h = i.CMD; var d = 2 * Math.PI; var f = 1e-4; var p = [-1, -1, -1]; var g = [-1, -1]; function v (t, e, n, i, r, a, o, s, l, c) { if (c > e && c > i && c > a && c > s || c < e && c < i && c < a && c < s) return 0; var h; var d = u.cubicRootAt(e, i, a, s, c, p); if (d === 0) return 0; for (var f, v, m = 0, y = -1, x = 0; x < d; x++) { var _ = p[x]; var b = _ === 0 || _ === 1 ? 0.5 : 1; u.cubicAt(t, n, r, o, _) < l || (y < 0 && (y = u.cubicExtrema(e, i, a, s, g), g[1] < g[0] && y > 1 && (h = void 0, h = g[0], g[0] = g[1], g[1] = h), f = u.cubicAt(e, i, a, s, g[0]), y > 1 && (v = u.cubicAt(e, i, a, s, g[1]))), y === 2 ? _ < g[0] ? m += f < e ? b : -b : _ < g[1] ? m += v < f ? b : -b : m += s < v ? b : -b : _ < g[0] ? m += f < e ? b : -b : m += s < f ? b : -b) } return m } function m (t, e, n, i, r, a, o, s) { if (s > e && s > i && s > a || s < e && s < i && s < a) return 0; var l = u.quadraticRootAt(e, i, a, s, p); if (l === 0) return 0; var c = u.quadraticExtremum(e, i, a); if (c >= 0 && c <= 1) { for (var h = 0, d = u.quadraticAt(e, i, a, c), f = 0; f < l; f++) { var g = p[f] === 0 || p[f] === 1 ? 0.5 : 1; u.quadraticAt(t, n, r, p[f]) < o || (p[f] < c ? h += d < e ? g : -g : h += a < d ? g : -g) } return h }g = p[0] === 0 || p[0] === 1 ? 0.5 : 1; return u.quadraticAt(t, n, r, p[0]) < o ? 0 : a < e ? g : -g } function y (t, e, n, i, r, a, o, s) { if ((s -= e) > n || s < -n) return 0; var u = Math.sqrt(n * n - s * s); p[0] = -u, p[1] = u; var c = Math.abs(i - r); if (c < 1e-4) return 0; if (c % d < 1e-4) { i = 0, r = d; var h = a ? 1 : -1; return o >= p[0] + t && o <= p[1] + t ? h : 0 } if (a) { u = i; i = l(r), r = l(u) } else i = l(i), r = l(r); i > r && (r += d); for (var f = 0, g = 0; g < 2; g++) { var v = p[g]; if (v + t > o) { var m = Math.atan2(s, v); h = a ? 1 : -1; m < 0 && (m = d + m), (m >= i && m <= r || m + d >= i && m + d <= r) && (m > Math.PI / 2 && m < 1.5 * Math.PI && (h = -h), f += h) } } return f } function x (t, e, n, i, l) { for (var u, d, p = 0, g = 0, x = 0, _ = 0, b = 0, w = 0; w < t.length;) { var S = t[w++]; switch (S === h.M && w > 1 && (n || (p += c(g, x, _, b, i, l))), w === 1 && (_ = g = t[w], b = x = t[w + 1]), S) { case h.M:g = _ = t[w++], x = b = t[w++]; break; case h.L:if (n) { if (r.containStroke(g, x, t[w], t[w + 1], e, i, l)) return !0 } else p += c(g, x, t[w], t[w + 1], i, l) || 0; g = t[w++], x = t[w++]; break; case h.C:if (n) { if (a.containStroke(g, x, t[w++], t[w++], t[w++], t[w++], t[w], t[w + 1], e, i, l)) return !0 } else p += v(g, x, t[w++], t[w++], t[w++], t[w++], t[w], t[w + 1], i, l) || 0; g = t[w++], x = t[w++]; break; case h.Q:if (n) { if (o.containStroke(g, x, t[w++], t[w++], t[w], t[w + 1], e, i, l)) return !0 } else p += m(g, x, t[w++], t[w++], t[w], t[w + 1], i, l) || 0; g = t[w++], x = t[w++]; break; case h.A:var M = t[w++]; var I = t[w++]; var A = t[w++]; var T = t[w++]; var C = t[w++]; var D = t[w++]; w += 1; var L = 1 - t[w++]; var P = Math.cos(C) * A + M; var k = Math.sin(C) * T + I; w > 1 ? p += c(g, x, P, k, i, l) : (_ = P, b = k); var O = (i - M) * T / A + M; if (n) { if (s.containStroke(M, I, T, C, C + D, L, e, O, l)) return !0 } else p += y(M, I, T, C, C + D, L, O, l); g = Math.cos(C + D) * A + M, x = Math.sin(C + D) * T + I; break; case h.R:_ = g = t[w++], b = x = t[w++]; P = _ + t[w++], k = b + t[w++]; if (n) { if (r.containStroke(_, b, P, b, e, i, l) || r.containStroke(P, b, P, k, e, i, l) || r.containStroke(P, k, _, k, e, i, l) || r.containStroke(_, k, _, b, e, i, l)) return !0 } else p += c(P, b, P, k, i, l), p += c(_, k, _, b, i, l); break; case h.Z:if (n) { if (r.containStroke(g, x, _, b, e, i, l)) return !0 } else p += c(g, x, _, b, i, l); g = _, x = b } } return n || (u = x, d = b, Math.abs(u - d) < f) || (p += c(g, x, _, b, i, l) || 0), p !== 0 }e.contain = function (t, e, n) { return x(t, 0, !1, e, n) }, e.containStroke = function (t, e, n, i) { return x(t, e, !0, n, i) } }, function (t, e, n) { var i = n(28); e.containStroke = function (t, e, n, r, a, o, s, l, u, c, h) { if (u === 0) return !1; var d = u; return !(h > e + d && h > r + d && h > o + d && h > l + d || h < e - d && h < r - d && h < o - d && h < l - d || c > t + d && c > n + d && c > a + d && c > s + d || c < t - d && c < n - d && c < a - d && c < s - d) && i.cubicProjectPoint(t, e, n, r, a, o, s, l, c, h, null) <= d / 2 } }, function (t, e, n) { var i = n(143).normalizeRadian; var r = 2 * Math.PI; e.containStroke = function (t, e, n, a, o, s, l, u, c) { if (l === 0) return !1; var h = l; u -= t, c -= e; var d = Math.sqrt(u * u + c * c); if (d - h > n || d + h < n) return !1; if (Math.abs(a - o) % r < 1e-4) return !0; if (s) { var f = a; a = i(o), o = i(f) } else a = i(a), o = i(o); a > o && (o += r); var p = Math.atan2(c, u); return p < 0 && (p += r), p >= a && p <= o || p + r >= a && p + r <= o } }, function (t, e, n) { var i = n(45); var r = n(7).applyTransform; var a = i.CMD; var o = [[], [], []]; var s = Math.sqrt; var l = Math.atan2; t.exports = function (t, e) { var n; var i; var u; var c; var h; var d = t.data; var f = a.M; var p = a.C; var g = a.L; var v = a.R; var m = a.A; var y = a.Q; for (u = 0, c = 0; u < d.length;) { switch (n = d[u++], c = u, i = 0, n) { case f:case g:i = 1; break; case p:i = 3; break; case y:i = 2; break; case m:var x = e[4]; var _ = e[5]; var b = s(e[0] * e[0] + e[1] * e[1]); var w = s(e[2] * e[2] + e[3] * e[3]); var S = l(-e[1] / w, e[0] / b); d[u] *= b, d[u++] += x, d[u] *= w, d[u++] += _, d[u++] *= b, d[u++] *= w, d[u++] += S, d[u++] += S, c = u += 2; break; case v:M[0] = d[u++], M[1] = d[u++], r(M, M, e), d[c++] = M[0], d[c++] = M[1], M[0] += d[u++], M[1] += d[u++], r(M, M, e), d[c++] = M[0], d[c++] = M[1] } for (h = 0; h < i; h++) { var M; (M = o[h])[0] = d[u++], M[1] = d[u++], r(M, M, e), d[c++] = M[0], d[c++] = M[1] } } } }, function (t, e, n) { var i = n(10); var r = n(146); var a = i.extend({ type: 'sector', shape: { cx: 0, cy: 0, r0: 0, r: 0, startAngle: 0, endAngle: 2 * Math.PI, clockwise: !0 }, brush: r(i.prototype.brush), buildPath: function (t, e) { var n = e.cx; var i = e.cy; var r = Math.max(e.r0 || 0, 0); var a = Math.max(e.r, 0); var o = e.startAngle; var s = e.endAngle; var l = e.clockwise; var u = Math.cos(o); var c = Math.sin(o); t.moveTo(u * r + n, c * r + i), t.lineTo(u * a + n, c * a + i), t.arc(n, i, a, o, s, !l), t.lineTo(Math.cos(s) * r + n, Math.sin(s) * r + i), r !== 0 && t.arc(n, i, r, s, o, l), t.closePath() } }); t.exports = a }, function (t, e, n) { var i = n(10).extend({ type: 'ring', shape: { cx: 0, cy: 0, r: 0, r0: 0 }, buildPath: function (t, e) { var n = e.cx; var i = e.cy; var r = 2 * Math.PI; t.moveTo(n + e.r, i), t.arc(n, i, e.r, 0, r, !1), t.moveTo(n + e.r0, i), t.arc(n, i, e.r0, 0, r, !0) } }); t.exports = i }, function (t, e, n) { var i = n(7).distance; function r (t, e, n, i, r, a, o) { var s = 0.5 * (n - t); var l = 0.5 * (i - e); return (2 * (e - n) + s + l) * o + (-3 * (e - n) - 2 * s - l) * a + s * r + e }t.exports = function (t, e) { for (var n = t.length, a = [], o = 0, s = 1; s < n; s++)o += i(t[s - 1], t[s]); var l = o / 2; for (l = l < n ? n : l, s = 0; s < l; s++) { var u; var c; var h; var d = s / (l - 1) * (e ? n : n - 1); var f = Math.floor(d); var p = d - f; var g = t[f % n]; e ? (u = t[(f - 1 + n) % n], c = t[(f + 1) % n], h = t[(f + 2) % n]) : (u = t[f === 0 ? f : f - 1], c = t[f > n - 2 ? n - 1 : f + 1], h = t[f > n - 3 ? n - 1 : f + 2]); var v = p * p; var m = p * v; a.push([r(u[0], g[0], c[0], h[0], p, v, m), r(u[1], g[1], c[1], h[1], p, v, m)]) } return a } }, function (t, e, n) { var i = n(7); var r = i.min; var a = i.max; var o = i.scale; var s = i.distance; var l = i.add; var u = i.clone; var c = i.sub; t.exports = function (t, e, n, i) { var h; var d; var f; var p; var g = []; var v = []; var m = []; var y = []; if (i) { f = [1 / 0, 1 / 0], p = [-1 / 0, -1 / 0]; for (var x = 0, _ = t.length; x < _; x++)r(f, f, t[x]), a(p, p, t[x]); r(f, f, i[0]), a(p, p, i[1]) } for (x = 0, _ = t.length; x < _; x++) { var b = t[x]; if (n)h = t[x ? x - 1 : _ - 1], d = t[(x + 1) % _]; else { if (x === 0 || x === _ - 1) { g.push(u(t[x])); continue }h = t[x - 1], d = t[x + 1] }c(v, d, h), o(v, v, e); var w = s(b, h); var S = s(b, d); var M = w + S; M !== 0 && (w /= M, S /= M), o(m, v, -w), o(y, v, S); var I = l([], b, m); var A = l([], b, y); i && (a(I, I, f), r(I, I, p), a(A, A, f), r(A, A, p)), g.push(I), g.push(A) } return n && g.push(g.shift()), g } }, function (t, e, n) { var i = n(10); var r = n(7); var a = n(28); var o = a.quadraticSubdivide; var s = a.cubicSubdivide; var l = a.quadraticAt; var u = a.cubicAt; var c = a.quadraticDerivativeAt; var h = a.cubicDerivativeAt; var d = []; function f (t, e, n) { var i = t.cpx2; var r = t.cpy2; return i === null || r === null ? [(n ? h : u)(t.x1, t.cpx1, t.cpx2, t.x2, e), (n ? h : u)(t.y1, t.cpy1, t.cpy2, t.y2, e)] : [(n ? c : l)(t.x1, t.cpx1, t.x2, e), (n ? c : l)(t.y1, t.cpy1, t.y2, e)] } var p = i.extend({ type: 'bezier-curve', shape: { x1: 0, y1: 0, x2: 0, y2: 0, cpx1: 0, cpy1: 0, percent: 1 }, style: { stroke: '#000', fill: null }, buildPath: function (t, e) { var n = e.x1; var i = e.y1; var r = e.x2; var a = e.y2; var l = e.cpx1; var u = e.cpy1; var c = e.cpx2; var h = e.cpy2; var f = e.percent; f !== 0 && (t.moveTo(n, i), c == null || h == null ? (f < 1 && (o(n, l, r, f, d), l = d[1], r = d[2], o(i, u, a, f, d), u = d[1], a = d[2]), t.quadraticCurveTo(l, u, r, a)) : (f < 1 && (s(n, l, c, r, f, d), l = d[1], c = d[2], r = d[3], s(i, u, h, a, f, d), u = d[1], h = d[2], a = d[3]), t.bezierCurveTo(l, u, c, h, r, a))) }, pointAt: function (t) { return f(this.shape, t, !1) }, tangentAt: function (t) { var e = f(this.shape, t, !0); return r.normalize(e, e) } }); t.exports = p }, function (t, e, n) { var i = n(10).extend({ type: 'arc', shape: { cx: 0, cy: 0, r: 0, startAngle: 0, endAngle: 2 * Math.PI, clockwise: !0 }, style: { stroke: '#000', fill: null }, buildPath: function (t, e) { var n = e.cx; var i = e.cy; var r = Math.max(e.r, 0); var a = e.startAngle; var o = e.endAngle; var s = e.clockwise; var l = Math.cos(a); var u = Math.sin(a); t.moveTo(l * r + n, u * r + i), t.arc(n, i, r, a, o, !s) } }); t.exports = i }, function (t, e, n) { var i = n(10); var r = i.extend({ type: 'compound', shape: { paths: null }, _updatePathDirty: function () { for (var t = this.__dirtyPath, e = this.shape.paths, n = 0; n < e.length; n++)t = t || e[n].__dirtyPath; this.__dirtyPath = t, this.__dirty = this.__dirty || t }, beforeBrush: function () { this._updatePathDirty(); for (var t = this.shape.paths || [], e = this.getGlobalScale(), n = 0; n < t.length; n++)t[n].path || t[n].createPathProxy(), t[n].path.setScale(e[0], e[1], t[n].segmentIgnoreThreshold) }, buildPath: function (t, e) { for (var n = e.paths || [], i = 0; i < n.length; i++)n[i].buildPath(t, n[i].shape, !0) }, afterBrush: function () { for (var t = this.shape.paths || [], e = 0; e < t.length; e++)t[e].__dirtyPath = !1 }, getBoundingRect: function () { return this._updatePathDirty(), i.prototype.getBoundingRect.call(this) } }); t.exports = r }, function (t, e, n) { var i = n(0); var r = n(72); var a = function (t, e, n, i, a) { this.x = t == null ? 0.5 : t, this.y = e == null ? 0.5 : e, this.r = n == null ? 0.5 : n, this.type = 'radial', this.global = a || !1, r.call(this, i) }; a.prototype = { constructor: a }, i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { var i = n(44)([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['textPosition'], ['textAlign']]); var r = { getItemStyle: function (t, e) { var n = i(this, t, e); var r = this.getBorderLineDash(); return r && (n.lineDash = r), n }, getBorderLineDash: function () { var t = this.get('borderType'); return t === 'solid' || t == null ? null : t === 'dashed' ? [5, 5] : [1, 1] } }; t.exports = r }, function (t, e) { t.exports = { getBoxLayoutParams: function () { return { left: this.get('left'), top: this.get('top'), right: this.get('right'), bottom: this.get('bottom'), width: this.get('width'), height: this.get('height') } } } }, function (t, e) { var n = ''; typeof navigator !== 'undefined' && (n = navigator.platform || ''); var i = { color: ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'], gradientColor: ['#f6efa6', '#d88273', '#bf444c'], textStyle: { fontFamily: n.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif', fontSize: 12, fontStyle: 'normal', fontWeight: 'normal' }, blendMode: null, animation: 'auto', animationDuration: 1e3, animationDurationUpdate: 300, animationEasing: 'exponentialOut', animationEasingUpdate: 'cubicOut', animationThreshold: 2e3, progressiveThreshold: 3e3, progressive: 400, hoverLayerThreshold: 3e3, useUTC: !1 }; t.exports = i }, function (t, e, n) { var i = n(0); var r = n(4); var a = n(13); var o = i.each; var s = i.clone; var l = i.map; var u = i.merge; var c = /^(min|max)?(.+)$/; function h (t) { this._api = t, this._timelineOptions = [], this._mediaList = [], this._mediaDefault, this._currentMediaIndices = [], this._optionBackup, this._newBaseOption } function d (t, e, n) { var r; var a; var s = []; var l = []; var u = t.timeline; if (t.baseOption && (a = t.baseOption), (u || t.options) && (a = a || {}, s = (t.options || []).slice()), t.media) { a = a || {}; var c = t.media; o(c, function (t) { t && t.option && (t.query ? l.push(t) : r || (r = t)) }) } return a || (a = t), a.timeline || (a.timeline = u), o([a].concat(s).concat(i.map(l, function (t) { return t.option })), function (t) { o(e, function (e) { e(t, n) }) }), { baseOption: a, timelineOptions: s, mediaDefault: r, mediaList: l } } function f (t, e, n) { var r = { width: e, height: n, aspectratio: e / n }; var a = !0; return i.each(t, function (t, e) { var n = e.match(c); if (n && n[1] && n[2]) { var i = n[1]; var o = n[2].toLowerCase(); (function (t, e, n) { return n === 'min' ? t >= e : n === 'max' ? t <= e : t === e })(r[o], t, i) || (a = !1) } }), a }h.prototype = { constructor: h, setOption: function (t, e) { t && i.each(r.normalizeToArray(t.series), function (t) { t && t.data && i.isTypedArray(t.data) && i.setAsPrimitive(t.data) }), t = s(t); var n; var c; var h = this._optionBackup; var f = d.call(this, t, e, !h); this._newBaseOption = f.baseOption, h ? (n = h.baseOption, c = f.baseOption, o(c = c || {}, function (t, e) { if (t != null) { var i = n[e]; if (a.hasClass(e)) { t = r.normalizeToArray(t), i = r.normalizeToArray(i); var o = r.mappingToExists(i, t); n[e] = l(o, function (t) { return t.option && t.exist ? u(t.exist, t.option, !0) : t.exist || t.option }) } else n[e] = u(i, t, !0) } }), f.timelineOptions.length && (h.timelineOptions = f.timelineOptions), f.mediaList.length && (h.mediaList = f.mediaList), f.mediaDefault && (h.mediaDefault = f.mediaDefault)) : this._optionBackup = f }, mountOption: function (t) { var e = this._optionBackup; return this._timelineOptions = l(e.timelineOptions, s), this._mediaList = l(e.mediaList, s), this._mediaDefault = s(e.mediaDefault), this._currentMediaIndices = [], s(t ? e.baseOption : this._newBaseOption) }, getTimelineOption: function (t) { var e; var n = this._timelineOptions; if (n.length) { var i = t.getComponent('timeline'); i && (e = s(n[i.getCurrentIndex()], !0)) } return e }, getMediaOption: function (t) { var e; var n; var i = this._api.getWidth(); var r = this._api.getHeight(); var a = this._mediaList; var o = this._mediaDefault; var u = []; var c = []; if (!a.length && !o) return c; for (var h = 0, d = a.length; h < d; h++)f(a[h].query, i, r) && u.push(h); return !u.length && o && (u = [-1]), u.length && (e = u, n = this._currentMediaIndices, e.join(',') !== n.join(',')) && (c = l(u, function (t) { return s(t === -1 ? o.option : a[t].option) })), this._currentMediaIndices = u, c } }; var p = h; t.exports = p }, function (t, e, n) { var i = n(0); var r = i.each; var a = i.isArray; var o = i.isObject; var s = n(263); var l = n(4).normalizeToArray; function u (t) { r(c, function (e) { e[0] in t && !(e[1] in t) && (t[e[1]] = t[e[0]]) }) } var c = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']]; var h = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline']; t.exports = function (t, e) { s(t, e), t.series = l(t.series), r(t.series, function (t) { if (o(t)) { var e = t.type; if (e === 'line')t.clipOverflow != null && (t.clip = t.clipOverflow); else if (e === 'pie' || e === 'gauge')t.clockWise != null && (t.clockwise = t.clockWise); else if (e === 'gauge') { var n = (function (t, e) { e = e.split(','); for (var n = t, i = 0; i < e.length && (n = n && n[e[i]]) != null; i++);return n }(t, 'pointer.color')); n != null && (function (t, e, n, i) { e = e.split(','); for (var r, a = t, o = 0; o < e.length - 1; o++)a[r = e[o]] == null && (a[r] = {}), a = a[r]; (i || a[e[o]] == null) && (a[e[o]] = n) }(t, 'itemStyle.color', n)) }u(t) } }), t.dataRange && (t.visualMap = t.dataRange), r(h, function (e) { var n = t[e]; n && (a(n) || (n = [n]), r(n, function (t) { u(t) })) }) } }, function (t, e, n) { var i = n(0); var r = n(4); var a = i.each; var o = i.isObject; var s = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine']; function l (t) { var e = t && t.itemStyle; if (e) for (var n = 0, r = s.length; n < r; n++) { var a = s[n]; var o = e.normal; var l = e.emphasis; o && o[a] && (t[a] = t[a] || {}, t[a].normal ? i.merge(t[a].normal, o[a]) : t[a].normal = o[a], o[a] = null), l && l[a] && (t[a] = t[a] || {}, t[a].emphasis ? i.merge(t[a].emphasis, l[a]) : t[a].emphasis = l[a], l[a] = null) } } function u (t, e, n) { if (t && t[e] && (t[e].normal || t[e].emphasis)) { var r = t[e].normal; var a = t[e].emphasis; r && (n ? (t[e].normal = t[e].emphasis = null, i.defaults(t[e], r)) : t[e] = r), a && (t.emphasis = t.emphasis || {}, t.emphasis[e] = a) } } function c (t) { u(t, 'itemStyle'), u(t, 'lineStyle'), u(t, 'areaStyle'), u(t, 'label'), u(t, 'labelLine'), u(t, 'upperLabel'), u(t, 'edgeLabel') } function h (t, e) { var n = o(t) && t[e]; var i = o(n) && n.textStyle; if (i) for (var a = 0, s = r.TEXT_STYLE_OPTIONS.length; a < s; a++) { e = r.TEXT_STYLE_OPTIONS[a]; i.hasOwnProperty(e) && (n[e] = i[e]) } } function d (t) { t && (c(t), h(t, 'label'), t.emphasis && h(t.emphasis, 'label')) } function f (t) { return i.isArray(t) ? t : t ? [t] : [] } function p (t) { return (i.isArray(t) ? t[0] : t) || {} }t.exports = function (t, e) { a(f(t.series), function (t) { o(t) && (function (t) { if (o(t)) { l(t), c(t), h(t, 'label'), h(t, 'upperLabel'), h(t, 'edgeLabel'), t.emphasis && (h(t.emphasis, 'label'), h(t.emphasis, 'upperLabel'), h(t.emphasis, 'edgeLabel')), (n = t.markPoint) && (l(n), d(n)), (r = t.markLine) && (l(r), d(r)); var e = t.markArea; e && d(e); var n; var r; var a = t.data; if (t.type === 'graph') { a = a || t.nodes; var s = t.links || t.edges; if (s && !i.isTypedArray(s)) for (var f = 0; f < s.length; f++)d(s[f]); i.each(t.categories, function (t) { c(t) }) } if (a && !i.isTypedArray(a)) for (f = 0; f < a.length; f++)d(a[f]); if ((n = t.markPoint) && n.data) { var p = n.data; for (f = 0; f < p.length; f++)d(p[f]) } if ((r = t.markLine) && r.data) { var g = r.data; for (f = 0; f < g.length; f++)i.isArray(g[f]) ? (d(g[f][0]), d(g[f][1])) : d(g[f]) }t.type === 'gauge' ? (h(t, 'axisLabel'), h(t, 'title'), h(t, 'detail')) : t.type === 'treemap' ? (u(t.breadcrumb, 'itemStyle'), i.each(t.levels, function (t) { c(t) })) : t.type === 'tree' && c(t.leaves) } }(t)) }); var n = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar']; e && n.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis'), a(n, function (e) { a(f(t[e]), function (t) { t && (h(t, 'axisLabel'), h(t.axisPointer, 'label')) }) }), a(f(t.parallel), function (t) { var e = t && t.parallelAxisDefault; h(e, 'axisLabel'), h(e && e.axisPointer, 'label') }), a(f(t.calendar), function (t) { u(t, 'itemStyle'), h(t, 'dayLabel'), h(t, 'monthLabel'), h(t, 'yearLabel') }), a(f(t.radar), function (t) { h(t, 'name') }), a(f(t.geo), function (t) { o(t) && (d(t), a(f(t.regions), function (t) { d(t) })) }), a(f(t.timeline), function (t) { d(t), u(t, 'label'), u(t, 'itemStyle'), u(t, 'controlStyle', !0); var e = t.data; i.isArray(e) && i.each(e, function (t) { i.isObject(t) && (u(t, 'label'), u(t, 'itemStyle')) }) }), a(f(t.toolbox), function (t) { u(t, 'iconStyle'), a(t.feature, function (t) { u(t, 'iconStyle') }) }), h(p(t.axisPointer), 'label'), h(p(t.tooltip).axisPointer, 'label') } }, function (t, e, n) { var i = n(0); var r = i.createHashMap; var a = i.each; function o (t) { a(t, function (e, n) { var i = []; var r = [NaN, NaN]; var a = [e.stackResultDimension, e.stackedOverDimension]; var o = e.data; var s = e.isStackedByIndex; var l = o.map(a, function (a, l, u) { var c; var h; var d = o.get(e.stackedDimension, u); if (isNaN(d)) return r; s ? h = o.getRawIndex(u) : c = o.get(e.stackedByDimension, u); for (var f = NaN, p = n - 1; p >= 0; p--) { var g = t[p]; if (s || (h = g.data.rawIndexOf(g.stackedByDimension, c)), h >= 0) { var v = g.data.getByRawIndex(g.stackResultDimension, h); if (d >= 0 && v > 0 || d <= 0 && v < 0) { d += v, f = v; break } } } return i[0] = d, i[1] = f, i }); o.hostModel.setData(l), e.data = l }) }t.exports = function (t) { var e = r(); t.eachSeries(function (t) { var n = t.get('stack'); if (n) { var i = e.get(n) || e.set(n, []); var r = t.getData(); var a = { stackResultDimension: r.getCalculationInfo('stackResultDimension'), stackedOverDimension: r.getCalculationInfo('stackedOverDimension'), stackedDimension: r.getCalculationInfo('stackedDimension'), stackedByDimension: r.getCalculationInfo('stackedByDimension'), isStackedByIndex: r.getCalculationInfo('isStackedByIndex'), data: r, seriesModel: t }; if (!a.stackedDimension || !a.isStackedByIndex && !a.stackedByDimension) return; i.length && r.setCalculationInfo('stackedOnSeries', i[i.length - 1].seriesModel), i.push(a) } }), e.each(o) } }, function (t, e, n) { var i = n(72); var r = { createOnAllSeries: !0, performRawSeries: !0, reset: function (t, e) { var n = t.getData(); var r = (t.visualColorAccessPath || 'itemStyle.color').split('.'); var a = t.get(r) || t.getColorFromPalette(t.name, null, e.getSeriesCount()); n.setVisual('color', a); var o = (t.visualBorderColorAccessPath || 'itemStyle.borderColor').split('.'); var s = t.get(o); if (n.setVisual('borderColor', s), !e.isSeriesFiltered(t)) { typeof a !== 'function' || a instanceof i || n.each(function (e) { n.setItemVisual(e, 'color', a(t.getDataParams(e))) }); return { dataEach: n.hasItemOption ? function (t, e) { var n = t.getItemModel(e); var i = n.get(r, !0); var a = n.get(o, !0); i != null && t.setItemVisual(e, 'color', i), a != null && t.setItemVisual(e, 'borderColor', a) } : null } } } }; t.exports = r }, function (t, e, n) { var i = n(0); var r = n(30); var a = n(36).retrieveRawValue; t.exports = function (t, e) { var n = e.getModel('aria'); if (n.get('show')) if (n.get('description'))t.setAttribute('aria-label', n.get('description')); else { var o = 0; e.eachSeries(function (t, e) { ++o }, this); var s; var l = n.get('data.maxCount') || 10; var u = n.get('series.maxCount') || 10; var c = Math.min(o, u); if (!(o < 1)) { var h = (function () { var t = e.getModel('title').option; t && t.length && (t = t[0]); return t && t.text }()); s = h ? f(p('general.withTitle'), { title: h }) : p('general.withoutTitle'); var d = []; s += f(p(o > 1 ? 'series.multiple.prefix' : 'series.single.prefix'), { seriesCount: o }), e.eachSeries(function (t, e) { if (e < c) { var n; var i = t.get('name'); var s = 'series.' + (o > 1 ? 'multiple' : 'single') + '.'; n = f(n = p(i ? s + 'withName' : s + 'withoutName'), { seriesId: t.seriesIndex, seriesName: t.get('name'), seriesType: (y = t.subType, r.series.typeNames[y] || '自定义图') }); var u = t.getData(); window.data = u, u.count() > l ? n += f(p('data.partialData'), { displayCnt: l }) : n += p('data.allData'); for (var h = [], g = 0; g < u.count(); g++) if (g < l) { var v = u.getName(g); var m = a(u, g); h.push(f(p(v ? 'data.withName' : 'data.withoutName'), { name: v, value: m })) }n += h.join(p('data.separator.middle')) + p('data.separator.end'), d.push(n) } var y }), s += d.join(p('series.multiple.separator.middle')) + p('series.multiple.separator.end'), t.setAttribute('aria-label', s) } } function f (t, e) { if (typeof t !== 'string') return t; var n = t; return i.each(e, function (t, e) { n = n.replace(new RegExp('\\{\\s*' + e + '\\s*\\}', 'g'), t) }), n } function p (t) { var e = n.get(t); if (e == null) { for (var i = t.split('.'), a = r.aria, o = 0; o < i.length; ++o)a = a[i[o]]; return a } return e } } }, function (t, e, n) { var i = n(0); var r = n(2); var a = Math.PI; t.exports = function (t, e) { e = e || {}, i.defaults(e, { text: 'loading', color: '#c23531', textColor: '#000', maskColor: 'rgba(255, 255, 255, 0.8)', zlevel: 0 }); var n = new r.Rect({ style: { fill: e.maskColor }, zlevel: e.zlevel, z: 1e4 }); var o = new r.Arc({ shape: { startAngle: -a / 2, endAngle: -a / 2 + 0.1, r: 10 }, style: { stroke: e.color, lineCap: 'round', lineWidth: 5 }, zlevel: e.zlevel, z: 10001 }); var s = new r.Rect({ style: { fill: 'none', text: e.text, textPosition: 'right', textDistance: 10, textFill: e.textColor }, zlevel: e.zlevel, z: 10001 }); o.animateShape(!0).when(1e3, { endAngle: 3 * a / 2 }).start('circularInOut'), o.animateShape(!0).when(1e3, { startAngle: 3 * a / 2 }).delay(300).start('circularInOut'); var l = new r.Group(); return l.add(o), l.add(s), l.add(n), l.resize = function () { var e = t.getWidth() / 2; var i = t.getHeight() / 2; o.setShape({ cx: e, cy: i }); var r = o.shape.r; s.setShape({ x: e - r, y: i - r, width: 2 * r, height: 2 * r }), n.setShape({ x: 0, y: 0, width: t.getWidth(), height: t.getHeight() }) }, l.resize(), l } }, function (t, e, n) { var i = n(0); var r = i.each; var a = i.map; var o = i.isFunction; var s = i.createHashMap; var l = i.noop; var u = n(95).createTask; var c = n(55).getUID; var h = n(139); var d = n(153); var f = n(4).normalizeToArray; function p (t, e, n, i) { this.ecInstance = t, this.api = e, this.unfinished; n = this._dataProcessorHandlers = n.slice(), i = this._visualHandlers = i.slice(); this._allHandlers = n.concat(i), this._stageTaskMap = s() } var g = p.prototype; function v (t, e, n, i, a) { var o; function s (t, e) { return t.setDirty && (!t.dirtyMap || t.dirtyMap.get(e.__pipeline.id)) }a = a || {}, r(e, function (e, r) { if (!a.visualType || a.visualType === e.visualType) { var l = t._stageTaskMap.get(e.uid); var u = l.seriesTaskMap; var c = l.overallTask; if (c) { var h; var d = c.agentStubMap; d.each(function (t) { s(a, t) && (t.dirty(), h = !0) }), h && c.dirty(), m(c, i); var f = t.getPerformArgs(c, a.block); d.each(function (t) { t.perform(f) }), o |= c.perform(f) } else u && u.each(function (r, l) { s(a, r) && r.dirty(); var u = t.getPerformArgs(r, a.block); u.skip = !e.performRawSeries && n.isSeriesFiltered(r.context.model), m(r, i), o |= r.perform(u) }) } }), t.unfinished |= o }g.restoreData = function (t, e) { t.restoreData(e), this._stageTaskMap.each(function (t) { var e = t.overallTask; e && e.dirty() }) }, g.getPerformArgs = function (t, e) { if (t.__pipeline) { var n = this._pipelineMap.get(t.__pipeline.id); var i = n.context; var r = !e && n.progressiveEnabled && (!i || i.progressiveRender) && t.__idxInPipeline > n.blockIndex ? n.step : null; var a = i && i.modDataCount; return { step: r, modBy: a != null ? Math.ceil(a / r) : null, modDataCount: a } } }, g.getPipeline = function (t) { return this._pipelineMap.get(t) }, g.updateStreamModes = function (t, e) { var n = this._pipelineMap.get(t.uid); var i = t.getData().count(); var r = n.progressiveEnabled && e.incrementalPrepareRender && i >= n.threshold; var a = t.get('large') && i >= t.get('largeThreshold'); var o = t.get('progressiveChunkMode') === 'mod' ? i : null; t.pipelineContext = n.context = { progressiveRender: r, modDataCount: o, large: a } }, g.restorePipelines = function (t) { var e = this; var n = e._pipelineMap = s(); t.eachSeries(function (t) { var i = t.getProgressive(); var r = t.uid; n.set(r, { id: r, head: null, tail: null, threshold: t.getProgressiveThreshold(), progressiveEnabled: i && !(t.preventIncremental && t.preventIncremental()), blockIndex: -1, step: Math.round(i || 700), count: 0 }), T(e, t, t.dataTask) }) }, g.prepareStageTasks = function () { var t = this._stageTaskMap; var e = this.ecInstance.getModel(); var n = this.api; r(this._allHandlers, function (i) { var a = t.get(i.uid) || t.set(i.uid, []); i.reset && (function (t, e, n, i, r) { var a = n.seriesTaskMap || (n.seriesTaskMap = s()); var o = e.seriesType; var l = e.getTargetSeries; e.createOnAllSeries ? i.eachRawSeries(c) : o ? i.eachRawSeriesByType(o, c) : l && l(i, r).each(c); function c (n) { var o = n.uid; var s = a.get(o) || a.set(o, u({ plan: w, reset: S, count: A })); s.context = { model: n, ecModel: i, api: r, useClearVisual: e.isVisual && !e.isLayout, plan: e.plan, reset: e.reset, scheduler: t }, T(t, n, s) } var h = t._pipelineMap; a.each(function (t, e) { h.get(e) || (t.dispose(), a.removeKey(e)) }) }(this, i, a, e, n)), i.overallReset && (function (t, e, n, i, a) { var o = n.overallTask = n.overallTask || u({ reset: y }); o.context = { ecModel: i, api: a, overallReset: e.overallReset, scheduler: t }; var l = o.agentStubMap = o.agentStubMap || s(); var c = e.seriesType; var h = e.getTargetSeries; var d = !0; var f = e.modifyOutputEnd; c ? i.eachRawSeriesByType(c, p) : h ? h(i, a).each(p) : (d = !1, r(i.getSeries(), p)); function p (e) { var n = e.uid; var i = l.get(n); i || (i = l.set(n, u({ reset: x, onDirty: b })), o.dirty()), i.context = { model: e, overallProgress: d, modifyOutputEnd: f }, i.agent = o, i.__block = d, T(t, e, i) } var g = t._pipelineMap; l.each(function (t, e) { g.get(e) || (t.dispose(), o.dirty(), l.removeKey(e)) }) }(this, i, a, e, n)) }, this) }, g.prepareView = function (t, e, n, i) { var r = t.renderTask; var a = r.context; a.model = e, a.ecModel = n, a.api = i, r.__block = !t.incrementalPrepareRender, T(this, e, r) }, g.performDataProcessorTasks = function (t, e) { v(this, this._dataProcessorHandlers, t, e, { block: !0 }) }, g.performVisualTasks = function (t, e, n) { v(this, this._visualHandlers, t, e, n) }, g.performSeriesTasks = function (t) { var e; t.eachSeries(function (t) { e |= t.dataTask.perform() }), this.unfinished |= e }, g.plan = function () { this._pipelineMap.each(function (t) { var e = t.tail; do { if (e.__block) { t.blockIndex = e.__idxInPipeline; break }e = e.getUpstream() } while (e) }) }; var m = g.updatePayload = function (t, e) { e !== 'remain' && (t.context.payload = e) }; function y (t) { t.overallReset(t.ecModel, t.api, t.payload) } function x (t, e) { return t.overallProgress && _ } function _ () { this.agent.dirty(), this.getDownstream().dirty() } function b () { this.agent && this.agent.dirty() } function w (t) { return t.plan && t.plan(t.model, t.ecModel, t.api, t.payload) } function S (t) { t.useClearVisual && t.data.clearAllVisual(); var e = t.resetDefines = f(t.reset(t.model, t.ecModel, t.api, t.payload)); return e.length > 1 ? a(e, function (t, e) { return I(e) }) : M } var M = I(0); function I (t) { return function (e, n) { var i = n.data; var r = n.resetDefines[t]; if (r && r.dataEach) for (var a = e.start; a < e.end; a++)r.dataEach(i, a); else r && r.progress && r.progress(e, i) } } function A (t) { return t.data.count() } function T (t, e, n) { var i = e.uid; var r = t._pipelineMap.get(i); !r.head && (r.head = n), r.tail && r.tail.pipe(n), r.tail = n, n.__idxInPipeline = r.count++, n.__pipeline = r } function C (t) { D = null; try { t(L, P) } catch (t) {} return D }p.wrapStageHandler = function (t, e) { return o(t) && (t = { overallReset: t, seriesType: C(t) }), t.uid = c('stageHandler'), e && (t.visualType = e), t }; var D; var L = {}; var P = {}; function k (t, e) { for (var n in e.prototype)t[n] = l }k(L, h), k(P, d), L.eachSeriesByType = L.eachRawSeriesByType = function (t) { D = t }, L.eachComponent = function (t) { t.mainType === 'series' && t.subType && (D = t.subType) }; var O = p; t.exports = O }, function (t, e) { var n = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF']; var i = { color: n, colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], n] }; t.exports = i }, function (t, e) { var n = ['#dd6b66', '#759aa0', '#e69d87', '#8dc1a9', '#ea7e53', '#eedd78', '#73a373', '#73b9bc', '#7289ab', '#91ca8c', '#f49f42']; var i = { color: n, backgroundColor: '#333', tooltip: { axisPointer: { lineStyle: { color: '#eee' }, crossStyle: { color: '#eee' } } }, legend: { textStyle: { color: '#eee' } }, textStyle: { color: '#eee' }, title: { textStyle: { color: '#eee' } }, toolbox: { iconStyle: { normal: { borderColor: '#eee' } } }, dataZoom: { textStyle: { color: '#eee' } }, visualMap: { textStyle: { color: '#eee' } }, timeline: { lineStyle: { color: '#eee' }, itemStyle: { normal: { color: n[1] } }, label: { normal: { textStyle: { color: '#eee' } } }, controlStyle: { normal: { color: '#eee', borderColor: '#eee' } } }, timeAxis: { axisLine: { lineStyle: { color: '#eee' } }, axisTick: { lineStyle: { color: '#eee' } }, axisLabel: { textStyle: { color: '#eee' } }, splitLine: { lineStyle: { type: 'dashed', color: '#aaa' } }, splitArea: { areaStyle: { color: '#eee' } } }, logAxis: { axisLine: { lineStyle: { color: '#eee' } }, axisTick: { lineStyle: { color: '#eee' } }, axisLabel: { textStyle: { color: '#eee' } }, splitLine: { lineStyle: { type: 'dashed', color: '#aaa' } }, splitArea: { areaStyle: { color: '#eee' } } }, valueAxis: { axisLine: { lineStyle: { color: '#eee' } }, axisTick: { lineStyle: { color: '#eee' } }, axisLabel: { textStyle: { color: '#eee' } }, splitLine: { lineStyle: { type: 'dashed', color: '#aaa' } }, splitArea: { areaStyle: { color: '#eee' } } }, categoryAxis: { axisLine: { lineStyle: { color: '#eee' } }, axisTick: { lineStyle: { color: '#eee' } }, axisLabel: { textStyle: { color: '#eee' } }, splitLine: { lineStyle: { type: 'dashed', color: '#aaa' } }, splitArea: { areaStyle: { color: '#eee' } } }, line: { symbol: 'circle' }, graph: { color: n }, gauge: { title: { textStyle: { color: '#eee' } } }, candlestick: { itemStyle: { normal: { color: '#FD1050', color0: '#0CF49B', borderColor: '#FD1050', borderColor0: '#0CF49B' } } } }; i.categoryAxis.splitLine.show = !1; var r = i; t.exports = r }, function (t, e, n) { var i = n(10).extend({ type: 'ellipse', shape: { cx: 0, cy: 0, rx: 0, ry: 0 }, buildPath: function (t, e) { var n = 0.5522848; var i = e.cx; var r = e.cy; var a = e.rx; var o = e.ry; var s = a * n; var l = o * n; t.moveTo(i - a, r), t.bezierCurveTo(i - a, r - l, i - s, r - o, i, r - o), t.bezierCurveTo(i + s, r - o, i + a, r - l, i + a, r), t.bezierCurveTo(i + a, r + l, i + s, r + o, i, r + o), t.bezierCurveTo(i - s, r + o, i - a, r + l, i - a, r), t.closePath() } }); t.exports = i }, function (t, e, n) { var i = n(0); var r = n(27); var a = n(21); var o = n(48); var s = n(12); var l = n(6); l.getLayoutRect; e.getLayoutRect = l.getLayoutRect; var u = n(25); var c = u.enableDataStack; var h = u.isDimensionStacked; var d = u.getStackedDimension; var f = n(157); e.completeDimensions = f; var p = n(47); e.createDimensions = p; var g = n(19); e.createSymbol = g.createSymbol; var v = { isDimensionStacked: h, enableDataStack: c, getStackedDimension: d }; e.createList = function (t) { return r(t.getSource(), t) }, e.dataStack = v, e.createScale = function (t, e) { var n = e; s.isInstance(e) || (n = new s(e), i.mixin(n, o)); var r = a.createScaleByModel(n); return r.setExtent(t[0], t[1]), a.niceScaleExtent(r, n), r }, e.mixinAxisModelCommonMethods = function (t) { i.mixin(t, o) } }, function (t, e, n) { var i = n(0); var r = n(75); var a = n(158); var o = r.prototype; var s = r.extend({ type: 'ordinal', init: function (t, e) { t && !i.isArray(t) || (t = new a({ categories: t })), this._ordinalMeta = t, this._extent = e || [0, t.categories.length - 1] }, parse: function (t) { return typeof t === 'string' ? this._ordinalMeta.getOrdinal(t) : Math.round(t) }, contain: function (t) { return t = this.parse(t), o.contain.call(this, t) && this._ordinalMeta.categories[t] != null }, normalize: function (t) { return o.normalize.call(this, this.parse(t)) }, scale: function (t) { return Math.round(o.scale.call(this, t)) }, getTicks: function () { for (var t = [], e = this._extent, n = e[0]; n <= e[1];)t.push(n), n++; return t }, getLabel: function (t) { if (!this.isBlank()) return this._ordinalMeta.categories[t] }, count: function () { return this._extent[1] - this._extent[0] + 1 }, unionExtentFromData: function (t, e) { this.unionExtent(t.getApproximateExtent(e)) }, getOrdinalMeta: function () { return this._ordinalMeta }, niceTicks: i.noop, niceExtent: i.noop }); s.create = function () { return new s() }; var l = s; t.exports = l }, function (t, e, n) { var i = n(0); var r = n(3); var a = n(9); var o = n(159); var s = n(76); var l = s.prototype; var u = Math.ceil; var c = Math.floor; var h = s.extend({ type: 'time', getLabel: function (t) { var e = this._stepLvl; var n = new Date(t); return a.formatTime(e[0], n, this.getSetting('useUTC')) }, niceExtent: function (t) { var e = this._extent; if (e[0] === e[1] && (e[0] -= 864e5, e[1] += 864e5), e[1] === -1 / 0 && e[0] === 1 / 0) { var n = new Date(); e[1] = +new Date(n.getFullYear(), n.getMonth(), n.getDate()), e[0] = e[1] - 864e5 } this.niceTicks(t.splitNumber, t.minInterval, t.maxInterval); var i = this._interval; t.fixMin || (e[0] = r.round(c(e[0] / i) * i)), t.fixMax || (e[1] = r.round(u(e[1] / i) * i)) }, niceTicks: function (t, e, n) { t = t || 10; var i = this._extent; var a = i[1] - i[0]; var s = a / t; e != null && s < e && (s = e), n != null && s > n && (s = n); var l = d.length; var h = (function (t, e, n, i) { for (;n < i;) { var r = n + i >>> 1; t[r][1] < e ? n = r + 1 : i = r } return n }(d, s, 0, l)); var f = d[Math.min(h, l - 1)]; var p = f[1]; if (f[0] === 'year') { var g = a / p; p *= r.nice(g / t, !0) } var v = this.getSetting('useUTC') ? 0 : 60 * new Date(+i[0] || +i[1]).getTimezoneOffset() * 1e3; var m = [Math.round(u((i[0] - v) / p) * p + v), Math.round(c((i[1] - v) / p) * p + v)]; o.fixExtent(m, i), this._stepLvl = f, this._interval = p, this._niceExtent = m }, parse: function (t) { return +r.parseDate(t) } }); i.each(['contain', 'normalize'], function (t) { h.prototype[t] = function (e) { return l[t].call(this, this.parse(e)) } }); var d = [['hh:mm:ss', 1e3], ['hh:mm:ss', 5e3], ['hh:mm:ss', 1e4], ['hh:mm:ss', 15e3], ['hh:mm:ss', 3e4], ['hh:mm\nMM-dd', 6e4], ['hh:mm\nMM-dd', 3e5], ['hh:mm\nMM-dd', 6e5], ['hh:mm\nMM-dd', 9e5], ['hh:mm\nMM-dd', 18e5], ['hh:mm\nMM-dd', 36e5], ['hh:mm\nMM-dd', 72e5], ['hh:mm\nMM-dd', 216e5], ['hh:mm\nMM-dd', 432e5], ['MM-dd\nyyyy', 864e5], ['MM-dd\nyyyy', 1728e5], ['MM-dd\nyyyy', 2592e5], ['MM-dd\nyyyy', 3456e5], ['MM-dd\nyyyy', 432e6], ['MM-dd\nyyyy', 5184e5], ['week', 6048e5], ['MM-dd\nyyyy', 864e6], ['week', 12096e5], ['week', 18144e5], ['month', 26784e5], ['week', 36288e5], ['month', 53568e5], ['week', 6048e6], ['quarter', 8208e6], ['month', 107136e5], ['month', 13392e6], ['half-year', 16416e6], ['month', 214272e5], ['month', 26784e6], ['year', 32832e6]]; h.create = function (t) { return new h({ useUTC: t.ecModel.get('useUTC') }) }; var f = h; t.exports = f }, function (t, e, n) { var i = n(0); var r = n(17); var a = n(4).makeInner; var o = n(21); var s = o.makeLabelFormatter; var l = o.getOptionCategoryInterval; var u = o.shouldShowAllLabels; var c = a(); function h (t, e) { var n; var r; var a = d(t, 'labels'); var o = l(e); var s = f(a, o); return s || (i.isFunction(o) ? n = v(t, o) : (r = o === 'auto' ? (function (t) { var e = c(t).autoInterval; return e != null ? e : c(t).autoInterval = t.calculateCategoryInterval() }(t)) : o, n = g(t, r)), p(a, o, { labels: n, labelCategoryInterval: r })) } function d (t, e) { return c(t)[e] || (c(t)[e] = []) } function f (t, e) { for (var n = 0; n < t.length; n++) if (t[n].key === e) return t[n].value } function p (t, e, n) { return t.push({ key: e, value: n }), n } function g (t, e, n) { var i = s(t); var r = t.scale; var a = r.getExtent(); var o = t.getLabelModel(); var l = []; var c = Math.max((e || 0) + 1, 1); var h = a[0]; var d = r.count(); h !== 0 && c > 1 && d / c > 2 && (h = Math.round(Math.ceil(h / c) * c)); var f = u(t); var p = o.get('showMinLabel') || f; var g = o.get('showMaxLabel') || f; p && h !== a[0] && m(a[0]); for (var v = h; v <= a[1]; v += c)m(v); function m (t) { l.push(n ? t : { formattedLabel: i(t), rawLabel: r.getLabel(t), tickValue: t }) } return g && v - c !== a[1] && m(a[1]), l } function v (t, e, n) { var r = t.scale; var a = s(t); var o = []; return i.each(r.getTicks(), function (t) { var i = r.getLabel(t); e(t, i) && o.push(n ? t : { formattedLabel: a(t), rawLabel: i, tickValue: t }) }), o }e.createAxisLabels = function (t) { return t.type === 'category' ? (function (t) { var e = t.getLabelModel(); var n = h(t, e); return !e.get('show') || t.scale.isBlank() ? { labels: [], labelCategoryInterval: n.labelCategoryInterval } : n }(t)) : (function (t) { var e = t.scale.getTicks(); var n = s(t); return { labels: i.map(e, function (e, i) { return { formattedLabel: n(e, i), rawLabel: t.scale.getLabel(e), tickValue: e } }) } }(t)) }, e.createAxisTicks = function (t, e) { return t.type === 'category' ? (function (t, e) { var n; var r; var a = d(t, 'ticks'); var o = l(e); var s = f(a, o); if (s) return s; e.get('show') && !t.scale.isBlank() || (n = []); if (i.isFunction(o))n = v(t, o, !0); else if (o === 'auto') { var u = h(t, t.getLabelModel()); r = u.labelCategoryInterval, n = i.map(u.labels, function (t) { return t.tickValue }) } else n = g(t, r = o, !0); return p(a, o, { ticks: n, tickCategoryInterval: r }) }(t, e)) : { ticks: t.scale.getTicks() } }, e.calculateCategoryInterval = function (t) { var e = (function (t) { var e = t.getLabelModel(); return { axisRotate: t.getRotate ? t.getRotate() : t.isHorizontal && !t.isHorizontal() ? 90 : 0, labelRotate: e.get('rotate') || 0, font: e.getFont() } }(t)); var n = s(t); var i = (e.axisRotate - e.labelRotate) / 180 * Math.PI; var a = t.scale; var o = a.getExtent(); var l = a.count(); if (o[1] - o[0] < 1) return 0; var u = 1; l > 40 && (u = Math.max(1, Math.floor(l / 40))); for (var h = o[0], d = t.dataToCoord(h + 1) - t.dataToCoord(h), f = Math.abs(d * Math.cos(i)), p = Math.abs(d * Math.sin(i)), g = 0, v = 0; h <= o[1]; h += u) { var m; var y; var x = r.getBoundingRect(n(h), e.font, 'center', 'top'); m = 1.3 * x.width, y = 1.3 * x.height, g = Math.max(g, m, 7), v = Math.max(v, y, 7) } var _ = g / f; var b = v / p; isNaN(_) && (_ = 1 / 0), isNaN(b) && (b = 1 / 0); var w = Math.max(0, Math.floor(Math.min(_, b))); var S = c(t.model); var M = t.getExtent(); var I = S.lastAutoInterval; var A = S.lastTickCount; return I != null && A != null && Math.abs(I - w) <= 1 && Math.abs(A - l) <= 1 && I > w && S.axisExtend0 === M[0] && S.axisExtend1 === M[1] ? w = I : (S.lastTickCount = l, S.lastAutoInterval = w, S.axisExtend0 = M[0], S.axisExtend1 = M[1]), w } }, function (t, e, n) { var i = n(1); n(277), n(278); var r = n(38); var a = n(61); var o = n(280); n(62), i.registerVisual(r('line', 'circle', 'line')), i.registerLayout(a('line')), i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC, o('line')) }, function (t, e, n) { n(5).__DEV__; var i = n(27); var r = n(14).extend({ type: 'series.line', dependencies: ['grid', 'polar'], getInitialData: function (t, e) { return i(this.getSource(), this) }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'cartesian2d', legendHoverLink: !0, hoverAnimation: !0, clip: !0, label: { position: 'top' }, lineStyle: { width: 2, type: 'solid' }, step: !1, smooth: !1, smoothMonotone: null, symbol: 'emptyCircle', symbolSize: 4, symbolRotate: null, showSymbol: !0, showAllSymbol: 'auto', connectNulls: !1, sampling: 'none', animationEasing: 'linear', progressive: 0, hoverLayerThreshold: 1 / 0 } }); t.exports = r }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(59); var a = n(78); var o = n(279); var s = n(2); var l = n(4); var u = n(165); var c = u.Polyline; var h = u.Polygon; var d = n(24); var f = n(164); var p = f.prepareDataCoordInfo; var g = f.getStackedOnPoint; var v = n(60); var m = v.createGridClipPath; var y = v.createPolarClipPath; function x (t, e) { if (t.length === e.length) { for (var n = 0; n < t.length; n++) { var i = t[n]; var r = e[n]; if (i[0] !== r[0] || i[1] !== r[1]) return } return !0 } } function _ (t) { return typeof t === 'number' ? t : t ? 0.5 : 0 } function b (t, e, n) { for (var i = e.getBaseAxis(), r = i.dim === 'x' || i.dim === 'radius' ? 0 : 1, a = [], o = 0; o < t.length - 1; o++) { var s = t[o + 1]; var l = t[o]; a.push(l); var u = []; switch (n) { case 'end':u[r] = s[r], u[1 - r] = l[1 - r], a.push(u); break; case 'middle':var c = (l[r] + s[r]) / 2; var h = []; u[r] = h[r] = c, u[1 - r] = l[1 - r], h[1 - r] = s[1 - r], a.push(u), a.push(h); break; default:u[r] = l[r], u[1 - r] = s[1 - r], a.push(u) } } return t[o] && a.push(t[o]), a } function w (t, e, n) { var r = t.get('showAllSymbol'); var o = r === 'auto'; if (!r || o) { var s = n.getAxesByScale('ordinal')[0]; if (s && (!o || !(function (t, e) { var n = t.getExtent(); var i = Math.abs(n[1] - n[0]) / t.scale.count(); isNaN(i) && (i = 0); for (var r = e.count(), o = Math.max(1, Math.round(r / 5)), s = 0; s < r; s += o) if (1.5 * a.getSymbolSize(e, s)[t.isHorizontal() ? 1 : 0] > i) return !1; return !0 }(s, e)))) { var l = e.mapDimension(s.dim); var u = {}; return i.each(s.getViewLabels(), function (t) { u[t.tickValue] = 1 }), function (t) { return !u.hasOwnProperty(e.get(l, t)) } } } } function S (t, e, n) { if (t.type === 'cartesian2d') { var i = t.getBaseAxis().isHorizontal(); var r = m(t, e, n); if (!n.get('clip', !0)) { var a = r.shape; var o = Math.max(a.width, a.height); i ? (a.y -= o, a.height += 2 * o) : (a.x -= o, a.width += 2 * o) } return r } return y(t, e, n) } var M = d.extend({ type: 'line', init: function () { var t = new s.Group(); var e = new r(); this.group.add(e.group), this._symbolDraw = e, this._lineGroup = t }, render: function (t, e, n) { var r = t.coordinateSystem; var a = this.group; var o = t.getData(); var l = t.getModel('lineStyle'); var u = t.getModel('areaStyle'); var c = o.mapArray(o.getItemLayout); var h = r.type === 'polar'; var d = this._coordSys; var f = this._symbolDraw; var v = this._polyline; var m = this._polygon; var y = this._lineGroup; var M = t.get('animation'); var I = !u.isEmpty(); var A = u.get('origin'); var T = (function (t, e, n) { if (!n.valueDim) return []; for (var i = [], r = 0, a = e.count(); r < a; r++)i.push(g(n, t, e, r)); return i }(r, o, p(r, o, A))); var C = t.get('showSymbol'); var D = C && !h && w(t, o, r); var L = this._data; L && L.eachItemGraphicEl(function (t, e) { t.__temp && (a.remove(t), L.setItemGraphicEl(e, null)) }), C || f.remove(), a.add(y); var P; var k = !h && t.get('step'); r && r.getArea && ((P = r.getArea()).width != null ? (P.x -= 0.1, P.y -= 0.1, P.width += 0.2, P.height += 0.2) : P.r0 && (P.r0 -= 0.5, P.r1 += 0.5)), v && d.type === r.type && k === this._step ? (I && !m ? m = this._newPolygon(c, T, r, M) : m && !I && (y.remove(m), m = this._polygon = null), y.setClipPath(S(r, !1, t)), C && f.updateData(o, { isIgnore: D, clipShape: P }), o.eachItemGraphicEl(function (t) { t.stopAnimation(!0) }), x(this._stackedOnPoints, T) && x(this._points, c) || (M ? this._updateAnimation(o, T, r, n, k, A) : (k && (c = b(c, r, k), T = b(T, r, k)), v.setShape({ points: c }), m && m.setShape({ points: c, stackedOnPoints: T })))) : (C && f.updateData(o, { isIgnore: D, clipShape: P }), k && (c = b(c, r, k), T = b(T, r, k)), v = this._newPolyline(c, r, M), I && (m = this._newPolygon(c, T, r, M)), y.setClipPath(S(r, !0, t))); var O = (function (t, e) { var n = t.getVisual('visualMeta'); if (n && n.length && t.count() && e.type === 'cartesian2d') { for (var r, a, o = n.length - 1; o >= 0; o--) { var l = n[o].dimension; var u = t.dimensions[l]; var c = t.getDimensionInfo(u); if ((r = c && c.coordDim) === 'x' || r === 'y') { a = n[o]; break } } if (a) { var h = e.getAxis(r); var d = i.map(a.stops, function (t) { return { coord: h.toGlobalCoord(h.dataToCoord(t.value)), color: t.color } }); var f = d.length; var p = a.outerColors.slice(); f && d[0].coord > d[f - 1].coord && (d.reverse(), p.reverse()); var g = d[0].coord - 10; var v = d[f - 1].coord + 10; var m = v - g; if (m < 0.001) return 'transparent'; i.each(d, function (t) { t.offset = (t.coord - g) / m }), d.push({ offset: f ? d[f - 1].offset : 0.5, color: p[1] || 'transparent' }), d.unshift({ offset: f ? d[0].offset : 0.5, color: p[0] || 'transparent' }); var y = new s.LinearGradient(0, 0, 0, 0, d, !0); return y[r] = g, y[r + '2'] = v, y } } }(o, r)) || o.getVisual('color'); v.useStyle(i.defaults(l.getLineStyle(), { fill: 'none', stroke: O, lineJoin: 'bevel' })); var E = t.get('smooth'); if (E = _(t.get('smooth')), v.setShape({ smooth: E, smoothMonotone: t.get('smoothMonotone'), connectNulls: t.get('connectNulls') }), m) { var R = o.getCalculationInfo('stackedOnSeries'); var N = 0; m.useStyle(i.defaults(u.getAreaStyle(), { fill: O, opacity: 0.7, lineJoin: 'bevel' })), R && (N = _(R.get('smooth'))), m.setShape({ smooth: E, stackedOnSmooth: N, smoothMonotone: t.get('smoothMonotone'), connectNulls: t.get('connectNulls') }) } this._data = o, this._coordSys = r, this._stackedOnPoints = T, this._points = c, this._step = k, this._valueOrigin = A }, dispose: function () {}, highlight: function (t, e, n, i) { var r = t.getData(); var o = l.queryDataIndex(r, i); if (!(o instanceof Array) && o != null && o >= 0) { var s = r.getItemGraphicEl(o); if (!s) { var u = r.getItemLayout(o); if (!u) return; (s = new a(r, o)).position = u, s.setZ(t.get('zlevel'), t.get('z')), s.ignore = isNaN(u[0]) || isNaN(u[1]), s.__temp = !0, r.setItemGraphicEl(o, s), s.stopSymbolAnimation(!0), this.group.add(s) }s.highlight() } else d.prototype.highlight.call(this, t, e, n, i) }, downplay: function (t, e, n, i) { var r = t.getData(); var a = l.queryDataIndex(r, i); if (a != null && a >= 0) { var o = r.getItemGraphicEl(a); o && (o.__temp ? (r.setItemGraphicEl(a, null), this.group.remove(o)) : o.downplay()) } else d.prototype.downplay.call(this, t, e, n, i) }, _newPolyline: function (t) { var e = this._polyline; return e && this._lineGroup.remove(e), e = new c({ shape: { points: t }, silent: !0, z2: 10 }), this._lineGroup.add(e), this._polyline = e, e }, _newPolygon: function (t, e) { var n = this._polygon; return n && this._lineGroup.remove(n), n = new h({ shape: { points: t, stackedOnPoints: e }, silent: !0 }), this._lineGroup.add(n), this._polygon = n, n }, _updateAnimation: function (t, e, n, i, r, a) { var l = this._polyline; var u = this._polygon; var c = t.hostModel; var h = o(this._data, t, this._stackedOnPoints, e, this._coordSys, n, this._valueOrigin, a); var d = h.current; var f = h.stackedOnCurrent; var p = h.next; var g = h.stackedOnNext; r && (d = b(h.current, n, r), f = b(h.stackedOnCurrent, n, r), p = b(h.next, n, r), g = b(h.stackedOnNext, n, r)), l.shape.__points = h.current, l.shape.points = d, s.updateProps(l, { shape: { points: p } }, c), u && (u.setShape({ points: d, stackedOnPoints: f }), s.updateProps(u, { shape: { points: p, stackedOnPoints: g } }, c)); for (var v = [], m = h.status, y = 0; y < m.length; y++) { if (m[y].cmd === '=') { var x = t.getItemGraphicEl(m[y].idx1); x && v.push({ el: x, ptIdx: y }) } }l.animators && l.animators.length && l.animators[0].during(function () { for (var t = 0; t < v.length; t++) { v[t].el.attr('position', l.shape.__points[v[t].ptIdx]) } }) }, remove: function (t) { var e = this.group; var n = this._data; this._lineGroup.removeAll(), this._symbolDraw.remove(!0), n && n.eachItemGraphicEl(function (t, i) { t.__temp && (e.remove(t), n.setItemGraphicEl(i, null)) }), this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null } }); t.exports = M }, function (t, e, n) { var i = n(164); var r = i.prepareDataCoordInfo; var a = i.getStackedOnPoint; t.exports = function (t, e, n, i, o, s, l, u) { for (var c = (function (t, e) { var n = []; return e.diff(t).add(function (t) { n.push({ cmd: '+', idx: t }) }).update(function (t, e) { n.push({ cmd: '=', idx: e, idx1: t }) }).remove(function (t) { n.push({ cmd: '-', idx: t }) }).execute(), n }(t, e)), h = [], d = [], f = [], p = [], g = [], v = [], m = [], y = r(o, e, l), x = r(s, t, u), _ = 0; _ < c.length; _++) { var b = c[_]; var w = !0; switch (b.cmd) { case '=':var S = t.getItemLayout(b.idx); var M = e.getItemLayout(b.idx1); (isNaN(S[0]) || isNaN(S[1])) && (S = M.slice()), h.push(S), d.push(M), f.push(n[b.idx]), p.push(i[b.idx1]), m.push(e.getRawIndex(b.idx1)); break; case '+':var I = b.idx; h.push(o.dataToPoint([e.get(y.dataDimsForPoint[0], I), e.get(y.dataDimsForPoint[1], I)])), d.push(e.getItemLayout(I).slice()), f.push(a(y, o, e, I)), p.push(i[I]), m.push(e.getRawIndex(I)); break; case '-':I = b.idx; var A = t.getRawIndex(I); A !== I ? (h.push(t.getItemLayout(I)), d.push(s.dataToPoint([t.get(x.dataDimsForPoint[0], I), t.get(x.dataDimsForPoint[1], I)])), f.push(n[I]), p.push(a(x, s, t, I)), m.push(A)) : w = !1 }w && (g.push(b), v.push(v.length)) }v.sort(function (t, e) { return m[t] - m[e] }); var T = []; var C = []; var D = []; var L = []; var P = []; for (_ = 0; _ < v.length; _++) { I = v[_]; T[_] = h[I], C[_] = d[I], D[_] = f[I], L[_] = p[I], P[_] = g[I] } return { current: T, next: C, stackedOnCurrent: D, stackedOnNext: L, status: P } } }, function (t, e) { var n = { average: function (t) { for (var e = 0, n = 0, i = 0; i < t.length; i++)isNaN(t[i]) || (e += t[i], n++); return n === 0 ? NaN : e / n }, sum: function (t) { for (var e = 0, n = 0; n < t.length; n++)e += t[n] || 0; return e }, max: function (t) { for (var e = -1 / 0, n = 0; n < t.length; n++)t[n] > e && (e = t[n]); return isFinite(e) ? e : NaN }, min: function (t) { for (var e = 1 / 0, n = 0; n < t.length; n++)t[n] < e && (e = t[n]); return isFinite(e) ? e : NaN }, nearest: function (t) { return t[0] } }; var i = function (t, e) { return Math.round(t.length / 2) }; t.exports = function (t) { return { seriesType: t, modifyOutputEnd: !0, reset: function (t, e, r) { var a = t.getData(); var o = t.get('sampling'); var s = t.coordinateSystem; if (s.type === 'cartesian2d' && o) { var l; var u = s.getBaseAxis(); var c = s.getOtherAxis(u); var h = u.getExtent(); var d = h[1] - h[0]; var f = Math.round(a.count() / d); if (f > 1) typeof o === 'string' ? l = n[o] : typeof o === 'function' && (l = o), l && t.setData(a.downSample(a.mapDimension(c.dim), 1 / f, l, i)) } } } } }, function (t, e, n) { var i = n(0); var r = n(8); var a = n(282); function o (t) { a.call(this, t) }o.prototype = { constructor: o, type: 'cartesian2d', dimensions: ['x', 'y'], getBaseAxis: function () { return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x') }, containPoint: function (t) { var e = this.getAxis('x'); var n = this.getAxis('y'); return e.contain(e.toLocalCoord(t[0])) && n.contain(n.toLocalCoord(t[1])) }, containData: function (t) { return this.getAxis('x').containData(t[0]) && this.getAxis('y').containData(t[1]) }, dataToPoint: function (t, e, n) { var i = this.getAxis('x'); var r = this.getAxis('y'); return (n = n || [])[0] = i.toGlobalCoord(i.dataToCoord(t[0])), n[1] = r.toGlobalCoord(r.dataToCoord(t[1])), n }, clampData: function (t, e) { var n = this.getAxis('x').scale; var i = this.getAxis('y').scale; var r = n.getExtent(); var a = i.getExtent(); var o = n.parse(t[0]); var s = i.parse(t[1]); return (e = e || [])[0] = Math.min(Math.max(Math.min(r[0], r[1]), o), Math.max(r[0], r[1])), e[1] = Math.min(Math.max(Math.min(a[0], a[1]), s), Math.max(a[0], a[1])), e }, pointToData: function (t, e) { var n = this.getAxis('x'); var i = this.getAxis('y'); return (e = e || [])[0] = n.coordToData(n.toLocalCoord(t[0])), e[1] = i.coordToData(i.toLocalCoord(t[1])), e }, getOtherAxis: function (t) { return this.getAxis(t.dim === 'x' ? 'y' : 'x') }, getArea: function () { var t = this.getAxis('x').getGlobalExtent(); var e = this.getAxis('y').getGlobalExtent(); var n = Math.min(t[0], t[1]); var i = Math.min(e[0], e[1]); var a = Math.max(t[0], t[1]) - n; var o = Math.max(e[0], e[1]) - i; return new r(n, i, a, o) } }, i.inherits(o, a); var s = o; t.exports = s }, function (t, e, n) { var i = n(0); function r (t) { return this._axes[t] } var a = function (t) { this._axes = {}, this._dimList = [], this.name = t || '' }; a.prototype = { constructor: a, type: 'cartesian', getAxis: function (t) { return this._axes[t] }, getAxes: function () { return i.map(this._dimList, r, this) }, getAxesByScale: function (t) { return t = t.toLowerCase(), i.filter(this.getAxes(), function (e) { return e.scale.type === t }) }, addAxis: function (t) { var e = t.dim; this._axes[e] = t, this._dimList.push(e) }, dataToCoord: function (t) { return this._dataCoordConvert(t, 'dataToCoord') }, coordToData: function (t) { return this._dataCoordConvert(t, 'coordToData') }, _dataCoordConvert: function (t, e) { for (var n = this._dimList, i = t instanceof Array ? [] : {}, r = 0; r < n.length; r++) { var a = n[r]; var o = this._axes[a]; i[a] = o[e](t[a]) } return i } }; var o = a; t.exports = o }, function (t, e, n) { var i = n(0); var r = n(31); var a = function (t, e, n, i, a) { r.call(this, t, e, n), this.type = i || 'value', this.position = a || 'bottom' }; a.prototype = { constructor: a, index: 0, getAxesOnZeroOf: null, model: null, isHorizontal: function () { var t = this.position; return t === 'top' || t === 'bottom' }, getGlobalExtent: function (t) { var e = this.getExtent(); return e[0] = this.toGlobalCoord(e[0]), e[1] = this.toGlobalCoord(e[1]), t && e[0] > e[1] && e.reverse(), e }, getOtherAxis: function () { this.grid.getOtherAxis() }, pointToData: function (t, e) { return this.coordToData(this.toLocalCoord(t[this.dim === 'x' ? 0 : 1]), e) }, toLocalCoord: null, toGlobalCoord: null }, i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { n(166); var i = n(13).extend({ type: 'grid', dependencies: ['xAxis', 'yAxis'], layoutMode: 'box', coordinateSystem: null, defaultOption: { show: !1, zlevel: 0, z: 0, left: '10%', top: 60, right: '10%', bottom: 60, containLabel: !1, backgroundColor: 'rgba(0,0,0,0)', borderWidth: 1, borderColor: '#ccc' } }); t.exports = i }, function (t, e, n) { n(166), n(286) }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(32); var o = n(39); var s = n(168); var l = ['axisLine', 'axisTickLabel', 'axisName']; var u = ['splitArea', 'splitLine']; var c = o.extend({ type: 'cartesianAxis', axisPointerClass: 'CartesianAxisPointer', render: function (t, e, n, o) { this.group.removeAll(); var h = this._axisGroup; if (this._axisGroup = new r.Group(), this.group.add(this._axisGroup), t.get('show')) { var d = t.getCoordSysModel(); var f = s.layout(d, t); var p = new a(t, f); i.each(l, p.add, p), this._axisGroup.add(p.getGroup()), i.each(u, function (e) { t.get(e + '.show') && this['_' + e](t, d) }, this), r.groupTransition(h, this._axisGroup, t), c.superCall(this, 'render', t, e, n, o) } }, remove: function () { this._splitAreaColors = null }, _splitLine: function (t, e) { var n = t.axis; if (!n.scale.isBlank()) { var a = t.getModel('splitLine'); var o = a.getModel('lineStyle'); var s = o.get('color'); s = i.isArray(s) ? s : [s]; for (var l = e.coordinateSystem.getRect(), u = n.isHorizontal(), c = 0, h = n.getTicksCoords({ tickModel: a }), d = [], f = [], p = o.getLineStyle(), g = 0; g < h.length; g++) { var v = n.toGlobalCoord(h[g].coord); u ? (d[0] = v, d[1] = l.y, f[0] = v, f[1] = l.y + l.height) : (d[0] = l.x, d[1] = v, f[0] = l.x + l.width, f[1] = v); var m = c++ % s.length; var y = h[g].tickValue; this._axisGroup.add(new r.Line({ anid: y != null ? 'line_' + h[g].tickValue : null, subPixelOptimize: !0, shape: { x1: d[0], y1: d[1], x2: f[0], y2: f[1] }, style: i.defaults({ stroke: s[m] }, p), silent: !0 })) } } }, _splitArea: function (t, e) { var n = t.axis; if (!n.scale.isBlank()) { var a = t.getModel('splitArea'); var o = a.getModel('areaStyle'); var s = o.get('color'); var l = e.coordinateSystem.getRect(); var u = n.getTicksCoords({ tickModel: a, clamp: !0 }); if (u.length) { var c = s.length; var h = this._splitAreaColors; var d = i.createHashMap(); var f = 0; if (h) for (var p = 0; p < u.length; p++) { var g = h.get(u[p].tickValue); if (g != null) { f = (g + (c - 1) * p) % c; break } } var v = n.toGlobalCoord(u[0].coord); var m = o.getAreaStyle(); s = i.isArray(s) ? s : [s]; for (p = 1; p < u.length; p++) { var y; var x; var _; var b; var w = n.toGlobalCoord(u[p].coord); n.isHorizontal() ? (y = v, x = l.y, _ = w - y, b = l.height, v = y + _) : (y = l.x, x = v, _ = l.width, v = x + (b = w - x)); var S = u[p - 1].tickValue; S != null && d.set(S, f), this._axisGroup.add(new r.Rect({ anid: S != null ? 'area_' + S : null, shape: { x: y, y: x, width: _, height: b }, style: i.defaults({ fill: s[f] }, m), silent: !0 })), f = (f + 1) % c } this._splitAreaColors = d } } } }); c.extend({ type: 'xAxis' }), c.extend({ type: 'yAxis' }) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(77); var o = a.layout; var s = a.largeLayout; n(98), n(288), n(289), n(62), i.registerLayout(i.PRIORITY.VISUAL.LAYOUT, r.curry(o, 'bar')), i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, s), i.registerVisual({ seriesType: 'bar', reset: function (t) { t.getData().setVisual('legendSymbol', 'roundRect') } }) }, function (t, e, n) { var i = n(169).extend({ type: 'series.bar', dependencies: ['grid', 'polar'], brushSelector: 'rect', getProgressive: function () { return !!this.get('large') && this.get('progressive') }, getProgressiveThreshold: function () { var t = this.get('progressiveThreshold'); var e = this.get('largeThreshold'); return e > t && (t = e), t }, defaultOption: { clip: !0, roundCap: !1 } }); t.exports = i }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(2); var o = n(170).setLabel; var s = n(12); var l = n(290); var u = n(10); var c = n(29).throttle; var h = n(60).createClipPath; var d = n(291); var f = ['itemStyle', 'barBorderWidth']; var p = [0, 0]; r.extend(s.prototype, l); var g = i.extendChartView({ type: 'bar', render: function (t, e, n) { this._updateDrawMode(t); var i = t.get('coordinateSystem'); return i !== 'cartesian2d' && i !== 'polar' || (this._isLargeDraw ? this._renderLarge(t, e, n) : this._renderNormal(t, e, n)), this.group }, incrementalPrepareRender: function (t, e, n) { this._clear(), this._updateDrawMode(t) }, incrementalRender: function (t, e, n, i) { this._incrementalRenderLarge(t, e) }, _updateDrawMode: function (t) { var e = t.pipelineContext.large; (this._isLargeDraw == null || e ^ this._isLargeDraw) && (this._isLargeDraw = e, this._clear()) }, _renderNormal: function (t, e, n) { var i; var r = this.group; var o = t.getData(); var s = this._data; var l = t.coordinateSystem; var u = l.getBaseAxis(); l.type === 'cartesian2d' ? i = u.isHorizontal() : l.type === 'polar' && (i = u.dim === 'angle'); var c = t.isAnimationEnabled() ? t : null; var h = t.get('clip', !0); var d = (function (t, e) { var n = t.getArea && t.getArea(); if (t.type === 'cartesian2d') { var i = t.getBaseAxis(); if (i.type !== 'category' || !i.onBand) { var r = e.getLayout('bandWidth'); i.isHorizontal() ? (n.x -= r, n.width += 2 * r) : (n.y -= r, n.height += 2 * r) } } return n }(l, o)); r.removeClipPath(); var f = t.get('roundCap', !0); o.diff(s).add(function (e) { if (o.hasValue(e)) { var n = o.getItemModel(e); var a = w[l.type](o, e, n); if (h) if (y[l.type](d, a)) return void r.remove(s); var s = x[l.type](e, a, i, c, !1, f); o.setItemGraphicEl(e, s), r.add(s), S(s, o, e, n, a, t, i, l.type === 'polar') } }).update(function (e, n) { var u = s.getItemGraphicEl(n); if (o.hasValue(e)) { var p = o.getItemModel(e); var g = w[l.type](o, e, p); if (h) if (y[l.type](d, g)) return void r.remove(u); u ? a.updateProps(u, { shape: g }, c, e) : u = x[l.type](e, g, i, c, !0, f), o.setItemGraphicEl(e, u), r.add(u), S(u, o, e, p, g, t, i, l.type === 'polar') } else r.remove(u) }).remove(function (t) { var e = s.getItemGraphicEl(t); l.type === 'cartesian2d' ? e && _(t, c, e) : e && b(t, c, e) }).execute(), this._data = o }, _renderLarge: function (t, e, n) { this._clear(), I(t, this.group); var i = t.get('clip', !0) ? h(t.coordinateSystem, !1, t) : null; i ? this.group.setClipPath(i) : this.group.removeClipPath() }, _incrementalRenderLarge: function (t, e) { I(e, this.group, !0) }, dispose: r.noop, remove: function (t) { this._clear(t) }, _clear: function (t) { var e = this.group; var n = this._data; t && t.get('animation') && n && !this._isLargeDraw ? n.eachItemGraphicEl(function (e) { e.type === 'sector' ? b(e.dataIndex, t, e) : _(e.dataIndex, t, e) }) : e.removeAll(), this._data = null } }); var v = Math.max; var m = Math.min; var y = { cartesian2d: function (t, e) { var n = e.width < 0 ? -1 : 1; var i = e.height < 0 ? -1 : 1; n < 0 && (e.x += e.width, e.width = -e.width), i < 0 && (e.y += e.height, e.height = -e.height); var r = v(e.x, t.x); var a = m(e.x + e.width, t.x + t.width); var o = v(e.y, t.y); var s = m(e.y + e.height, t.y + t.height); e.x = r, e.y = o, e.width = a - r, e.height = s - o; var l = e.width < 0 || e.height < 0; return n < 0 && (e.x += e.width, e.width = -e.width), i < 0 && (e.y += e.height, e.height = -e.height), l }, polar: function (t) { return !1 } }; var x = { cartesian2d: function (t, e, n, i, o) { var s = new a.Rect({ shape: r.extend({}, e) }); if (i) { var l = n ? 'height' : 'width'; var u = {}; s.shape[l] = 0, u[l] = e[l], a[o ? 'updateProps' : 'initProps'](s, { shape: u }, i, t) } return s }, polar: function (t, e, n, i, o, s) { var l = e.startAngle < e.endAngle; var u = new (!n && s ? d : a.Sector)({ shape: r.defaults({ clockwise: l }, e) }); if (i) { var c = n ? 'r' : 'endAngle'; var h = {}; u.shape[c] = n ? 0 : e.startAngle, h[c] = e[c], a[o ? 'updateProps' : 'initProps'](u, { shape: h }, i, t) } return u } }; function _ (t, e, n) { n.style.text = null, a.updateProps(n, { shape: { width: 0 } }, e, t, function () { n.parent && n.parent.remove(n) }) } function b (t, e, n) { n.style.text = null, a.updateProps(n, { shape: { r: n.shape.r0 } }, e, t, function () { n.parent && n.parent.remove(n) }) } var w = { cartesian2d: function (t, e, n) { var i = t.getItemLayout(e); var r = (function (t, e) { var n = t.get(f) || 0; return Math.min(n, Math.abs(e.width), Math.abs(e.height)) }(n, i)); var a = i.width > 0 ? 1 : -1; var o = i.height > 0 ? 1 : -1; return { x: i.x + a * r / 2, y: i.y + o * r / 2, width: i.width - a * r, height: i.height - o * r } }, polar: function (t, e, n) { var i = t.getItemLayout(e); return { cx: i.cx, cy: i.cy, r0: i.r0, r: i.r, startAngle: i.startAngle, endAngle: i.endAngle } } }; function S (t, e, n, i, s, l, u, c) { var h = e.getItemVisual(n, 'color'); var d = e.getItemVisual(n, 'opacity'); var f = i.getModel('itemStyle'); var p = i.getModel('emphasis.itemStyle').getBarItemStyle(); c || t.setShape('r', f.get('barBorderRadius') || 0), t.useStyle(r.defaults({ fill: h, opacity: d }, f.getBarItemStyle())); var g = i.getShallow('cursor'); g && t.attr('cursor', g); var v = u ? s.height > 0 ? 'bottom' : 'top' : s.width > 0 ? 'left' : 'right'; c || o(t.style, p, i, h, l, n, v), a.setHoverStyle(t, p) } var M = u.extend({ type: 'largeBar', shape: { points: [] }, buildPath: function (t, e) { for (var n = e.points, i = this.__startPoint, r = this.__baseDimIdx, a = 0; a < n.length; a += 2)i[r] = n[a + r], t.moveTo(i[0], i[1]), t.lineTo(n[a], n[a + 1]) } }); function I (t, e, n) { var i = t.getData(); var r = []; var a = i.getLayout('valueAxisHorizontal') ? 1 : 0; r[1 - a] = i.getLayout('valueAxisStart'); var o = new M({ shape: { points: i.getLayout('largePoints') }, incremental: !!n, __startPoint: r, __baseDimIdx: a, __largeDataIndices: i.getLayout('largeDataIndices'), __barWidth: i.getLayout('barWidth') }); e.add(o), (function (t, e, n) { var i = n.getVisual('borderColor') || n.getVisual('color'); var r = e.getModel('itemStyle').getItemStyle(['color', 'borderColor']); t.useStyle(r), t.style.fill = null, t.style.stroke = i, t.style.lineWidth = n.getLayout('barWidth') }(o, t, i)), o.seriesIndex = t.seriesIndex, t.get('silent') || (o.on('mousedown', A), o.on('mousemove', A)) } var A = c(function (t) { var e = (function (t, e, n) { var i = t.__baseDimIdx; var r = 1 - i; var a = t.shape.points; var o = t.__largeDataIndices; var s = Math.abs(t.__barWidth / 2); var l = t.__startPoint[r]; p[0] = e, p[1] = n; for (var u = p[i], c = p[1 - i], h = u - s, d = u + s, f = 0, g = a.length / 2; f < g; f++) { var v = 2 * f; var m = a[v + i]; var y = a[v + r]; if (m >= h && m <= d && (l <= y ? c >= l && c <= y : c >= y && c <= l)) return o[f] } return -1 }(this, t.offsetX, t.offsetY)); this.dataIndex = e >= 0 ? e : null }, 30, !1); t.exports = g }, function (t, e, n) { var i = n(44)([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['stroke', 'barBorderColor'], ['lineWidth', 'barBorderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]); var r = { getBarItemStyle: function (t) { var e = i(this, t); if (this.getBorderLineDash) { var n = this.getBorderLineDash(); n && (e.lineDash = n) } return e } }; t.exports = r }, function (t, e, n) { var i = (0, n(2).extendShape)({ type: 'sausage', shape: { cx: 0, cy: 0, r0: 0, r: 0, startAngle: 0, endAngle: 2 * Math.PI, clockwise: !0 }, buildPath: function (t, e) { var n = e.cx; var i = e.cy; var r = Math.max(e.r0 || 0, 0); var a = Math.max(e.r, 0); var o = 0.5 * (a - r); var s = r + o; var l = e.startAngle; var u = e.endAngle; var c = e.clockwise; var h = Math.cos(l); var d = Math.sin(l); var f = Math.cos(u); var p = Math.sin(u); (c ? u - l < 2 * Math.PI : l - u < 2 * Math.PI) && (t.moveTo(h * r + n, d * r + i), t.arc(h * s + n, d * s + i, o, -Math.PI + l, l, !c)), t.arc(n, i, a, l, u, !c), t.moveTo(f * a + n, p * a + i), t.arc(f * s + n, p * s + i, o, u - 2 * Math.PI, u - Math.PI, !c), r !== 0 && (t.arc(n, i, r, u, l, c), t.moveTo(h * r + n, p * r + i)), t.closePath() } }); t.exports = i }, function (t, e, n) { var i = n(1); var r = n(0); n(293), n(294); var a = n(171); var o = n(81); var s = n(295); var l = n(63); a('pie', [{ type: 'pieToggleSelect', event: 'pieselectchanged', method: 'toggleSelected' }, { type: 'pieSelect', event: 'pieselected', method: 'select' }, { type: 'pieUnSelect', event: 'pieunselected', method: 'unSelect' }]), i.registerVisual(o('pie')), i.registerLayout(r.curry(s, 'pie')), i.registerProcessor(l('pie')) }, function (t, e, n) { var i = n(1); var r = n(49); var a = n(0); var o = n(4); var s = n(3).getPercentWithPrecision; var l = n(99); var u = n(36).retrieveRawAttr; var c = i.extendSeriesModel({ type: 'series.pie', init: function (t) { c.superApply(this, 'init', arguments), this.legendDataProvider = function () { return this.getRawData() }, this.updateSelectedMap(this._createSelectableList()), this._defaultLabelLine(t) }, mergeOption: function (t) { c.superCall(this, 'mergeOption', t), this.updateSelectedMap(this._createSelectableList()) }, getInitialData: function (t, e) { return r(this, ['value']) }, _createSelectableList: function () { for (var t = this.getRawData(), e = t.mapDimension('value'), n = [], i = 0, r = t.count(); i < r; i++)n.push({ name: t.getName(i), value: t.get(e, i), selected: u(t, i, 'selected') }); return n }, getDataParams: function (t) { var e = this.getData(); var n = c.superCall(this, 'getDataParams', t); var i = []; return e.each(e.mapDimension('value'), function (t) { i.push(t) }), n.percent = s(i, t, e.hostModel.get('percentPrecision')), n.$vars.push('percent'), n }, _defaultLabelLine: function (t) { o.defaultEmphasis(t, 'labelLine', ['show']); var e = t.labelLine; var n = t.emphasis.labelLine; e.show = e.show && t.label.show, n.show = n.show && t.emphasis.label.show }, defaultOption: { zlevel: 0, z: 2, legendHoverLink: !0, hoverAnimation: !0, center: ['50%', '50%'], radius: [0, '75%'], clockwise: !0, startAngle: 90, minAngle: 0, minShowLabelAngle: 0, selectedOffset: 10, hoverOffset: 10, avoidLabelOverlap: !0, percentPrecision: 2, stillShowZeroSum: !0, label: { rotate: !1, show: !0, position: 'outer' }, labelLine: { show: !0, length: 15, length2: 15, smooth: !1, lineStyle: { width: 1, type: 'solid' } }, itemStyle: { borderWidth: 1 }, animationType: 'expansion', animationTypeUpdate: 'transition', animationEasing: 'cubicOut' } }); a.mixin(c, l); var h = c; t.exports = h }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(24); function o (t, e, n, i) { var r = e.getData(); var a = this.dataIndex; var o = r.getName(a); var l = e.get('selectedOffset'); i.dispatchAction({ type: 'pieToggleSelect', from: t, name: o, seriesId: e.id }), r.each(function (t) { s(r.getItemGraphicEl(t), r.getItemLayout(t), e.isSelected(r.getName(t)), l, n) }) } function s (t, e, n, i, r) { var a = (e.startAngle + e.endAngle) / 2; var o = n ? i : 0; var s = [Math.cos(a) * o, Math.sin(a) * o]; r ? t.animate().when(200, { position: s }).start('bounceOut') : t.attr('position', s) } function l (t, e) { r.Group.call(this); var n = new r.Sector({ z2: 2 }); var i = new r.Polyline(); var a = new r.Text(); this.add(n), this.add(i), this.add(a), this.updateData(t, e, !0) } var u = l.prototype; u.updateData = function (t, e, n) { var a = this.childAt(0); var o = this.childAt(1); var l = this.childAt(2); var u = t.hostModel; var c = t.getItemModel(e); var h = t.getItemLayout(e); var d = i.extend({}, h); d.label = null; var f = u.getShallow('animationTypeUpdate'); n ? (a.setShape(d), u.getShallow('animationType') === 'scale' ? (a.shape.r = h.r0, r.initProps(a, { shape: { r: h.r } }, u, e)) : (a.shape.endAngle = h.startAngle, r.updateProps(a, { shape: { endAngle: h.endAngle } }, u, e))) : f === 'expansion' ? a.setShape(d) : r.updateProps(a, { shape: d }, u, e); var p = t.getItemVisual(e, 'color'); a.useStyle(i.defaults({ lineJoin: 'bevel', fill: p }, c.getModel('itemStyle').getItemStyle())), a.hoverStyle = c.getModel('emphasis.itemStyle').getItemStyle(); var g = c.getShallow('cursor'); g && a.attr('cursor', g), s(this, t.getItemLayout(e), u.isSelected(null, e), u.get('selectedOffset'), u.get('animation')); var v = !n && f === 'transition'; this._updateLabel(t, e, v), this.highDownOnUpdate = c.get('hoverAnimation') && u.isAnimationEnabled() ? function (t, e) { e === 'emphasis' ? (o.ignore = o.hoverIgnore, l.ignore = l.hoverIgnore, a.stopAnimation(!0), a.animateTo({ shape: { r: h.r + u.get('hoverOffset') } }, 300, 'elasticOut')) : (o.ignore = o.normalIgnore, l.ignore = l.normalIgnore, a.stopAnimation(!0), a.animateTo({ shape: { r: h.r } }, 300, 'elasticOut')) } : null, r.setHoverStyle(this) }, u._updateLabel = function (t, e, n) { var i = this.childAt(1); var a = this.childAt(2); var o = t.hostModel; var s = t.getItemModel(e); var l = t.getItemLayout(e).label; var u = t.getItemVisual(e, 'color'); if (!l || isNaN(l.x) || isNaN(l.y))a.ignore = a.normalIgnore = a.hoverIgnore = i.ignore = i.normalIgnore = i.hoverIgnore = !0; else { var c = { points: l.linePoints || [[l.x, l.y], [l.x, l.y], [l.x, l.y]] }; var h = { x: l.x, y: l.y }; n ? (r.updateProps(i, { shape: c }, o, e), r.updateProps(a, { style: h }, o, e)) : (i.attr({ shape: c }), a.attr({ style: h })), a.attr({ rotation: l.rotation, origin: [l.x, l.y], z2: 10 }); var d = s.getModel('label'); var f = s.getModel('emphasis.label'); var p = s.getModel('labelLine'); var g = s.getModel('emphasis.labelLine'); u = t.getItemVisual(e, 'color'); r.setLabelStyle(a.style, a.hoverStyle = {}, d, f, { labelFetcher: t.hostModel, labelDataIndex: e, defaultText: t.getName(e), autoColor: u, useInsideStyle: !!l.inside }, { textAlign: l.textAlign, textVerticalAlign: l.verticalAlign, opacity: t.getItemVisual(e, 'opacity') }), a.ignore = a.normalIgnore = !d.get('show'), a.hoverIgnore = !f.get('show'), i.ignore = i.normalIgnore = !p.get('show'), i.hoverIgnore = !g.get('show'), i.setStyle({ stroke: u, opacity: t.getItemVisual(e, 'opacity') }), i.setStyle(p.getModel('lineStyle').getLineStyle()), i.hoverStyle = g.getModel('lineStyle').getLineStyle(); var v = p.get('smooth'); v && !0 === v && (v = 0.4), i.setShape({ smooth: v }) } }, i.inherits(l, r.Group); var c = a.extend({ type: 'pie', init: function () { var t = new r.Group(); this._sectorGroup = t }, render: function (t, e, n, r) { if (!r || r.from !== this.uid) { var a = t.getData(); var s = this._data; var u = this.group; var c = e.get('animation'); var h = !s; var d = t.get('animationType'); var f = t.get('animationTypeUpdate'); var p = i.curry(o, this.uid, t, c, n); var g = t.get('selectedMode'); if (a.diff(s).add(function (t) { var e = new l(a, t); h && d !== 'scale' && e.eachChild(function (t) { t.stopAnimation(!0) }), g && e.on('click', p), a.setItemGraphicEl(t, e), u.add(e) }).update(function (t, e) { var n = s.getItemGraphicEl(e); h || f === 'transition' || n.eachChild(function (t) { t.stopAnimation(!0) }), n.updateData(a, t), n.off('click'), g && n.on('click', p), u.add(n), a.setItemGraphicEl(t, n) }).remove(function (t) { var e = s.getItemGraphicEl(t); u.remove(e) }).execute(), c && a.count() > 0 && (h ? d !== 'scale' : f !== 'transition')) { for (var v = a.getItemLayout(0), m = 1; isNaN(v.startAngle) && m < a.count(); ++m)v = a.getItemLayout(m); var y = Math.max(n.getWidth(), n.getHeight()) / 2; var x = i.bind(u.removeClipPath, u); u.setClipPath(this._createClipPath(v.cx, v.cy, y, v.startAngle, v.clockwise, x, t, h)) } else u.removeClipPath(); this._data = a } }, dispose: function () {}, _createClipPath: function (t, e, n, i, a, o, s, l) { var u = new r.Sector({ shape: { cx: t, cy: e, r0: 0, r: n, startAngle: i, endAngle: i, clockwise: a } }); return (l ? r.initProps : r.updateProps)(u, { shape: { endAngle: i + (a ? 1 : -1) * Math.PI * 2 } }, s, o), u }, containPoint: function (t, e) { var n = e.getData().getItemLayout(0); if (n) { var i = t[0] - n.cx; var r = t[1] - n.cy; var a = Math.sqrt(i * i + r * r); return a <= n.r && a >= n.r0 } } }); t.exports = c }, function (t, e, n) { var i = n(3); var r = i.parsePercent; var a = i.linearMap; var o = n(296); var s = n(0); var l = 2 * Math.PI; var u = Math.PI / 180; t.exports = function (t, e, n, i) { e.eachSeriesByType(t, function (t) { var e = t.getData(); var i = e.mapDimension('value'); var c = t.get('center'); var h = t.get('radius'); s.isArray(h) || (h = [0, h]), s.isArray(c) || (c = [c, c]); var d = n.getWidth(); var f = n.getHeight(); var p = Math.min(d, f); var g = r(c[0], d); var v = r(c[1], f); var m = r(h[0], p / 2); var y = r(h[1], p / 2); var x = -t.get('startAngle') * u; var _ = t.get('minAngle') * u; var b = 0; e.each(i, function (t) { !isNaN(t) && b++ }); var w = e.getSum(i); var S = Math.PI / (w || b) * 2; var M = t.get('clockwise'); var I = t.get('roseType'); var A = t.get('stillShowZeroSum'); var T = e.getDataExtent(i); T[0] = 0; var C = l; var D = 0; var L = x; var P = M ? 1 : -1; if (e.each(i, function (t, n) { var i; if (isNaN(t))e.setItemLayout(n, { angle: NaN, startAngle: NaN, endAngle: NaN, clockwise: M, cx: g, cy: v, r0: m, r: I ? NaN : y }); else { (i = I !== 'area' ? w === 0 && A ? S : t * S : l / b) < _ ? (i = _, C -= _) : D += t; var r = L + P * i; e.setItemLayout(n, { angle: i, startAngle: L, endAngle: r, clockwise: M, cx: g, cy: v, r0: m, r: I ? a(t, T, [m, y]) : y }), L = r } }), C < l && b) if (C <= 0.001) { var k = l / b; e.each(i, function (t, n) { if (!isNaN(t)) { var i = e.getItemLayout(n); i.angle = k, i.startAngle = x + P * n * k, i.endAngle = x + P * (n + 1) * k } }) } else S = C / D, L = x, e.each(i, function (t, n) { if (!isNaN(t)) { var i = e.getItemLayout(n); var r = i.angle === _ ? _ : t * S; i.startAngle = L, i.endAngle = L + P * r, L += P * r } }); o(t, y, d, f) }) } }, function (t, e, n) { var i = n(17); var r = Math.PI / 180; function a (t, e, n, i, r, a, o) { function s (e, n, i, r) { for (var a = e; a < n; a++) if (t[a].y += i, a > e && a + 1 < n && t[a + 1].y > t[a].y + t[a].height) return void l(a, i / 2); l(n - 1, i / 2) } function l (e, n) { for (var i = e; i >= 0 && (t[i].y -= n, !(i > 0 && t[i].y > t[i - 1].y + t[i - 1].height)); i--); } function u (t, e, n, i, r, a) { for (var o = e ? Number.MAX_VALUE : 0, s = 0, l = t.length; s < l; s++) { var u = Math.abs(t[s].y - i); var c = t[s].len; var h = t[s].len2; var d = u < r + c ? Math.sqrt((r + c + h) * (r + c + h) - u * u) : Math.abs(t[s].x - n); e && d >= o && (d = o - 10), !e && d <= o && (d = o + 10), t[s].x = n + d * a, o = d } }t.sort(function (t, e) { return t.y - e.y }); for (var c, h = 0, d = t.length, f = [], p = [], g = 0; g < d; g++)(c = t[g].y - h) < 0 && s(g, d, -c), h = t[g].y + t[g].height; o - h < 0 && l(d - 1, h - o); for (g = 0; g < d; g++)t[g].y >= n ? p.push(t[g]) : f.push(t[g]); u(f, !1, e, n, i, r), u(p, !0, e, n, i, r) } function o (t) { return t.position === 'center' }t.exports = function (t, e, n, s, l) { var u; var c; var h = t.getData(); var d = []; var f = !1; var p = (t.get('minShowLabelAngle') || 0) * r; h.each(function (n) { var r = h.getItemLayout(n); var a = h.getItemModel(n); var o = a.getModel('label'); var s = o.get('position') || a.get('emphasis.label.position'); var l = a.getModel('labelLine'); var g = l.get('length'); var v = l.get('length2'); if (!(r.angle < p)) { var m; var y; var x; var _; var b = (r.startAngle + r.endAngle) / 2; var w = Math.cos(b); var S = Math.sin(b); u = r.cx, c = r.cy; var M = s === 'inside' || s === 'inner'; if (s === 'center')m = r.cx, y = r.cy, _ = 'center'; else { var I = (M ? (r.r + r.r0) / 2 * w : r.r * w) + u; var A = (M ? (r.r + r.r0) / 2 * S : r.r * S) + c; if (m = I + 3 * w, y = A + 3 * S, !M) { var T = I + w * (g + e - r.r); var C = A + S * (g + e - r.r); var D = T + (w < 0 ? -1 : 1) * v; m = D + (w < 0 ? -5 : 5), y = C, x = [[I, A], [T, C], [D, C]] }_ = M ? 'center' : w > 0 ? 'left' : 'right' } var L; var P = o.getFont(); var k = o.get('rotate'); L = typeof k === 'number' ? k * (Math.PI / 180) : k ? w < 0 ? -b + Math.PI : -b : 0; var O = t.getFormattedLabel(n, 'normal') || h.getName(n); var E = i.getBoundingRect(O, P, _, 'top'); f = !!L, r.label = { x: m, y: y, position: s, height: E.height, len: g, len2: v, linePoints: x, textAlign: _, verticalAlign: 'middle', rotation: L, inside: M }, M || d.push(r.label) } }), !f && t.get('avoidLabelOverlap') && (function (t, e, n, i, r, s) { for (var l = [], u = [], c = 0; c < t.length; c++)o(t[c]) || (t[c].x < e ? l.push(t[c]) : u.push(t[c])); for (a(u, e, n, i, 1, 0, s), a(l, e, n, i, -1, 0, s), c = 0; c < t.length; c++) if (!o(t[c])) { var h = t[c].linePoints; if (h) { var d = h[1][0] - h[2][0]; t[c].x < e ? h[2][0] = t[c].x + 3 : h[2][0] = t[c].x - 3, h[1][1] = h[2][1] = t[c].y, h[1][0] = h[2][0] + d } } }(d, u, c, e, 0, s)) } }, function (t, e, n) { var i = n(1); n(298), n(299); var r = n(38); var a = n(61); n(62), i.registerVisual(r('scatter', 'circle')), i.registerLayout(a('scatter')) }, function (t, e, n) { var i = n(27); var r = n(14).extend({ type: 'series.scatter', dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'], getInitialData: function (t, e) { return i(this.getSource(), this) }, brushSelector: 'point', getProgressive: function () { var t = this.option.progressive; return t == null ? this.option.large ? 5e3 : this.get('progressive') : t }, getProgressiveThreshold: function () { var t = this.option.progressiveThreshold; return t == null ? this.option.large ? 1e4 : this.get('progressiveThreshold') : t }, defaultOption: { coordinateSystem: 'cartesian2d', zlevel: 0, z: 2, legendHoverLink: !0, hoverAnimation: !0, symbolSize: 10, large: !1, largeThreshold: 2e3, itemStyle: { opacity: 0.8 }, clip: !0 } }); t.exports = r }, function (t, e, n) { var i = n(1); var r = n(59); var a = n(300); var o = n(61); i.extendChartView({ type: 'scatter', render: function (t, e, n) { var i = t.getData(); this._updateSymbolDraw(i, t).updateData(i, { clipShape: this._getClipShape(t) }), this._finished = !0 }, incrementalPrepareRender: function (t, e, n) { var i = t.getData(); this._updateSymbolDraw(i, t).incrementalPrepareUpdate(i), this._finished = !1 }, incrementalRender: function (t, e, n) { this._symbolDraw.incrementalUpdate(t, e.getData(), { clipShape: this._getClipShape(e) }), this._finished = t.end === e.getData().count() }, updateTransform: function (t, e, n) { var i = t.getData(); if (this.group.dirty(), !this._finished || i.count() > 1e4 || !this._symbolDraw.isPersistent()) return { update: !0 }; var r = o().reset(t); r.progress && r.progress({ start: 0, end: i.count() }, i), this._symbolDraw.updateLayout(i) }, _getClipShape: function (t) { var e = t.coordinateSystem; var n = e && e.getArea && e.getArea(); return t.get('clip', !0) ? n : null }, _updateSymbolDraw: function (t, e) { var n = this._symbolDraw; var i = e.pipelineContext.large; return n && i === this._isLargeDraw || (n && n.remove(), n = this._symbolDraw = i ? new a() : new r(), this._isLargeDraw = i, this.group.removeAll()), this.group.add(n.group), n }, remove: function (t, e) { this._symbolDraw && this._symbolDraw.remove(!0), this._symbolDraw = null }, dispose: function () {} }) }, function (t, e, n) { var i = n(2); var r = n(19).createSymbol; var a = n(93); var o = i.extendShape({ shape: { points: null }, symbolProxy: null, softClipShape: null, buildPath: function (t, e) { var n = e.points; var i = e.size; var r = this.symbolProxy; var a = r.shape; if (!((t.getContext ? t.getContext() : t) && i[0] < 4)) for (var o = 0; o < n.length;) { var s = n[o++]; var l = n[o++]; isNaN(s) || isNaN(l) || (this.softClipShape && !this.softClipShape.contain(s, l) || (a.x = s - i[0] / 2, a.y = l - i[1] / 2, a.width = i[0], a.height = i[1], r.buildPath(t, a, !0))) } }, afterBrush: function (t) { var e = this.shape; var n = e.points; var i = e.size; if (i[0] < 4) { this.setTransform(t); for (var r = 0; r < n.length;) { var a = n[r++]; var o = n[r++]; isNaN(a) || isNaN(o) || (this.softClipShape && !this.softClipShape.contain(a, o) || t.fillRect(a - i[0] / 2, o - i[1] / 2, i[0], i[1])) } this.restoreTransform(t) } }, findDataIndex: function (t, e) { for (var n = this.shape, i = n.points, r = n.size, a = Math.max(r[0], 4), o = Math.max(r[1], 4), s = i.length / 2 - 1; s >= 0; s--) { var l = 2 * s; var u = i[l] - a / 2; var c = i[l + 1] - o / 2; if (t >= u && e >= c && t <= u + a && e <= c + o) return s } return -1 } }); function s () { this.group = new i.Group() } var l = s.prototype; l.isPersistent = function () { return !this._incremental }, l.updateData = function (t, e) { this.group.removeAll(); var n = new o({ rectHover: !0, cursor: 'default' }); n.setShape({ points: t.getLayout('symbolPoints') }), this._setCommon(n, t, !1, e), this.group.add(n), this._incremental = null }, l.updateLayout = function (t) { if (!this._incremental) { var e = t.getLayout('symbolPoints'); this.group.eachChild(function (t) { if (t.startIndex != null) { var n = 2 * (t.endIndex - t.startIndex); var i = 4 * t.startIndex * 2; e = new Float32Array(e.buffer, i, n) }t.setShape('points', e) }) } }, l.incrementalPrepareUpdate = function (t) { this.group.removeAll(), this._clearIncremental(), t.count() > 2e6 ? (this._incremental || (this._incremental = new a({ silent: !0 })), this.group.add(this._incremental)) : this._incremental = null }, l.incrementalUpdate = function (t, e, n) { var i; this._incremental ? (i = new o(), this._incremental.addDisplayable(i, !0)) : ((i = new o({ rectHover: !0, cursor: 'default', startIndex: t.start, endIndex: t.end })).incremental = !0, this.group.add(i)), i.setShape({ points: e.getLayout('symbolPoints') }), this._setCommon(i, e, !!this._incremental, n) }, l._setCommon = function (t, e, n, i) { var a = e.hostModel; i = i || {}; var o = e.getVisual('symbolSize'); t.setShape('size', o instanceof Array ? o : [o, o]), t.softClipShape = i.clipShape || null, t.symbolProxy = r(e.getVisual('symbol'), 0, 0, 0, 0), t.setColor = t.symbolProxy.setColor; var s = t.shape.size[0] < 4; t.useStyle(a.getModel('itemStyle').getItemStyle(s ? ['color', 'shadowBlur', 'shadowColor'] : ['color'])); var l = e.getVisual('color'); l && t.setColor(l), n || (t.seriesIndex = a.seriesIndex, t.on('mousemove', function (e) { t.dataIndex = null; var n = t.findDataIndex(e.offsetX, e.offsetY); n >= 0 && (t.dataIndex = n + (t.startIndex || 0)) })) }, l.remove = function () { this._clearIncremental(), this._incremental = null, this.group.removeAll() }, l._clearIncremental = function () { var t = this._incremental; t && t.clearDisplaybles() }; var u = s; t.exports = u }, function (t, e, n) { var i = n(1); n(302), n(307), n(308); var r = n(81); var a = n(38); var o = n(309); var s = n(63); var l = n(310); i.registerVisual(r('radar')), i.registerVisual(a('radar', 'circle')), i.registerLayout(o), i.registerProcessor(s('radar')), i.registerPreprocessor(l) }, function (t, e, n) { n(303), n(305), n(306) }, function (t, e, n) { var i = n(0); var r = n(304); var a = n(76); var o = n(3); var s = n(21); var l = s.getScaleExtent; var u = s.niceScaleExtent; var c = n(20); var h = n(160); function d (t, e, n) { this._model = t, this.dimensions = [], this._indicatorAxes = i.map(t.getIndicatorModels(), function (t, e) { var n = 'indicator_' + e; var i = new r(n, t.get('axisType') === 'log' ? new h() : new a()); return i.name = t.get('name'), i.model = t, t.axis = i, this.dimensions.push(n), i }, this), this.resize(t, n), this.cx, this.cy, this.r, this.r0, this.startAngle }d.prototype.getIndicatorAxes = function () { return this._indicatorAxes }, d.prototype.dataToPoint = function (t, e) { var n = this._indicatorAxes[e]; return this.coordToPoint(n.dataToCoord(t), e) }, d.prototype.coordToPoint = function (t, e) { var n = this._indicatorAxes[e].angle; return [this.cx + t * Math.cos(n), this.cy - t * Math.sin(n)] }, d.prototype.pointToData = function (t) { var e = t[0] - this.cx; var n = t[1] - this.cy; var i = Math.sqrt(e * e + n * n); e /= i, n /= i; for (var r, a = Math.atan2(-n, e), o = 1 / 0, s = -1, l = 0; l < this._indicatorAxes.length; l++) { var u = this._indicatorAxes[l]; var c = Math.abs(a - u.angle); c < o && (r = u, s = l, o = c) } return [s, +(r && r.coordToData(i))] }, d.prototype.resize = function (t, e) { var n = t.get('center'); var r = e.getWidth(); var a = e.getHeight(); var s = Math.min(r, a) / 2; this.cx = o.parsePercent(n[0], r), this.cy = o.parsePercent(n[1], a), this.startAngle = t.get('startAngle') * Math.PI / 180; var l = t.get('radius'); typeof l !== 'string' && typeof l !== 'number' || (l = [0, l]), this.r0 = o.parsePercent(l[0], s), this.r = o.parsePercent(l[1], s), i.each(this._indicatorAxes, function (t, e) { t.setExtent(this.r0, this.r); var n = this.startAngle + e * Math.PI * 2 / this._indicatorAxes.length; n = Math.atan2(Math.sin(n), Math.cos(n)), t.angle = n }, this) }, d.prototype.update = function (t, e) { var n = this._indicatorAxes; var r = this._model; i.each(n, function (t) { t.scale.setExtent(1 / 0, -1 / 0) }), t.eachSeriesByType('radar', function (e, a) { if (e.get('coordinateSystem') === 'radar' && t.getComponent('radar', e.get('radarIndex')) === r) { var o = e.getData(); i.each(n, function (t) { t.scale.unionExtentFromData(o, o.mapDimension(t.dim)) }) } }, this); var a = r.get('splitNumber'); function s (t) { var e = Math.pow(10, Math.floor(Math.log(t) / Math.LN10)); var n = t / e; return n === 2 ? n = 5 : n *= 2, n * e }i.each(n, function (t, e) { var n = l(t.scale, t.model); u(t.scale, t.model); var i = t.model; var r = t.scale; var c = i.getMin(); var h = i.getMax(); var d = r.getInterval(); if (c != null && h != null)r.setExtent(+c, +h), r.setInterval((h - c) / a); else if (c != null) { var f; do { f = c + d * a, r.setExtent(+c, f), r.setInterval(d), d = s(d) } while (f < n[1] && isFinite(f) && isFinite(n[1])) } else if (h != null) { var p; do { p = h - d * a, r.setExtent(p, +h), r.setInterval(d), d = s(d) } while (p > n[0] && isFinite(p) && isFinite(n[0])) } else { r.getTicks().length - 1 > a && (d = s(d)); var g = Math.round((n[0] + n[1]) / 2 / d) * d; var v = Math.round(a / 2); r.setExtent(o.round(g - v * d), o.round(g + (a - v) * d)), r.setInterval(d) } }) }, d.dimensions = [], d.create = function (t, e) { var n = []; return t.eachComponent('radar', function (i) { var r = new d(i, t, e); n.push(r), i.coordinateSystem = r }), t.eachSeriesByType('radar', function (t) { t.get('coordinateSystem') === 'radar' && (t.coordinateSystem = n[t.get('radarIndex') || 0]) }), n }, c.register('radar', d); var f = d; t.exports = f }, function (t, e, n) { var i = n(0); var r = n(31); function a (t, e, n) { r.call(this, t, e, n), this.type = 'value', this.angle = 0, this.name = '', this.model }i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(167); var o = n(12); var s = n(48); var l = a.valueAxis; function u (t, e) { return r.defaults({ show: e }, t) } var c = i.extendComponentModel({ type: 'radar', optionUpdated: function () { var t = this.get('boundaryGap'); var e = this.get('splitNumber'); var n = this.get('scale'); var i = this.get('axisLine'); var a = this.get('axisTick'); var l = this.get('axisType'); var u = this.get('axisLabel'); var c = this.get('name'); var h = this.get('name.show'); var d = this.get('name.formatter'); var f = this.get('nameGap'); var p = this.get('triggerEvent'); var g = r.map(this.get('indicator') || [], function (g) { g.max != null && g.max > 0 && !g.min ? g.min = 0 : g.min != null && g.min < 0 && !g.max && (g.max = 0); var v = c; if (g.color != null && (v = r.defaults({ color: g.color }, c)), g = r.merge(r.clone(g), { boundaryGap: t, splitNumber: e, scale: n, axisLine: i, axisTick: a, axisType: l, axisLabel: u, name: g.text, nameLocation: 'end', nameGap: f, nameTextStyle: v, triggerEvent: p }, !1), h || (g.name = ''), typeof d === 'string') { var m = g.name; g.name = d.replace('{value}', m != null ? m : '') } else typeof d === 'function' && (g.name = d(g.name, g)); var y = r.extend(new o(g, null, this.ecModel), s); return y.mainType = 'radar', y.componentIndex = this.componentIndex, y }, this); this.getIndicatorModels = function () { return g } }, defaultOption: { zlevel: 0, z: 0, center: ['50%', '50%'], radius: '75%', startAngle: 90, name: { show: !0 }, boundaryGap: [0, 0], splitNumber: 5, nameGap: 15, scale: !1, shape: 'polygon', axisLine: r.merge({ lineStyle: { color: '#bbb' } }, l.axisLine), axisLabel: u(l.axisLabel, !1), axisTick: u(l.axisTick, !1), axisType: 'interval', splitLine: u(l.splitLine, !0), splitArea: u(l.splitArea, !0), indicator: [] } }); t.exports = c }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(32); var o = n(2); var s = ['axisLine', 'axisTickLabel', 'axisName']; var l = i.extendComponentView({ type: 'radar', render: function (t, e, n) { this.group.removeAll(), this._buildAxes(t), this._buildSplitLineAndArea(t) }, _buildAxes: function (t) { var e = t.coordinateSystem; var n = e.getIndicatorAxes(); var i = r.map(n, function (t) { return new a(t.model, { position: [e.cx, e.cy], rotation: t.angle, labelDirection: -1, tickDirection: -1, nameDirection: 1 }) }); r.each(i, function (t) { r.each(s, t.add, t), this.group.add(t.getGroup()) }, this) }, _buildSplitLineAndArea: function (t) { var e = t.coordinateSystem; var n = e.getIndicatorAxes(); if (n.length) { var i = t.get('shape'); var a = t.getModel('splitLine'); var s = t.getModel('splitArea'); var l = a.getModel('lineStyle'); var u = s.getModel('areaStyle'); var c = a.get('show'); var h = s.get('show'); var d = l.get('color'); var f = u.get('color'); d = r.isArray(d) ? d : [d], f = r.isArray(f) ? f : [f]; var p = []; var g = []; if (i === 'circle') for (var v = n[0].getTicksCoords(), m = e.cx, y = e.cy, x = 0; x < v.length; x++) { if (c)p[T(p, d, x)].push(new o.Circle({ shape: { cx: m, cy: y, r: v[x].coord } })); if (h && x < v.length - 1)g[T(g, f, x)].push(new o.Ring({ shape: { cx: m, cy: y, r0: v[x].coord, r: v[x + 1].coord } })) } else { var _; var b = r.map(n, function (t, n) { var i = t.getTicksCoords(); return _ = _ == null ? i.length - 1 : Math.min(i.length - 1, _), r.map(i, function (t) { return e.coordToPoint(t.coord, n) }) }); var w = []; for (x = 0; x <= _; x++) { for (var S = [], M = 0; M < n.length; M++)S.push(b[M][x]); if (S[0] && S.push(S[0].slice()), c)p[T(p, d, x)].push(new o.Polyline({ shape: { points: S } })); if (h && w)g[T(g, f, x - 1)].push(new o.Polygon({ shape: { points: S.concat(w) } })); w = S.slice().reverse() } } var I = l.getLineStyle(); var A = u.getAreaStyle(); r.each(g, function (t, e) { this.group.add(o.mergePath(t, { style: r.defaults({ stroke: 'none', fill: f[e % f.length] }, A), silent: !0 })) }, this), r.each(p, function (t, e) { this.group.add(o.mergePath(t, { style: r.defaults({ fill: 'none', stroke: d[e % d.length] }, I), silent: !0 })) }, this) } function T (t, e, n) { var i = n % e.length; return t[i] = t[i] || [], i } } }); t.exports = l }, function (t, e, n) { var i = n(14); var r = n(49); var a = n(0); var o = n(9).encodeHTML; var s = i.extend({ type: 'series.radar', dependencies: ['radar'], init: function (t) { s.superApply(this, 'init', arguments), this.legendDataProvider = function () { return this.getRawData() } }, getInitialData: function (t, e) { return r(this, { generateCoord: 'indicator_', generateCoordCount: 1 / 0 }) }, formatTooltip: function (t) { var e = this.getData(); var n = this.coordinateSystem.getIndicatorAxes(); var i = this.getData().getName(t); return o(i === '' ? this.name : i) + '<br/>' + a.map(n, function (n, i) { var r = e.get(e.mapDimension(n.dim), t); return o(n.name + ' : ' + r) }).join('<br />') }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'radar', legendHoverLink: !0, radarIndex: 0, lineStyle: { width: 2, type: 'solid' }, label: { position: 'top' }, symbol: 'emptyCircle', symbolSize: 4 } }); var l = s; t.exports = l }, function (t, e, n) { var i = n(1); var r = n(2); var a = n(0); var o = n(19); var s = i.extendChartView({ type: 'radar', render: function (t, e, n) { var i = t.coordinateSystem; var s = this.group; var l = t.getData(); var u = this._data; function c (t, e) { var n = t.getItemVisual(e, 'symbol') || 'circle'; var i = t.getItemVisual(e, 'color'); if (n !== 'none') { var r = (function (t) { return a.isArray(t) || (t = [+t, +t]), t }(t.getItemVisual(e, 'symbolSize'))); var s = o.createSymbol(n, -1, -1, 2, 2, i); return s.attr({ style: { strokeNoScale: !0 }, z2: 100, scale: [r[0] / 2, r[1] / 2] }), s } } function h (e, n, i, a, o, s) { i.removeAll(); for (var l = 0; l < n.length - 1; l++) { var u = c(a, o); u && (u.__dimIdx = l, e[l] ? (u.attr('position', e[l]), r[s ? 'initProps' : 'updateProps'](u, { position: n[l] }, t, o)) : u.attr('position', n[l]), i.add(u)) } } function d (t) { return a.map(t, function (t) { return [i.cx, i.cy] }) }l.diff(u).add(function (e) { var n = l.getItemLayout(e); if (n) { var i = new r.Polygon(); var a = new r.Polyline(); var o = { shape: { points: n } }; i.shape.points = d(n), a.shape.points = d(n), r.initProps(i, o, t, e), r.initProps(a, o, t, e); var s = new r.Group(); var u = new r.Group(); s.add(a), s.add(i), s.add(u), h(a.shape.points, n, u, l, e, !0), l.setItemGraphicEl(e, s) } }).update(function (e, n) { var i = u.getItemGraphicEl(n); var a = i.childAt(0); var o = i.childAt(1); var s = i.childAt(2); var c = { shape: { points: l.getItemLayout(e) } }; c.shape.points && (h(a.shape.points, c.shape.points, s, l, e, !1), r.updateProps(a, c, t), r.updateProps(o, c, t), l.setItemGraphicEl(e, i)) }).remove(function (t) { s.remove(u.getItemGraphicEl(t)) }).execute(), l.eachItemGraphicEl(function (t, e) { var n = l.getItemModel(e); var i = t.childAt(0); var o = t.childAt(1); var u = t.childAt(2); var c = l.getItemVisual(e, 'color'); s.add(t), i.useStyle(a.defaults(n.getModel('lineStyle').getLineStyle(), { fill: 'none', stroke: c })), i.hoverStyle = n.getModel('emphasis.lineStyle').getLineStyle(); var h = n.getModel('areaStyle'); var d = n.getModel('emphasis.areaStyle'); var f = h.isEmpty() && h.parentModel.isEmpty(); var p = d.isEmpty() && d.parentModel.isEmpty(); p = p && f, o.ignore = f, o.useStyle(a.defaults(h.getAreaStyle(), { fill: c, opacity: 0.7 })), o.hoverStyle = d.getAreaStyle(); var g = n.getModel('itemStyle').getItemStyle(['color']); var v = n.getModel('emphasis.itemStyle').getItemStyle(); var m = n.getModel('label'); var y = n.getModel('emphasis.label'); u.eachChild(function (t) { t.setStyle(g), t.hoverStyle = a.clone(v); var n = l.get(l.dimensions[t.__dimIdx], e); (n == null || isNaN(n)) && (n = ''), r.setLabelStyle(t.style, t.hoverStyle, m, y, { labelFetcher: l.hostModel, labelDataIndex: e, labelDimIndex: t.__dimIdx, defaultText: n, autoColor: c, isRectText: !0 }) }), t.highDownOnUpdate = function (t, e) { o.attr('ignore', e === 'emphasis' ? p : f) }, r.setHoverStyle(t) }), this._data = l }, remove: function () { this.group.removeAll(), this._data = null }, dispose: function () {} }); t.exports = s }, function (t, e, n) { var i = n(0); function r (t) { return !isNaN(t[0]) && !isNaN(t[1]) } function a (t) { return [t.cx, t.cy] }t.exports = function (t) { t.eachSeriesByType('radar', function (t) { var e = t.getData(); var n = []; var o = t.coordinateSystem; if (o) { var s = o.getIndicatorAxes(); i.each(s, function (t, i) { e.each(e.mapDimension(s[i].dim), function (t, e) { n[e] = n[e] || []; var s = o.dataToPoint(t, i); n[e][i] = r(s) ? s : a(o) }) }), e.each(function (t) { var s = i.find(n[t], function (t) { return r(t) }) || a(o); n[t].push(s.slice()), e.setItemLayout(t, n[t]) }) } }) } }, function (t, e, n) { var i = n(0); t.exports = function (t) { var e = t.polar; if (e) { i.isArray(e) || (e = [e]); var n = []; i.each(e, function (e, r) { e.indicator ? (e.type && !e.shape && (e.shape = e.type), t.radar = t.radar || [], i.isArray(t.radar) || (t.radar = [t.radar]), t.radar.push(e)) : n.push(e) }), t.polar = n }i.each(t.series, function (t) { t && t.type === 'radar' && t.polarIndex && (t.radarIndex = t.polarIndex) }) } }, function (t, e, n) { var i = n(1); n(312), n(319), n(174), n(102); var r = n(321); var a = n(322); var o = n(323); var s = n(324); var l = n(171); i.registerLayout(r), i.registerVisual(a), i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC, o), i.registerPreprocessor(s), l('map', [{ type: 'mapToggleSelect', event: 'mapselectchanged', method: 'toggleSelected' }, { type: 'mapSelect', event: 'mapselected', method: 'select' }, { type: 'mapUnSelect', event: 'mapunselected', method: 'unSelect' }]) }, function (t, e, n) { var i = n(0); var r = n(49); var a = n(14); var o = n(9); var s = o.encodeHTML; var l = o.addCommas; var u = n(99); var c = n(36).retrieveRawAttr; var h = n(82); var d = a.extend({ type: 'series.map', dependencies: ['geo'], layoutMode: 'box', needsDrawMap: !1, seriesGroup: [], getInitialData: function (t) { for (var e = r(this, ['value']), n = e.mapDimension('value'), a = i.createHashMap(), o = [], s = [], l = 0, u = e.count(); l < u; l++) { var d = e.getName(l); a.set(d, !0), o.push({ name: d, value: e.get(n, l), selected: c(e, l, 'selected') }) } var f = h.load(this.getMapType(), this.option.nameMap); return i.each(f.regions, function (t) { var e = t.name; a.get(e) || (o.push({ name: e }), s.push(e)) }), this.updateSelectedMap(o), e.appendValues([], s), e }, getHostGeoModel: function () { var t = this.option.geoIndex; return t != null ? this.dependentModels.geo[t] : null }, getMapType: function () { return (this.getHostGeoModel() || this).option.map }, getRawValue: function (t) { var e = this.getData(); return e.get(e.mapDimension('value'), t) }, getRegionModel: function (t) { var e = this.getData(); return e.getItemModel(e.indexOfName(t)) }, formatTooltip: function (t) { for (var e = this.getData(), n = l(this.getRawValue(t)), i = e.getName(t), r = this.seriesGroup, a = [], o = 0; o < r.length; o++) { var u = r[o].originalData.indexOfName(i); var c = e.mapDimension('value'); isNaN(r[o].originalData.get(c, u)) || a.push(s(r[o].name)) } return a.join(', ') + '<br />' + s(i + ' : ' + n) }, getTooltipPosition: function (t) { if (t != null) { var e = this.getData().getName(t); var n = this.coordinateSystem; var i = n.getRegion(e); return i && n.dataToPoint(i.center) } }, setZoom: function (t) { this.option.zoom = t }, setCenter: function (t) { this.option.center = t }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'geo', map: '', left: 'center', top: 'center', aspectScale: 0.75, showLegendSymbol: !0, dataRangeHoverLink: !0, boundingCoords: null, center: null, zoom: 1, scaleLimit: null, label: { show: !1, color: '#000' }, itemStyle: { borderWidth: 0.5, borderColor: '#444', areaColor: '#eee' }, emphasis: { label: { show: !0, color: 'rgb(100,0,0)' }, itemStyle: { areaColor: 'rgba(255,215,0,0.8)' } } } }); i.mixin(d, u); var f = d; t.exports = f }, function (t, e, n) { var i = n(0).each; var r = n(161); var a = n(4).makeInner; var o = n(314); var s = n(315); var l = n(316); var u = n(317); var c = a(); var h = { load: function (t, e) { var n = c(e).parsed; if (n) return n; var a; var h = e.specialAreas || {}; var f = e.geoJSON; try { a = f ? r(f) : [] } catch (t) { throw new Error('Invalid geoJson format\n' + t.message) } return o(t, a), i(a, function (e) { var n = e.name; s(t, e), l(t, e), u(t, e); var i = h[n]; i && e.transformTo(i.left, i.top, i.width, i.height) }), c(e).parsed = { regions: a, boundingRect: d(a) } } }; function d (t) { for (var e, n = 0; n < t.length; n++) { var i = t[n].getBoundingRect(); (e = e || i.clone()).union(i) } return e }t.exports = h }, function (t, e, n) { for (var i = n(0), r = n(162), a = [126, 25], o = [[[0, 3.5], [7, 11.2], [15, 11.9], [30, 7], [42, 0.7], [52, 0.7], [56, 7.7], [59, 0.7], [64, 0.7], [64, 0], [5, 0], [0, 3.5]], [[13, 16.1], [19, 14.7], [16, 21.7], [11, 23.1], [13, 16.1]], [[12, 32.2], [14, 38.5], [15, 38.5], [13, 32.2], [12, 32.2]], [[16, 47.6], [12, 53.2], [13, 53.2], [18, 47.6], [16, 47.6]], [[6, 64.4], [8, 70], [9, 70], [8, 64.4], [6, 64.4]], [[23, 82.6], [29, 79.8], [30, 79.8], [25, 82.6], [23, 82.6]], [[37, 70.7], [43, 62.3], [44, 62.3], [39, 70.7], [37, 70.7]], [[48, 51.1], [51, 45.5], [53, 45.5], [50, 51.1], [48, 51.1]], [[51, 35], [51, 28.7], [53, 28.7], [53, 35], [51, 35]], [[52, 22.4], [55, 17.5], [56, 17.5], [53, 22.4], [52, 22.4]], [[58, 12.6], [62, 7], [63, 7], [60, 12.6], [58, 12.6]], [[0, 3.5], [0, 93.1], [64, 93.1], [64, 0], [63, 0], [63, 92.4], [1, 92.4], [1, 3.5], [0, 3.5]]], s = 0; s < o.length; s++) for (var l = 0; l < o[s].length; l++)o[s][l][0] /= 10.5, o[s][l][1] /= -14, o[s][l][0] += a[0], o[s][l][1] += a[1]; t.exports = function (t, e) { t === 'china' && e.push(new r('南海诸岛', i.map(o, function (t) { return { type: 'polygon', exterior: t } }), a)) } }, function (t, e) { var n = { '南海诸岛': [32, 80], '广东': [0, -10], '香港': [10, 5], '澳门': [-10, 10], '天津': [5, 5] }; t.exports = function (t, e) { if (t === 'china') { var i = n[e.name]; if (i) { var r = e.center; r[0] += i[0] / 10.5, r[1] += -i[1] / 14 } } } }, function (t, e) { var n = { Russia: [100, 60], 'United States': [-99, 38], 'United States of America': [-99, 38] }; t.exports = function (t, e) { if (t === 'world') { var i = n[e.name]; if (i) { var r = e.center; r[0] = i[0], r[1] = i[1] } } } }, function (t, e) { var n = [[[123.45165252685547, 25.73527164402261], [123.49731445312499, 25.73527164402261], [123.49731445312499, 25.750734064600884], [123.45165252685547, 25.750734064600884], [123.45165252685547, 25.73527164402261]]]; t.exports = function (t, e) { t === 'china' && e.name === '台湾' && e.geometries.push({ type: 'polygon', exterior: n[0] }) } }, function (t, e, n) { var i = n(155); var r = i.parseSVG; var a = i.makeViewBoxTransform; var o = n(42); var s = n(90); var l = n(0); var u = l.assert; var c = l.createHashMap; var h = n(8); var d = (0, n(4).makeInner)(); var f = { load: function (t, e) { var n = d(e).originRoot; if (n) return { root: n, boundingRect: d(e).boundingRect }; var i = p(e); return d(e).originRoot = i.root, d(e).boundingRect = i.boundingRect, i }, makeGraphic: function (t, e, n) { var i = d(e); var r = i.rootMap || (i.rootMap = c()); var a = r.get(n); if (a) return a; var o = i.originRoot; var s = i.boundingRect; return i.originRootHostKey ? a = p(e, s).root : (i.originRootHostKey = n, a = o), r.set(n, a) }, removeGraphic: function (t, e, n) { var i = d(e); var r = i.rootMap; r && r.removeKey(n), n === i.originRootHostKey && (i.originRootHostKey = null) } }; function p (t, e) { var n; var i; var l = t.svgXML; try { i = (n = l && r(l, { ignoreViewBox: !0, ignoreRootClip: !0 }) || {}).root, u(i != null) } catch (t) { throw new Error('Invalid svg format\n' + t.message) } var c = n.width; var d = n.height; var f = n.viewBoxRect; if (e || (e = c == null || d == null ? i.getBoundingRect() : new h(0, 0, 0, 0), c != null && (e.width = c), d != null && (e.height = d)), f) { var p = a(f, e.width, e.height); var g = i; (i = new o()).add(g), g.scale = p.scale, g.position = p.position } return i.setClipPath(new s({ shape: e.plain() })), { root: i, boundingRect: e } }t.exports = f }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(2); var o = n(172); var s = '__seriesMapHighDown'; var l = '__seriesMapCallKey'; var u = i.extendChartView({ type: 'map', render: function (t, e, n, i) { if (!i || i.type !== 'mapToggleSelect' || i.from !== this.uid) { var r = this.group; if (r.removeAll(), !t.getHostGeoModel()) { if (i && i.type === 'geoRoam' && i.componentType === 'series' && i.seriesId === t.id)(a = this._mapDraw) && r.add(a.group); else if (t.needsDrawMap) { var a = this._mapDraw || new o(n, !0); r.add(a.group), a.draw(t, e, n, this, i), this._mapDraw = a } else this._mapDraw && this._mapDraw.remove(), this._mapDraw = null; t.get('showLegendSymbol') && e.getComponent('legend') && this._renderSymbols(t, e, n) } } }, remove: function () { this._mapDraw && this._mapDraw.remove(), this._mapDraw = null, this.group.removeAll() }, dispose: function () { this._mapDraw && this._mapDraw.remove(), this._mapDraw = null }, _renderSymbols: function (t, e, n) { var i = t.originalData; var o = this.group; i.each(i.mapDimension('value'), function (e, n) { if (!isNaN(e)) { var u = i.getItemLayout(n); if (u && u.point) { var d = u.point; var f = u.offset; var p = new a.Circle({ style: { fill: t.getData().getVisual('color') }, shape: { cx: d[0] + 9 * f, cy: d[1], r: 3 }, silent: !0, z2: 8 + (f ? 0 : a.Z2_EMPHASIS_LIFT + 1) }); if (!f) { var g = t.mainSeries.getData(); var v = i.getName(n); var m = g.indexOfName(v); var y = i.getItemModel(n); var x = y.getModel('label'); var _ = y.getModel('emphasis.label'); var b = g.getItemGraphicEl(m); var w = r.retrieve2(t.getFormattedLabel(m, 'normal'), v); var S = r.retrieve2(t.getFormattedLabel(m, 'emphasis'), w); var M = b[s]; var I = Math.random(); if (!M) { M = b[s] = {}; var A = r.curry(c, !0); var T = r.curry(c, !1); b.on('mouseover', A).on('mouseout', T).on('emphasis', A).on('normal', T) }b[l] = I, r.extend(M, { recordVersion: I, circle: p, labelModel: x, hoverLabelModel: _, emphasisText: S, normalText: w }), h(M, !1) }o.add(p) } } }) } }); function c (t) { var e = this[s]; e && e.recordVersion === this[l] && h(e, t) } function h (t, e) { var n = t.circle; var i = t.labelModel; var r = t.hoverLabelModel; var o = t.emphasisText; var s = t.normalText; e ? (n.style.extendFrom(a.setTextStyle({}, r, { text: r.get('show') ? o : null }, { isRectText: !0, useInsideStyle: !1 }, !0)), n.__mapOriginalZ2 = n.z2, n.z2 += a.Z2_EMPHASIS_LIFT) : (a.setTextStyle(n.style, i, { text: i.get('show') ? s : null, textPosition: i.getShallow('position') || 'bottom' }, { isRectText: !0, useInsideStyle: !1 }), n.dirty(!1), n.__mapOriginalZ2 != null && (n.z2 = n.__mapOriginalZ2, n.__mapOriginalZ2 = null)) }t.exports = u }, function (t, e, n) { var i = n(0); var r = n(8); var a = n(103); var o = n(82); function s (t, e, n, i) { a.call(this, t), this.map = e; var r = o.load(e, n); this._nameCoordMap = r.nameCoordMap, this._regionsMap = r.regionsMap, this._invertLongitute = i == null || i, this.regions = r.regions, this._rect = r.boundingRect } function l (t, e, n, i) { var r = n.geoModel; var a = n.seriesModel; var o = r ? r.coordinateSystem : a ? a.coordinateSystem || (a.getReferringComponents('geo')[0] || {}).coordinateSystem : null; return o === this ? o[t](i) : null }s.prototype = { constructor: s, type: 'geo', dimensions: ['lng', 'lat'], containCoord: function (t) { for (var e = this.regions, n = 0; n < e.length; n++) if (e[n].contain(t)) return !0; return !1 }, transformTo: function (t, e, n, i) { var a = this.getBoundingRect(); var o = this._invertLongitute; a = a.clone(), o && (a.y = -a.y - a.height); var s = this._rawTransformable; if (s.transform = a.calculateTransform(new r(t, e, n, i)), s.decomposeTransform(), o) { var l = s.scale; l[1] = -l[1] }s.updateTransform(), this._updateTransform() }, getRegion: function (t) { return this._regionsMap.get(t) }, getRegionByCoord: function (t) { for (var e = this.regions, n = 0; n < e.length; n++) if (e[n].contain(t)) return e[n] }, addGeoCoord: function (t, e) { this._nameCoordMap.set(t, e) }, getGeoCoord: function (t) { return this._nameCoordMap.get(t) }, getBoundingRect: function () { return this._rect }, dataToPoint: function (t, e, n) { if (typeof t === 'string' && (t = this.getGeoCoord(t)), t) return a.prototype.dataToPoint.call(this, t, e, n) }, convertToPixel: i.curry(l, 'dataToPoint'), convertFromPixel: i.curry(l, 'pointToData') }, i.mixin(s, a); var u = s; t.exports = u }, function (t, e, n) { var i = n(0); t.exports = function (t) { var e = {}; t.eachSeriesByType('map', function (n) { var r = n.getMapType(); if (!n.getHostGeoModel() && !e[r]) { var a = {}; i.each(n.seriesGroup, function (e) { var n = e.coordinateSystem; var i = e.originalData; e.get('showLegendSymbol') && t.getComponent('legend') && i.each(i.mapDimension('value'), function (t, e) { var r = i.getName(e); var o = n.getRegion(r); if (o && !isNaN(t)) { var s = a[r] || 0; var l = n.dataToPoint(o.center); a[r] = s + 1, i.setItemLayout(e, { point: l, offset: s }) } }) }); var o = n.getData(); o.each(function (t) { var e = o.getName(t); var n = o.getItemLayout(t) || {}; n.showLabel = !a[e], o.setItemLayout(t, n) }), e[r] = !0 } }) } }, function (t, e) { t.exports = function (t) { t.eachSeriesByType('map', function (t) { var e = t.get('color'); var n = t.getModel('itemStyle'); var i = n.get('areaColor'); var r = n.get('color') || e[t.seriesIndex % e.length]; t.getData().setVisual({ areaColor: i, color: r }) }) } }, function (t, e, n) { var i = n(0); t.exports = function (t) { var e = {}; t.eachSeriesByType('map', function (t) { var n = t.getHostGeoModel(); var i = n ? 'o' + n.id : 'i' + t.getMapType(); (e[i] = e[i] || []).push(t) }), i.each(e, function (t, e) { for (var n, r, a, o = (n = i.map(t, function (t) { return t.getData() }), r = t[0].get('mapValueCalculation'), a = {}, i.each(n, function (t) { t.each(t.mapDimension('value'), function (e, n) { var i = 'ec-' + t.getName(n); a[i] = a[i] || [], isNaN(e) || a[i].push(e) }) }), n[0].map(n[0].mapDimension('value'), function (t, e) { for (var i, o = 'ec-' + n[0].getName(e), s = 0, l = 1 / 0, u = -1 / 0, c = a[o].length, h = 0; h < c; h++)l = Math.min(l, a[o][h]), u = Math.max(u, a[o][h]), s += a[o][h]; return i = r === 'min' ? l : r === 'max' ? u : r === 'average' ? s / c : s, c === 0 ? NaN : i })), s = 0; s < t.length; s++)t[s].originalData = t[s].getData(); for (s = 0; s < t.length; s++)t[s].seriesGroup = t, t[s].needsDrawMap = s === 0 && !t[s].getHostGeoModel(), t[s].setData(o.cloneShallow()), t[s].mainSeries = t[0] }) } }, function (t, e, n) { var i = n(0); t.exports = function (t) { var e = []; i.each(t.series, function (t) { t && t.type === 'map' && (e.push(t), t.map = t.map || t.mapType, i.defaults(t, t.mapLocation)) }) } }, function (t, e, n) { var i = n(1); n(326), n(327), n(328); var r = n(38); var a = n(329); i.registerVisual(r('tree', 'circle')), i.registerLayout(a) }, function (t, e, n) { var i = n(14); var r = n(104); var a = n(9).encodeHTML; var o = i.extend({ type: 'series.tree', layoutInfo: null, layoutMode: 'box', getInitialData: function (t) { var e = { name: t.name, children: t.data }; var n = t.leaves || {}; var i = {}; i.leaves = n; var a = r.createTree(e, this, i); var o = 0; a.eachNode('preorder', function (t) { t.depth > o && (o = t.depth) }); var s = t.expandAndCollapse && t.initialTreeDepth >= 0 ? t.initialTreeDepth : o; return a.root.eachNode('preorder', function (t) { var e = t.hostTree.data.getRawDataItem(t.dataIndex); t.isExpand = e && e.collapsed != null ? !e.collapsed : t.depth <= s }), a.data }, getOrient: function () { var t = this.get('orient'); return t === 'horizontal' ? t = 'LR' : t === 'vertical' && (t = 'TB'), t }, setZoom: function (t) { this.option.zoom = t }, setCenter: function (t) { this.option.center = t }, formatTooltip: function (t) { for (var e = this.getData().tree, n = e.root.children[0], i = e.getNodeByDataIndex(t), r = i.getValue(), o = i.name; i && i !== n;)o = i.parentNode.name + '.' + o, i = i.parentNode; return a(o + (isNaN(r) || r == null ? '' : ' : ' + r)) }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'view', left: '12%', top: '12%', right: '12%', bottom: '12%', layout: 'orthogonal', roam: !1, nodeScaleRatio: 0.4, center: null, zoom: 1, orient: 'LR', symbol: 'emptyCircle', symbolSize: 7, expandAndCollapse: !0, initialTreeDepth: 2, lineStyle: { color: '#ccc', width: 1.5, curveness: 0.5 }, itemStyle: { color: 'lightsteelblue', borderColor: '#c23531', borderWidth: 1.5 }, label: { show: !0, color: '#555' }, leaves: { label: { show: !0 } }, animationEasing: 'linear', animationDuration: 700, animationDurationUpdate: 1e3 } }); t.exports = o }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(78); var o = n(176).radialCoordinate; var s = n(1); var l = n(71); var u = n(103); var c = n(100); var h = n(64); var d = n(83).onIrrelevantElement; var f = s.extendChartView({ type: 'tree', init: function (t, e) { this._oldTree, this._mainGroup = new r.Group(), this._controller = new h(e.getZr()), this._controllerHost = { target: this.group }, this.group.add(this._mainGroup) }, render: function (t, e, n, i) { var r = t.getData(); var a = t.layoutInfo; var o = this._mainGroup; var s = t.get('layout'); s === 'radial' ? o.attr('position', [a.x + a.width / 2, a.y + a.height / 2]) : o.attr('position', [a.x, a.y]), this._updateViewCoordSys(t, a, s), this._updateController(t, e, n); var l = this._data; var u = { expandAndCollapse: t.get('expandAndCollapse'), layout: s, orient: t.getOrient(), curvature: t.get('lineStyle.curveness'), symbolRotate: t.get('symbolRotate'), symbolOffset: t.get('symbolOffset'), hoverAnimation: t.get('hoverAnimation'), useNameLabel: !0, fadeIn: !0 }; r.diff(l).add(function (e) { p(r, e) && v(r, e, null, o, t, u) }).update(function (e, n) { var i = l.getItemGraphicEl(n); p(r, e) ? v(r, e, i, o, t, u) : i && m(l, n, i, o, t, u) }).remove(function (e) { var n = l.getItemGraphicEl(e); n && m(l, e, n, o, t, u) }).execute(), this._nodeScaleRatio = t.get('nodeScaleRatio'), this._updateNodeAndLinkScale(t), !0 === u.expandAndCollapse && r.eachItemGraphicEl(function (e, i) { e.off('click').on('click', function () { n.dispatchAction({ type: 'treeExpandAndCollapse', seriesId: t.id, dataIndex: i }) }) }), this._data = r }, _updateViewCoordSys: function (t) { var e = t.getData(); var n = []; e.each(function (t) { var i = e.getItemLayout(t); !i || isNaN(i.x) || isNaN(i.y) || n.push([+i.x, +i.y]) }); var i = []; var r = []; l.fromPoints(n, i, r); var a = this._min; var o = this._max; r[0] - i[0] == 0 && (i[0] = a ? a[0] : i[0] - 1, r[0] = o ? o[0] : r[0] + 1), r[1] - i[1] == 0 && (i[1] = a ? a[1] : i[1] - 1, r[1] = o ? o[1] : r[1] + 1); var s = t.coordinateSystem = new u(); s.zoomLimit = t.get('scaleLimit'), s.setBoundingRect(i[0], i[1], r[0] - i[0], r[1] - i[1]), s.setCenter(t.get('center')), s.setZoom(t.get('zoom')), this.group.attr({ position: s.position, scale: s.scale }), this._viewCoordSys = s, this._min = i, this._max = r }, _updateController: function (t, e, n) { var i = this._controller; var r = this._controllerHost; var a = this.group; i.setPointerChecker(function (e, i, r) { var o = a.getBoundingRect(); return o.applyTransform(a.transform), o.contain(i, r) && !d(e, n, t) }), i.enable(t.get('roam')), r.zoomLimit = t.get('scaleLimit'), r.zoom = t.coordinateSystem.getZoom(), i.off('pan').off('zoom').on('pan', function (e) { c.updateViewOnPan(r, e.dx, e.dy), n.dispatchAction({ seriesId: t.id, type: 'treeRoam', dx: e.dx, dy: e.dy }) }, this).on('zoom', function (e) { c.updateViewOnZoom(r, e.scale, e.originX, e.originY), n.dispatchAction({ seriesId: t.id, type: 'treeRoam', zoom: e.scale, originX: e.originX, originY: e.originY }), this._updateNodeAndLinkScale(t) }, this) }, _updateNodeAndLinkScale: function (t) { var e = t.getData(); var n = this._getNodeGlobalScale(t); var i = [n, n]; e.eachItemGraphicEl(function (t, e) { t.attr('scale', i) }) }, _getNodeGlobalScale: function (t) { var e = t.coordinateSystem; if (e.type !== 'view') return 1; var n = this._nodeScaleRatio; var i = e.scale; var r = i && i[0] || 1; return ((e.getZoom() - 1) * n + 1) / r }, dispose: function () { this._controller && this._controller.dispose(), this._controllerHost = {} }, remove: function () { this._mainGroup.removeAll(), this._data = null } }); function p (t, e) { var n = t.getItemLayout(e); return n && !isNaN(n.x) && !isNaN(n.y) && t.getItemVisual(e, 'symbol') !== 'none' } function g (t, e, n) { return n.itemModel = e, n.itemStyle = e.getModel('itemStyle').getItemStyle(), n.hoverItemStyle = e.getModel('emphasis.itemStyle').getItemStyle(), n.lineStyle = e.getModel('lineStyle').getLineStyle(), n.labelModel = e.getModel('label'), n.hoverLabelModel = e.getModel('emphasis.label'), !1 === t.isExpand && t.children.length !== 0 ? n.symbolInnerColor = n.itemStyle.fill : n.symbolInnerColor = '#fff', n } function v (t, e, n, o, s, l) { var u = !n; var c = t.tree.getNodeByDataIndex(e); var h = c.getModel(); var d = (l = g(c, h, l), t.tree.root); var f = c.parentNode === d ? c : c.parentNode || c; var p = t.getItemGraphicEl(f.dataIndex); var v = f.getLayout(); var m = p ? { x: p.position[0], y: p.position[1], rawX: p.__radialOldRawX, rawY: p.__radialOldRawY } : v; var x = c.getLayout(); u ? (n = new a(t, e, l)).attr('position', [m.x, m.y]) : n.updateData(t, e, l), n.__radialOldRawX = n.__radialRawX, n.__radialOldRawY = n.__radialRawY, n.__radialRawX = x.rawX, n.__radialRawY = x.rawY, o.add(n), t.setItemGraphicEl(e, n), r.updateProps(n, { position: [x.x, x.y] }, s); var _ = n.getSymbolPath(); if (l.layout === 'radial') { var b; var w; var S = d.children[0]; var M = S.getLayout(); var I = S.children.length; if (x.x === M.x && !0 === c.isExpand) { var A = {}; A.x = (S.children[0].getLayout().x + S.children[I - 1].getLayout().x) / 2, A.y = (S.children[0].getLayout().y + S.children[I - 1].getLayout().y) / 2, (b = Math.atan2(A.y - M.y, A.x - M.x)) < 0 && (b = 2 * Math.PI + b), (w = A.x < M.x) && (b -= Math.PI) } else (b = Math.atan2(x.y - M.y, x.x - M.x)) < 0 && (b = 2 * Math.PI + b), c.children.length === 0 || c.children.length !== 0 && !1 === c.isExpand ? (w = x.x < M.x) && (b -= Math.PI) : (w = x.x > M.x) || (b -= Math.PI); var T = w ? 'left' : 'right'; var C = l.labelModel.get('rotate'); var D = C * (Math.PI / 180); _.setStyle({ textPosition: l.labelModel.get('position') || T, textRotation: C == null ? -b : D, textOrigin: 'center', verticalAlign: 'middle' }) } if (c.parentNode && c.parentNode !== d) { var L = n.__edge; L || (L = n.__edge = new r.BezierCurve({ shape: y(l, m, m), style: i.defaults({ opacity: 0, strokeNoScale: !0 }, l.lineStyle) })), r.updateProps(L, { shape: y(l, v, x), style: { opacity: 1 } }, s), o.add(L) } } function m (t, e, n, i, a, o) { for (var s, l = t.tree.getNodeByDataIndex(e), u = t.tree.root, c = l.getModel(), h = (o = g(l, c, o), l.parentNode === u ? l : l.parentNode || l); (s = h.getLayout()) == null;)h = h.parentNode === u ? h : h.parentNode || h; r.updateProps(n, { position: [s.x + 1, s.y + 1] }, a, function () { i.remove(n), t.setItemGraphicEl(e, null) }), n.fadeOut(null, { keepLabel: !0 }); var d = n.__edge; d && r.updateProps(d, { shape: y(o, s, s), style: { opacity: 0 } }, a, function () { i.remove(d) }) } function y (t, e, n) { var i; var r; var a; var s; var l; var u; var c; var h; var d = t.orient; if (t.layout === 'radial') { l = e.rawX, c = e.rawY, u = n.rawX, h = n.rawY; var f = o(l, c); var p = o(l, c + (h - c) * t.curvature); var g = o(u, h + (c - h) * t.curvature); var v = o(u, h); return { x1: f.x, y1: f.y, x2: v.x, y2: v.y, cpx1: p.x, cpy1: p.y, cpx2: g.x, cpy2: g.y } } return l = e.x, c = e.y, u = n.x, h = n.y, d !== 'LR' && d !== 'RL' || (i = l + (u - l) * t.curvature, r = c, a = u + (l - u) * t.curvature, s = h), d !== 'TB' && d !== 'BT' || (i = l, r = c + (h - c) * t.curvature, a = u, s = h + (c - h) * t.curvature), { x1: l, y1: c, x2: u, y2: h, cpx1: i, cpy1: r, cpx2: a, cpy2: s } }t.exports = f }, function (t, e, n) { var i = n(1); var r = n(101).updateCenterAndZoom; i.registerAction({ type: 'treeExpandAndCollapse', event: 'treeExpandAndCollapse', update: 'update' }, function (t, e) { e.eachComponent({ mainType: 'series', subType: 'tree', query: t }, function (e) { var n = t.dataIndex; var i = e.getData().tree.getNodeByDataIndex(n); i.isExpand = !i.isExpand }) }), i.registerAction({ type: 'treeRoam', event: 'treeRoam', update: 'none' }, function (t, e) { e.eachComponent({ mainType: 'series', subType: 'tree', query: t }, function (e) { var n = e.coordinateSystem; var i = r(n, t); e.setCenter && e.setCenter(i.center), e.setZoom && e.setZoom(i.zoom) }) }) }, function (t, e, n) { var i = n(330); var r = i.eachAfter; var a = i.eachBefore; var o = n(176); var s = o.init; var l = o.firstWalk; var u = o.secondWalk; var c = o.separation; var h = o.radialCoordinate; var d = o.getViewRect; t.exports = function (t, e) { t.eachSeriesByType('tree', function (t) { !(function (t, e) { var n = d(t, e); t.layoutInfo = n; var i = t.get('layout'); var o = 0; var f = 0; var p = null; i === 'radial' ? (o = 2 * Math.PI, f = Math.min(n.height, n.width) / 2, p = c(function (t, e) { return (t.parentNode === e.parentNode ? 1 : 2) / t.depth })) : (o = n.width, f = n.height, p = c()); var g = t.getData().tree.root; var v = g.children[0]; if (v) { s(g), r(v, l, p), g.hierNode.modifier = -v.hierNode.prelim, a(v, u); var m = v; var y = v; var x = v; a(v, function (t) { var e = t.getLayout().x; e < m.getLayout().x && (m = t), e > y.getLayout().x && (y = t), t.depth > x.depth && (x = t) }); var _ = m === y ? 1 : p(m, y) / 2; var b = _ - m.getLayout().x; var w = 0; var S = 0; var M = 0; var I = 0; if (i === 'radial')w = o / (y.getLayout().x + _ + b), S = f / (x.depth - 1 || 1), a(v, function (t) { M = (t.getLayout().x + b) * w, I = (t.depth - 1) * S; var e = h(M, I); t.setLayout({ x: e.x, y: e.y, rawX: M, rawY: I }, !0) }); else { var A = t.getOrient(); A === 'RL' || A === 'LR' ? (S = f / (y.getLayout().x + _ + b), w = o / (x.depth - 1 || 1), a(v, function (t) { I = (t.getLayout().x + b) * S, M = A === 'LR' ? (t.depth - 1) * w : o - (t.depth - 1) * w, t.setLayout({ x: M, y: I }, !0) })) : A !== 'TB' && A !== 'BT' || (w = o / (y.getLayout().x + _ + b), S = f / (x.depth - 1 || 1), a(v, function (t) { M = (t.getLayout().x + b) * w, I = A === 'TB' ? (t.depth - 1) * S : f - (t.depth - 1) * S, t.setLayout({ x: M, y: I }, !0) })) } } }(t, e)) }) } }, function (t, e) { e.eachAfter = function (t, e, n) { for (var i, r = [t], a = []; i = r.pop();) if (a.push(i), i.isExpand) { var o = i.children; if (o.length) for (var s = 0; s < o.length; s++)r.push(o[s]) } for (;i = a.pop();)e(i, n) }, e.eachBefore = function (t, e) { for (var n, i = [t]; n = i.pop();) if (e(n), n.isExpand) { var r = n.children; if (r.length) for (var a = r.length - 1; a >= 0; a--)i.push(r[a]) } } }, function (t, e, n) { var i = n(1); n(332), n(333), n(336); var r = n(337); var a = n(338); i.registerVisual(r), i.registerLayout(a) }, function (t, e, n) { var i = n(0); var r = n(14); var a = n(104); var o = n(12); var s = n(9); var l = s.encodeHTML; var u = s.addCommas; var c = n(40).wrapTreePathInfo; var h = r.extend({ type: 'series.treemap', layoutMode: 'box', dependencies: ['grid', 'polar'], preventUsingHoverLayer: !0, _viewRoot: null, defaultOption: { progressive: 0, left: 'center', top: 'middle', right: null, bottom: null, width: '80%', height: '80%', sort: !0, clipWindow: 'origin', squareRatio: 0.5 * (1 + Math.sqrt(5)), leafDepth: null, drillDownIcon: '▶', zoomToNodeRatio: 0.1024, roam: !0, nodeClick: 'zoomToNode', animation: !0, animationDurationUpdate: 900, animationEasing: 'quinticInOut', breadcrumb: { show: !0, height: 22, left: 'center', top: 'bottom', emptyItemWidth: 25, itemStyle: { color: 'rgba(0,0,0,0.7)', borderColor: 'rgba(255,255,255,0.7)', borderWidth: 1, shadowColor: 'rgba(150,150,150,1)', shadowBlur: 3, shadowOffsetX: 0, shadowOffsetY: 0, textStyle: { color: '#fff' } }, emphasis: { textStyle: {} } }, label: { show: !0, distance: 0, padding: 5, position: 'inside', color: '#fff', ellipsis: !0 }, upperLabel: { show: !1, position: [0, '50%'], height: 20, color: '#fff', ellipsis: !0, verticalAlign: 'middle' }, itemStyle: { color: null, colorAlpha: null, colorSaturation: null, borderWidth: 0, gapWidth: 0, borderColor: '#fff', borderColorSaturation: null }, emphasis: { upperLabel: { show: !0, position: [0, '50%'], color: '#fff', ellipsis: !0, verticalAlign: 'middle' } }, visualDimension: 0, visualMin: null, visualMax: null, color: [], colorAlpha: null, colorSaturation: null, colorMappingBy: 'index', visibleMin: 10, childrenVisibleMin: null, levels: [] }, getInitialData: function (t, e) { var n = { name: t.name, children: t.data }; !(function t (e) { var n = 0; i.each(e.children, function (e) { t(e); var r = e.value; i.isArray(r) && (r = r[0]), n += r }); var r = e.value; i.isArray(r) && (r = r[0]); (r == null || isNaN(r)) && (r = n); r < 0 && (r = 0); i.isArray(e.value) ? e.value[0] = r : e.value = r }(n)); var r = t.levels || []; r = t.levels = (function (t, e) { var n; var r = e.get('color'); if (!r) return; if (t = t || [], i.each(t, function (t) { var e = new o(t); var i = e.get('color'); (e.get('itemStyle.color') || i && i !== 'none') && (n = !0) }), !n) { (t[0] || (t[0] = {})).color = r.slice() } return t }(r, e)); var s = {}; return s.levels = r, a.createTree(n, this, s).data }, optionUpdated: function () { this.resetViewRoot() }, formatTooltip: function (t) { var e = this.getData(); var n = this.getRawValue(t); var r = i.isArray(n) ? u(n[0]) : u(n); var a = e.getName(t); return l(a + ': ' + r) }, getDataParams: function (t) { var e = r.prototype.getDataParams.apply(this, arguments); var n = this.getData().tree.getNodeByDataIndex(t); return e.treePathInfo = c(n, this), e }, setLayoutInfo: function (t) { this.layoutInfo = this.layoutInfo || {}, i.extend(this.layoutInfo, t) }, mapIdToIndex: function (t) { var e = this._idIndexMap; e || (e = this._idIndexMap = i.createHashMap(), this._idIndexMapCount = 0); var n = e.get(t); return n == null && e.set(t, n = this._idIndexMapCount++), n }, getViewRoot: function () { return this._viewRoot }, resetViewRoot: function (t) { t ? this._viewRoot = t : t = this._viewRoot; var e = this.getRawData().tree.root; t && (t === e || e.contains(t)) || (this._viewRoot = e) } }); t.exports = h }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(2); var o = n(37); var s = n(40); var l = n(334); var u = n(64); var c = n(8); var h = n(15); var d = n(335); var f = n(44); var p = r.bind; var g = a.Group; var v = a.Rect; var m = r.each; var y = ['label']; var x = ['emphasis', 'label']; var _ = ['upperLabel']; var b = ['emphasis', 'upperLabel']; var w = 10; var S = 1; var M = 2; var I = f([['fill', 'color'], ['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]); var A = function (t) { var e = I(t); return e.stroke = e.fill = e.lineWidth = null, e }; var T = i.extendChartView({ type: 'treemap', init: function (t, e) { this._containerGroup, this._storage = { nodeGroup: [], background: [], content: [] }, this._oldTree, this._breadcrumb, this._controller, this._state = 'ready' }, render: function (t, e, n, i) { var a = e.findComponents({ mainType: 'series', subType: 'treemap', query: i }); if (!(r.indexOf(a, t) < 0)) { this.seriesModel = t, this.api = n, this.ecModel = e; var o = s.retrieveTargetInfo(i, ['treemapZoomToNode', 'treemapRootToNode'], t); var l = i && i.type; var u = t.layoutInfo; var c = !this._oldTree; var h = this._storage; var d = l === 'treemapRootToNode' && o && h ? { rootNodeGroup: h.nodeGroup[o.node.getRawIndex()], direction: i.direction } : null; var f = this._giveContainerGroup(u); var p = this._doRender(f, t, d); c || l && l !== 'treemapZoomToNode' && l !== 'treemapRootToNode' ? p.renderFinally() : this._doAnimation(f, p, t, d), this._resetController(n), this._renderBreadcrumb(t, n, o) } }, _giveContainerGroup: function (t) { var e = this._containerGroup; return e || (e = this._containerGroup = new g(), this._initEvents(e), this.group.add(e)), e.attr('position', [t.x, t.y]), e }, _doRender: function (t, e, n) { var i = e.getData().tree; var a = this._oldTree; var s = { nodeGroup: [], background: [], content: [] }; var l = { nodeGroup: [], background: [], content: [] }; var u = this._storage; var c = []; var h = r.curry(C, e, l, u, n, s, c); !(function t (e, n, i, a, s) { a ? (n = e, m(e, function (t, e) { !t.isRemoved() && u(e, e) })) : new o(n, e, l, l).add(u).update(u).remove(r.curry(u, null)).execute(); function l (t) { return t.getId() } function u (r, o) { var l = r != null ? e[r] : null; var u = o != null ? n[o] : null; var c = h(l, u, i, s); c && t(l && l.viewChildren || [], u && u.viewChildren || [], c, a, s + 1) } }(i.root ? [i.root] : [], a && a.root ? [a.root] : [], t, i === a || !a, 0)); var d = (function (t) { var e = { nodeGroup: [], background: [], content: [] }; return t && m(t, function (t, n) { var i = e[n]; m(t, function (t) { t && (i.push(t), t.__tmWillDelete = 1) }) }), e }(u)); return this._oldTree = i, this._storage = l, { lastsForAnimation: s, willDeleteEls: d, renderFinally: function () { m(d, function (t) { m(t, function (t) { t.parent && t.parent.remove(t) }) }), m(c, function (t) { t.invisible = !0, t.dirty() }) } } }, _doAnimation: function (t, e, n, i) { if (n.get('animation')) { var a = n.get('animationDurationUpdate'); var o = n.get('animationEasing'); var s = d.createWrap(); m(e.willDeleteEls, function (t, e) { m(t, function (t, n) { if (!t.invisible) { var r; var l = t.parent; if (i && i.direction === 'drillDown')r = l === i.rootNodeGroup ? { shape: { x: 0, y: 0, width: l.__tmNodeWidth, height: l.__tmNodeHeight }, style: { opacity: 0 } } : { style: { opacity: 0 } }; else { var u = 0; var c = 0; l.__tmWillDelete || (u = l.__tmNodeWidth / 2, c = l.__tmNodeHeight / 2), r = e === 'nodeGroup' ? { position: [u, c], style: { opacity: 0 } } : { shape: { x: u, y: c, width: 0, height: 0 }, style: { opacity: 0 } } }r && s.add(t, r, a, o) } }) }), m(this._storage, function (t, n) { m(t, function (t, i) { var l = e.lastsForAnimation[n][i]; var u = {}; l && (n === 'nodeGroup' ? l.old && (u.position = t.position.slice(), t.attr('position', l.old)) : (l.old && (u.shape = r.extend({}, t.shape), t.setShape(l.old)), l.fadein ? (t.setStyle('opacity', 0), u.style = { opacity: 1 }) : t.style.opacity !== 1 && (u.style = { opacity: 1 })), s.add(t, u, a, o)) }) }, this), this._state = 'animating', s.done(p(function () { this._state = 'ready', e.renderFinally() }, this)).start() } }, _resetController: function (t) { var e = this._controller; e || ((e = this._controller = new u(t.getZr())).enable(this.seriesModel.get('roam')), e.on('pan', p(this._onPan, this)), e.on('zoom', p(this._onZoom, this))); var n = new c(0, 0, t.getWidth(), t.getHeight()); e.setPointerChecker(function (t, e, i) { return n.contain(e, i) }) }, _clearController: function () { var t = this._controller; t && (t.dispose(), t = null) }, _onPan: function (t) { if (this._state !== 'animating' && (Math.abs(t.dx) > 3 || Math.abs(t.dy) > 3)) { var e = this.seriesModel.getData().tree.root; if (!e) return; var n = e.getLayout(); if (!n) return; this.api.dispatchAction({ type: 'treemapMove', from: this.uid, seriesId: this.seriesModel.id, rootRect: { x: n.x + t.dx, y: n.y + t.dy, width: n.width, height: n.height } }) } }, _onZoom: function (t) { var e = t.originX; var n = t.originY; if (this._state !== 'animating') { var i = this.seriesModel.getData().tree.root; if (!i) return; var r = i.getLayout(); if (!r) return; var a = new c(r.x, r.y, r.width, r.height); var o = this.seriesModel.layoutInfo; e -= o.x, n -= o.y; var s = h.create(); h.translate(s, s, [-e, -n]), h.scale(s, s, [t.scale, t.scale]), h.translate(s, s, [e, n]), a.applyTransform(s), this.api.dispatchAction({ type: 'treemapRender', from: this.uid, seriesId: this.seriesModel.id, rootRect: { x: a.x, y: a.y, width: a.width, height: a.height } }) } }, _initEvents: function (t) { t.on('click', function (t) { if (this._state === 'ready') { var e = this.seriesModel.get('nodeClick', !0); if (e) { var n = this.findTarget(t.offsetX, t.offsetY); if (n) { var i = n.node; if (i.getLayout().isLeafRoot) this._rootToNode(n); else if (e === 'zoomToNode') this._zoomToNode(n); else if (e === 'link') { var r = i.hostTree.data.getItemModel(i.dataIndex); var a = r.get('link', !0); var o = r.get('target', !0) || 'blank'; a && window.open(a, o) } } } } }, this) }, _renderBreadcrumb: function (t, e, n) { n || (n = t.get('leafDepth', !0) != null ? { node: t.getViewRoot() } : this.findTarget(e.getWidth() / 2, e.getHeight() / 2)) || (n = { node: t.getData().tree.root }), (this._breadcrumb || (this._breadcrumb = new l(this.group))).render(t, e, n.node, p(function (e) { this._state !== 'animating' && (s.aboveViewRoot(t.getViewRoot(), e) ? this._rootToNode({ node: e }) : this._zoomToNode({ node: e })) }, this)) }, remove: function () { this._clearController(), this._containerGroup && this._containerGroup.removeAll(), this._storage = { nodeGroup: [], background: [], content: [] }, this._state = 'ready', this._breadcrumb && this._breadcrumb.remove() }, dispose: function () { this._clearController() }, _zoomToNode: function (t) { this.api.dispatchAction({ type: 'treemapZoomToNode', from: this.uid, seriesId: this.seriesModel.id, targetNode: t.node }) }, _rootToNode: function (t) { this.api.dispatchAction({ type: 'treemapRootToNode', from: this.uid, seriesId: this.seriesModel.id, targetNode: t.node }) }, findTarget: function (t, e) { var n; return this.seriesModel.getViewRoot().eachNode({ attr: 'viewChildren', order: 'preorder' }, function (i) { var r = this._storage.background[i.getRawIndex()]; if (r) { var a = r.transformCoordToLocal(t, e); var o = r.shape; if (!(o.x <= a[0] && a[0] <= o.x + o.width && o.y <= a[1] && a[1] <= o.y + o.height)) return !1; n = { node: i, offsetX: a[0], offsetY: a[1] } } }, this), n } }); function C (t, e, n, i, o, s, l, u, c, h) { if (l) { var d = l.getLayout(); if (d && d.isInView) { var f = d.width; var p = d.height; var m = d.borderWidth; var w = d.invisible; var T = l.getRawIndex(); var C = u && u.getRawIndex(); var L = l.viewChildren; var P = d.upperHeight; var k = L && L.length; var O = l.getModel('itemStyle'); var E = l.getModel('emphasis.itemStyle'); var R = F('nodeGroup', g); if (R) { if (c.add(R), R.attr('position', [d.x || 0, d.y || 0]), R.__tmNodeWidth = f, R.__tmNodeHeight = p, d.isAboveViewRoot) return R; var N = F('background', v, h, S); if (N && (function (e, n, i) { n.dataIndex = l.dataIndex, n.seriesIndex = t.seriesIndex, n.setShape({ x: 0, y: 0, width: f, height: p }); var r = l.getVisual('borderColor', !0); var o = E.get('borderColor'); B(n, function () { var t = A(O); t.fill = r; var e = I(E); if (e.fill = o, i) { var s = f - 2 * m; V(t, e, r, s, P, { x: m, y: 0, width: s, height: P }) } else t.text = e.text = null; n.setStyle(t), a.setHoverStyle(n, e) }), e.add(n) }(R, N, k && d.upperHeight)), !k) { var z = F('content', v, h, M); z && (function (e, n) { n.dataIndex = l.dataIndex, n.seriesIndex = t.seriesIndex; var i = Math.max(f - 2 * m, 0); var r = Math.max(p - 2 * m, 0); n.culling = !0, n.setShape({ x: m, y: m, width: i, height: r }); var o = l.getVisual('color', !0); B(n, function () { var t = A(O); t.fill = o; var e = I(E); V(t, e, o, i, r), n.setStyle(t), a.setHoverStyle(n, e) }), e.add(n) }(R, z)) } return R } } } function B (t, e) { w ? !t.invisible && s.push(t) : (e(), t.__tmWillVisible || (t.invisible = !1)) } function V (e, n, i, o, s, u) { var c = l.getModel(); var h = r.retrieve(t.getFormattedLabel(l.dataIndex, 'normal', null, null, u ? 'upperLabel' : 'label'), c.get('name')); if (!u && d.isLeafRoot) { var f = t.get('drillDownIcon', !0); h = f ? f + ' ' + h : h } var p = c.getModel(u ? _ : y); var g = c.getModel(u ? b : x); var v = p.getShallow('show'); a.setLabelStyle(e, n, p, g, { defaultText: v ? h : null, autoColor: i, isRectText: !0 }), u && (e.textRect = r.clone(u)), e.truncate = v && p.get('ellipsis') ? { outerWidth: o, outerHeight: s, minChar: 2 } : null } function F (t, a, s, u) { var c = C != null && n[t][C]; var h = o[t]; return c ? (n[t][C] = null, (function (t, e, n) { (t[T] = {}).old = n === 'nodeGroup' ? e.position.slice() : r.extend({}, e.shape) }(h, c, t))) : w || ((c = new a({ z: D(s, u) })).__tmDepth = s, c.__tmStorageName = t, (function (t, e, n) { var r = t[T] = {}; var a = l.parentNode; if (a && (!i || i.direction === 'drillDown')) { var s = 0; var u = 0; var c = o.background[a.getRawIndex()]; !i && c && c.old && (s = c.old.width, u = c.old.height), r.old = n === 'nodeGroup' ? [0, u] : { x: s, y: u, width: 0, height: 0 } }r.fadein = n !== 'nodeGroup' }(h, 0, t))), e[t][T] = c } } function D (t, e) { var n = t * w + e; return (n - 1) / n }t.exports = T }, function (t, e, n) { var i = n(2); var r = n(6); var a = n(0); var o = n(40).wrapTreePathInfo; var s = 5; function l (t) { this.group = new i.Group(), t.add(this.group) } function u (t, e, n, i, r, a) { var o = [[r ? t : t - s, e], [t + n, e], [t + n, e + i], [r ? t : t - s, e + i]]; return !a && o.splice(2, 0, [t + n + s, e + i / 2]), !r && o.push([t, e + i / 2]), o } function c (t, e, n) { t.eventData = { componentType: 'series', componentSubType: 'treemap', componentIndex: e.componentIndex, seriesIndex: e.componentIndex, seriesName: e.name, seriesType: 'treemap', selfType: 'breadcrumb', nodeData: { dataIndex: n && n.dataIndex, name: n && n.name }, treePathInfo: n && o(n, e) } }l.prototype = { constructor: l, render: function (t, e, n, i) { var a = t.getModel('breadcrumb'); var o = this.group; if (o.removeAll(), a.get('show') && n) { var s = a.getModel('itemStyle'); var l = s.getModel('textStyle'); var u = { pos: { left: a.get('left'), right: a.get('right'), top: a.get('top'), bottom: a.get('bottom') }, box: { width: e.getWidth(), height: e.getHeight() }, emptyItemWidth: a.get('emptyItemWidth'), totalWidth: 0, renderList: [] }; this._prepare(n, u, l), this._renderContent(t, u, s, l, i), r.positionElement(o, u.pos, u.box) } }, _prepare: function (t, e, n) { for (var i = t; i; i = i.parentNode) { var r = i.getModel().get('name'); var a = n.getTextRect(r); var o = Math.max(a.width + 16, e.emptyItemWidth); e.totalWidth += o + 8, e.renderList.push({ node: i, text: r, width: o }) } }, _renderContent: function (t, e, n, o, s) { for (var l = 0, h = e.emptyItemWidth, d = t.get('breadcrumb.height'), f = r.getAvailableSize(e.pos, e.box), p = e.totalWidth, g = e.renderList, v = g.length - 1; v >= 0; v--) { var m = g[v]; var y = m.node; var x = m.width; var _ = m.text; p > f.width && (p -= x - h, x = h, _ = null); var b = new i.Polygon({ shape: { points: u(l, 0, x, d, v === g.length - 1, v === 0) }, style: a.defaults(n.getItemStyle(), { lineJoin: 'bevel', text: _, textFill: o.getTextColor(), textFont: o.getFont() }), z: 10, onclick: a.curry(s, y) }); this.group.add(b), c(b, t, y), l += x + 8 } }, remove: function () { this.group.removeAll() } }; var h = l; t.exports = h }, function (t, e, n) { var i = n(0); e.createWrap = function () { var t; var e = []; var n = {}; return { add: function (t, r, a, o, s) { return i.isString(o) && (s = o, o = 0), !n[t.id] && (n[t.id] = 1, e.push({ el: t, target: r, time: a, delay: o, easing: s }), !0) }, done: function (e) { return t = e, this }, start: function () { for (var i = e.length, r = 0, a = e.length; r < a; r++) { var o = e[r]; o.el.animateTo(o.target, o.time, o.delay, o.easing, s) } return this; function s () { --i || (e.length = 0, n = {}, t && t()) } } } } }, function (t, e, n) { for (var i = n(1), r = n(40), a = function () {}, o = ['treemapZoomToNode', 'treemapRender', 'treemapMove'], s = 0; s < o.length; s++)i.registerAction({ type: o[s], update: 'updateView' }, a); i.registerAction({ type: 'treemapRootToNode', update: 'updateView' }, function (t, e) { e.eachComponent({ mainType: 'series', subType: 'treemap', query: t }, function (e, n) { var i = r.retrieveTargetInfo(t, ['treemapZoomToNode', 'treemapRootToNode'], e); if (i) { var a = e.getViewRoot(); a && (t.direction = r.aboveViewRoot(a, i.node) ? 'rollUp' : 'drillDown'), e.resetViewRoot(i.node) } }) }) }, function (t, e, n) { var i = n(41); var r = n(23); var a = n(0); var o = a.isArray; var s = 'itemStyle'; var l = { seriesType: 'treemap', reset: function (t, e, n, o) { var l = t.getData().tree; var c = l.root; var d = t.getModel(s); c.isRemoved() || (function t (e, n, o, l, c, d) { var f = e.getModel(); var p = e.getLayout(); if (!p || p.invisible || !p.isInView) return; var g; var v = e.getModel(s); var m = o[e.depth]; var y = (function (t, e, n, i) { var r = a.extend({}, e); return a.each(['color', 'colorAlpha', 'colorSaturation'], function (a) { var o = t.get(a, !0); o == null && n && (o = n[a]), o == null && (o = e[a]), o == null && (o = i.get(a)), o != null && (r[a] = o) }), r }(v, n, m, l)); var x = v.get('borderColor'); var _ = v.get('borderColorSaturation'); _ != null && (g = u(y), x = (function (t, e) { return e != null ? r.modifyHSL(e, null, null, t) : null }(_, g))); e.setVisual('borderColor', x); var b = e.viewChildren; if (b && b.length) { var w = (function (t, e, n, r, a, o) { if (!o || !o.length) return; var s = h(e, 'color') || a.color != null && a.color !== 'none' && (h(e, 'colorAlpha') || h(e, 'colorSaturation')); if (!s) return; var l = e.get('visualMin'); var u = e.get('visualMax'); var c = n.dataExtent.slice(); l != null && l < c[0] && (c[0] = l), u != null && u > c[1] && (c[1] = u); var d = e.get('colorMappingBy'); var f = { type: s.name, dataExtent: c, visual: s.range }; f.type !== 'color' || d !== 'index' && d !== 'id' ? f.mappingMethod = 'linear' : (f.mappingMethod = 'category', f.loop = !0); var p = new i(f); return p.__drColorMappingBy = d, p }(0, f, p, 0, y, b)); a.each(b, function (e, n) { if (e.depth >= c.length || e === c[e.depth]) { var i = (function (t, e, n, i, r, o) { var s = a.extend({}, e); if (r) { var l = r.type; var u = l === 'color' && r.__drColorMappingBy; var c = u === 'index' ? i : u === 'id' ? o.mapIdToIndex(n.getId()) : n.getValue(t.get('visualDimension')); s[l] = r.mapValueToVisual(c) } return s }(f, y, e, n, w, d)); t(e, i, o, l, c, d) } }) } else g = u(y), e.setVisual('color', g) }(c, {}, a.map(l.levelModels, function (t) { return t ? t.get(s) : null }), d, t.getViewRoot().getAncestors(), t)) } }; function u (t) { var e = c(t, 'color'); if (e) { var n = c(t, 'colorAlpha'); var i = c(t, 'colorSaturation'); return i && (e = r.modifyHSL(e, null, null, i)), n && (e = r.modifyAlpha(e, n)), e } } function c (t, e) { var n = t[e]; if (n != null && n !== 'none') return n } function h (t, e) { var n = t.get(e); return o(n) && n.length ? { name: e, range: n } : null }t.exports = l }, function (t, e, n) { var i = n(0); var r = n(8); var a = n(3); var o = a.parsePercent; var s = a.MAX_SAFE_INTEGER; var l = n(6); var u = n(40); var c = Math.max; var h = Math.min; var d = i.retrieve; var f = i.each; var p = ['itemStyle', 'borderWidth']; var g = ['itemStyle', 'gapWidth']; var v = ['upperLabel', 'show']; var m = ['upperLabel', 'height']; var y = { seriesType: 'treemap', reset: function (t, e, n, a) { var v = n.getWidth(); var m = n.getHeight(); var y = t.option; var w = l.getLayoutRect(t.getBoxLayoutParams(), { width: n.getWidth(), height: n.getHeight() }); var S = y.size || []; var M = o(d(w.width, S[0]), v); var I = o(d(w.height, S[1]), m); var A = a && a.type; var T = u.retrieveTargetInfo(a, ['treemapZoomToNode', 'treemapRootToNode'], t); var C = A === 'treemapRender' || A === 'treemapMove' ? a.rootRect : null; var D = t.getViewRoot(); var L = u.getPathToRoot(D); if (A !== 'treemapMove') { var P = A === 'treemapZoomToNode' ? (function (t, e, n, i, r) { var a; var o = (e || {}).node; var l = [i, r]; if (!o || o === n) return l; var u = i * r; var c = u * t.option.zoomToNodeRatio; for (;a = o.parentNode;) { for (var h = 0, d = a.children, f = 0, g = d.length; f < g; f++)h += d[f].getValue(); var v = o.getValue(); if (v === 0) return l; c *= h / v; var m = a.getModel(); var y = m.get(p); var x = Math.max(y, b(m)); (c += 4 * y * y + (3 * y + x) * Math.pow(c, 0.5)) > s && (c = s), o = a }c < u && (c = u); var _ = Math.pow(c / u, 0.5); return [i * _, r * _] }(t, T, D, M, I)) : C ? [C.width, C.height] : [M, I]; var k = y.sort; k && k !== 'asc' && k !== 'desc' && (k = 'desc'); var O = { squareRatio: y.squareRatio, sort: k, leafDepth: y.leafDepth }; D.hostTree.clearLayouts(); var E = { x: 0, y: 0, width: P[0], height: P[1], area: P[0] * P[1] }; D.setLayout(E), (function t (e, n, r, a) { var o, s; if (e.isRemoved()) return; var l = e.getLayout(); o = l.width, s = l.height; var u = (S = e.getModel()).get(p); var d = S.get(g) / 2; var v = b(S); var m = Math.max(u, v); var y = u - d; var w = m - d; var S = e.getModel(); e.setLayout({ borderWidth: u, upperHeight: m, upperLabelHeight: v }, !0), o = c(o - 2 * y, 0), s = c(s - y - w, 0); var M = o * s; var I = (function (t, e, n, r, a, o) { var s = t.children || []; var l = r.sort; l !== 'asc' && l !== 'desc' && (l = null); var u = r.leafDepth != null && r.leafDepth <= o; if (a && !u) return t.viewChildren = []; !(function (t, e) { e && t.sort(function (t, n) { var i = e === 'asc' ? t.getValue() - n.getValue() : n.getValue() - t.getValue(); return i === 0 ? e === 'asc' ? t.dataIndex - n.dataIndex : n.dataIndex - t.dataIndex : i }) }(s = i.filter(s, function (t) { return !t.isRemoved() }), l)); var c = (function (t, e, n) { for (var i = 0, r = 0, a = e.length; r < a; r++)i += e[r].getValue(); var o = t.get('visualDimension'); if (e && e.length) if (o === 'value' && n)s = [e[e.length - 1].getValue(), e[0].getValue()], n === 'asc' && s.reverse(); else { var s = [1 / 0, -1 / 0]; f(e, function (t) { var e = t.getValue(o); e < s[0] && (s[0] = e), e > s[1] && (s[1] = e) }) } else s = [NaN, NaN]; return { sum: i, dataExtent: s } }(e, s, l)); if (c.sum === 0) return t.viewChildren = []; if (c.sum = (function (t, e, n, i, r) { if (!i) return n; for (var a = t.get('visibleMin'), o = r.length, s = o, l = o - 1; l >= 0; l--) { var u = r[i === 'asc' ? o - l - 1 : l].getValue(); u / n * e < a && (s = l, n -= u) } return i === 'asc' ? r.splice(0, o - s) : r.splice(s, o - s), n }(e, n, c.sum, l, s)), c.sum === 0) return t.viewChildren = []; for (var h = 0, d = s.length; h < d; h++) { var p = s[h].getValue() / c.sum * n; s[h].setLayout({ area: p }) }u && (s.length && t.setLayout({ isLeafRoot: !0 }, !0), s.length = 0); return t.viewChildren = s, t.setLayout({ dataExtent: c.dataExtent }, !0), s }(e, S, M, n, r, a)); if (!I.length) return; var A = { x: y, y: w, width: o, height: s }; var T = h(o, s); var C = 1 / 0; var D = []; D.area = 0; for (var L = 0, P = I.length; L < P;) { var k = I[L]; D.push(k), D.area += k.getLayout().area; var O = x(D, T, n.squareRatio); O <= C ? (L++, C = O) : (D.area -= D.pop().getLayout().area, _(D, T, A, d, !1), T = h(A.width, A.height), D.length = D.area = 0, C = 1 / 0) }D.length && _(D, T, A, d, !0); if (!r) { var E = S.get('childrenVisibleMin'); E != null && M < E && (r = !0) } for (L = 0, P = I.length; L < P; L++)t(I[L], n, r, a + 1) }(D, O, !1, 0)); E = D.getLayout(); f(L, function (t, e) { var n = (L[e + 1] || D).getValue(); t.setLayout(i.extend({ dataExtent: [n, n], borderWidth: 0, upperHeight: 0 }, E)) }) } var R = t.getData().tree.root; R.setLayout((function (t, e, n) { if (e) return { x: e.x, y: e.y }; var i = { x: 0, y: 0 }; if (!n) return i; var r = n.node; var a = r.getLayout(); if (!a) return i; var o = [a.width / 2, a.height / 2]; var s = r; for (;s;) { var l = s.getLayout(); o[0] += l.x, o[1] += l.y, s = s.parentNode } return { x: t.width / 2 - o[0], y: t.height / 2 - o[1] } }(w, C, T)), !0), t.setLayoutInfo(w), (function t (e, n, i, a, o) { var s = e.getLayout(); var l = i[o]; var u = l && l === e; if (l && !u || o === i.length && e !== a) return; e.setLayout({ isInView: !0, invisible: !u && !n.intersect(s), isAboveViewRoot: u }, !0); var c = new r(n.x - s.x, n.y - s.y, n.width, n.height); f(e.viewChildren || [], function (e) { t(e, c, i, a, o + 1) }) }(R, new r(-w.x, -w.y, v, m), L, D, 0)) } }; function x (t, e, n) { for (var i, r = 0, a = 1 / 0, o = 0, s = t.length; o < s; o++)(i = t[o].getLayout().area) && (i < a && (a = i), i > r && (r = i)); var l = t.area * t.area; var u = e * e * n; return l ? c(u * r / l, l / (u * a)) : 1 / 0 } function _ (t, e, n, i, r) { var a = e === n.width ? 0 : 1; var o = 1 - a; var s = ['x', 'y']; var l = ['width', 'height']; var u = n[s[a]]; var d = e ? t.area / e : 0; (r || d > n[l[o]]) && (d = n[l[o]]); for (var f = 0, p = t.length; f < p; f++) { var g = t[f]; var v = {}; var m = d ? g.getLayout().area / d : 0; var y = v[l[o]] = c(d - 2 * i, 0); var x = n[s[a]] + n[l[a]] - u; var _ = f === p - 1 || x < m ? x : m; var b = v[l[a]] = c(_ - 2 * i, 0); v[s[o]] = n[s[o]] + h(i, y / 2), v[s[a]] = u + h(i, b / 2), u += _, g.setLayout(v, !0) }n[s[o]] += d, n[l[o]] -= d } function b (t) { return t.get(v) ? t.get(m) : 0 }t.exports = y }, function (t, e, n) { var i = n(1); n(340), n(342), n(345); var r = n(346); var a = n(38); var o = n(347); var s = n(348); var l = n(349); var u = n(350); var c = n(351); var h = n(353); i.registerProcessor(r), i.registerVisual(a('graph', 'circle', null)), i.registerVisual(o), i.registerVisual(s), i.registerLayout(l), i.registerLayout(i.PRIORITY.VISUAL.POST_CHART_LAYOUT, u), i.registerLayout(c), i.registerCoordinateSystem('graphView', { create: h }) }, function (t, e, n) { var i = n(1); var r = n(18); var a = n(0); var o = n(4).defaultEmphasis; var s = n(12); var l = n(9).encodeHTML; var u = n(177); var c = i.extendSeriesModel({ type: 'series.graph', init: function (t) { c.superApply(this, 'init', arguments), this.legendDataProvider = function () { return this._categoriesData }, this.fillDataTextStyle(t.edges || t.links), this._updateCategoriesData() }, mergeOption: function (t) { c.superApply(this, 'mergeOption', arguments), this.fillDataTextStyle(t.edges || t.links), this._updateCategoriesData() }, mergeDefaultAndTheme: function (t) { c.superApply(this, 'mergeDefaultAndTheme', arguments), o(t, ['edgeLabel'], ['show']) }, getInitialData: function (t, e) { var n = t.edges || t.links || []; var i = t.data || t.nodes || []; var r = this; if (i && n) return u(i, n, this, !0, function (t, n) { t.wrapMethod('getItemModel', function (t) { var e = r._categoriesModels[t.getShallow('category')]; return e && (e.parentModel = t.parentModel, t.parentModel = e), t }); var i = r.getModel('edgeLabel'); var a = new s({ label: i.option }, i.parentModel, e); var o = r.getModel('emphasis.edgeLabel'); var l = new s({ emphasis: { label: o.option } }, o.parentModel, e); function u (t) { return (t = this.parsePath(t)) && t[0] === 'label' ? a : t && t[0] === 'emphasis' && t[1] === 'label' ? l : this.parentModel }n.wrapMethod('getItemModel', function (t) { return t.customizeGetParent(u), t }) }).data }, getGraph: function () { return this.getData().graph }, getEdgeData: function () { return this.getGraph().edgeData }, getCategoriesData: function () { return this._categoriesData }, formatTooltip: function (t, e, n) { if (n === 'edge') { var i = this.getData(); var r = this.getDataParams(t, n); var a = i.graph.getEdgeByIndex(t); var o = i.getName(a.node1.dataIndex); var s = i.getName(a.node2.dataIndex); var u = []; return o != null && u.push(o), s != null && u.push(s), u = l(u.join(' > ')), r.value && (u += ' : ' + l(r.value)), u } return c.superApply(this, 'formatTooltip', arguments) }, _updateCategoriesData: function () { var t = a.map(this.option.categories || [], function (t) { return t.value != null ? t : a.extend({ value: 0 }, t) }); var e = new r(['value'], this); e.initData(t), this._categoriesData = e, this._categoriesModels = e.mapArray(function (t) { return e.getItemModel(t, !0) }) }, setZoom: function (t) { this.option.zoom = t }, setCenter: function (t) { this.option.center = t }, isAnimationEnabled: function () { return c.superCall(this, 'isAnimationEnabled') && !(this.get('layout') === 'force' && this.get('force.layoutAnimation')) }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'view', legendHoverLink: !0, hoverAnimation: !0, layout: null, focusNodeAdjacency: !1, circular: { rotateLabel: !1 }, force: { initLayout: null, repulsion: [0, 50], gravity: 0.1, friction: 0.6, edgeLength: 30, layoutAnimation: !0 }, left: 'center', top: 'center', symbol: 'circle', symbolSize: 10, edgeSymbol: ['none', 'none'], edgeSymbolSize: 10, edgeLabel: { position: 'middle' }, draggable: !1, roam: !1, center: null, zoom: 1, nodeScaleRatio: 0.6, label: { show: !1, formatter: '{b}' }, itemStyle: {}, lineStyle: { color: '#aaa', width: 1, curveness: 0, opacity: 0.5 }, emphasis: { label: { show: !0 } } } }); var h = c; t.exports = h }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(26).enableClassCheck; function a (t) { return '_EC_' + t } var o = function (t) { this._directed = t || !1, this.nodes = [], this.edges = [], this._nodesMap = {}, this._edgesMap = {}, this.data, this.edgeData }; var s = o.prototype; function l (t, e) { this.id = t == null ? '' : t, this.inEdges = [], this.outEdges = [], this.edges = [], this.hostGraph, this.dataIndex = e == null ? -1 : e } function u (t, e, n) { this.node1 = t, this.node2 = e, this.dataIndex = n == null ? -1 : n }s.type = 'graph', s.isDirected = function () { return this._directed }, s.addNode = function (t, e) { t = t == null ? '' + e : '' + t; var n = this._nodesMap; if (!n[a(t)]) { var i = new l(t, e); return i.hostGraph = this, this.nodes.push(i), n[a(t)] = i, i } }, s.getNodeByIndex = function (t) { var e = this.data.getRawIndex(t); return this.nodes[e] }, s.getNodeById = function (t) { return this._nodesMap[a(t)] }, s.addEdge = function (t, e, n) { var i = this._nodesMap; var r = this._edgesMap; if (typeof t === 'number' && (t = this.nodes[t]), typeof e === 'number' && (e = this.nodes[e]), l.isInstance(t) || (t = i[a(t)]), l.isInstance(e) || (e = i[a(e)]), t && e) { var o = t.id + '-' + e.id; if (!r[o]) { var s = new u(t, e, n); return s.hostGraph = this, this._directed && (t.outEdges.push(s), e.inEdges.push(s)), t.edges.push(s), t !== e && e.edges.push(s), this.edges.push(s), r[o] = s, s } } }, s.getEdgeByIndex = function (t) { var e = this.edgeData.getRawIndex(t); return this.edges[e] }, s.getEdge = function (t, e) { l.isInstance(t) && (t = t.id), l.isInstance(e) && (e = e.id); var n = this._edgesMap; return this._directed ? n[t + '-' + e] : n[t + '-' + e] || n[e + '-' + t] }, s.eachNode = function (t, e) { for (var n = this.nodes, i = n.length, r = 0; r < i; r++)n[r].dataIndex >= 0 && t.call(e, n[r], r) }, s.eachEdge = function (t, e) { for (var n = this.edges, i = n.length, r = 0; r < i; r++)n[r].dataIndex >= 0 && n[r].node1.dataIndex >= 0 && n[r].node2.dataIndex >= 0 && t.call(e, n[r], r) }, s.breadthFirstTraverse = function (t, e, n, i) { if (l.isInstance(e) || (e = this._nodesMap[a(e)]), e) { for (var r = n === 'out' ? 'outEdges' : n === 'in' ? 'inEdges' : 'edges', o = 0; o < this.nodes.length; o++) this.nodes[o].__visited = !1; if (!t.call(i, e, null)) for (var s = [e]; s.length;) { var u = s.shift(); var c = u[r]; for (o = 0; o < c.length; o++) { var h = c[o]; var d = h.node1 === u ? h.node2 : h.node1; if (!d.__visited) { if (t.call(i, d, u)) return; s.push(d), d.__visited = !0 } } } } }, s.update = function () { for (var t = this.data, e = this.edgeData, n = this.nodes, i = this.edges, r = 0, a = n.length; r < a; r++)n[r].dataIndex = -1; for (r = 0, a = t.count(); r < a; r++)n[t.getRawIndex(r)].dataIndex = r; e.filterSelf(function (t) { var n = i[e.getRawIndex(t)]; return n.node1.dataIndex >= 0 && n.node2.dataIndex >= 0 }); for (r = 0, a = i.length; r < a; r++)i[r].dataIndex = -1; for (r = 0, a = e.count(); r < a; r++)i[e.getRawIndex(r)].dataIndex = r }, s.clone = function () { for (var t = new o(this._directed), e = this.nodes, n = this.edges, i = 0; i < e.length; i++)t.addNode(e[i].id, e[i].dataIndex); for (i = 0; i < n.length; i++) { var r = n[i]; t.addEdge(r.node1.id, r.node2.id, r.dataIndex) } return t }, l.prototype = { constructor: l, degree: function () { return this.edges.length }, inDegree: function () { return this.inEdges.length }, outDegree: function () { return this.outEdges.length }, getModel: function (t) { if (!(this.dataIndex < 0)) return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t) } }, u.prototype.getModel = function (t) { if (!(this.dataIndex < 0)) return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t) }; var c = function (t, e) { return { getValue: function (n) { var i = this[t][e]; return i.get(i.getDimension(n || 'value'), this.dataIndex) }, setVisual: function (n, i) { this.dataIndex >= 0 && this[t][e].setItemVisual(this.dataIndex, n, i) }, getVisual: function (n, i) { return this[t][e].getItemVisual(this.dataIndex, n, i) }, setLayout: function (n, i) { this.dataIndex >= 0 && this[t][e].setItemLayout(this.dataIndex, n, i) }, getLayout: function () { return this[t][e].getItemLayout(this.dataIndex) }, getGraphicEl: function () { return this[t][e].getItemGraphicEl(this.dataIndex) }, getRawIndex: function () { return this[t][e].getRawIndex(this.dataIndex) } } }; i.mixin(l, c('hostGraph', 'data')), i.mixin(u, c('hostGraph', 'edgeData')), o.Node = l, o.Edge = u, r(l), r(u); var h = o; t.exports = h }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(59); var o = n(105); var s = n(64); var l = n(100); var u = n(83).onIrrelevantElement; var c = n(2); var h = n(344); var d = n(107).getNodeGlobalScale; var f = '__focusNodeAdjacency'; var p = ['itemStyle', 'opacity']; var g = ['lineStyle', 'opacity']; function v (t, e) { var n = t.getVisual('opacity'); return n != null ? n : t.getModel().get(e) } function m (t, e, n) { var i = t.getGraphicEl(); var r = v(t, e); n != null && (r == null && (r = 1), r *= n), i.downplay && i.downplay(), i.traverse(function (t) { if (!t.isGroup) { var e = t.lineLabelOriginalOpacity; e != null && n == null || (e = r), t.setStyle('opacity', e) } }) } function y (t, e) { var n = v(t, e); var i = t.getGraphicEl(); i.traverse(function (t) { !t.isGroup && t.setStyle('opacity', n) }), i.highlight && i.highlight() } var x = i.extendChartView({ type: 'graph', init: function (t, e) { var n = new a(); var i = new o(); var r = this.group; this._controller = new s(e.getZr()), this._controllerHost = { target: r }, r.add(n.group), r.add(i.group), this._symbolDraw = n, this._lineDraw = i, this._firstRender = !0 }, render: function (t, e, n) { var i = t.coordinateSystem; this._model = t; var r = this._symbolDraw; var a = this._lineDraw; var o = this.group; if (i.type === 'view') { var s = { position: i.position, scale: i.scale }; this._firstRender ? o.attr(s) : c.updateProps(o, s, t) }h(t.getGraph(), d(t)); var l = t.getData(); r.updateData(l); var u = t.getEdgeData(); a.updateData(u), this._updateNodeAndLinkScale(), this._updateController(t, e, n), clearTimeout(this._layoutTimeout); var p = t.forceLayout; var g = t.get('force.layoutAnimation'); p && this._startForceLayoutIteration(p, g), l.eachItemGraphicEl(function (e, i) { var r = l.getItemModel(i); e.off('drag').off('dragend'); var a = r.get('draggable'); a && e.on('drag', function () { p && (p.warmUp(), !this._layouting && this._startForceLayoutIteration(p, g), p.setFixed(i), l.setItemLayout(i, e.position)) }, this).on('dragend', function () { p && p.setUnfixed(i) }, this), e.setDraggable(a && p), e[f] && e.off('mouseover', e[f]), e.__unfocusNodeAdjacency && e.off('mouseout', e.__unfocusNodeAdjacency), r.get('focusNodeAdjacency') && (e.on('mouseover', e[f] = function () { n.dispatchAction({ type: 'focusNodeAdjacency', seriesId: t.id, dataIndex: e.dataIndex }) }), e.on('mouseout', e.__unfocusNodeAdjacency = function () { n.dispatchAction({ type: 'unfocusNodeAdjacency', seriesId: t.id }) })) }, this), l.graph.eachEdge(function (e) { var i = e.getGraphicEl(); i[f] && i.off('mouseover', i[f]), i.__unfocusNodeAdjacency && i.off('mouseout', i.__unfocusNodeAdjacency), e.getModel().get('focusNodeAdjacency') && (i.on('mouseover', i[f] = function () { n.dispatchAction({ type: 'focusNodeAdjacency', seriesId: t.id, edgeDataIndex: e.dataIndex }) }), i.on('mouseout', i.__unfocusNodeAdjacency = function () { n.dispatchAction({ type: 'unfocusNodeAdjacency', seriesId: t.id }) })) }); var v = t.get('layout') === 'circular' && t.get('circular.rotateLabel'); var m = l.getLayout('cx'); var y = l.getLayout('cy'); l.eachItemGraphicEl(function (t, e) { var n = l.getItemModel(e).get('label.rotate') || 0; var i = t.getSymbolPath(); if (v) { var r = l.getItemLayout(e); var a = Math.atan2(r[1] - y, r[0] - m); a < 0 && (a = 2 * Math.PI + a); var o = r[0] < m; o && (a -= Math.PI); var s = o ? 'left' : 'right'; c.modifyLabelStyle(i, { textRotation: -a, textPosition: s, textOrigin: 'center' }, { textPosition: s }) } else c.modifyLabelStyle(i, { textRotation: n *= Math.PI / 180 }) }), this._firstRender = !1 }, dispose: function () { this._controller && this._controller.dispose(), this._controllerHost = {} }, focusNodeAdjacency: function (t, e, n, i) { var a = this._model.getData().graph; var o = i.dataIndex; var s = i.edgeDataIndex; var l = a.getNodeByIndex(o); var u = a.getEdgeByIndex(s); (l || u) && (a.eachNode(function (t) { m(t, p, 0.1) }), a.eachEdge(function (t) { m(t, g, 0.1) }), l && (y(l, p), r.each(l.edges, function (t) { t.dataIndex < 0 || (y(t, g), y(t.node1, p), y(t.node2, p)) })), u && (y(u, g), y(u.node1, p), y(u.node2, p))) }, unfocusNodeAdjacency: function (t, e, n, i) { var r = this._model.getData().graph; r.eachNode(function (t) { m(t, p) }), r.eachEdge(function (t) { m(t, g) }) }, _startForceLayoutIteration: function (t, e) { var n = this; !(function i () { t.step(function (t) { n.updateLayout(n._model), (n._layouting = !t) && (e ? n._layoutTimeout = setTimeout(i, 16) : i()) }) }()) }, _updateController: function (t, e, n) { var i = this._controller; var r = this._controllerHost; var a = this.group; i.setPointerChecker(function (e, i, r) { var o = a.getBoundingRect(); return o.applyTransform(a.transform), o.contain(i, r) && !u(e, n, t) }), t.coordinateSystem.type === 'view' ? (i.enable(t.get('roam')), r.zoomLimit = t.get('scaleLimit'), r.zoom = t.coordinateSystem.getZoom(), i.off('pan').off('zoom').on('pan', function (e) { l.updateViewOnPan(r, e.dx, e.dy), n.dispatchAction({ seriesId: t.id, type: 'graphRoam', dx: e.dx, dy: e.dy }) }).on('zoom', function (e) { l.updateViewOnZoom(r, e.scale, e.originX, e.originY), n.dispatchAction({ seriesId: t.id, type: 'graphRoam', zoom: e.scale, originX: e.originX, originY: e.originY }), this._updateNodeAndLinkScale(), h(t.getGraph(), d(t)), this._lineDraw.updateLayout() }, this)) : i.disable() }, _updateNodeAndLinkScale: function () { var t = this._model; var e = t.getData(); var n = d(t); var i = [n, n]; e.eachItemGraphicEl(function (t, e) { t.attr('scale', i) }) }, updateLayout: function (t) { h(t.getGraph(), d(t)), this._symbolDraw.updateLayout(), this._lineDraw.updateLayout() }, remove: function (t, e) { this._symbolDraw && this._symbolDraw.remove(), this._lineDraw && this._lineDraw.remove() } }); t.exports = x }, function (t, e, n) { var i = n(2); var r = n(7); var a = i.Line.prototype; var o = i.BezierCurve.prototype; function s (t) { return isNaN(+t.cpx1) || isNaN(+t.cpy1) } var l = i.extendShape({ type: 'ec-line', style: { stroke: '#000', fill: null }, shape: { x1: 0, y1: 0, x2: 0, y2: 0, percent: 1, cpx1: null, cpy1: null }, buildPath: function (t, e) { this[s(e) ? '_buildPathLine' : '_buildPathCurve'](t, e) }, _buildPathLine: a.buildPath, _buildPathCurve: o.buildPath, pointAt: function (t) { return this[s(this.shape) ? '_pointAtLine' : '_pointAtCurve'](t) }, _pointAtLine: a.pointAt, _pointAtCurve: o.pointAt, tangentAt: function (t) { var e = this.shape; var n = s(e) ? [e.x2 - e.x1, e.y2 - e.y1] : this._tangentAtCurve(t); return r.normalize(n, n) }, _tangentAtCurve: o.tangentAt }); t.exports = l }, function (t, e, n) { var i = n(28); var r = n(7); var a = n(107).getSymbolSize; var o = []; var s = []; var l = []; var u = i.quadraticAt; var c = r.distSquare; var h = Math.abs; function d (t, e, n) { for (var i, r = t[0], a = t[1], d = t[2], f = 1 / 0, p = n * n, g = 0.1, v = 0.1; v <= 0.9; v += 0.1) { o[0] = u(r[0], a[0], d[0], v), o[1] = u(r[1], a[1], d[1], v), (x = h(c(o, e) - p)) < f && (f = x, i = v) } for (var m = 0; m < 32; m++) { var y = i + g; s[0] = u(r[0], a[0], d[0], i), s[1] = u(r[1], a[1], d[1], i), l[0] = u(r[0], a[0], d[0], y), l[1] = u(r[1], a[1], d[1], y); var x = c(s, e) - p; if (h(x) < 0.01) break; var _ = c(l, e) - p; g /= 2, x < 0 ? _ >= 0 ? i += g : i -= g : _ >= 0 ? i -= g : i += g } return i }t.exports = function (t, e) { var n = []; var o = i.quadraticSubdivide; var s = [[], [], []]; var l = [[], []]; var u = []; e /= 2, t.eachEdge(function (t, i) { var c = t.getLayout(); var h = t.getVisual('fromSymbol'); var f = t.getVisual('toSymbol'); c.__original || (c.__original = [r.clone(c[0]), r.clone(c[1])], c[2] && c.__original.push(r.clone(c[2]))); var p = c.__original; if (c[2] != null) { if (r.copy(s[0], p[0]), r.copy(s[1], p[2]), r.copy(s[2], p[1]), h && h !== 'none') { var g = a(t.node1); var v = d(s, p[0], g * e); o(s[0][0], s[1][0], s[2][0], v, n), s[0][0] = n[3], s[1][0] = n[4], o(s[0][1], s[1][1], s[2][1], v, n), s[0][1] = n[3], s[1][1] = n[4] } if (f && f !== 'none') { g = a(t.node2), v = d(s, p[1], g * e); o(s[0][0], s[1][0], s[2][0], v, n), s[1][0] = n[1], s[2][0] = n[2], o(s[0][1], s[1][1], s[2][1], v, n), s[1][1] = n[1], s[2][1] = n[2] }r.copy(c[0], s[0]), r.copy(c[1], s[2]), r.copy(c[2], s[1]) } else { if (r.copy(l[0], p[0]), r.copy(l[1], p[1]), r.sub(u, l[1], l[0]), r.normalize(u, u), h && h !== 'none') { g = a(t.node1); r.scaleAndAdd(l[0], l[0], u, g * e) } if (f && f !== 'none') { g = a(t.node2); r.scaleAndAdd(l[1], l[1], u, -g * e) }r.copy(c[0], l[0]), r.copy(c[1], l[1]) } }) } }, function (t, e, n) { var i = n(1); var r = n(101).updateCenterAndZoom; n(178); i.registerAction({ type: 'graphRoam', event: 'graphRoam', update: 'none' }, function (t, e) { e.eachComponent({ mainType: 'series', query: t }, function (e) { var n = e.coordinateSystem; var i = r(n, t); e.setCenter && e.setCenter(i.center), e.setZoom && e.setZoom(i.zoom) }) }) }, function (t, e) { t.exports = function (t) { var e = t.findComponents({ mainType: 'legend' }); e && e.length && t.eachSeriesByType('graph', function (t) { var n = t.getCategoriesData(); var i = t.getGraph().data; var r = n.mapArray(n.getName); i.filterSelf(function (t) { var n = i.getItemModel(t).getShallow('category'); if (n != null) { typeof n === 'number' && (n = r[n]); for (var a = 0; a < e.length; a++) if (!e[a].isSelected(n)) return !1 } return !0 }) }, this) } }, function (t, e) { t.exports = function (t) { var e = {}; t.eachSeriesByType('graph', function (t) { var n = t.getCategoriesData(); var i = t.getData(); var r = {}; n.each(function (i) { var a = n.getName(i); r['ec-' + a] = i; var o = n.getItemModel(i); var s = o.get('itemStyle.color') || t.getColorFromPalette(a, e); n.setItemVisual(i, 'color', s); for (var l = ['opacity', 'symbol', 'symbolSize', 'symbolKeepAspect'], u = 0; u < l.length; u++) { var c = o.getShallow(l[u], !0); c != null && n.setItemVisual(i, l[u], c) } }), n.count() && i.each(function (t) { var e = i.getItemModel(t).getShallow('category'); if (e != null) { typeof e === 'string' && (e = r['ec-' + e]); for (var a = ['color', 'opacity', 'symbol', 'symbolSize', 'symbolKeepAspect'], o = 0; o < a.length; o++)i.getItemVisual(t, a[o], !0) == null && i.setItemVisual(t, a[o], n.getItemVisual(e, a[o])) } }) }) } }, function (t, e) { function n (t) { return t instanceof Array || (t = [t, t]), t }t.exports = function (t) { t.eachSeriesByType('graph', function (t) { var e = t.getGraph(); var i = t.getEdgeData(); var r = n(t.get('edgeSymbol')); var a = n(t.get('edgeSymbolSize')); var o = 'lineStyle.color'.split('.'); var s = 'lineStyle.opacity'.split('.'); i.setVisual('fromSymbol', r && r[0]), i.setVisual('toSymbol', r && r[1]), i.setVisual('fromSymbolSize', a && a[0]), i.setVisual('toSymbolSize', a && a[1]), i.setVisual('color', t.get(o)), i.setVisual('opacity', t.get(s)), i.each(function (t) { var r = i.getItemModel(t); var a = e.getEdgeByIndex(t); var l = n(r.getShallow('symbol', !0)); var u = n(r.getShallow('symbolSize', !0)); var c = r.get(o); var h = r.get(s); switch (c) { case 'source':c = a.node1.getVisual('color'); break; case 'target':c = a.node2.getVisual('color') }l[0] && a.setVisual('fromSymbol', l[0]), l[1] && a.setVisual('toSymbol', l[1]), u[0] && a.setVisual('fromSymbolSize', u[0]), u[1] && a.setVisual('toSymbolSize', u[1]), a.setVisual('color', c), a.setVisual('opacity', h) }) }) } }, function (t, e, n) { var i = n(0).each; var r = n(179); var a = r.simpleLayout; var o = r.simpleLayoutEdge; t.exports = function (t, e) { t.eachSeriesByType('graph', function (t) { var e = t.get('layout'); var n = t.coordinateSystem; if (n && n.type !== 'view') { var r = t.getData(); var s = []; i(n.dimensions, function (t) { s = s.concat(r.mapDimension(t, !0)) }); for (var l = 0; l < r.count(); l++) { for (var u = [], c = !1, h = 0; h < s.length; h++) { var d = r.get(s[h], l); isNaN(d) || (c = !0), u.push(d) }c ? r.setItemLayout(l, n.dataToPoint(u)) : r.setItemLayout(l, [NaN, NaN]) }o(r.graph) } else e && e !== 'none' || a(t) }) } }, function (t, e, n) { var i = n(180).circularLayout; t.exports = function (t) { t.eachSeriesByType('graph', function (t) { t.get('layout') === 'circular' && i(t, 'symbolSize') }) } }, function (t, e, n) { var i = n(352).forceLayout; var r = n(179).simpleLayout; var a = n(180).circularLayout; var o = n(3).linearMap; var s = n(7); var l = n(0); t.exports = function (t) { t.eachSeriesByType('graph', function (t) { if (!(m = t.coordinateSystem) || m.type === 'view') if (t.get('layout') === 'force') { var e = t.preservedPoints || {}; var n = t.getGraph(); var u = n.data; var c = n.edgeData; var h = t.getModel('force'); var d = h.get('initLayout'); t.preservedPoints ? u.each(function (t) { var n = u.getId(t); u.setItemLayout(t, e[n] || [NaN, NaN]) }) : d && d !== 'none' ? d === 'circular' && a(t, 'value') : r(t); var f = u.getDataExtent('value'); var p = c.getDataExtent('value'); var g = h.get('repulsion'); var v = h.get('edgeLength'); l.isArray(g) || (g = [g, g]), l.isArray(v) || (v = [v, v]), v = [v[1], v[0]]; var m; var y = u.mapArray('value', function (t, e) { var n = u.getItemLayout(e); var i = o(t, f, g); return isNaN(i) && (i = (g[0] + g[1]) / 2), { w: i, rep: i, fixed: u.getItemModel(e).get('fixed'), p: !n || isNaN(n[0]) || isNaN(n[1]) ? null : n } }); var x = c.mapArray('value', function (t, e) { var i = n.getEdgeByIndex(e); var r = o(t, p, v); isNaN(r) && (r = (v[0] + v[1]) / 2); var a = i.getModel(); return { n1: y[i.node1.dataIndex], n2: y[i.node2.dataIndex], d: r, curveness: a.get('lineStyle.curveness') || 0, ignoreForceLayout: a.get('ignoreForceLayout') } }); var _ = (m = t.coordinateSystem).getBoundingRect(); var b = i(y, x, { rect: _, gravity: h.get('gravity'), friction: h.get('friction') }); var w = b.step; b.step = function (t) { for (var i = 0, r = y.length; i < r; i++)y[i].fixed && s.copy(y[i].p, n.getNodeByIndex(i).getLayout()); w(function (i, r, a) { for (var o = 0, l = i.length; o < l; o++)i[o].fixed || n.getNodeByIndex(o).setLayout(i[o].p), e[u.getId(o)] = i[o].p; for (o = 0, l = r.length; o < l; o++) { var c = r[o]; var h = n.getEdgeByIndex(o); var d = c.n1.p; var f = c.n2.p; var p = h.getLayout(); (p = p ? p.slice() : [])[0] = p[0] || [], p[1] = p[1] || [], s.copy(p[0], d), s.copy(p[1], f), +c.curveness && (p[2] = [(d[0] + f[0]) / 2 - (d[1] - f[1]) * c.curveness, (d[1] + f[1]) / 2 - (f[0] - d[0]) * c.curveness]), h.setLayout(p) }t && t(a) }) }, t.forceLayout = b, t.preservedPoints = e, b.step() } else t.forceLayout = null }) } }, function (t, e, n) { var i = n(7); var r = i.scaleAndAdd; e.forceLayout = function (t, e, n) { for (var a = n.rect, o = a.width, s = a.height, l = [a.x + o / 2, a.y + s / 2], u = n.gravity == null ? 0.1 : n.gravity, c = 0; c < t.length; c++) { var h = t[c]; h.p || (h.p = i.create(o * (Math.random() - 0.5) + l[0], s * (Math.random() - 0.5) + l[1])), h.pp = i.clone(h.p), h.edges = null } var d = n.friction == null ? 0.6 : n.friction; var f = d; return { warmUp: function () { f = 0.8 * d }, setFixed: function (e) { t[e].fixed = !0 }, setUnfixed: function (e) { t[e].fixed = !1 }, step: function (n) { for (var a = [], o = t.length, s = 0; s < e.length; s++) { var c = e[s]; if (!c.ignoreForceLayout) { var h = c.n1; var d = c.n2; i.sub(a, d.p, h.p); var p = i.len(a) - c.d; var g = d.w / (h.w + d.w); isNaN(g) && (g = 0), i.normalize(a, a), !h.fixed && r(h.p, h.p, a, g * p * f), !d.fixed && r(d.p, d.p, a, -(1 - g) * p * f) } } for (s = 0; s < o; s++) { (x = t[s]).fixed || (i.sub(a, l, x.p), r(x.p, x.p, a, u * f)) } for (s = 0; s < o; s++) { h = t[s]; for (var v = s + 1; v < o; v++) { d = t[v]; i.sub(a, d.p, h.p), (p = i.len(a)) === 0 && (i.set(a, Math.random() - 0.5, Math.random() - 0.5), p = 1); var m = (h.rep + d.rep) / p / p; !h.fixed && r(h.pp, h.pp, a, m), !d.fixed && r(d.pp, d.pp, a, -m) } } var y = []; for (s = 0; s < o; s++) { var x; (x = t[s]).fixed || (i.sub(y, x.p, x.pp), r(x.p, x.p, y, f), i.copy(x.pp, x.p)) }f *= 0.992, n && n(t, e, f < 0.01) } } } }, function (t, e, n) { var i = n(103); var r = n(6).getLayoutRect; var a = n(71); t.exports = function (t, e) { var n = []; return t.eachSeriesByType('graph', function (t) { var o = t.get('coordinateSystem'); if (!o || o === 'view') { var s = t.getData(); var l = s.mapArray(function (t) { var e = s.getItemModel(t); return [+e.get('x'), +e.get('y')] }); var u = []; var c = []; a.fromPoints(l, u, c), c[0] - u[0] == 0 && (c[0] += 1, u[0] -= 1), c[1] - u[1] == 0 && (c[1] += 1, u[1] -= 1); var h = (c[0] - u[0]) / (c[1] - u[1]); var d = (function (t, e, n) { var i = t.getBoxLayoutParams(); return i.aspect = n, r(i, { width: e.getWidth(), height: e.getHeight() }) }(t, e, h)); isNaN(h) && (u = [d.x, d.y], c = [d.x + d.width, d.y + d.height]); var f = c[0] - u[0]; var p = c[1] - u[1]; var g = d.width; var v = d.height; var m = t.coordinateSystem = new i(); m.zoomLimit = t.get('scaleLimit'), m.setBoundingRect(u[0], u[1], f, p), m.setViewRect(d.x, d.y, g, v), m.setCenter(t.get('center')), m.setZoom(t.get('zoom')), n.push(m) } }), n } }, function (t, e, n) { n(355), n(356) }, function (t, e, n) { var i = n(49); var r = n(14); var a = (n(0), r.extend({ type: 'series.gauge', getInitialData: function (t, e) { return i(this, ['value']) }, defaultOption: { zlevel: 0, z: 2, center: ['50%', '50%'], legendHoverLink: !0, radius: '75%', startAngle: 225, endAngle: -45, clockwise: !0, min: 0, max: 100, splitNumber: 10, axisLine: { show: !0, lineStyle: { color: [[0.2, '#91c7ae'], [0.8, '#63869e'], [1, '#c23531']], width: 30 } }, splitLine: { show: !0, length: 30, lineStyle: { color: '#eee', width: 2, type: 'solid' } }, axisTick: { show: !0, splitNumber: 5, length: 8, lineStyle: { color: '#eee', width: 1, type: 'solid' } }, axisLabel: { show: !0, distance: 5, color: 'auto' }, pointer: { show: !0, length: '80%', width: 8 }, itemStyle: { color: 'auto' }, title: { show: !0, offsetCenter: [0, '-40%'], color: '#333', fontSize: 15 }, detail: { show: !0, backgroundColor: 'rgba(0,0,0,0)', borderWidth: 0, borderColor: '#ccc', width: 100, height: null, padding: [5, 10], offsetCenter: [0, '40%'], color: 'auto', fontSize: 30 } } })); t.exports = a }, function (t, e, n) { var i = n(357); var r = n(2); var a = n(24); var o = n(3); var s = o.parsePercent; var l = o.round; var u = o.linearMap; function c (t, e) { return e && (typeof e === 'string' ? t = e.replace('{value}', t != null ? t : '') : typeof e === 'function' && (t = e(t))), t } var h = 2 * Math.PI; var d = a.extend({ type: 'gauge', render: function (t, e, n) { this.group.removeAll(); var i = t.get('axisLine.lineStyle.color'); var r = (function (t, e) { var n = t.get('center'); var i = e.getWidth(); var r = e.getHeight(); var a = Math.min(i, r); return { cx: s(n[0], e.getWidth()), cy: s(n[1], e.getHeight()), r: s(t.get('radius'), a / 2) } }(t, n)); this._renderMain(t, e, n, i, r) }, dispose: function () {}, _renderMain: function (t, e, n, i, a) { for (var o = this.group, s = t.getModel('axisLine'), l = s.getModel('lineStyle'), u = t.get('clockwise'), c = -t.get('startAngle') / 180 * Math.PI, d = ((m = -t.get('endAngle') / 180 * Math.PI) - c) % h, f = c, p = l.get('width'), g = s.get('show'), v = 0; g && v < i.length; v++) { var m = c + d * Math.min(Math.max(i[v][0], 0), 1); var y = new r.Sector({ shape: { startAngle: f, endAngle: m, cx: a.cx, cy: a.cy, clockwise: u, r0: a.r - p, r: a.r }, silent: !0 }); y.setStyle({ fill: i[v][1] }), y.setStyle(l.getLineStyle(['color', 'borderWidth', 'borderColor'])), o.add(y), f = m } var x = function (t) { if (t <= 0) return i[0][1]; for (var e = 0; e < i.length; e++) if (i[e][0] >= t && (e === 0 ? 0 : i[e - 1][0]) < t) return i[e][1]; return i[e - 1][1] }; if (!u) { var _ = c; c = m, m = _ } this._renderTicks(t, e, n, x, a, c, m, u), this._renderPointer(t, e, n, x, a, c, m, u), this._renderTitle(t, e, n, x, a), this._renderDetail(t, e, n, x, a) }, _renderTicks: function (t, e, n, i, a, o, u, h) { for (var d = this.group, f = a.cx, p = a.cy, g = a.r, v = +t.get('min'), m = +t.get('max'), y = t.getModel('splitLine'), x = t.getModel('axisTick'), _ = t.getModel('axisLabel'), b = t.get('splitNumber'), w = x.get('splitNumber'), S = s(y.get('length'), g), M = s(x.get('length'), g), I = o, A = (u - o) / b, T = A / w, C = y.getModel('lineStyle').getLineStyle(), D = x.getModel('lineStyle').getLineStyle(), L = 0; L <= b; L++) { var P = Math.cos(I); var k = Math.sin(I); if (y.get('show')) { var O = new r.Line({ shape: { x1: P * g + f, y1: k * g + p, x2: P * (g - S) + f, y2: k * (g - S) + p }, style: C, silent: !0 }); C.stroke === 'auto' && O.setStyle({ stroke: i(L / b) }), d.add(O) } if (_.get('show')) { var E = c(l(L / b * (m - v) + v), _.get('formatter')); var R = _.get('distance'); var N = i(L / b); d.add(new r.Text({ style: r.setTextStyle({}, _, { text: E, x: P * (g - S - R) + f, y: k * (g - S - R) + p, textVerticalAlign: k < -0.4 ? 'top' : k > 0.4 ? 'bottom' : 'middle', textAlign: P < -0.4 ? 'left' : P > 0.4 ? 'right' : 'center' }, { autoColor: N }), silent: !0 })) } if (x.get('show') && L !== b) { for (var z = 0; z <= w; z++) { P = Math.cos(I), k = Math.sin(I); var B = new r.Line({ shape: { x1: P * g + f, y1: k * g + p, x2: P * (g - M) + f, y2: k * (g - M) + p }, silent: !0, style: D }); D.stroke === 'auto' && B.setStyle({ stroke: i((L + z / w) / b) }), d.add(B), I += T }I -= T } else I += A } }, _renderPointer: function (t, e, n, a, o, l, c, h) { var d = this.group; var f = this._data; if (t.get('pointer.show')) { var p = [+t.get('min'), +t.get('max')]; var g = [l, c]; var v = t.getData(); var m = v.mapDimension('value'); v.diff(f).add(function (e) { var n = new i({ shape: { angle: l } }); r.initProps(n, { shape: { angle: u(v.get(m, e), p, g, !0) } }, t), d.add(n), v.setItemGraphicEl(e, n) }).update(function (e, n) { var i = f.getItemGraphicEl(n); r.updateProps(i, { shape: { angle: u(v.get(m, e), p, g, !0) } }, t), d.add(i), v.setItemGraphicEl(e, i) }).remove(function (t) { var e = f.getItemGraphicEl(t); d.remove(e) }).execute(), v.eachItemGraphicEl(function (t, e) { var n = v.getItemModel(e); var i = n.getModel('pointer'); t.setShape({ x: o.cx, y: o.cy, width: s(i.get('width'), o.r), r: s(i.get('length'), o.r) }), t.useStyle(n.getModel('itemStyle').getItemStyle()), t.style.fill === 'auto' && t.setStyle('fill', a(u(v.get(m, e), p, [0, 1], !0))), r.setHoverStyle(t, n.getModel('emphasis.itemStyle').getItemStyle()) }), this._data = v } else f && f.eachItemGraphicEl(function (t) { d.remove(t) }) }, _renderTitle: function (t, e, n, i, a) { var o = t.getData(); var l = o.mapDimension('value'); var c = t.getModel('title'); if (c.get('show')) { var h = c.get('offsetCenter'); var d = a.cx + s(h[0], a.r); var f = a.cy + s(h[1], a.r); var p = +t.get('min'); var g = +t.get('max'); var v = t.getData().get(l, 0); var m = i(u(v, [p, g], [0, 1], !0)); this.group.add(new r.Text({ silent: !0, style: r.setTextStyle({}, c, { x: d, y: f, text: o.getName(0), textAlign: 'center', textVerticalAlign: 'middle' }, { autoColor: m, forceRich: !0 }) })) } }, _renderDetail: function (t, e, n, i, a) { var o = t.getModel('detail'); var l = +t.get('min'); var h = +t.get('max'); if (o.get('show')) { var d = o.get('offsetCenter'); var f = a.cx + s(d[0], a.r); var p = a.cy + s(d[1], a.r); var g = s(o.get('width'), a.r); var v = s(o.get('height'), a.r); var m = t.getData(); var y = m.get(m.mapDimension('value'), 0); var x = i(u(y, [l, h], [0, 1], !0)); this.group.add(new r.Text({ silent: !0, style: r.setTextStyle({}, o, { x: f, y: p, text: c(y, o.get('formatter')), textWidth: isNaN(g) ? null : g, textHeight: isNaN(v) ? null : v, textAlign: 'center', textVerticalAlign: 'middle' }, { autoColor: x, forceRich: !0 }) })) } } }); t.exports = d }, function (t, e, n) { var i = n(10).extend({ type: 'echartsGaugePointer', shape: { angle: 0, width: 10, r: 10, x: 0, y: 0 }, buildPath: function (t, e) { var n = Math.cos; var i = Math.sin; var r = e.r; var a = e.width; var o = e.angle; var s = e.x - n(o) * a * (a >= r / 3 ? 1 : 2); var l = e.y - i(o) * a * (a >= r / 3 ? 1 : 2); o = e.angle - Math.PI / 2, t.moveTo(s, l), t.lineTo(e.x + n(o) * a, e.y + i(o) * a), t.lineTo(e.x + n(e.angle) * r, e.y + i(e.angle) * r), t.lineTo(e.x - n(o) * a, e.y - i(o) * a), t.lineTo(s, l) } }); t.exports = i }, function (t, e, n) { var i = n(1); n(359), n(360); var r = n(81); var a = n(361); var o = n(63); i.registerVisual(r('funnel')), i.registerLayout(a), i.registerProcessor(o('funnel')) }, function (t, e, n) { var i = n(1); var r = n(49); var a = n(4).defaultEmphasis; var o = i.extendSeriesModel({ type: 'series.funnel', init: function (t) { o.superApply(this, 'init', arguments), this.legendDataProvider = function () { return this.getRawData() }, this._defaultLabelLine(t) }, getInitialData: function (t, e) { return r(this, ['value']) }, _defaultLabelLine: function (t) { a(t, 'labelLine', ['show']); var e = t.labelLine; var n = t.emphasis.labelLine; e.show = e.show && t.label.show, n.show = n.show && t.emphasis.label.show }, getDataParams: function (t) { var e = this.getData(); var n = o.superCall(this, 'getDataParams', t); var i = e.mapDimension('value'); var r = e.getSum(i); return n.percent = r ? +(e.get(i, t) / r * 100).toFixed(2) : 0, n.$vars.push('percent'), n }, defaultOption: { zlevel: 0, z: 2, legendHoverLink: !0, left: 80, top: 60, right: 80, bottom: 60, minSize: '0%', maxSize: '100%', sort: 'descending', gap: 0, funnelAlign: 'center', label: { show: !0, position: 'outer' }, labelLine: { show: !0, length: 20, lineStyle: { width: 1, type: 'solid' } }, itemStyle: { borderColor: '#fff', borderWidth: 1 }, emphasis: { label: { show: !0 } } } }); var s = o; t.exports = s }, function (t, e, n) { var i = n(2); var r = n(0); var a = n(24); function o (t, e) { i.Group.call(this); var n = new i.Polygon(); var r = new i.Polyline(); var a = new i.Text(); this.add(n), this.add(r), this.add(a), this.highDownOnUpdate = function (t, e) { e === 'emphasis' ? (r.ignore = r.hoverIgnore, a.ignore = a.hoverIgnore) : (r.ignore = r.normalIgnore, a.ignore = a.normalIgnore) }, this.updateData(t, e, !0) } var s = o.prototype; var l = ['itemStyle', 'opacity']; s.updateData = function (t, e, n) { var a = this.childAt(0); var o = t.hostModel; var s = t.getItemModel(e); var u = t.getItemLayout(e); var c = t.getItemModel(e).get(l); c = c == null ? 1 : c, a.useStyle({}), n ? (a.setShape({ points: u.points }), a.setStyle({ opacity: 0 }), i.initProps(a, { style: { opacity: c } }, o, e)) : i.updateProps(a, { style: { opacity: c }, shape: { points: u.points } }, o, e); var h = s.getModel('itemStyle'); var d = t.getItemVisual(e, 'color'); a.setStyle(r.defaults({ lineJoin: 'round', fill: d }, h.getItemStyle(['opacity']))), a.hoverStyle = h.getModel('emphasis').getItemStyle(), this._updateLabel(t, e), i.setHoverStyle(this) }, s._updateLabel = function (t, e) { var n = this.childAt(1); var r = this.childAt(2); var a = t.hostModel; var o = t.getItemModel(e); var s = t.getItemLayout(e).label; var l = t.getItemVisual(e, 'color'); i.updateProps(n, { shape: { points: s.linePoints || s.linePoints } }, a, e), i.updateProps(r, { style: { x: s.x, y: s.y } }, a, e), r.attr({ rotation: s.rotation, origin: [s.x, s.y], z2: 10 }); var u = o.getModel('label'); var c = o.getModel('emphasis.label'); var h = o.getModel('labelLine'); var d = o.getModel('emphasis.labelLine'); l = t.getItemVisual(e, 'color'); i.setLabelStyle(r.style, r.hoverStyle = {}, u, c, { labelFetcher: t.hostModel, labelDataIndex: e, defaultText: t.getName(e), autoColor: l, useInsideStyle: !!s.inside }, { textAlign: s.textAlign, textVerticalAlign: s.verticalAlign }), r.ignore = r.normalIgnore = !u.get('show'), r.hoverIgnore = !c.get('show'), n.ignore = n.normalIgnore = !h.get('show'), n.hoverIgnore = !d.get('show'), n.setStyle({ stroke: l }), n.setStyle(h.getModel('lineStyle').getLineStyle()), n.hoverStyle = d.getModel('lineStyle').getLineStyle() }, r.inherits(o, i.Group); var u = a.extend({ type: 'funnel', render: function (t, e, n) { var i = t.getData(); var r = this._data; var a = this.group; i.diff(r).add(function (t) { var e = new o(i, t); i.setItemGraphicEl(t, e), a.add(e) }).update(function (t, e) { var n = r.getItemGraphicEl(e); n.updateData(i, t), a.add(n), i.setItemGraphicEl(t, n) }).remove(function (t) { var e = r.getItemGraphicEl(t); a.remove(e) }).execute(), this._data = i }, remove: function () { this.group.removeAll(), this._data = null }, dispose: function () {} }); t.exports = u }, function (t, e, n) { var i = n(6); var r = n(3); var a = r.parsePercent; var o = r.linearMap; t.exports = function (t, e, n) { t.eachSeriesByType('funnel', function (t) { var n = t.getData(); var r = n.mapDimension('value'); var s = t.get('sort'); var l = (function (t, e) { return i.getLayoutRect(t.getBoxLayoutParams(), { width: e.getWidth(), height: e.getHeight() }) }(t, e)); var u = (function (t, e) { for (var n = t.mapDimension('value'), i = t.mapArray(n, function (t) { return t }), r = [], a = e === 'ascending', o = 0, s = t.count(); o < s; o++)r[o] = o; return typeof e === 'function' ? r.sort(e) : e !== 'none' && r.sort(function (t, e) { return a ? i[t] - i[e] : i[e] - i[t] }), r }(n, s)); var c = [a(t.get('minSize'), l.width), a(t.get('maxSize'), l.width)]; var h = n.getDataExtent(r); var d = t.get('min'); var f = t.get('max'); d == null && (d = Math.min(h[0], 0)), f == null && (f = h[1]); var p = t.get('funnelAlign'); var g = t.get('gap'); var v = (l.height - g * (n.count() - 1)) / n.count(); var m = l.y; var y = function (t, e) { var i; var a = n.get(r, t) || 0; var s = o(a, [d, f], c, !0); switch (p) { case 'left':i = l.x; break; case 'center':i = l.x + (l.width - s) / 2; break; case 'right':i = l.x + l.width - s } return [[i, e], [i + s, e]] }; s === 'ascending' && (v = -v, g = -g, m += l.height, u = u.reverse()); for (var x = 0; x < u.length; x++) { var _ = u[x]; var b = u[x + 1]; var w = n.getItemModel(_).get('itemStyle.height'); w == null ? w = v : (w = a(w, l.height), s === 'ascending' && (w = -w)); var S = y(_, m); var M = y(b, m + w); m += w + g, n.setItemLayout(_, { points: S.concat(M.slice().reverse()) }) }!(function (t) { t.each(function (e) { var n; var i; var r; var a; var o = t.getItemModel(e); var s = o.getModel('label').get('position'); var l = o.getModel('labelLine'); var u = t.getItemLayout(e); var c = u.points; var h = s === 'inner' || s === 'inside' || s === 'center' || s === 'insideLeft' || s === 'insideRight'; if (h)s === 'insideLeft' ? (i = (c[0][0] + c[3][0]) / 2 + 5, r = (c[0][1] + c[3][1]) / 2, n = 'left') : s === 'insideRight' ? (i = (c[1][0] + c[2][0]) / 2 - 5, r = (c[1][1] + c[2][1]) / 2, n = 'right') : (i = (c[0][0] + c[1][0] + c[2][0] + c[3][0]) / 4, r = (c[0][1] + c[1][1] + c[2][1] + c[3][1]) / 4, n = 'center'), a = [[i, r], [i, r]]; else { var d; var f; var p; var g = l.get('length'); s === 'left' ? (d = (c[3][0] + c[0][0]) / 2, f = (c[3][1] + c[0][1]) / 2, i = (p = d - g) - 5, n = 'right') : s === 'right' ? (d = (c[1][0] + c[2][0]) / 2, f = (c[1][1] + c[2][1]) / 2, i = (p = d + g) + 5, n = 'left') : s === 'rightTop' ? (d = c[1][0], f = c[1][1], i = (p = d + g) + 5, n = 'top') : s === 'rightBottom' ? (d = c[2][0], f = c[2][1], i = (p = d + g) + 5, n = 'bottom') : s === 'leftTop' ? (d = c[0][0], f = c[1][1], i = (p = d - g) - 5, n = 'right') : s === 'leftBottom' ? (d = c[3][0], f = c[2][1], i = (p = d - g) - 5, n = 'right') : (d = (c[1][0] + c[2][0]) / 2, f = (c[1][1] + c[2][1]) / 2, i = (p = d + g) + 5, n = 'left'); a = [[d, f], [p, f]], r = f }u.label = { linePoints: a, x: i, y: r, verticalAlign: 'middle', textAlign: n, inside: h } }) }(n)) }) } }, function (t, e, n) { var i = n(1); n(181), n(371), n(372); var r = n(373); i.registerVisual(r) }, function (t, e, n) { var i = n(0); var r = n(4); t.exports = function (t) { !(function (t) { if (t.parallel) return; var e = !1; i.each(t.series, function (t) { t && t.type === 'parallel' && (e = !0) }), e && (t.parallel = [{}]) }(t)), (function (t) { var e = r.normalizeToArray(t.parallelAxis); i.each(e, function (e) { if (i.isObject(e)) { var n = e.parallelIndex || 0; var a = r.normalizeToArray(t.parallel)[n]; a && a.parallelAxisDefault && i.merge(e, a.parallelAxisDefault, !1) } }) }(t)) } }, function (t, e, n) { var i = n(0); var r = n(15); var a = n(6); var o = n(21); var s = n(365); var l = n(2); var u = n(3); var c = n(50); var h = i.each; var d = Math.min; var f = Math.max; var p = Math.floor; var g = Math.ceil; var v = u.round; var m = Math.PI; function y (t, e, n) { this._axesMap = i.createHashMap(), this._axesLayout = {}, this.dimensions = t.dimensions, this._rect, this._model = t, this._init(t, e, n) } function x (t, e) { return d(f(t, e[0]), e[1]) } function _ (t, e) { var n = e.layoutLength / (e.axisCount - 1); return { position: n * t, axisNameAvailableWidth: n, axisLabelShow: !0 } } function b (t, e) { var n; var i; var r = e.layoutLength; var a = e.axisExpandWidth; var o = e.axisCount; var s = e.axisCollapseWidth; var l = e.winInnerIndices; var u = s; var c = !1; return t < l[0] ? (n = t * s, i = s) : t <= l[1] ? (n = e.axisExpandWindow0Pos + t * a - e.axisExpandWindow[0], u = a, c = !0) : (n = r - (o - 1 - t) * s, i = s), { position: n, axisNameAvailableWidth: u, axisLabelShow: c, nameTruncateMaxWidth: i } }y.prototype = { type: 'parallel', constructor: y, _init: function (t, e, n) { var i = t.dimensions; var r = t.parallelAxisIndex; h(i, function (t, n) { var i = r[n]; var a = e.getComponent('parallelAxis', i); var l = this._axesMap.set(t, new s(t, o.createScaleByModel(a), [0, 0], a.get('type'), i)); var u = l.type === 'category'; l.onBand = u && a.get('boundaryGap'), l.inverse = a.get('inverse'), a.axis = l, l.model = a, l.coordinateSystem = a.coordinateSystem = this }, this) }, update: function (t, e) { this._updateAxesFromSeries(this._model, t) }, containPoint: function (t) { var e = this._makeLayoutInfo(); var n = e.axisBase; var i = e.layoutBase; var r = e.pixelDimIndex; var a = t[1 - r]; var o = t[r]; return a >= n && a <= n + e.axisLength && o >= i && o <= i + e.layoutLength }, getModel: function () { return this._model }, _updateAxesFromSeries: function (t, e) { e.eachSeries(function (n) { if (t.contains(n, e)) { var i = n.getData(); h(this.dimensions, function (t) { var e = this._axesMap.get(t); e.scale.unionExtentFromData(i, i.mapDimension(t)), o.niceScaleExtent(e.scale, e.model) }, this) } }, this) }, resize: function (t, e) { this._rect = a.getLayoutRect(t.getBoxLayoutParams(), { width: e.getWidth(), height: e.getHeight() }), this._layoutAxes() }, getRect: function () { return this._rect }, _makeLayoutInfo: function () { var t; var e = this._model; var n = this._rect; var i = ['x', 'y']; var r = ['width', 'height']; var a = e.get('layout'); var o = a === 'horizontal' ? 0 : 1; var s = n[r[o]]; var l = [0, s]; var u = this.dimensions.length; var c = x(e.get('axisExpandWidth'), l); var h = x(e.get('axisExpandCount') || 0, [0, u]); var d = e.get('axisExpandable') && u > 3 && u > h && h > 1 && c > 0 && s > 0; var f = e.get('axisExpandWindow'); f ? (t = x(f[1] - f[0], l), f[1] = f[0] + t) : (t = x(c * (h - 1), l), (f = [c * (e.get('axisExpandCenter') || p(u / 2)) - t / 2])[1] = f[0] + t); var m = (s - t) / (u - h); m < 3 && (m = 0); var y = [p(v(f[0] / c, 1)) + 1, g(v(f[1] / c, 1)) - 1]; var _ = m / c * f[0]; return { layout: a, pixelDimIndex: o, layoutBase: n[i[o]], layoutLength: s, axisBase: n[i[1 - o]], axisLength: n[r[1 - o]], axisExpandable: d, axisExpandWidth: c, axisCollapseWidth: m, axisExpandWindow: f, axisCount: u, winInnerIndices: y, axisExpandWindow0Pos: _ } }, _layoutAxes: function () { var t = this._rect; var e = this._axesMap; var n = this.dimensions; var i = this._makeLayoutInfo(); var a = i.layout; e.each(function (t) { var e = [0, i.axisLength]; var n = t.inverse ? 1 : 0; t.setExtent(e[n], e[1 - n]) }), h(n, function (e, n) { var o = (i.axisExpandable ? b : _)(n, i); var s = { horizontal: { x: o.position, y: i.axisLength }, vertical: { x: 0, y: o.position } }; var l = { horizontal: m / 2, vertical: 0 }; var u = [s[a].x + t.x, s[a].y + t.y]; var c = l[a]; var h = r.create(); r.rotate(h, h, c), r.translate(h, h, u), this._axesLayout[e] = { position: u, rotation: c, transform: h, axisNameAvailableWidth: o.axisNameAvailableWidth, axisLabelShow: o.axisLabelShow, nameTruncateMaxWidth: o.nameTruncateMaxWidth, tickDirection: 1, labelDirection: 1 } }, this) }, getAxis: function (t) { return this._axesMap.get(t) }, dataToPoint: function (t, e) { return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t), e) }, eachActiveState: function (t, e, n, r) { n == null && (n = 0), r == null && (r = t.count()); var a = this._axesMap; var o = this.dimensions; var s = []; var l = []; i.each(o, function (e) { s.push(t.mapDimension(e)), l.push(a.get(e).model) }); for (var u = this.hasAxisBrushed(), c = n; c < r; c++) { var h; if (u) { h = 'active'; for (var d = t.getValues(s, c), f = 0, p = o.length; f < p; f++) { if (l[f].getActiveState(d[f]) === 'inactive') { h = 'inactive'; break } } } else h = 'normal'; e(h, c) } }, hasAxisBrushed: function () { for (var t = this.dimensions, e = this._axesMap, n = !1, i = 0, r = t.length; i < r; i++)e.get(t[i]).model.getActiveState() !== 'normal' && (n = !0); return n }, axisCoordToPoint: function (t, e) { var n = this._axesLayout[e]; return l.applyTransform([t, 0], n.transform) }, getAxisLayout: function (t) { return i.clone(this._axesLayout[t]) }, getSlidedAxisExpandWindow: function (t) { var e = this._makeLayoutInfo(); var n = e.pixelDimIndex; var i = e.axisExpandWindow.slice(); var r = i[1] - i[0]; var a = [0, e.axisExpandWidth * (e.axisCount - 1)]; if (!this.containPoint(t)) return { behavior: 'none', axisExpandWindow: i }; var o; var s = t[n] - e.layoutBase - e.axisExpandWindow0Pos; var l = 'slide'; var u = e.axisCollapseWidth; var h = this._model.get('axisExpandSlideTriggerArea'); var p = h[0] != null; if (u)p && u && s < r * h[0] ? (l = 'jump', o = s - r * h[2]) : p && u && s > r * (1 - h[0]) ? (l = 'jump', o = s - r * (1 - h[2])) : (o = s - r * h[1]) >= 0 && (o = s - r * (1 - h[1])) <= 0 && (o = 0), (o *= e.axisExpandWidth / u) ? c(o, i, a, 'all') : l = 'none'; else { r = i[1] - i[0]; (i = [f(0, a[1] * s / r - r / 2)])[1] = d(a[1], i[0] + r), i[0] = i[1] - r } return { axisExpandWindow: i, behavior: l } } }; var w = y; t.exports = w }, function (t, e, n) { var i = n(0); var r = n(31); var a = function (t, e, n, i, a) { r.call(this, t, e, n), this.type = i || 'value', this.axisIndex = a }; a.prototype = { constructor: a, model: null, isHorizontal: function () { return this.coordinateSystem.getModel().get('layout') !== 'horizontal' } }, i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { var i = n(0); var r = n(13); n(367); var a = r.extend({ type: 'parallel', dependencies: ['parallelAxis'], coordinateSystem: null, dimensions: null, parallelAxisIndex: null, layoutMode: 'box', defaultOption: { zlevel: 0, z: 0, left: 80, top: 60, right: 80, bottom: 60, layout: 'horizontal', axisExpandable: !1, axisExpandCenter: null, axisExpandCount: 0, axisExpandWidth: 50, axisExpandRate: 17, axisExpandDebounce: 50, axisExpandSlideTriggerArea: [-0.15, 0.05, 0.4], axisExpandTriggerOn: 'click', parallelAxisDefault: null }, init: function () { r.prototype.init.apply(this, arguments), this.mergeOption({}) }, mergeOption: function (t) { var e = this.option; t && i.merge(e, t, !0), this._initDimensions() }, contains: function (t, e) { var n = t.get('parallelIndex'); return n != null && e.getComponent('parallel', n) === this }, setAxisExpand: function (t) { i.each(['axisExpandable', 'axisExpandCenter', 'axisExpandCount', 'axisExpandWidth', 'axisExpandWindow'], function (e) { t.hasOwnProperty(e) && (this.option[e] = t[e]) }, this) }, _initDimensions: function () { var t = this.dimensions = []; var e = this.parallelAxisIndex = []; var n = i.filter(this.dependentModels.parallelAxis, function (t) { return (t.get('parallelIndex') || 0) === this.componentIndex }, this); i.each(n, function (n) { t.push('dim' + n.get('dim')), e.push(n.componentIndex) }) } }); t.exports = a }, function (t, e, n) { var i = n(0); var r = n(13); var a = n(44); var o = n(79); var s = n(3); var l = n(48); var u = r.extend({ type: 'baseParallelAxis', axis: null, activeIntervals: [], getAreaSelectStyle: function () { return a([['fill', 'color'], ['lineWidth', 'borderWidth'], ['stroke', 'borderColor'], ['width', 'width'], ['opacity', 'opacity']])(this.getModel('areaSelectStyle')) }, setActiveIntervals: function (t) { var e = this.activeIntervals = i.clone(t); if (e) for (var n = e.length - 1; n >= 0; n--)s.asc(e[n]) }, getActiveState: function (t) { var e = this.activeIntervals; if (!e.length) return 'normal'; if (t == null || isNaN(t)) return 'inactive'; if (e.length === 1) { var n = e[0]; if (n[0] <= t && t <= n[1]) return 'active' } else for (var i = 0, r = e.length; i < r; i++) if (e[i][0] <= t && t <= e[i][1]) return 'active'; return 'inactive' } }); i.merge(u.prototype, l), o('parallel', u, function (t, e) { return e.type || (e.data ? 'category' : 'value') }, { type: 'value', dim: null, areaSelectStyle: { width: 20, borderWidth: 1, borderColor: 'rgba(160,197,232)', color: 'rgba(160,197,232)', opacity: 0.3 }, realtime: !0, z: 10 }); var c = u; t.exports = c }, function (t, e, n) { n(182), n(369), n(370) }, function (t, e, n) { var i = n(1); i.registerAction({ type: 'axisAreaSelect', event: 'axisAreaSelected' }, function (t, e) { e.eachComponent({ mainType: 'parallelAxis', query: t }, function (e) { e.axis.model.setActiveIntervals(t.intervals) }) }), i.registerAction('parallelAxisExpand', function (t, e) { e.eachComponent({ mainType: 'parallel', query: t }, function (e) { e.setAxisExpand(t) }) }) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(32); var o = n(108); var s = n(183); var l = n(2); var u = ['axisLine', 'axisTickLabel', 'axisName']; var c = i.extendComponentView({ type: 'parallelAxis', init: function (t, e) { c.superApply(this, 'init', arguments), (this._brushController = new o(e.getZr())).on('brush', r.bind(this._onBrush, this)) }, render: function (t, e, n, i) { if (!(function (t, e, n) { return n && n.type === 'axisAreaSelect' && e.findComponents({ mainType: 'parallelAxis', query: n })[0] === t }(t, e, i))) { this.axisModel = t, this.api = n, this.group.removeAll(); var o = this._axisGroup; if (this._axisGroup = new l.Group(), this.group.add(this._axisGroup), t.get('show')) { var s = (function (t, e) { return e.getComponent('parallel', t.get('parallelIndex')) }(t, e)); var c = s.coordinateSystem; var h = t.getAreaSelectStyle(); var d = h.width; var f = t.axis.dim; var p = c.getAxisLayout(f); var g = r.extend({ strokeContainThreshold: d }, p); var v = new a(t, g); r.each(u, v.add, v), this._axisGroup.add(v.getGroup()), this._refreshBrushController(g, h, t, s, d, n); var m = i && !1 === i.animation ? null : t; l.groupTransition(o, this._axisGroup, m) } } }, _refreshBrushController: function (t, e, n, i, a, o) { var u = n.axis.getExtent(); var c = u[1] - u[0]; var h = Math.min(30, 0.1 * Math.abs(c)); var d = l.BoundingRect.create({ x: u[0], y: -a / 2, width: c, height: a }); d.x -= h, d.width += 2 * h, this._brushController.mount({ enableGlobalPan: !0, rotation: t.rotation, position: t.position }).setPanels([{ panelId: 'pl', clipPath: s.makeRectPanelClipPath(d), isTargetByCursor: s.makeRectIsTargetByCursor(d, o, i), getLinearBrushOtherExtent: s.makeLinearBrushOtherExtent(d, 0) }]).enableBrush({ brushType: 'lineX', brushStyle: e, removeOnClick: !0 }).updateCovers(function (t) { var e = t.axis; return r.map(t.activeIntervals, function (t) { return { brushType: 'lineX', panelId: 'pl', range: [e.dataToCoord(t[0], !0), e.dataToCoord(t[1], !0)] } }) }(n)) }, _onBrush: function (t, e) { var n = this.axisModel; var i = n.axis; var a = r.map(t, function (t) { return [i.coordToData(t.range[0], !0), i.coordToData(t.range[1], !0)] }); (!n.option.realtime === e.isEnd || e.removeOnClick) && this.api.dispatchAction({ type: 'axisAreaSelect', parallelAxisId: n.id, intervals: a }) }, dispose: function () { this._brushController.dispose() } }); var h = c; t.exports = h }, function (t, e, n) { var i = n(0); var r = i.each; var a = i.createHashMap; var o = n(14); var s = n(27); var l = o.extend({ type: 'series.parallel', dependencies: ['parallel'], visualColorAccessPath: 'lineStyle.color', getInitialData: function (t, e) { var n = this.getSource(); return (function (t, e) { if (t.encodeDefine) return; var n = e.ecModel.getComponent('parallel', e.get('parallelIndex')); if (!n) return; var i = t.encodeDefine = a(); r(n.dimensions, function (t) { var e = +t.replace('dim', ''); i.set(t, e) }) }(n, this)), s(n, this) }, getRawIndicesByActiveState: function (t) { var e = this.coordinateSystem; var n = this.getData(); var i = []; return e.eachActiveState(n, function (e, r) { t === e && i.push(n.getRawIndex(r)) }), i }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'parallel', parallelIndex: 0, label: { show: !1 }, inactiveOpacity: 0.05, activeOpacity: 1, lineStyle: { width: 1, opacity: 0.45, type: 'solid' }, emphasis: { label: { show: !1 } }, progressive: 500, smooth: !1, animationEasing: 'linear' } }); t.exports = l }, function (t, e, n) { var i = n(2); var r = n(24); var a = 0.3; function o (t, e, n, i) { for (var r, a = [], o = 0; o < n.length; o++) { var s = n[o]; var l = t.get(t.mapDimension(s), e); r = l, (i.getAxis(s).type === 'category' ? r == null : r == null || isNaN(r)) || a.push(i.dataToPoint(l, s)) } return a } function s (t, e, n, r, a) { var s = o(t, n, r, a); var l = new i.Polyline({ shape: { points: s }, silent: !0, z2: 10 }); return e.add(l), t.setItemGraphicEl(n, l), l } function l (t) { var e = t.get('smooth', !0); return !0 === e && (e = a), { lineStyle: t.getModel('lineStyle').getLineStyle(), smooth: e != null ? e : a } } function u (t, e, n, i) { var r = i.lineStyle; e.hasItemOption && (r = e.getItemModel(n).getModel('lineStyle').getLineStyle()); t.useStyle(r); var a = t.style; a.fill = null, a.stroke = e.getItemVisual(n, 'color'), a.opacity = e.getItemVisual(n, 'opacity'), i.smooth && (t.shape.smooth = i.smooth) } var c = r.extend({ type: 'parallel', init: function () { this._dataGroup = new i.Group(), this.group.add(this._dataGroup), this._data, this._initialized }, render: function (t, e, n, r) { var a = this._dataGroup; var c = t.getData(); var h = this._data; var d = t.coordinateSystem; var f = d.dimensions; var p = l(t); if (c.diff(h).add(function (t) { u(s(c, a, t, f, d), c, t, p) }).update(function (e, n) { var a = h.getItemGraphicEl(n); var s = o(c, e, f, d); c.setItemGraphicEl(e, a); var l = r && !1 === r.animation ? null : t; i.updateProps(a, { shape: { points: s } }, l, e), u(a, c, e, p) }).remove(function (t) { var e = h.getItemGraphicEl(t); a.remove(e) }).execute(), !this._initialized) { this._initialized = !0; var g = (function (t, e, n) { var r = t.model; var a = t.getRect(); var o = new i.Rect({ shape: { x: a.x, y: a.y, width: a.width, height: a.height } }); var s = r.get('layout') === 'horizontal' ? 'width' : 'height'; return o.setShape(s, 0), i.initProps(o, { shape: { width: a.width, height: a.height } }, e, n), o }(d, t, function () { setTimeout(function () { a.removeClipPath() }) })); a.setClipPath(g) } this._data = c }, incrementalPrepareRender: function (t, e, n) { this._initialized = !0, this._data = null, this._dataGroup.removeAll() }, incrementalRender: function (t, e, n) { for (var i = e.getData(), r = e.coordinateSystem, a = r.dimensions, o = l(e), c = t.start; c < t.end; c++) { var h = s(i, this._dataGroup, c, a, r); h.incremental = !0, u(h, i, c, o) } }, dispose: function () {}, remove: function () { this._dataGroup && this._dataGroup.removeAll(), this._data = null } }); t.exports = c }, function (t, e) { var n = ['lineStyle', 'normal', 'opacity']; var i = { seriesType: 'parallel', reset: function (t, e, i) { var r = t.getModel('itemStyle'); var a = t.getModel('lineStyle'); var o = e.get('color'); var s = a.get('color') || r.get('color') || o[t.seriesIndex % o.length]; var l = t.get('inactiveOpacity'); var u = t.get('activeOpacity'); var c = t.getModel('lineStyle').getLineStyle(); var h = t.coordinateSystem; var d = t.getData(); var f = { normal: c.opacity, active: u, inactive: l }; return d.setVisual('color', s), { progress: function (t, e) { h.eachActiveState(e, function (t, i) { var r = f[t]; if (t === 'normal' && e.hasItemOption) { var a = e.getItemModel(i).get(n, !0); a != null && (r = a) }e.setItemVisual(i, 'opacity', r) }, t.start, t.end) } } } }; t.exports = i }, function (t, e, n) { var i = n(1); n(375), n(376), n(377); var r = n(378); var a = n(379); i.registerLayout(r), i.registerVisual(a) }, function (t, e, n) { var i = n(14); var r = n(177); var a = n(9).encodeHTML; var o = n(12); var s = (n(5).__DEV__, i.extend({ type: 'series.sankey', layoutInfo: null, levelModels: null, getInitialData: function (t, e) { for (var n = t.edges || t.links, i = t.data || t.nodes, a = t.levels, s = this.levelModels = {}, l = 0; l < a.length; l++)a[l].depth != null && a[l].depth >= 0 && (s[a[l].depth] = new o(a[l], this, e)); if (i && n) return r(i, n, this, !0, function (t, e) { t.wrapMethod('getItemModel', function (t, e) { return t.customizeGetParent(function (t) { var n = this.parentModel; var i = n.getData().getItemLayout(e).depth; return n.levelModels[i] || this.parentModel }), t }), e.wrapMethod('getItemModel', function (t, e) { return t.customizeGetParent(function (t) { var n = this.parentModel; var i = n.getGraph().getEdgeByIndex(e).node1.getLayout().depth; return n.levelModels[i] || this.parentModel }), t }) }).data }, setNodePosition: function (t, e) { var n = this.option.data[t]; n.localX = e[0], n.localY = e[1] }, getGraph: function () { return this.getData().graph }, getEdgeData: function () { return this.getGraph().edgeData }, formatTooltip: function (t, e, n) { if (n === 'edge') { var i = this.getDataParams(t, n); var r = i.data; var o = r.source + ' -- ' + r.target; return i.value && (o += ' : ' + i.value), a(o) } if (n === 'node') { var l = this.getGraph().getNodeByIndex(t).getLayout().value; var u = this.getDataParams(t, n).data.name; if (l)o = u + ' : ' + l; return a(o) } return s.superCall(this, 'formatTooltip', t, e) }, optionUpdated: function () { var t = this.option; !0 === t.focusNodeAdjacency && (t.focusNodeAdjacency = 'allEdges') }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'view', layout: null, left: '5%', top: '5%', right: '20%', bottom: '5%', orient: 'horizontal', nodeWidth: 20, nodeGap: 8, draggable: !0, focusNodeAdjacency: !1, layoutIterations: 32, label: { show: !0, position: 'right', color: '#000', fontSize: 12 }, levels: [], nodeAlign: 'justify', itemStyle: { borderWidth: 1, borderColor: '#333' }, lineStyle: { color: '#314656', opacity: 0.2, curveness: 0.5 }, emphasis: { label: { show: !0 }, lineStyle: { opacity: 0.6 } }, animationEasing: 'linear', animationDuration: 1e3 } })); var l = s; t.exports = l }, function (t, e, n) { var i = n(2); var r = n(1); var a = n(0); var o = ['itemStyle', 'opacity']; var s = ['lineStyle', 'opacity']; function l (t, e) { return t.getVisual('opacity') || t.getModel().get(e) } function u (t, e, n) { var i = t.getGraphicEl(); var r = l(t, e); n != null && (r == null && (r = 1), r *= n), i.downplay && i.downplay(), i.traverse(function (t) { t.type !== 'group' && t.setStyle('opacity', r) }) } function c (t, e) { var n = l(t, e); var i = t.getGraphicEl(); i.highlight && i.highlight(), i.traverse(function (t) { t.type !== 'group' && t.setStyle('opacity', n) }) } var h = i.extendShape({ shape: { x1: 0, y1: 0, x2: 0, y2: 0, cpx1: 0, cpy1: 0, cpx2: 0, cpy2: 0, extent: 0, orient: '' }, buildPath: function (t, e) { var n = e.extent; t.moveTo(e.x1, e.y1), t.bezierCurveTo(e.cpx1, e.cpy1, e.cpx2, e.cpy2, e.x2, e.y2), e.orient === 'vertical' ? (t.lineTo(e.x2 + n, e.y2), t.bezierCurveTo(e.cpx2 + n, e.cpy2, e.cpx1 + n, e.cpy1, e.x1 + n, e.y1)) : (t.lineTo(e.x2, e.y2 + n), t.bezierCurveTo(e.cpx2, e.cpy2 + n, e.cpx1, e.cpy1 + n, e.x1, e.y1 + n)), t.closePath() } }); var d = r.extendChartView({ type: 'sankey', _model: null, _focusAdjacencyDisabled: !1, render: function (t, e, n) { var r = this; var a = t.getGraph(); var o = this.group; var s = t.layoutInfo; var l = s.width; var u = s.height; var c = t.getData(); var d = t.getData('edge'); var f = t.get('orient'); this._model = t, o.removeAll(), o.attr('position', [s.x, s.y]), a.eachEdge(function (e) { var n = new h(); n.dataIndex = e.dataIndex, n.seriesIndex = t.seriesIndex, n.dataType = 'edge'; var r; var a; var s; var c; var p; var g; var v; var m; var y = e.getModel('lineStyle'); var x = y.get('curveness'); var _ = e.node1.getLayout(); var b = e.node1.getModel(); var w = b.get('localX'); var S = b.get('localY'); var M = e.node2.getLayout(); var I = e.node2.getModel(); var A = I.get('localX'); var T = I.get('localY'); var C = e.getLayout(); switch (n.shape.extent = Math.max(1, C.dy), n.shape.orient = f, f === 'vertical' ? (r = (w != null ? w * l : _.x) + C.sy, a = (S != null ? S * u : _.y) + _.dy, s = (A != null ? A * l : M.x) + C.ty, p = r, g = a * (1 - x) + (c = T != null ? T * u : M.y) * x, v = s, m = a * x + c * (1 - x)) : (r = (w != null ? w * l : _.x) + _.dx, a = (S != null ? S * u : _.y) + C.sy, p = r * (1 - x) + (s = A != null ? A * l : M.x) * x, g = a, v = r * x + s * (1 - x), m = c = (T != null ? T * u : M.y) + C.ty), n.setShape({ x1: r, y1: a, x2: s, y2: c, cpx1: p, cpy1: g, cpx2: v, cpy2: m }), n.setStyle(y.getItemStyle()), n.style.fill) { case 'source':n.style.fill = e.node1.getVisual('color'); break; case 'target':n.style.fill = e.node2.getVisual('color') }i.setHoverStyle(n, e.getModel('emphasis.lineStyle').getItemStyle()), o.add(n), d.setItemGraphicEl(e.dataIndex, n) }), a.eachNode(function (e) { var n = e.getLayout(); var r = e.getModel(); var a = r.get('localX'); var s = r.get('localY'); var h = r.getModel('label'); var d = r.getModel('emphasis.label'); var f = new i.Rect({ shape: { x: a != null ? a * l : n.x, y: s != null ? s * u : n.y, width: n.dx, height: n.dy }, style: r.getModel('itemStyle').getItemStyle() }); var p = e.getModel('emphasis.itemStyle').getItemStyle(); i.setLabelStyle(f.style, p, h, d, { labelFetcher: t, labelDataIndex: e.dataIndex, defaultText: e.id, isRectText: !0 }), f.setStyle('fill', e.getVisual('color')), i.setHoverStyle(f, p), o.add(f), c.setItemGraphicEl(e.dataIndex, f), f.dataType = 'node' }), c.eachItemGraphicEl(function (e, i) { var a = c.getItemModel(i); a.get('draggable') && (e.drift = function (e, a) { r._focusAdjacencyDisabled = !0, this.shape.x += e, this.shape.y += a, this.dirty(), n.dispatchAction({ type: 'dragNode', seriesId: t.id, dataIndex: c.getRawIndex(i), localX: this.shape.x / l, localY: this.shape.y / u }) }, e.ondragend = function () { r._focusAdjacencyDisabled = !1 }, e.draggable = !0, e.cursor = 'move'), a.get('focusNodeAdjacency') && (e.off('mouseover').on('mouseover', function () { r._focusAdjacencyDisabled || n.dispatchAction({ type: 'focusNodeAdjacency', seriesId: t.id, dataIndex: e.dataIndex }) }), e.off('mouseout').on('mouseout', function () { r._focusAdjacencyDisabled || n.dispatchAction({ type: 'unfocusNodeAdjacency', seriesId: t.id }) })) }), d.eachItemGraphicEl(function (e, i) { d.getItemModel(i).get('focusNodeAdjacency') && (e.off('mouseover').on('mouseover', function () { r._focusAdjacencyDisabled || n.dispatchAction({ type: 'focusNodeAdjacency', seriesId: t.id, edgeDataIndex: e.dataIndex }) }), e.off('mouseout').on('mouseout', function () { r._focusAdjacencyDisabled || n.dispatchAction({ type: 'unfocusNodeAdjacency', seriesId: t.id }) })) }), !this._data && t.get('animation') && o.setClipPath(function (t, e, n) { var r = new i.Rect({ shape: { x: t.x - 10, y: t.y - 10, width: 0, height: t.height + 20 } }); return i.initProps(r, { shape: { width: t.width + 20, height: t.height + 20 } }, e, n), r }(o.getBoundingRect(), t, function () { o.removeClipPath() })), this._data = t.getData() }, dispose: function () {}, focusNodeAdjacency: function (t, e, n, i) { var r = this._model.getData(); var l = r.graph; var h = i.dataIndex; var d = r.getItemModel(h); var f = i.edgeDataIndex; if (h != null || f != null) { var p = l.getNodeByIndex(h); var g = l.getEdgeByIndex(f); if (l.eachNode(function (t) { u(t, o, 0.1) }), l.eachEdge(function (t) { u(t, s, 0.1) }), p) { c(p, o); var v = d.get('focusNodeAdjacency'); v === 'outEdges' ? a.each(p.outEdges, function (t) { t.dataIndex < 0 || (c(t, s), c(t.node2, o)) }) : v === 'inEdges' ? a.each(p.inEdges, function (t) { t.dataIndex < 0 || (c(t, s), c(t.node1, o)) }) : v === 'allEdges' && a.each(p.edges, function (t) { t.dataIndex < 0 || (c(t, s), c(t.node1, o), c(t.node2, o)) }) }g && (c(g, s), c(g.node1, o), c(g.node2, o)) } }, unfocusNodeAdjacency: function (t, e, n, i) { var r = this._model.getGraph(); r.eachNode(function (t) { u(t, o) }), r.eachEdge(function (t) { u(t, s) }) } }); t.exports = d }, function (t, e, n) { var i = n(1); n(178), i.registerAction({ type: 'dragNode', event: 'dragnode', update: 'update' }, function (t, e) { e.eachComponent({ mainType: 'series', subType: 'sankey', query: t }, function (e) { e.setNodePosition(t.dataIndex, [t.localX, t.localY]) }) }) }, function (t, e, n) { var i = n(6); var r = n(0); var a = n(4).groupData; function o (t) { var e = t.hostGraph.data.getRawDataItem(t.dataIndex); return e.depth != null && e.depth >= 0 } function s (t, e, n, i, a) { var o = a === 'vertical' ? 'x' : 'y'; r.each(t, function (t) { var r, s, l; t.sort(function (t, e) { return t.getLayout()[o] - e.getLayout()[o] }); for (var u = 0, c = t.length, h = a === 'vertical' ? 'dx' : 'dy', d = 0; d < c; d++)(l = u - (s = t[d]).getLayout()[o]) > 0 && (r = s.getLayout()[o] + l, a === 'vertical' ? s.setLayout({ x: r }, !0) : s.setLayout({ y: r }, !0)), u = s.getLayout()[o] + s.getLayout()[h] + e; if ((l = u - e - (a === 'vertical' ? i : n)) > 0) for (r = s.getLayout()[o] - l, a === 'vertical' ? s.setLayout({ x: r }, !0) : s.setLayout({ y: r }, !0), u = r, d = c - 2; d >= 0; --d)(l = (s = t[d]).getLayout()[o] + s.getLayout()[h] + e - u) > 0 && (r = s.getLayout()[o] - l, a === 'vertical' ? s.setLayout({ x: r }, !0) : s.setLayout({ y: r }, !0)), u = s.getLayout()[o] }) } function l (t, e, n) { r.each(t.slice().reverse(), function (t) { r.each(t, function (t) { if (t.outEdges.length) { var i = f(t.outEdges, u, n) / f(t.outEdges, d, n); if (n === 'vertical') { var r = t.getLayout().x + (i - h(t, n)) * e; t.setLayout({ x: r }, !0) } else { var a = t.getLayout().y + (i - h(t, n)) * e; t.setLayout({ y: a }, !0) } } }) }) } function u (t, e) { return h(t.node2, e) * t.getValue() } function c (t, e) { return h(t.node1, e) * t.getValue() } function h (t, e) { return e === 'vertical' ? t.getLayout().x + t.getLayout().dx / 2 : t.getLayout().y + t.getLayout().dy / 2 } function d (t) { return t.getValue() } function f (t, e, n) { for (var i = 0, r = t.length, a = -1; ++a < r;) { var o = +e.call(t, t[a], n); isNaN(o) || (i += o) } return i } function p (t, e, n) { r.each(t, function (t) { r.each(t, function (t) { if (t.inEdges.length) { var i = f(t.inEdges, c, n) / f(t.inEdges, d, n); if (n === 'vertical') { var r = t.getLayout().x + (i - h(t, n)) * e; t.setLayout({ x: r }, !0) } else { var a = t.getLayout().y + (i - h(t, n)) * e; t.setLayout({ y: a }, !0) } } }) }) }t.exports = function (t, e, n) { t.eachSeriesByType('sankey', function (t) { var n = t.get('nodeWidth'); var u = t.get('nodeGap'); var c = (function (t, e) { return i.getLayoutRect(t.getBoxLayoutParams(), { width: e.getWidth(), height: e.getHeight() }) }(t, e)); t.layoutInfo = c; var h = c.width; var g = c.height; var v = t.getGraph(); var m = v.nodes; var y = v.edges; !(function (t) { r.each(t, function (t) { var e = f(t.outEdges, d); var n = f(t.inEdges, d); var i = Math.max(e, n); t.setLayout({ value: i }, !0) }) }(m)), (function (t, e, n, i, u, c, h, d, f) { (function (t, e, n, i, a, s, l) { for (var u = [], c = [], h = [], d = [], f = 0, p = 0; p < e.length; p++)u[p] = 1; for (p = 0; p < t.length; p++)c[p] = t[p].inEdges.length, c[p] === 0 && h.push(t[p]); var g = -1; for (;h.length;) { for (var v = 0; v < h.length; v++) { var m = h[v]; var y = m.hostGraph.data.getRawDataItem(m.dataIndex); var x = y.depth != null && y.depth >= 0; x && y.depth > g && (g = y.depth), m.setLayout({ depth: x ? y.depth : f }, !0), s === 'vertical' ? m.setLayout({ dy: n }, !0) : m.setLayout({ dx: n }, !0); for (var _ = 0; _ < m.outEdges.length; _++) { var b = m.outEdges[_]; var w = e.indexOf(b); u[w] = 0; var S = b.node2; var M = t.indexOf(S); --c[M] == 0 && d.indexOf(S) < 0 && d.push(S) } }++f, h = d, d = [] } for (p = 0; p < u.length; p++) if (u[p] === 1) throw new Error('Sankey is a DAG, the original data has cycle!'); var I = g > f - 1 ? g : f - 1; l && l !== 'left' && (function (t, e, n, i) { if (e === 'right') { for (var a = [], s = t, l = 0; s.length;) { for (var u = 0; u < s.length; u++) { var c = s[u]; c.setLayout({ skNodeHeight: l }, !0); for (var h = 0; h < c.inEdges.length; h++) { var d = c.inEdges[h]; a.indexOf(d.node1) < 0 && a.push(d.node1) } }s = a, a = [], ++l }r.each(t, function (t) { o(t) || t.setLayout({ depth: Math.max(0, i - t.getLayout().skNodeHeight) }, !0) }) } else e === 'justify' && (function (t, e) { r.each(t, function (t) { o(t) || t.outEdges.length || t.setLayout({ depth: e }, !0) }) }(t, i)) }(t, l, 0, I)); !(function (t, e, n) { r.each(t, function (t) { var i = t.getLayout().depth * e; n === 'vertical' ? t.setLayout({ y: i }, !0) : t.setLayout({ x: i }, !0) }) }(t, s === 'vertical' ? (a - n) / I : (i - n) / I, s)) })(t, e, n, u, c, d, f), (function (t, e, n, i, o, u, c) { var h = (function (t, e) { var n = []; var i = e === 'vertical' ? 'y' : 'x'; var o = a(t, function (t) { return t.getLayout()[i] }); return o.keys.sort(function (t, e) { return t - e }), r.each(o.keys, function (t) { n.push(o.buckets.get(t)) }), n }(t, c)); (function (t, e, n, i, a, o) { var s = 1 / 0; r.each(t, function (t) { var e = t.length; var l = 0; r.each(t, function (t) { l += t.getLayout().value }); var u = o === 'vertical' ? (i - (e - 1) * a) / l : (n - (e - 1) * a) / l; u < s && (s = u) }), r.each(t, function (t) { r.each(t, function (t, e) { var n = t.getLayout().value * s; o === 'vertical' ? (t.setLayout({ x: e }, !0), t.setLayout({ dx: n }, !0)) : (t.setLayout({ y: e }, !0), t.setLayout({ dy: n }, !0)) }) }), r.each(e, function (t) { var e = +t.getValue() * s; t.setLayout({ dy: e }, !0) }) })(h, e, n, i, o, c), s(h, o, n, i, c); for (var d = 1; u > 0; u--)l(h, d *= 0.99, c), s(h, o, n, i, c), p(h, d, c), s(h, o, n, i, c) }(t, e, c, u, i, h, d)), (function (t, e) { var n = e === 'vertical' ? 'x' : 'y'; r.each(t, function (t) { t.outEdges.sort(function (t, e) { return t.node2.getLayout()[n] - e.node2.getLayout()[n] }), t.inEdges.sort(function (t, e) { return t.node1.getLayout()[n] - e.node1.getLayout()[n] }) }), r.each(t, function (t) { var e = 0; var n = 0; r.each(t.outEdges, function (t) { t.setLayout({ sy: e }, !0), e += t.getLayout().dy }), r.each(t.inEdges, function (t) { t.setLayout({ ty: n }, !0), n += t.getLayout().dy }) }) }(t, d)) }(m, y, n, u, h, g, r.filter(m, function (t) { return t.getLayout().value === 0 }).length !== 0 ? 0 : t.get('layoutIterations'), t.get('orient'), t.get('nodeAlign'))) }) } }, function (t, e, n) { var i = n(41); var r = n(0); t.exports = function (t, e) { t.eachSeriesByType('sankey', function (t) { var e = t.getGraph().nodes; if (e.length) { var n = 1 / 0; var a = -1 / 0; r.each(e, function (t) { var e = t.getLayout().value; e < n && (n = e), e > a && (a = e) }), r.each(e, function (e) { var r = new i({ type: 'color', mappingMethod: 'linear', dataExtent: [n, a], visual: t.get('color') }).mapValueToVisual(e.getLayout().value); var o = e.getModel().get('itemStyle.color'); o != null ? e.setVisual('color', o) : e.setVisual('color', r) }) } }) } }, function (t, e, n) { var i = n(1); n(381), n(382); var r = n(383); var a = n(384); i.registerVisual(r), i.registerLayout(a) }, function (t, e, n) { var i = n(0); var r = n(14); var a = n(184).seriesModelMixin; var o = r.extend({ type: 'series.boxplot', dependencies: ['xAxis', 'yAxis', 'grid'], defaultValueDimensions: [{ name: 'min', defaultTooltip: !0 }, { name: 'Q1', defaultTooltip: !0 }, { name: 'median', defaultTooltip: !0 }, { name: 'Q3', defaultTooltip: !0 }, { name: 'max', defaultTooltip: !0 }], dimensions: null, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'cartesian2d', legendHoverLink: !0, hoverAnimation: !0, layout: null, boxWidth: [7, 50], itemStyle: { color: '#fff', borderWidth: 1 }, emphasis: { itemStyle: { borderWidth: 2, shadowBlur: 5, shadowOffsetX: 2, shadowOffsetY: 2, shadowColor: 'rgba(0,0,0,0.4)' } }, animationEasing: 'elasticOut', animationDuration: 800 } }); i.mixin(o, a, !0); var s = o; t.exports = s }, function (t, e, n) { var i = n(0); var r = n(24); var a = n(2); var o = n(10); var s = ['itemStyle']; var l = ['emphasis', 'itemStyle']; var u = r.extend({ type: 'boxplot', render: function (t, e, n) { var i = t.getData(); var r = this.group; var a = this._data; this._data || r.removeAll(); var o = t.get('layout') === 'horizontal' ? 1 : 0; i.diff(a).add(function (t) { if (i.hasValue(t)) { var e = h(i.getItemLayout(t), i, t, o, !0); i.setItemGraphicEl(t, e), r.add(e) } }).update(function (t, e) { var n = a.getItemGraphicEl(e); if (i.hasValue(t)) { var s = i.getItemLayout(t); n ? d(s, n, i, t) : n = h(s, i, t, o), r.add(n), i.setItemGraphicEl(t, n) } else r.remove(n) }).remove(function (t) { var e = a.getItemGraphicEl(t); e && r.remove(e) }).execute(), this._data = i }, remove: function (t) { var e = this.group; var n = this._data; this._data = null, n && n.eachItemGraphicEl(function (t) { t && e.remove(t) }) }, dispose: i.noop }); var c = o.extend({ type: 'boxplotBoxPath', shape: {}, buildPath: function (t, e) { var n = e.points; var i = 0; for (t.moveTo(n[i][0], n[i][1]), i++; i < 4; i++)t.lineTo(n[i][0], n[i][1]); for (t.closePath(); i < n.length; i++)t.moveTo(n[i][0], n[i][1]), i++, t.lineTo(n[i][0], n[i][1]) } }); function h (t, e, n, i, r) { var a = t.ends; var o = new c({ shape: { points: r ? f(a, i, t) : a } }); return d(t, o, e, n, r), o } function d (t, e, n, i, r) { var o = n.hostModel; (0, a[r ? 'initProps' : 'updateProps'])(e, { shape: { points: t.ends } }, o, i); var u = n.getItemModel(i); var c = u.getModel(s); var h = n.getItemVisual(i, 'color'); var d = c.getItemStyle(['borderColor']); d.stroke = h, d.strokeNoScale = !0, e.useStyle(d), e.z2 = 100; var f = u.getModel(l).getItemStyle(); a.setHoverStyle(e, f) } function f (t, e, n) { return i.map(t, function (t) { return (t = t.slice())[e] = n.initBaseline, t }) } var p = u; t.exports = p }, function (t, e) { var n = ['itemStyle', 'borderColor']; t.exports = function (t, e) { var i = t.get('color'); t.eachRawSeriesByType('boxplot', function (e) { var r = i[e.seriesIndex % i.length]; var a = e.getData(); a.setVisual({ legendSymbol: 'roundRect', color: e.get(n) || r }), t.isSeriesFiltered(e) || a.each(function (t) { var e = a.getItemModel(t); a.setItemVisual(t, { color: e.get(n, !0) }) }) }) } }, function (t, e, n) { var i = n(0); var r = n(3).parsePercent; var a = i.each; t.exports = function (t) { var e = (function (t) { var e = []; var n = []; return t.eachSeriesByType('boxplot', function (t) { var r = t.getBaseAxis(); var a = i.indexOf(n, r); a < 0 && (a = n.length, n[a] = r, e[a] = { axis: r, seriesModels: [] }), e[a].seriesModels.push(t) }), e }(t)); a(e, function (t) { var e = t.seriesModels; e.length && (!(function (t) { var e; var n; var o = t.axis; var s = t.seriesModels; var l = s.length; var u = t.boxWidthList = []; var c = t.boxOffsetList = []; var h = []; if (o.type === 'category')n = o.getBandWidth(); else { var d = 0; a(s, function (t) { d = Math.max(d, t.getData().count()) }), e = o.getExtent(), Math.abs(e[1] - e[0]) }a(s, function (t) { var e = t.get('boxWidth'); i.isArray(e) || (e = [e, e]), h.push([r(e[0], n) || 0, r(e[1], n) || 0]) }); var f = 0.8 * n - 2; var p = f / l * 0.3; var g = (f - p * (l - 1)) / l; var v = g / 2 - f / 2; a(s, function (t, e) { c.push(v), v += p + g, u.push(Math.min(Math.max(g, h[e][0]), h[e][1])) }) }(t)), a(e, function (e, n) { !(function (t, e, n) { var i = t.coordinateSystem; var r = t.getData(); var a = n / 2; var o = t.get('layout') === 'horizontal' ? 0 : 1; var s = 1 - o; var l = ['x', 'y']; var u = r.mapDimension(l[o]); var c = r.mapDimension(l[s], !0); if (u == null || c.length < 5) return; for (var h = 0; h < r.count(); h++) { var d = r.get(u, h); var f = x(d, c[2], h); var p = x(d, c[0], h); var g = x(d, c[1], h); var v = x(d, c[3], h); var m = x(d, c[4], h); var y = []; _(y, g, 0), _(y, v, 1), y.push(p, g, m, v), b(y, p), b(y, m), b(y, f), r.setItemLayout(h, { initBaseline: f[s], ends: y }) } function x (t, n, a) { var l; var u = r.get(n, a); var c = []; return c[o] = t, c[s] = u, isNaN(t) || isNaN(u) ? l = [NaN, NaN] : (l = i.dataToPoint(c))[o] += e, l } function _ (t, e, n) { var i = e.slice(); var r = e.slice(); i[o] += a, r[o] -= a, n ? t.push(i, r) : t.push(r, i) } function b (t, e) { var n = e.slice(); var i = e.slice(); n[o] -= a, i[o] += a, t.push(n, i) } }(e, t.boxOffsetList[n], t.boxWidthList[n])) })) }) } }, function (t, e, n) { var i = n(1); n(386), n(387); var r = n(388); var a = n(389); var o = n(390); i.registerPreprocessor(r), i.registerVisual(a), i.registerLayout(o) }, function (t, e, n) { var i = n(0); var r = n(14); var a = n(184).seriesModelMixin; var o = r.extend({ type: 'series.candlestick', dependencies: ['xAxis', 'yAxis', 'grid'], defaultValueDimensions: [{ name: 'open', defaultTooltip: !0 }, { name: 'close', defaultTooltip: !0 }, { name: 'lowest', defaultTooltip: !0 }, { name: 'highest', defaultTooltip: !0 }], dimensions: null, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'cartesian2d', legendHoverLink: !0, hoverAnimation: !0, layout: null, clip: !0, itemStyle: { color: '#c23531', color0: '#314656', borderWidth: 1, borderColor: '#c23531', borderColor0: '#314656' }, emphasis: { itemStyle: { borderWidth: 2 } }, barMaxWidth: null, barMinWidth: null, barWidth: null, large: !0, largeThreshold: 600, progressive: 3e3, progressiveThreshold: 1e4, progressiveChunkMode: 'mod', animationUpdate: !1, animationEasing: 'linear', animationDuration: 300 }, getShadowDim: function () { return 'open' }, brushSelector: function (t, e, n) { var i = e.getItemLayout(t); return i && n.rect(i.brushRect) } }); i.mixin(o, a, !0); var s = o; t.exports = s }, function (t, e, n) { var i = n(0); var r = n(24); var a = n(2); var o = n(10); var s = n(60).createClipPath; var l = ['itemStyle']; var u = ['emphasis', 'itemStyle']; var c = ['color', 'color0', 'borderColor', 'borderColor0']; var h = r.extend({ type: 'candlestick', render: function (t, e, n) { this.group.removeClipPath(), this._updateDrawMode(t), this._isLargeDraw ? this._renderLarge(t) : this._renderNormal(t) }, incrementalPrepareRender: function (t, e, n) { this._clear(), this._updateDrawMode(t) }, incrementalRender: function (t, e, n, i) { this._isLargeDraw ? this._incrementalRenderLarge(t, e) : this._incrementalRenderNormal(t, e) }, _updateDrawMode: function (t) { var e = t.pipelineContext.large; (this._isLargeDraw == null || e ^ this._isLargeDraw) && (this._isLargeDraw = e, this._clear()) }, _renderNormal: function (t) { var e = t.getData(); var n = this._data; var i = this.group; var r = e.getLayout('isSimpleBox'); var o = t.get('clip', !0); var s = t.coordinateSystem; var l = s.getArea && s.getArea(); this._data || i.removeAll(), e.diff(n).add(function (n) { if (e.hasValue(n)) { var s; var u = e.getItemLayout(n); if (o && p(l, u)) return; s = f(u, n, !0), a.initProps(s, { shape: { points: u.ends } }, t, n), g(s, e, n, r), i.add(s), e.setItemGraphicEl(n, s) } }).update(function (s, u) { var c = n.getItemGraphicEl(u); if (e.hasValue(s)) { var h = e.getItemLayout(s); o && p(l, h) ? i.remove(c) : (c ? a.updateProps(c, { shape: { points: h.ends } }, t, s) : c = f(h, s), g(c, e, s, r), i.add(c), e.setItemGraphicEl(s, c)) } else i.remove(c) }).remove(function (t) { var e = n.getItemGraphicEl(t); e && i.remove(e) }).execute(), this._data = e }, _renderLarge: function (t) { this._clear(), y(t, this.group); var e = t.get('clip', !0) ? s(t.coordinateSystem, !1, t) : null; e ? this.group.setClipPath(e) : this.group.removeClipPath() }, _incrementalRenderNormal: function (t, e) { for (var n, i = e.getData(), r = i.getLayout('isSimpleBox'); (n = t.next()) != null;) { var a; g(a = f(i.getItemLayout(n), n), i, n, r), a.incremental = !0, this.group.add(a) } }, _incrementalRenderLarge: function (t, e) { y(e, this.group, !0) }, remove: function (t) { this._clear() }, _clear: function () { this.group.removeAll(), this._data = null }, dispose: i.noop }); var d = o.extend({ type: 'normalCandlestickBox', shape: {}, buildPath: function (t, e) { var n = e.points; this.__simpleBox ? (t.moveTo(n[4][0], n[4][1]), t.lineTo(n[6][0], n[6][1])) : (t.moveTo(n[0][0], n[0][1]), t.lineTo(n[1][0], n[1][1]), t.lineTo(n[2][0], n[2][1]), t.lineTo(n[3][0], n[3][1]), t.closePath(), t.moveTo(n[4][0], n[4][1]), t.lineTo(n[5][0], n[5][1]), t.moveTo(n[6][0], n[6][1]), t.lineTo(n[7][0], n[7][1])) } }); function f (t, e, n) { var i = t.ends; return new d({ shape: { points: n ? v(i, t) : i }, z2: 100 }) } function p (t, e) { for (var n = !0, i = 0; i < e.ends.length; i++) if (t.contain(e.ends[i][0], e.ends[i][1])) { n = !1; break } return n } function g (t, e, n, i) { var r = e.getItemModel(n); var o = r.getModel(l); var s = e.getItemVisual(n, 'color'); var h = e.getItemVisual(n, 'borderColor') || s; var d = o.getItemStyle(c); t.useStyle(d), t.style.strokeNoScale = !0, t.style.fill = s, t.style.stroke = h, t.__simpleBox = i; var f = r.getModel(u).getItemStyle(); a.setHoverStyle(t, f) } function v (t, e) { return i.map(t, function (t) { return (t = t.slice())[1] = e.initBaseline, t }) } var m = o.extend({ type: 'largeCandlestickBox', shape: {}, buildPath: function (t, e) { for (var n = e.points, i = 0; i < n.length;) if (this.__sign === n[i++]) { var r = n[i++]; t.moveTo(r, n[i++]), t.lineTo(r, n[i++]) } else i += 3 } }); function y (t, e, n) { var i = t.getData(); var r = i.getLayout('largePoints'); var a = new m({ shape: { points: r }, __sign: 1 }); e.add(a); var o = new m({ shape: { points: r }, __sign: -1 }); e.add(o), x(1, a, t, i), x(-1, o, t, i), n && (a.incremental = !0, o.incremental = !0) } function x (t, e, n, i) { var r = t > 0 ? 'P' : 'N'; var a = i.getVisual('borderColor' + r) || i.getVisual('color' + r); var o = n.getModel(l).getItemStyle(c); e.useStyle(o), e.style.fill = null, e.style.stroke = a } var _ = h; t.exports = _ }, function (t, e, n) { var i = n(0); t.exports = function (t) { t && i.isArray(t.series) && i.each(t.series, function (t) { i.isObject(t) && t.type === 'k' && (t.type = 'candlestick') }) } }, function (t, e, n) { var i = n(46); var r = ['itemStyle', 'borderColor']; var a = ['itemStyle', 'borderColor0']; var o = ['itemStyle', 'color']; var s = ['itemStyle', 'color0']; var l = { seriesType: 'candlestick', plan: i(), performRawSeries: !0, reset: function (t, e) { var n = t.getData(); var i = t.pipelineContext.large; if (n.setVisual({ legendSymbol: 'roundRect', colorP: l(1, t), colorN: l(-1, t), borderColorP: u(1, t), borderColorN: u(-1, t) }), !e.isSeriesFiltered(t)) return !i && { progress: function (t, e) { var n; for (;(n = t.next()) != null;) { var i = e.getItemModel(n); var r = e.getItemLayout(n).sign; e.setItemVisual(n, { color: l(r, i), borderColor: u(r, i) }) } } }; function l (t, e) { return e.get(t > 0 ? o : s) } function u (t, e) { return e.get(t > 0 ? r : a) } } }; t.exports = l }, function (t, e, n) { var i = n(2).subPixelOptimize; var r = n(46); var a = n(3).parsePercent; var o = n(0).retrieve2; var s = typeof Float32Array !== 'undefined' ? Float32Array : Array; var l = { seriesType: 'candlestick', plan: r(), reset: function (t) { var e = t.coordinateSystem; var n = t.getData(); var r = (function (t, e) { var n; var i = t.getBaseAxis(); var r = i.type === 'category' ? i.getBandWidth() : (n = i.getExtent(), Math.abs(n[1] - n[0]) / e.count()); var s = a(o(t.get('barMaxWidth'), r), r); var l = a(o(t.get('barMinWidth'), 1), r); var u = t.get('barWidth'); return u != null ? a(u, r) : Math.max(Math.min(r / 2, s), l) }(t, n)); var l = 0; var c = 1; var h = ['x', 'y']; var d = n.mapDimension(h[l]); var f = n.mapDimension(h[c], !0); var p = f[0]; var g = f[1]; var v = f[2]; var m = f[3]; if (n.setLayout({ candleWidth: r, isSimpleBox: r <= 1.3 }), !(d == null || f.length < 4)) return { progress: t.pipelineContext.large ? function (t, n) { var i; var r; var a = new s(4 * t.count); var o = 0; var h = []; var f = []; for (;(r = t.next()) != null;) { var y = n.get(d, r); var x = n.get(p, r); var _ = n.get(g, r); var b = n.get(v, r); var w = n.get(m, r); isNaN(y) || isNaN(b) || isNaN(w) ? (a[o++] = NaN, o += 3) : (a[o++] = u(n, r, x, _, g), h[l] = y, h[c] = b, i = e.dataToPoint(h, null, f), a[o++] = i ? i[0] : NaN, a[o++] = i ? i[1] : NaN, h[c] = w, i = e.dataToPoint(h, null, f), a[o++] = i ? i[1] : NaN) }n.setLayout('largePoints', a) } : function (t, n) { var a; for (;(a = t.next()) != null;) { var o = n.get(d, a); var s = n.get(p, a); var h = n.get(g, a); var f = n.get(v, a); var y = n.get(m, a); var x = Math.min(s, h); var _ = Math.max(s, h); var b = A(x, o); var w = A(_, o); var S = A(f, o); var M = A(y, o); var I = []; T(I, w, 0), T(I, b, 1), I.push(D(M), D(w), D(S), D(b)), n.setItemLayout(a, { sign: u(n, a, s, h, g), initBaseline: s > h ? w[c] : b[c], ends: I, brushRect: C(f, y, o) }) } function A (t, n) { var i = []; return i[l] = n, i[c] = t, isNaN(n) || isNaN(t) ? [NaN, NaN] : e.dataToPoint(i) } function T (t, e, n) { var a = e.slice(); var o = e.slice(); a[l] = i(a[l] + r / 2, 1, !1), o[l] = i(o[l] - r / 2, 1, !0), n ? t.push(a, o) : t.push(o, a) } function C (t, e, n) { var i = A(t, n); var a = A(e, n); return i[l] -= r / 2, a[l] -= r / 2, { x: i[0], y: i[1], width: c ? r : a[0] - i[0], height: c ? a[1] - i[1] : r } } function D (t) { return t[l] = i(t[l], 1), t } } } } }; function u (t, e, n, i, r) { return n > i ? -1 : n < i ? 1 : e > 0 ? t.get(r, e - 1) <= i ? 1 : -1 : 1 }t.exports = l }, function (t, e, n) { var i = n(1); n(392), n(393); var r = n(38); var a = n(61); i.registerVisual(r('effectScatter', 'circle')), i.registerLayout(a('effectScatter')) }, function (t, e, n) { var i = n(27); var r = n(14).extend({ type: 'series.effectScatter', dependencies: ['grid', 'polar'], getInitialData: function (t, e) { return i(this.getSource(), this) }, brushSelector: 'point', defaultOption: { coordinateSystem: 'cartesian2d', zlevel: 0, z: 2, legendHoverLink: !0, effectType: 'ripple', progressive: 0, showEffectOn: 'render', rippleEffect: { period: 4, scale: 2.5, brushType: 'fill' }, symbolSize: 10 } }); t.exports = r }, function (t, e, n) { var i = n(1); var r = n(59); var a = n(394); var o = n(15); var s = n(61); var l = i.extendChartView({ type: 'effectScatter', init: function () { this._symbolDraw = new r(a) }, render: function (t, e, n) { var i = t.getData(); var r = this._symbolDraw; r.updateData(i), this.group.add(r.group) }, updateTransform: function (t, e, n) { var i = t.getData(); this.group.dirty(); var r = s().reset(t); r.progress && r.progress({ start: 0, end: i.count() }, i), this._symbolDraw.updateLayout(i) }, _updateGroupTransform: function (t) { var e = t.coordinateSystem; e && e.getRoamTransform && (this.group.transform = o.clone(e.getRoamTransform()), this.group.decomposeTransform()) }, remove: function (t, e) { this._symbolDraw && this._symbolDraw.remove(e) }, dispose: function () {} }); t.exports = l }, function (t, e, n) { var i = n(0); var r = n(19).createSymbol; var a = n(2).Group; var o = n(3).parsePercent; var s = n(78); function l (t, e) { var n = e.rippleEffectColor || e.color; t.eachChild(function (t) { t.attr({ z: e.z, zlevel: e.zlevel, style: { stroke: e.brushType === 'stroke' ? n : null, fill: e.brushType === 'fill' ? n : null } }) }) } function u (t, e) { a.call(this); var n = new s(t, e); var i = new a(); this.add(n), this.add(i), i.beforeUpdate = function () { this.attr(n.getScale()) }, this.updateData(t, e) } var c = u.prototype; c.stopEffectAnimation = function () { this.childAt(1).removeAll() }, c.startEffectAnimation = function (t) { for (var e = t.symbolType, n = t.color, i = this.childAt(1), a = 0; a < 3; a++) { var o = r(e, -1, -1, 2, 2, n); o.attr({ style: { strokeNoScale: !0 }, z2: 99, silent: !0, scale: [0.5, 0.5] }); var s = -a / 3 * t.period + t.effectOffset; o.animate('', !0).when(t.period, { scale: [t.rippleScale / 2, t.rippleScale / 2] }).delay(s).start(), o.animateStyle(!0).when(t.period, { opacity: 0 }).delay(s).start(), i.add(o) }l(i, t) }, c.updateEffectAnimation = function (t) { for (var e = this._effectCfg, n = this.childAt(1), i = ['symbolType', 'period', 'rippleScale'], r = 0; r < i.length; r++) { var a = i[r]; if (e[a] !== t[a]) return this.stopEffectAnimation(), void this.startEffectAnimation(t) }l(n, t) }, c.highlight = function () { this.trigger('emphasis') }, c.downplay = function () { this.trigger('normal') }, c.updateData = function (t, e) { var n = t.hostModel; this.childAt(0).updateData(t, e); var r = this.childAt(1); var a = t.getItemModel(e); var s = t.getItemVisual(e, 'symbol'); var l = (function (t) { return i.isArray(t) || (t = [+t, +t]), t }(t.getItemVisual(e, 'symbolSize'))); var u = t.getItemVisual(e, 'color'); r.attr('scale', l), r.traverse(function (t) { t.attr({ fill: u }) }); var c = a.getShallow('symbolOffset'); if (c) { var h = r.position; h[0] = o(c[0], l[0]), h[1] = o(c[1], l[1]) }r.rotation = (a.getShallow('symbolRotate') || 0) * Math.PI / 180 || 0; var d = {}; if (d.showEffectOn = n.get('showEffectOn'), d.rippleScale = a.get('rippleEffect.scale'), d.brushType = a.get('rippleEffect.brushType'), d.period = 1e3 * a.get('rippleEffect.period'), d.effectOffset = e / t.count(), d.z = a.getShallow('z') || 0, d.zlevel = a.getShallow('zlevel') || 0, d.symbolType = s, d.color = u, d.rippleEffectColor = a.get('rippleEffect.color'), this.off('mouseover').off('mouseout').off('emphasis').off('normal'), d.showEffectOn === 'render') this._effectCfg ? this.updateEffectAnimation(d) : this.startEffectAnimation(d), this._effectCfg = d; else { this._effectCfg = null, this.stopEffectAnimation(); var f = this.childAt(0); var p = function () { f.highlight(), d.showEffectOn !== 'render' && this.startEffectAnimation(d) }; var g = function () { f.downplay(), d.showEffectOn !== 'render' && this.stopEffectAnimation() }; this.on('mouseover', p, this).on('mouseout', g, this).on('emphasis', p, this).on('normal', g, this) } this._effectCfg = d }, c.fadeOut = function (t) { this.off('mouseover').off('mouseout').off('emphasis').off('normal'), t && t() }, i.inherits(u, a); var h = u; t.exports = h }, function (t, e, n) { var i = n(1); n(396), n(397); var r = n(187); var a = n(400); i.registerLayout(r), i.registerVisual(a) }, function (t, e, n) { n(5).__DEV__; var i = n(14); var r = n(18); var a = n(0); var o = a.concatArray; var s = a.mergeAll; var l = a.map; var u = n(9).encodeHTML; var c = (n(20), typeof Uint32Array === 'undefined' ? Array : Uint32Array); var h = typeof Float64Array === 'undefined' ? Array : Float64Array; function d (t) { var e = t.data; e && e[0] && e[0][0] && e[0][0].coord && (t.data = l(e, function (t) { var e = { coords: [t[0].coord, t[1].coord] }; return t[0].name && (e.fromName = t[0].name), t[1].name && (e.toName = t[1].name), s([e, t[0], t[1]]) })) } var f = i.extend({ type: 'series.lines', dependencies: ['grid', 'polar'], visualColorAccessPath: 'lineStyle.color', init: function (t) { t.data = t.data || [], d(t); var e = this._processFlatCoordsArray(t.data); this._flatCoords = e.flatCoords, this._flatCoordsOffset = e.flatCoordsOffset, e.flatCoords && (t.data = new Float32Array(e.count)), f.superApply(this, 'init', arguments) }, mergeOption: function (t) { if (t.data = t.data || [], d(t), t.data) { var e = this._processFlatCoordsArray(t.data); this._flatCoords = e.flatCoords, this._flatCoordsOffset = e.flatCoordsOffset, e.flatCoords && (t.data = new Float32Array(e.count)) }f.superApply(this, 'mergeOption', arguments) }, appendData: function (t) { var e = this._processFlatCoordsArray(t.data); e.flatCoords && (this._flatCoords ? (this._flatCoords = o(this._flatCoords, e.flatCoords), this._flatCoordsOffset = o(this._flatCoordsOffset, e.flatCoordsOffset)) : (this._flatCoords = e.flatCoords, this._flatCoordsOffset = e.flatCoordsOffset), t.data = new Float32Array(e.count)), this.getRawData().appendData(t.data) }, _getCoordsFromItemModel: function (t) { var e = this.getData().getItemModel(t); return e.option instanceof Array ? e.option : e.getShallow('coords') }, getLineCoordsCount: function (t) { return this._flatCoordsOffset ? this._flatCoordsOffset[2 * t + 1] : this._getCoordsFromItemModel(t).length }, getLineCoords: function (t, e) { if (this._flatCoordsOffset) { for (var n = this._flatCoordsOffset[2 * t], i = this._flatCoordsOffset[2 * t + 1], r = 0; r < i; r++)e[r] = e[r] || [], e[r][0] = this._flatCoords[n + 2 * r], e[r][1] = this._flatCoords[n + 2 * r + 1]; return i } var a = this._getCoordsFromItemModel(t); for (r = 0; r < a.length; r++)e[r] = e[r] || [], e[r][0] = a[r][0], e[r][1] = a[r][1]; return a.length }, _processFlatCoordsArray: function (t) { var e = 0; if (this._flatCoords && (e = this._flatCoords.length), typeof t[0] === 'number') { for (var n = t.length, i = new c(n), r = new h(n), a = 0, o = 0, s = 0, l = 0; l < n;) { s++; var u = t[l++]; i[o++] = a + e, i[o++] = u; for (var d = 0; d < u; d++) { var f = t[l++]; var p = t[l++]; r[a++] = f, r[a++] = p } } return { flatCoordsOffset: new Uint32Array(i.buffer, 0, o), flatCoords: r, count: s } } return { flatCoordsOffset: null, flatCoords: null, count: t.length } }, getInitialData: function (t, e) { var n = new r(['value'], this); return n.hasItemOption = !1, n.initData(t.data, [], function (t, e, i, r) { if (t instanceof Array) return NaN; n.hasItemOption = !0; var a = t.value; return a != null ? a instanceof Array ? a[r] : a : void 0 }), n }, formatTooltip: function (t) { var e = this.getData().getItemModel(t); var n = e.get('name'); if (n) return n; var i = e.get('fromName'); var r = e.get('toName'); var a = []; return i != null && a.push(i), r != null && a.push(r), u(a.join(' > ')) }, preventIncremental: function () { return !!this.get('effect.show') }, getProgressive: function () { var t = this.option.progressive; return t == null ? this.option.large ? 1e4 : this.get('progressive') : t }, getProgressiveThreshold: function () { var t = this.option.progressiveThreshold; return t == null ? this.option.large ? 2e4 : this.get('progressiveThreshold') : t }, defaultOption: { coordinateSystem: 'geo', zlevel: 0, z: 2, legendHoverLink: !0, hoverAnimation: !0, xAxisIndex: 0, yAxisIndex: 0, symbol: ['none', 'none'], symbolSize: [10, 10], geoIndex: 0, effect: { show: !1, period: 4, constantSpeed: 0, symbol: 'circle', symbolSize: 3, loop: !0, trailLength: 0.2 }, large: !1, largeThreshold: 2e3, polyline: !1, clip: !0, label: { show: !1, position: 'end' }, lineStyle: { opacity: 0.5 } } }); var p = f; t.exports = p }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(105); var a = n(185); var o = n(106); var s = n(186); var l = n(398); var u = n(399); var c = n(187); var h = n(60).createClipPath; var d = i.extendChartView({ type: 'lines', init: function () {}, render: function (t, e, n) { var i = t.getData(); var r = this._updateLineDraw(i, t); var a = t.get('zlevel'); var o = t.get('effect.trailLength'); var s = n.getZr(); var l = s.painter.getType() === 'svg'; l || s.painter.getLayer(a).clear(!0), this._lastZlevel == null || l || s.configLayer(this._lastZlevel, { motionBlur: !1 }), this._showEffect(t) && o && (l || s.configLayer(a, { motionBlur: !0, lastFrameAlpha: Math.max(Math.min(o / 10 + 0.9, 1), 0) })), r.updateData(i); var u = t.get('clip', !0) && h(t.coordinateSystem, !1, t); u ? this.group.setClipPath(u) : this.group.removeClipPath(), this._lastZlevel = a, this._finished = !0 }, incrementalPrepareRender: function (t, e, n) { var i = t.getData(); this._updateLineDraw(i, t).incrementalPrepareUpdate(i), this._clearLayer(n), this._finished = !1 }, incrementalRender: function (t, e, n) { this._lineDraw.incrementalUpdate(t, e.getData()), this._finished = t.end === e.getData().count() }, updateTransform: function (t, e, n) { var i = t.getData(); var r = t.pipelineContext; if (!this._finished || r.large || r.progressiveRender) return { update: !0 }; var a = c.reset(t); a.progress && a.progress({ start: 0, end: i.count() }, i), this._lineDraw.updateLayout(), this._clearLayer(n) }, _updateLineDraw: function (t, e) { var n = this._lineDraw; var i = this._showEffect(e); var c = !!e.get('polyline'); var h = e.pipelineContext.large; return n && i === this._hasEffet && c === this._isPolyline && h === this._isLargeDraw || (n && n.remove(), n = this._lineDraw = h ? new u() : new r(c ? i ? l : s : i ? a : o), this._hasEffet = i, this._isPolyline = c, this._isLargeDraw = h, this.group.removeAll()), this.group.add(n.group), n }, _showEffect: function (t) { return !!t.get('effect.show') }, _clearLayer: function (t) { var e = t.getZr(); e.painter.getType() === 'svg' || this._lastZlevel == null || e.painter.getLayer(this._lastZlevel).clear(!0) }, remove: function (t, e) { this._lineDraw && this._lineDraw.remove(), this._lineDraw = null, this._clearLayer(e) }, dispose: function () {} }); t.exports = d }, function (t, e, n) { var i = n(186); var r = n(0); var a = n(185); var o = n(7); function s (t, e, n) { a.call(this, t, e, n), this._lastFrame = 0, this._lastFramePercent = 0 } var l = s.prototype; l.createLine = function (t, e, n) { return new i(t, e, n) }, l.updateAnimationPoints = function (t, e) { this._points = e; for (var n = [0], i = 0, r = 1; r < e.length; r++) { var a = e[r - 1]; var s = e[r]; i += o.dist(a, s), n.push(i) } if (i !== 0) { for (r = 0; r < n.length; r++)n[r] /= i; this._offsets = n, this._length = i } }, l.getLineLength = function (t) { return this._length }, l.updateSymbolPosition = function (t) { var e = t.__t; var n = this._points; var i = this._offsets; var r = n.length; if (i) { var a = this._lastFrame; if (e < this._lastFramePercent) { for (s = Math.min(a + 1, r - 1); s >= 0 && !(i[s] <= e); s--);s = Math.min(s, r - 2) } else { for (var s = a; s < r && !(i[s] > e); s++);s = Math.min(s - 1, r - 2) }o.lerp(t.position, n[s], n[s + 1], (e - i[s]) / (i[s + 1] - i[s])); var l = n[s + 1][0] - n[s][0]; var u = n[s + 1][1] - n[s][1]; t.rotation = -Math.atan2(u, l) - Math.PI / 2, this._lastFrame = s, this._lastFramePercent = e, t.ignore = !1 } }, r.inherits(s, a); var u = s; t.exports = u }, function (t, e, n) { var i = n(2); var r = n(93); var a = n(141); var o = n(142); var s = i.extendShape({ shape: { polyline: !1, curveness: 0, segs: [] }, buildPath: function (t, e) { var n = e.segs; var i = e.curveness; if (e.polyline) for (var r = 0; r < n.length;) { var a = n[r++]; if (a > 0) { t.moveTo(n[r++], n[r++]); for (var o = 1; o < a; o++)t.lineTo(n[r++], n[r++]) } } else for (r = 0; r < n.length;) { var s = n[r++]; var l = n[r++]; var u = n[r++]; var c = n[r++]; if (t.moveTo(s, l), i > 0) { var h = (s + u) / 2 - (l - c) * i; var d = (l + c) / 2 - (u - s) * i; t.quadraticCurveTo(h, d, u, c) } else t.lineTo(u, c) } }, findDataIndex: function (t, e) { var n = this.shape; var i = n.segs; var r = n.curveness; if (n.polyline) for (var s = 0, l = 0; l < i.length;) { var u = i[l++]; if (u > 0) for (var c = i[l++], h = i[l++], d = 1; d < u; d++) { var f = i[l++]; var p = i[l++]; if (a.containStroke(c, h, f, p)) return s }s++ } else for (s = 0, l = 0; l < i.length;) { c = i[l++], h = i[l++], f = i[l++], p = i[l++]; if (r > 0) { var g = (c + f) / 2 - (h - p) * r; var v = (h + p) / 2 - (f - c) * r; if (o.containStroke(c, h, g, v, f, p)) return s } else if (a.containStroke(c, h, f, p)) return s; s++ } return -1 } }); function l () { this.group = new i.Group() } var u = l.prototype; u.isPersistent = function () { return !this._incremental }, u.updateData = function (t) { this.group.removeAll(); var e = new s({ rectHover: !0, cursor: 'default' }); e.setShape({ segs: t.getLayout('linesPoints') }), this._setCommon(e, t), this.group.add(e), this._incremental = null }, u.incrementalPrepareUpdate = function (t) { this.group.removeAll(), this._clearIncremental(), t.count() > 5e5 ? (this._incremental || (this._incremental = new r({ silent: !0 })), this.group.add(this._incremental)) : this._incremental = null }, u.incrementalUpdate = function (t, e) { var n = new s(); n.setShape({ segs: e.getLayout('linesPoints') }), this._setCommon(n, e, !!this._incremental), this._incremental ? this._incremental.addDisplayable(n, !0) : (n.rectHover = !0, n.cursor = 'default', n.__startIndex = t.start, this.group.add(n)) }, u.remove = function () { this._clearIncremental(), this._incremental = null, this.group.removeAll() }, u._setCommon = function (t, e, n) { var i = e.hostModel; t.setShape({ polyline: i.get('polyline'), curveness: i.get('lineStyle.curveness') }), t.useStyle(i.getModel('lineStyle').getLineStyle()), t.style.strokeNoScale = !0; var r = e.getVisual('color'); r && t.setStyle('stroke', r), t.setStyle('fill'), n || (t.seriesIndex = i.seriesIndex, t.on('mousemove', function (e) { t.dataIndex = null; var n = t.findDataIndex(e.offsetX, e.offsetY); n > 0 && (t.dataIndex = n + t.__startIndex) })) }, u._clearIncremental = function () { var t = this._incremental; t && t.clearDisplaybles() }; var c = l; t.exports = c }, function (t, e) { function n (t) { return t instanceof Array || (t = [t, t]), t } var i = 'lineStyle.opacity'.split('.'); var r = { seriesType: 'lines', reset: function (t, e, r) { var a = n(t.get('symbol')); var o = n(t.get('symbolSize')); var s = t.getData(); return s.setVisual('fromSymbol', a && a[0]), s.setVisual('toSymbol', a && a[1]), s.setVisual('fromSymbolSize', o && o[0]), s.setVisual('toSymbolSize', o && o[1]), s.setVisual('opacity', t.get(i)), { dataEach: s.hasItemOption ? function (t, e) { var r = t.getItemModel(e); var a = n(r.getShallow('symbol', !0)); var o = n(r.getShallow('symbolSize', !0)); var s = r.get(i); a[0] && t.setItemVisual(e, 'fromSymbol', a[0]), a[1] && t.setItemVisual(e, 'toSymbol', a[1]), o[0] && t.setItemVisual(e, 'fromSymbolSize', o[0]), o[1] && t.setItemVisual(e, 'toSymbolSize', o[1]), t.setItemVisual(e, 'opacity', s) } : null } } }; t.exports = r }, function (t, e, n) { n(402), n(403) }, function (t, e, n) { var i = n(14); var r = n(27); var a = n(20); var o = i.extend({ type: 'series.heatmap', getInitialData: function (t, e) { return r(this.getSource(), this, { generateCoord: 'value' }) }, preventIncremental: function () { var t = a.get(this.get('coordinateSystem')); if (t && t.dimensions) return t.dimensions[0] === 'lng' && t.dimensions[1] === 'lat' }, defaultOption: { coordinateSystem: 'cartesian2d', zlevel: 0, z: 2, geoIndex: 0, blurSize: 30, pointSize: 20, maxOpacity: 1, minOpacity: 0 } }); t.exports = o }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(2); var a = n(404); var o = n(0); var s = i.extendChartView({ type: 'heatmap', render: function (t, e, n) { var i; e.eachComponent('visualMap', function (e) { e.eachTargetSeries(function (n) { n === t && (i = e) }) }), this.group.removeAll(), this._incrementalDisplayable = null; var r = t.coordinateSystem; r.type === 'cartesian2d' || r.type === 'calendar' ? this._renderOnCartesianAndCalendar(t, n, 0, t.getData().count()) : (function (t) { var e = t.dimensions; return e[0] === 'lng' && e[1] === 'lat' }(r)) && this._renderOnGeo(r, t, i, n) }, incrementalPrepareRender: function (t, e, n) { this.group.removeAll() }, incrementalRender: function (t, e, n, i) { e.coordinateSystem && this._renderOnCartesianAndCalendar(e, i, t.start, t.end, !0) }, _renderOnCartesianAndCalendar: function (t, e, n, i, a) { var s; var l; var u = t.coordinateSystem; if (u.type === 'cartesian2d') { var c = u.getAxis('x'); var h = u.getAxis('y'); s = c.getBandWidth(), l = h.getBandWidth() } for (var d = this.group, f = t.getData(), p = t.getModel('itemStyle').getItemStyle(['color']), g = t.getModel('emphasis.itemStyle').getItemStyle(), v = t.getModel('label'), m = t.getModel('emphasis.label'), y = u.type, x = y === 'cartesian2d' ? [f.mapDimension('x'), f.mapDimension('y'), f.mapDimension('value')] : [f.mapDimension('time'), f.mapDimension('value')], _ = n; _ < i; _++) { var b; if (y === 'cartesian2d') { if (isNaN(f.get(x[2], _))) continue; var w = u.dataToPoint([f.get(x[0], _), f.get(x[1], _)]); b = new r.Rect({ shape: { x: w[0] - s / 2, y: w[1] - l / 2, width: s, height: l }, style: { fill: f.getItemVisual(_, 'color'), opacity: f.getItemVisual(_, 'opacity') } }) } else { if (isNaN(f.get(x[1], _))) continue; b = new r.Rect({ z2: 1, shape: u.dataToRect([f.get(x[0], _)]).contentShape, style: { fill: f.getItemVisual(_, 'color'), opacity: f.getItemVisual(_, 'opacity') } }) } var S = f.getItemModel(_); f.hasItemOption && (p = S.getModel('itemStyle').getItemStyle(['color']), g = S.getModel('emphasis.itemStyle').getItemStyle(), v = S.getModel('label'), m = S.getModel('emphasis.label')); var M = t.getRawValue(_); var I = '-'; M && M[2] != null && (I = M[2]), r.setLabelStyle(p, g, v, m, { labelFetcher: t, labelDataIndex: _, defaultText: I, isRectText: !0 }), b.setStyle(p), r.setHoverStyle(b, f.hasItemOption ? g : o.extend({}, g)), b.incremental = a, a && (b.useHoverLayer = !0), d.add(b), f.setItemGraphicEl(_, b) } }, _renderOnGeo: function (t, e, n, i) { var s = n.targetVisuals.inRange; var l = n.targetVisuals.outOfRange; var u = e.getData(); var c = this._hmLayer || this._hmLayer || new a(); c.blurSize = e.get('blurSize'), c.pointSize = e.get('pointSize'), c.minOpacity = e.get('minOpacity'), c.maxOpacity = e.get('maxOpacity'); var h = t.getViewRect().clone(); var d = t.getRoamTransform(); h.applyTransform(d); var f = Math.max(h.x, 0); var p = Math.max(h.y, 0); var g = Math.min(h.width + h.x, i.getWidth()); var v = Math.min(h.height + h.y, i.getHeight()); var m = g - f; var y = v - p; var x = [u.mapDimension('lng'), u.mapDimension('lat'), u.mapDimension('value')]; var _ = u.mapArray(x, function (e, n, i) { var r = t.dataToPoint([e, n]); return r[0] -= f, r[1] -= p, r.push(i), r }); var b = n.getExtent(); var w = n.type === 'visualMap.continuous' ? (function (t, e) { var n = t[1] - t[0]; return e = [(e[0] - t[0]) / n, (e[1] - t[0]) / n], function (t) { return t >= e[0] && t <= e[1] } }(b, n.option.range)) : (function (t, e, n) { var i = t[1] - t[0]; var r = (e = o.map(e, function (e) { return { interval: [(e.interval[0] - t[0]) / i, (e.interval[1] - t[0]) / i] } })).length; var a = 0; return function (t) { for (var i = a; i < r; i++) { if ((o = e[i].interval)[0] <= t && t <= o[1]) { a = i; break } } if (i === r) for (i = a - 1; i >= 0; i--) { var o; if ((o = e[i].interval)[0] <= t && t <= o[1]) { a = i; break } } return i >= 0 && i < r && n[i] } }(b, n.getPieceList(), n.option.selected)); c.update(_, m, y, s.color.getNormalizer(), { inRange: s.color.getColorMapper(), outOfRange: l.color.getColorMapper() }, w); var S = new r.Image({ style: { width: m, height: y, x: f, y: p, image: c.canvas }, silent: !0 }); this.group.add(S) }, dispose: function () {} }); t.exports = s }, function (t, e, n) { var i = n(0); function r () { var t = i.createCanvas(); this.canvas = t, this.blurSize = 30, this.pointSize = 20, this.maxOpacity = 1, this.minOpacity = 0, this._gradientPixels = {} }r.prototype = { update: function (t, e, n, i, r, a) { var o = this._getBrush(); var s = this._getGradient(t, r, 'inRange'); var l = this._getGradient(t, r, 'outOfRange'); var u = this.pointSize + this.blurSize; var c = this.canvas; var h = c.getContext('2d'); var d = t.length; c.width = e, c.height = n; for (var f = 0; f < d; ++f) { var p = t[f]; var g = p[0]; var v = p[1]; var m = i(p[2]); h.globalAlpha = m, h.drawImage(o, g - u, v - u) } if (!c.width || !c.height) return c; for (var y = h.getImageData(0, 0, c.width, c.height), x = y.data, _ = 0, b = x.length, w = this.minOpacity, S = this.maxOpacity - w; _ < b;) { m = x[_ + 3] / 256; var M = 4 * Math.floor(255 * m); if (m > 0) { var I = a(m) ? s : l; m > 0 && (m = m * S + w), x[_++] = I[M], x[_++] = I[M + 1], x[_++] = I[M + 2], x[_++] = I[M + 3] * m * 256 } else _ += 4 } return h.putImageData(y, 0, 0), c }, _getBrush: function () { var t = this._brushCanvas || (this._brushCanvas = i.createCanvas()); var e = this.pointSize + this.blurSize; var n = 2 * e; t.width = n, t.height = n; var r = t.getContext('2d'); return r.clearRect(0, 0, n, n), r.shadowOffsetX = n, r.shadowBlur = this.blurSize, r.shadowColor = '#000', r.beginPath(), r.arc(-e, e, this.pointSize, 0, 2 * Math.PI, !0), r.closePath(), r.fill(), t }, _getGradient: function (t, e, n) { for (var i = this._gradientPixels, r = i[n] || (i[n] = new Uint8ClampedArray(1024)), a = [0, 0, 0, 0], o = 0, s = 0; s < 256; s++)e[n](s / 255, !0, a), r[o++] = a[0], r[o++] = a[1], r[o++] = a[2], r[o++] = a[3]; return r } }; var a = r; t.exports = a }, function (t, e, n) { var i = n(1); var r = n(0); n(98), n(406), n(407); var a = n(77).layout; var o = n(38); n(62), i.registerLayout(r.curry(a, 'pictorialBar')), i.registerVisual(o('pictorialBar', 'roundRect')) }, function (t, e, n) { var i = n(169).extend({ type: 'series.pictorialBar', dependencies: ['grid'], defaultOption: { symbol: 'circle', symbolSize: null, symbolRotate: null, symbolPosition: null, symbolOffset: null, symbolMargin: null, symbolRepeat: !1, symbolRepeatDirection: 'end', symbolClip: !1, symbolBoundingData: null, symbolPatternSize: 400, barGap: '-100%', progressive: 0, hoverAnimation: !1 }, getInitialData: function (t) { return t.stack = null, i.superApply(this, 'getInitialData', arguments) } }); var r = i; t.exports = r }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(2); var o = n(19).createSymbol; var s = n(3); var l = s.parsePercent; var u = s.isNumeric; var c = n(170).setLabel; var h = ['itemStyle', 'borderWidth']; var d = [{ xy: 'x', wh: 'width', index: 0, posDesc: ['left', 'right'] }, { xy: 'y', wh: 'height', index: 1, posDesc: ['top', 'bottom'] }]; var f = new a.Circle(); function p (t, e, n, i) { var a = t.getItemLayout(e); var o = n.get('symbolRepeat'); var s = n.get('symbolClip'); var c = n.get('symbolPosition') || 'start'; var d = (n.get('symbolRotate') || 0) * Math.PI / 180 || 0; var p = n.get('symbolPatternSize') || 2; var v = n.isAnimationEnabled(); var m = { dataIndex: e, layout: a, itemModel: n, symbolType: t.getItemVisual(e, 'symbol') || 'circle', color: t.getItemVisual(e, 'color'), symbolClip: s, symbolRepeat: o, symbolRepeatDirection: n.get('symbolRepeatDirection'), symbolPatternSize: p, rotation: d, animationModel: v ? n : null, hoverAnimation: v && n.get('hoverAnimation'), z2: n.getShallow('z', !0) || 0 }; !(function (t, e, n, i, a) { var o; var s = i.valueDim; var l = t.get('symbolBoundingData'); var u = i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()); var c = u.toGlobalCoord(u.dataToCoord(0)); var h = 1 - +(n[s.wh] <= 0); if (r.isArray(l)) { var d = [g(u, l[0]) - c, g(u, l[1]) - c]; d[1] < d[0] && d.reverse(), o = d[h] } else o = l != null ? g(u, l) - c : e ? i.coordSysExtent[s.index][h] - c : n[s.wh]; a.boundingLength = o, e && (a.repeatCutLength = n[s.wh]); a.pxSign = o > 0 ? 1 : o < 0 ? -1 : 0 }(n, o, a, i, m)), (function (t, e, n, i, a, o, s, u, c, h) { var d = c.valueDim; var f = c.categoryDim; var p = Math.abs(n[f.wh]); var g = t.getItemVisual(e, 'symbolSize'); r.isArray(g) ? g = g.slice() : (g == null && (g = '100%'), g = [g, g]); g[f.index] = l(g[f.index], p), g[d.index] = l(g[d.index], i ? p : Math.abs(o)), h.symbolSize = g, (h.symbolScale = [g[0] / u, g[1] / u])[d.index] *= (c.isHorizontal ? -1 : 1) * s }(t, e, a, o, 0, m.boundingLength, m.pxSign, p, i, m)), (function (t, e, n, i, r) { var a = t.get(h) || 0; a && (f.attr({ scale: e.slice(), rotation: n }), f.updateTransform(), a /= f.getLineScale(), a *= e[i.valueDim.index]); r.valueLineWidth = a }(n, m.symbolScale, d, i, m)); var y = m.symbolSize; var x = n.get('symbolOffset'); return r.isArray(x) && (x = [l(x[0], y[0]), l(x[1], y[1])]), (function (t, e, n, i, a, o, s, c, h, d, f, p) { var g = f.categoryDim; var v = f.valueDim; var m = p.pxSign; var y = Math.max(e[v.index] + c, 0); var x = y; if (i) { var _ = Math.abs(h); var b = r.retrieve(t.get('symbolMargin'), '15%') + ''; var w = !1; b.lastIndexOf('!') === b.length - 1 && (w = !0, b = b.slice(0, b.length - 1)), b = l(b, e[v.index]); var S = Math.max(y + 2 * b, 0); var M = w ? 0 : 2 * b; var I = u(i); var A = I ? i : P((_ + M) / S); S = y + 2 * (b = (_ - A * y) / 2 / (w ? A : A - 1)), M = w ? 0 : 2 * b, I || i === 'fixed' || (A = d ? P((Math.abs(d) + M) / S) : 0), x = A * S - M, p.repeatTimes = A, p.symbolMargin = b } var T = m * (x / 2); var C = p.pathPosition = []; C[g.index] = n[g.wh] / 2, C[v.index] = s === 'start' ? T : s === 'end' ? h - T : h / 2, o && (C[0] += o[0], C[1] += o[1]); var D = p.bundlePosition = []; D[g.index] = n[g.xy], D[v.index] = n[v.xy]; var L = p.barRectShape = r.extend({}, n); L[v.wh] = m * Math.max(Math.abs(n[v.wh]), Math.abs(C[v.index] + T)), L[g.wh] = n[g.wh]; var k = p.clipShape = {}; k[g.xy] = -n[g.xy], k[g.wh] = f.ecSize[g.wh], k[v.xy] = 0, k[v.wh] = n[v.wh] }(n, y, a, o, 0, x, c, m.valueLineWidth, m.boundingLength, m.repeatCutLength, i, m)), m } function g (t, e) { return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e))) } function v (t) { var e = t.symbolPatternSize; var n = o(t.symbolType, -e / 2, -e / 2, e, e, t.color); return n.attr({ culling: !0 }), n.type !== 'image' && n.setStyle({ strokeNoScale: !0 }), n } function m (t, e, n, i) { var r = t.__pictorialBundle; var a = n.symbolSize; var o = n.valueLineWidth; var s = n.pathPosition; var l = e.valueDim; var u = n.repeatTimes || 0; var c = 0; var h = a[e.valueDim.index] + o + 2 * n.symbolMargin; for (C(t, function (t) { t.__pictorialAnimationIndex = c, t.__pictorialRepeatTimes = u, c < u ? D(t, null, p(c), n, i) : D(t, null, { scale: [0, 0] }, n, i, function () { r.remove(t) }), M(t, n), c++ }); c < u; c++) { var d = v(n); d.__pictorialAnimationIndex = c, d.__pictorialRepeatTimes = u, r.add(d); var f = p(c); D(d, { position: f.position, scale: [0, 0] }, { scale: f.scale, rotation: f.rotation }, n, i), d.on('mouseover', g).on('mouseout', m), M(d, n) } function p (t) { var e = s.slice(); var i = n.pxSign; var r = t; return (n.symbolRepeatDirection === 'start' ? i > 0 : i < 0) && (r = u - 1 - t), e[l.index] = h * (r - u / 2 + 0.5) + s[l.index], { position: e, scale: n.symbolScale.slice(), rotation: n.rotation } } function g () { C(t, function (t) { t.trigger('emphasis') }) } function m () { C(t, function (t) { t.trigger('normal') }) } } function y (t, e, n, i) { var r = t.__pictorialBundle; var a = t.__pictorialMainPath; a ? D(a, null, { position: n.pathPosition.slice(), scale: n.symbolScale.slice(), rotation: n.rotation }, n, i) : (a = t.__pictorialMainPath = v(n), r.add(a), D(a, { position: n.pathPosition.slice(), scale: [0, 0], rotation: n.rotation }, { scale: n.symbolScale.slice() }, n, i), a.on('mouseover', function () { this.trigger('emphasis') }).on('mouseout', function () { this.trigger('normal') })), M(a, n) } function x (t, e, n) { var i = r.extend({}, e.barRectShape); var o = t.__pictorialBarRect; o ? D(o, null, { shape: i }, e, n) : (o = t.__pictorialBarRect = new a.Rect({ z2: 2, shape: i, silent: !0, style: { stroke: 'transparent', fill: 'transparent', lineWidth: 0 } }), t.add(o)) } function _ (t, e, n, i) { if (n.symbolClip) { var o = t.__pictorialClipPath; var s = r.extend({}, n.clipShape); var l = e.valueDim; var u = n.animationModel; var c = n.dataIndex; if (o)a.updateProps(o, { shape: s }, u, c); else { s[l.wh] = 0, o = new a.Rect({ shape: s }), t.__pictorialBundle.setClipPath(o), t.__pictorialClipPath = o; var h = {}; h[l.wh] = n.clipShape[l.wh], a[i ? 'updateProps' : 'initProps'](o, { shape: h }, u, c) } } } function b (t, e) { var n = t.getItemModel(e); return n.getAnimationDelayParams = w, n.isAnimationEnabled = S, n } function w (t) { return { index: t.__pictorialAnimationIndex, count: t.__pictorialRepeatTimes } } function S () { return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation') } function M (t, e) { t.off('emphasis').off('normal'); var n = e.symbolScale.slice(); e.hoverAnimation && t.on('emphasis', function () { this.animateTo({ scale: [1.1 * n[0], 1.1 * n[1]] }, 400, 'elasticOut') }).on('normal', function () { this.animateTo({ scale: n.slice() }, 400, 'elasticOut') }) } function I (t, e, n, i) { var r = new a.Group(); var o = new a.Group(); return r.add(o), r.__pictorialBundle = o, o.attr('position', n.bundlePosition.slice()), n.symbolRepeat ? m(r, e, n) : y(r, 0, n), x(r, n, i), _(r, e, n, i), r.__pictorialShapeStr = T(t, n), r.__pictorialSymbolMeta = n, r } function A (t, e, n, i) { var o = i.__pictorialBarRect; o && (o.style.text = null); var s = []; C(i, function (t) { s.push(t) }), i.__pictorialMainPath && s.push(i.__pictorialMainPath), i.__pictorialClipPath && (n = null), r.each(s, function (t) { a.updateProps(t, { scale: [0, 0] }, n, e, function () { i.parent && i.parent.remove(i) }) }), t.setItemGraphicEl(e, null) } function T (t, e) { return [t.getItemVisual(e.dataIndex, 'symbol') || 'none', !!e.symbolRepeat, !!e.symbolClip].join(':') } function C (t, e, n) { r.each(t.__pictorialBundle.children(), function (i) { i !== t.__pictorialBarRect && e.call(n, i) }) } function D (t, e, n, i, r, o) { e && t.attr(e), i.symbolClip && !r ? n && t.attr(n) : n && a[r ? 'updateProps' : 'initProps'](t, n, i.animationModel, i.dataIndex, o) } function L (t, e, n) { var i = n.color; var o = n.dataIndex; var s = n.itemModel; var l = s.getModel('itemStyle').getItemStyle(['color']); var u = s.getModel('emphasis.itemStyle').getItemStyle(); var h = s.getShallow('cursor'); C(t, function (t) { t.setColor(i), t.setStyle(r.defaults({ fill: i, opacity: n.opacity }, l)), a.setHoverStyle(t, u), h && (t.cursor = h), t.z2 = n.z2 }); var d = {}; var f = e.valueDim.posDesc[+(n.boundingLength > 0)]; var p = t.__pictorialBarRect; c(p.style, d, s, i, e.seriesModel, o, f), a.setHoverStyle(p, d) } function P (t) { var e = Math.round(t); return Math.abs(t - e) < 1e-4 ? e : Math.ceil(t) } var k = i.extendChartView({ type: 'pictorialBar', render: function (t, e, n) { var i = this.group; var r = t.getData(); var o = this._data; var s = t.coordinateSystem; var l = !!s.getBaseAxis().isHorizontal(); var u = s.grid.getRect(); var c = { ecSize: { width: n.getWidth(), height: n.getHeight() }, seriesModel: t, coordSys: s, coordSysExtent: [[u.x, u.x + u.width], [u.y, u.y + u.height]], isHorizontal: l, valueDim: d[+l], categoryDim: d[1 - l] }; return r.diff(o).add(function (t) { if (r.hasValue(t)) { var e = b(r, t); var n = p(r, t, e, c); var a = I(r, c, n); r.setItemGraphicEl(t, a), i.add(a), L(a, c, n) } }).update(function (t, e) { var n = o.getItemGraphicEl(e); if (r.hasValue(t)) { var s = b(r, t); var l = p(r, t, s, c); var u = T(r, l); n && u !== n.__pictorialShapeStr && (i.remove(n), r.setItemGraphicEl(t, null), n = null), n ? (function (t, e, n) { var i = n.animationModel; var r = n.dataIndex; var o = t.__pictorialBundle; a.updateProps(o, { position: n.bundlePosition.slice() }, i, r), n.symbolRepeat ? m(t, e, n, !0) : y(t, e, n, !0); x(t, n, !0), _(t, e, n, !0) }(n, c, l)) : n = I(r, c, l, !0), r.setItemGraphicEl(t, n), n.__pictorialSymbolMeta = l, i.add(n), L(n, c, l) } else i.remove(n) }).remove(function (t) { var e = o.getItemGraphicEl(t); e && A(o, t, e.__pictorialSymbolMeta.animationModel, e) }).execute(), this._data = r, this.group }, dispose: r.noop, remove: function (t, e) { var n = this.group; var i = this._data; t.get('animation') ? i && i.eachItemGraphicEl(function (e) { A(i, e.dataIndex, t, e) }) : n.removeAll() } }); t.exports = k }, function (t, e, n) { var i = n(1); n(188), n(418), n(419); var r = n(420); var a = n(421); var o = n(63); i.registerLayout(r), i.registerVisual(a), i.registerProcessor(o('themeRiver')) }, function (t, e, n) { var i = n(410); n(20).register('single', { create: function (t, e) { var n = []; return t.eachComponent('singleAxis', function (r, a) { var o = new i(r, t, e); o.name = 'single_' + a, o.resize(r, e), r.coordinateSystem = o, n.push(o) }), t.eachSeries(function (e) { if (e.get('coordinateSystem') === 'singleAxis') { var n = t.queryComponents({ mainType: 'singleAxis', index: e.get('singleAxisIndex'), id: e.get('singleAxisId') })[0]; e.coordinateSystem = n && n.coordinateSystem } }), n }, dimensions: i.prototype.dimensions }) }, function (t, e, n) { var i = n(411); var r = n(21); var a = n(6).getLayoutRect; var o = n(0).each; function s (t, e, n) { this.dimension = 'single', this.dimensions = ['single'], this._axis = null, this._rect, this._init(t, e, n), this.model = t }s.prototype = { type: 'singleAxis', axisPointerEnabled: !0, constructor: s, _init: function (t, e, n) { var a = this.dimension; var o = new i(a, r.createScaleByModel(t), [0, 0], t.get('type'), t.get('position')); var s = o.type === 'category'; o.onBand = s && t.get('boundaryGap'), o.inverse = t.get('inverse'), o.orient = t.get('orient'), t.axis = o, o.model = t, o.coordinateSystem = this, this._axis = o }, update: function (t, e) { t.eachSeries(function (t) { if (t.coordinateSystem === this) { var e = t.getData(); o(e.mapDimension(this.dimension, !0), function (t) { this._axis.scale.unionExtentFromData(e, t) }, this), r.niceScaleExtent(this._axis.scale, this._axis.model) } }, this) }, resize: function (t, e) { this._rect = a({ left: t.get('left'), top: t.get('top'), right: t.get('right'), bottom: t.get('bottom'), width: t.get('width'), height: t.get('height') }, { width: e.getWidth(), height: e.getHeight() }), this._adjustAxis() }, getRect: function () { return this._rect }, _adjustAxis: function () { var t = this._rect; var e = this._axis; var n = e.isHorizontal(); var i = n ? [0, t.width] : [0, t.height]; var r = e.reverse ? 1 : 0; e.setExtent(i[r], i[1 - r]), this._updateAxisTransform(e, n ? t.x : t.y) }, _updateAxisTransform: function (t, e) { var n = t.getExtent(); var i = n[0] + n[1]; var r = t.isHorizontal(); t.toGlobalCoord = r ? function (t) { return t + e } : function (t) { return i - t + e }, t.toLocalCoord = r ? function (t) { return t - e } : function (t) { return i - t + e } }, getAxis: function () { return this._axis }, getBaseAxis: function () { return this._axis }, getAxes: function () { return [this._axis] }, getTooltipAxes: function () { return { baseAxes: [this.getAxis()] } }, containPoint: function (t) { var e = this.getRect(); var n = this.getAxis(); return n.orient === 'horizontal' ? n.contain(n.toLocalCoord(t[0])) && t[1] >= e.y && t[1] <= e.y + e.height : n.contain(n.toLocalCoord(t[1])) && t[0] >= e.y && t[0] <= e.y + e.height }, pointToData: function (t) { var e = this.getAxis(); return [e.coordToData(e.toLocalCoord(t[e.orient === 'horizontal' ? 0 : 1]))] }, dataToPoint: function (t) { var e = this.getAxis(); var n = this.getRect(); var i = []; var r = e.orient === 'horizontal' ? 0 : 1; return t instanceof Array && (t = t[0]), i[r] = e.toGlobalCoord(e.dataToCoord(+t)), i[1 - r] = r === 0 ? n.y + n.height / 2 : n.x + n.width / 2, i } }; var l = s; t.exports = l }, function (t, e, n) { var i = n(0); var r = n(31); var a = function (t, e, n, i, a) { r.call(this, t, e, n), this.type = i || 'value', this.position = a || 'bottom', this.orient = null }; a.prototype = { constructor: a, model: null, isHorizontal: function () { var t = this.position; return t === 'top' || t === 'bottom' }, pointToData: function (t, e) { return this.coordinateSystem.pointToData(t, e)[0] }, toGlobalCoord: null, toLocalCoord: null }, i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { var i = n(0); var r = n(32); var a = n(2); var o = n(189); var s = n(39); var l = ['axisLine', 'axisTickLabel', 'axisName']; var u = s.extend({ type: 'singleAxis', axisPointerClass: 'SingleAxisPointer', render: function (t, e, n, a) { var s = this.group; s.removeAll(); var c = o.layout(t); var h = new r(t, c); i.each(l, h.add, h), s.add(h.getGroup()), t.get('splitLine.show') && this._splitLine(t), u.superCall(this, 'render', t, e, n, a) }, _splitLine: function (t) { var e = t.axis; if (!e.scale.isBlank()) { var n = t.getModel('splitLine'); var i = n.getModel('lineStyle'); var r = i.get('width'); var o = i.get('color'); o = o instanceof Array ? o : [o]; for (var s = t.coordinateSystem.getRect(), l = e.isHorizontal(), u = [], c = 0, h = e.getTicksCoords({ tickModel: n }), d = [], f = [], p = 0; p < h.length; ++p) { var g = e.toGlobalCoord(h[p].coord); l ? (d[0] = g, d[1] = s.y, f[0] = g, f[1] = s.y + s.height) : (d[0] = s.x, d[1] = g, f[0] = s.x + s.width, f[1] = g); var v = c++ % o.length; u[v] = u[v] || [], u[v].push(new a.Line({ subPixelOptimize: !0, shape: { x1: d[0], y1: d[1], x2: f[0], y2: f[1] }, style: { lineWidth: r }, silent: !0 })) } for (p = 0; p < u.length; ++p) this.group.add(a.mergePath(u[p], { style: { stroke: o[p % o.length], lineDash: i.getLineDash(r), lineWidth: r }, silent: !0 })) } } }); var c = u; t.exports = c }, function (t, e, n) { var i = n(0); var r = n(13); var a = n(79); var o = n(48); var s = r.extend({ type: 'singleAxis', layoutMode: 'box', axis: null, coordinateSystem: null, getCoordSysModel: function () { return this } }); i.merge(s.prototype, o), a('single', s, function (t, e) { return e.type || (e.data ? 'category' : 'value') }, { left: '5%', top: '5%', right: '5%', bottom: '5%', type: 'value', position: 'bottom', orient: 'horizontal', axisLine: { show: !0, lineStyle: { width: 1, type: 'solid' } }, tooltip: { show: !0 }, axisTick: { show: !0, length: 6, lineStyle: { width: 1 } }, axisLabel: { show: !0, interval: 'auto' }, splitLine: { show: !0, lineStyle: { type: 'dashed', opacity: 0.2 } } }); var l = s; t.exports = l }, function (t, e, n) { var i = n(0); var r = n(4).makeInner; var a = n(80); var o = n(190); var s = i.each; var l = i.curry; var u = r(); function c (t, e, n, r, a) { var o = t.axis; if (!o.scale.isBlank() && o.containData(e)) if (t.involveSeries) { var l = (function (t, e) { var n = e.axis; var i = n.dim; var r = t; var a = []; var o = Number.MAX_VALUE; var l = -1; return s(e.seriesModels, function (e, u) { var c; var h; var d = e.getData().mapDimension(i, !0); if (e.getAxisTooltipData) { var f = e.getAxisTooltipData(d, t, n); h = f.dataIndices, c = f.nestestValue } else { if (!(h = e.getData().indicesOfNearest(d[0], t, n.type === 'category' ? 0.5 : null)).length) return; c = e.getData().get(d[0], h[0]) } if (c != null && isFinite(c)) { var p = t - c; var g = Math.abs(p); g <= o && ((g < o || p >= 0 && l < 0) && (o = g, l = p, r = c, a.length = 0), s(h, function (t) { a.push({ seriesIndex: e.seriesIndex, dataIndexInside: t, dataIndex: e.getData().getRawIndex(t) }) })) } }), { payloadBatch: a, snapToValue: r } }(e, t)); var u = l.payloadBatch; var c = l.snapToValue; u[0] && a.seriesIndex == null && i.extend(a, u[0]), !r && t.snap && o.containData(c) && c != null && (e = c), n.showPointer(t, e, u, a), n.showTooltip(t, l, c) } else n.showPointer(t, e) } function h (t, e, n, i) { t[e.key] = { value: n, payloadBatch: i } } function d (t, e, n, i) { var r = n.payloadBatch; var o = e.axis; var s = o.model; var l = e.axisPointerModel; if (e.triggerTooltip && r.length) { var u = e.coordSys.model; var c = a.makeKey(u); var h = t.map[c]; h || (h = t.map[c] = { coordSysId: u.id, coordSysIndex: u.componentIndex, coordSysType: u.type, coordSysMainType: u.mainType, dataByAxis: [] }, t.list.push(h)), h.dataByAxis.push({ axisDim: o.dim, axisIndex: s.componentIndex, axisType: s.type, axisId: s.id, value: i, valueLabelOpt: { precision: l.get('label.precision'), formatter: l.get('label.formatter') }, seriesDataIndices: r.slice() }) } } function f (t) { var e = t.axis.model; var n = {}; var i = n.axisDim = t.axis.dim; return n.axisIndex = n[i + 'AxisIndex'] = e.componentIndex, n.axisName = n[i + 'AxisName'] = e.name, n.axisId = n[i + 'AxisId'] = e.id, n } function p (t) { return !t || t[0] == null || isNaN(t[0]) || t[1] == null || isNaN(t[1]) }t.exports = function (t, e, n) { var r = t.currTrigger; var a = [t.x, t.y]; var g = t; var v = t.dispatchAction || i.bind(n.dispatchAction, n); var m = e.getComponent('axisPointer').coordSysAxesInfo; if (m) { p(a) && (a = o({ seriesIndex: g.seriesIndex, dataIndex: g.dataIndex }, e).point); var y = p(a); var x = g.axesInfo; var _ = m.axesInfo; var b = r === 'leave' || p(a); var w = {}; var S = {}; var M = { list: [], map: {} }; var I = { showPointer: l(h, S), showTooltip: l(d, M) }; s(m.coordSysMap, function (t, e) { var n = y || t.containPoint(a); s(m.coordSysAxesInfo[e], function (t, e) { var i = t.axis; var r = (function (t, e) { for (var n = 0; n < (t || []).length; n++) { var i = t[n]; if (e.axis.dim === i.axisDim && e.axis.model.componentIndex === i.axisIndex) return i } }(x, t)); if (!b && n && (!x || r)) { var o = r && r.value; o != null || y || (o = i.pointToData(a)), o != null && c(t, o, I, !1, w) } }) }); var A = {}; return s(_, function (t, e) { var n = t.linkGroup; n && !S[e] && s(n.axesInfo, function (e, i) { var r = S[i]; if (e !== t && r) { var a = r.value; n.mapper && (a = t.axis.scale.parse(n.mapper(a, f(e), f(t)))), A[t.key] = a } }) }), s(A, function (t, e) { c(_[e], t, I, !0, w) }), (function (t, e, n) { var i = n.axesInfo = []; s(e, function (e, n) { var r = e.axisPointerModel.option; var a = t[n]; a ? (!e.useHandle && (r.status = 'show'), r.value = a.value, r.seriesDataIndices = (a.payloadBatch || []).slice()) : !e.useHandle && (r.status = 'hide'), r.status === 'show' && i.push({ axisDim: e.axis.dim, axisIndex: e.axis.model.componentIndex, value: r.value }) }) }(S, _, w)), (function (t, e, n, i) { if (p(e) || !t.list.length) return void i({ type: 'hideTip' }); var r = ((t.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {}; i({ type: 'showTip', escapeConnect: !0, x: e[0], y: e[1], tooltipOption: n.tooltipOption, position: n.position, dataIndexInside: r.dataIndexInside, dataIndex: r.dataIndex, seriesIndex: r.seriesIndex, dataByCoordSys: t.list }) }(M, a, t, v)), (function (t, e, n) { var r = n.getZr(); var a = u(r).axisPointerLastHighlights || {}; var o = u(r).axisPointerLastHighlights = {}; s(t, function (t, e) { var n = t.axisPointerModel.option; n.status === 'show' && s(n.seriesDataIndices, function (t) { var e = t.seriesIndex + ' | ' + t.dataIndex; o[e] = t }) }); var l = []; var c = []; i.each(a, function (t, e) { !o[e] && c.push(t) }), i.each(o, function (t, e) { !a[e] && l.push(t) }), c.length && n.dispatchAction({ type: 'downplay', escapeConnect: !0, batch: c }), l.length && n.dispatchAction({ type: 'highlight', escapeConnect: !0, batch: l }) }(_, 0, n)), w } } }, function (t, e, n) { var i = n(1).extendComponentModel({ type: 'axisPointer', coordSysAxesInfo: null, defaultOption: { show: 'auto', triggerOn: null, zlevel: 0, z: 50, type: 'line', snap: !1, triggerTooltip: !0, value: null, status: null, link: [], animation: null, animationDurationUpdate: 200, lineStyle: { color: '#aaa', width: 1, type: 'solid' }, shadowStyle: { color: 'rgba(150,150,150,0.3)' }, label: { show: !0, formatter: null, precision: 'auto', margin: 3, color: '#fff', padding: [5, 7, 5, 7], backgroundColor: 'auto', borderColor: null, borderWidth: 0, shadowBlur: 3, shadowColor: '#aaa' }, handle: { show: !1, icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z', size: 45, margin: 50, color: '#333', shadowBlur: 3, shadowColor: '#aaa', shadowOffsetX: 0, shadowOffsetY: 2, throttle: 40 } } }); t.exports = i }, function (t, e, n) { var i = n(1); var r = n(191); var a = i.extendComponentView({ type: 'axisPointer', render: function (t, e, n) { var i = e.getComponent('tooltip'); var a = t.get('triggerOn') || i && i.get('triggerOn') || 'mousemove|click'; r.register('axisPointer', n, function (t, e, n) { a !== 'none' && (t === 'leave' || a.indexOf(t) >= 0) && n({ type: 'updateAxisPointer', currTrigger: t, x: e && e.offsetX, y: e && e.offsetY }) }) }, remove: function (t, e) { r.unregister(e.getZr(), 'axisPointer'), a.superApply(this._model, 'remove', arguments) }, dispose: function (t, e) { r.unregister('axisPointer', e), a.superApply(this._model, 'dispose', arguments) } }); var o = a; t.exports = o }, function (t, e, n) { var i = n(109); var r = n(84); var a = n(189); var o = n(39); var s = ['x', 'y']; var l = ['width', 'height']; var u = i.extend({ makeElOption: function (t, e, n, i, o) { var s = n.axis; var l = s.coordinateSystem; var u = d(l, 1 - h(s)); var f = l.dataToPoint(e)[0]; var p = i.get('type'); if (p && p !== 'none') { var g = r.buildElStyle(i); var v = c[p](s, f, u); v.style = g, t.graphicKey = v.type, t.pointer = v } var m = a.layout(n); r.buildCartesianSingleLabelElOption(e, t, m, n, i, o) }, getHandleTransform: function (t, e, n) { var i = a.layout(e, { labelInside: !1 }); return i.labelMargin = n.get('handle.margin'), { position: r.getTransformedPosition(e.axis, t, i), rotation: i.rotation + (i.labelDirection < 0 ? Math.PI : 0) } }, updateHandleTransform: function (t, e, n, i) { var r = n.axis; var a = r.coordinateSystem; var o = h(r); var s = d(a, o); var l = t.position; l[o] += e[o], l[o] = Math.min(s[1], l[o]), l[o] = Math.max(s[0], l[o]); var u = d(a, 1 - o); var c = (u[1] + u[0]) / 2; var f = [c, c]; return f[o] = l[o], { position: l, rotation: t.rotation, cursorPoint: f, tooltipOption: { verticalAlign: 'middle' } } } }); var c = { line: function (t, e, n) { return { type: 'Line', subPixelOptimize: !0, shape: r.makeLineShape([e, n[0]], [e, n[1]], h(t)) } }, shadow: function (t, e, n) { var i = t.getBandWidth(); var a = n[1] - n[0]; return { type: 'Rect', shape: r.makeRectShape([e - i / 2, n[0]], [i, a], h(t)) } } }; function h (t) { return t.isHorizontal() ? 0 : 1 } function d (t, e) { var n = t.getRect(); return [n[s[e]], n[s[e]] + n[l[e]]] }o.registerAxisPointerClass('SingleAxisPointer', u); var f = u; t.exports = f }, function (t, e, n) { var i = n(14); var r = n(47); var a = n(58).getDimensionTypeByAxis; var o = n(18); var s = n(0); var l = n(4).groupData; var u = n(9).encodeHTML; var c = i.extend({ type: 'series.themeRiver', dependencies: ['singleAxis'], nameMap: null, init: function (t) { c.superApply(this, 'init', arguments), this.legendDataProvider = function () { return this.getRawData() } }, fixData: function (t) { var e = t.length; var n = l(t, function (t) { return t[2] }); var i = []; n.buckets.each(function (t, e) { i.push({ name: e, dataList: t }) }); for (var r = i.length, a = -1, o = -1, s = 0; s < r; ++s) { var u = i[s].dataList.length; u > a && (a = u, o = s) } for (var c = 0; c < r; ++c) if (c !== o) for (var h = i[c].name, d = 0; d < a; ++d) { for (var f = i[o].dataList[d][0], p = i[c].dataList.length, g = -1, v = 0; v < p; ++v) { if (i[c].dataList[v][0] === f) { g = v; break } }g === -1 && (t[e] = [], t[e][0] = f, t[e][1] = 0, t[e][2] = h, e++) } return t }, getInitialData: function (t, e) { for (var n = e.queryComponents({ mainType: 'singleAxis', index: this.get('singleAxisIndex'), id: this.get('singleAxisId') })[0].get('type'), i = s.filter(t.data, function (t) { return void 0 !== t[2] }), l = this.fixData(i || []), u = [], c = this.nameMap = s.createHashMap(), h = 0, d = 0; d < l.length; ++d)u.push(l[d][2]), c.get(l[d][2]) || (c.set(l[d][2], h), h++); var f = r(l, { coordDimensions: ['single'], dimensionsDefine: [{ name: 'time', type: a(n) }, { name: 'value', type: 'float' }, { name: 'name', type: 'ordinal' }], encodeDefine: { single: 0, value: 1, itemName: 2 } }); var p = new o(f, this); return p.initData(l), p }, getLayerSeries: function () { for (var t = this.getData(), e = t.count(), n = [], i = 0; i < e; ++i)n[i] = i; var r = t.mapDimension('single'); var a = l(n, function (e) { return t.get('name', e) }); var o = []; return a.buckets.each(function (e, n) { e.sort(function (e, n) { return t.get(r, e) - t.get(r, n) }), o.push({ name: n, indices: e }) }), o }, getAxisTooltipData: function (t, e, n) { s.isArray(t) || (t = t ? [t] : []); for (var i, r = this.getData(), a = this.getLayerSeries(), o = [], l = a.length, u = 0; u < l; ++u) { for (var c = Number.MAX_VALUE, h = -1, d = a[u].indices.length, f = 0; f < d; ++f) { var p = r.get(t[0], a[u].indices[f]); var g = Math.abs(p - e); g <= c && (i = p, c = g, h = a[u].indices[f]) }o.push(h) } return { dataIndices: o, nestestValue: i } }, formatTooltip: function (t) { var e = this.getData(); var n = e.getName(t); var i = e.get(e.mapDimension('value'), t); return (isNaN(i) || i == null) && (i = '-'), u(n + ' : ' + i) }, defaultOption: { zlevel: 0, z: 2, coordinateSystem: 'singleAxis', boundaryGap: ['10%', '10%'], singleAxisIndex: 0, animationEasing: 'linear', label: { margin: 4, show: !0, position: 'left', color: '#000', fontSize: 11 }, emphasis: { label: { show: !0 } } } }); var h = c; t.exports = h }, function (t, e, n) { var i = n(1); var r = n(165).Polygon; var a = n(2); var o = n(0); var s = o.bind; var l = o.extend; var u = n(37); var c = i.extendChartView({ type: 'themeRiver', init: function () { this._layers = [] }, render: function (t, e, n) { var i = t.getData(); var o = this.group; var c = t.getLayerSeries(); var h = i.getLayout('layoutInfo'); var d = h.rect; var f = h.boundaryGap; function p (t) { return t.name }o.attr('position', [0, d.y + f[0]]); var g = new u(this._layersSeries || [], c, p, p); var v = {}; function m (e, n, s) { var u = this._layers; if (e !== 'remove') { for (var h, d, f, p = [], g = [], m = c[n].indices, y = 0; y < m.length; y++) { var x = i.getItemLayout(m[y]); var _ = x.x; var b = x.y0; var w = x.y; p.push([_, b]), g.push([_, b + w]), h = i.getItemVisual(m[y], 'color') } var S = i.getItemLayout(m[0]); var M = i.getItemModel(m[y - 1]); var I = M.getModel('label'); var A = I.get('margin'); if (e === 'add') { var T = v[n] = new a.Group(); d = new r({ shape: { points: p, stackedOnPoints: g, smooth: 0.4, stackedOnSmooth: 0.4, smoothConstraint: !1 }, z2: 0 }), f = new a.Text({ style: { x: S.x - A, y: S.y0 + S.y / 2 } }), T.add(d), T.add(f), o.add(T), d.setClipPath(function (t, e, n) { var i = new a.Rect({ shape: { x: t.x - 10, y: t.y - 10, width: 0, height: t.height + 20 } }); return a.initProps(i, { shape: { width: t.width + 20, height: t.height + 20 } }, e, n), i }(d.getBoundingRect(), t, function () { d.removeClipPath() })) } else { T = u[s]; d = T.childAt(0), f = T.childAt(1), o.add(T), v[n] = T, a.updateProps(d, { shape: { points: p, stackedOnPoints: g } }, t), a.updateProps(f, { style: { x: S.x - A, y: S.y0 + S.y / 2 } }, t) } var C = M.getModel('emphasis.itemStyle'); var D = M.getModel('itemStyle'); a.setTextStyle(f.style, I, { text: I.get('show') ? t.getFormattedLabel(m[y - 1], 'normal') || i.getName(m[y - 1]) : null, textVerticalAlign: 'middle' }), d.setStyle(l({ fill: h }, D.getItemStyle(['color']))), a.setHoverStyle(d, C.getItemStyle()) } else o.remove(u[n]) }g.add(s(m, this, 'add')).update(s(m, this, 'update')).remove(s(m, this, 'remove')).execute(), this._layersSeries = c, this._layers = v }, dispose: function () {} }); t.exports = c }, function (t, e, n) { var i = n(0); var r = n(3); function a (t, e, n) { if (t.count()) for (var r, a = e.coordinateSystem, o = e.getLayerSeries(), s = t.mapDimension('single'), l = t.mapDimension('value'), u = i.map(o, function (e) { return i.map(e.indices, function (e) { var n = a.dataToPoint(t.get(s, e)); return n[1] = t.get(l, e), n }) }), c = (function (t) { for (var e = t.length, n = t[0].length, i = [], r = [], a = 0, o = {}, s = 0; s < n; ++s) { for (var l = 0, u = 0; l < e; ++l)u += t[l][s][1]; u > a && (a = u), i.push(u) } for (var c = 0; c < n; ++c)r[c] = (a - i[c]) / 2; a = 0; for (var h = 0; h < n; ++h) { var d = i[h] + r[h]; d > a && (a = d) } return o.y0 = r, o.max = a, o }(u)), h = c.y0, d = n / c.max, f = o.length, p = o[0].indices.length, g = 0; g < p; ++g) { r = h[g] * d, t.setItemLayout(o[0].indices[g], { layerIndex: 0, x: u[0][g][0], y0: r, y: u[0][g][1] * d }); for (var v = 1; v < f; ++v)r += u[v - 1][g][1] * d, t.setItemLayout(o[v].indices[g], { layerIndex: v, x: u[v][g][0], y0: r, y: u[v][g][1] * d }) } }t.exports = function (t, e) { t.eachSeriesByType('themeRiver', function (t) { var e = t.getData(); var n = t.coordinateSystem; var i = {}; var o = n.getRect(); i.rect = o; var s = t.get('boundaryGap'); var l = n.getAxis(); (i.boundaryGap = s, l.orient === 'horizontal') ? (s[0] = r.parsePercent(s[0], o.height), s[1] = r.parsePercent(s[1], o.height), a(e, t, o.height - s[0] - s[1])) : (s[0] = r.parsePercent(s[0], o.width), s[1] = r.parsePercent(s[1], o.width), a(e, t, o.width - s[0] - s[1])); e.setLayout('layoutInfo', i) }) } }, function (t, e, n) { var i = n(0).createHashMap; t.exports = function (t) { t.eachSeriesByType('themeRiver', function (t) { var e = t.getData(); var n = t.getRawData(); var r = t.get('color'); var a = i(); e.each(function (t) { a.set(e.getRawIndex(t), t) }), n.each(function (i) { var o = n.getName(i); var s = r[(t.nameMap.get(o) - 1) % r.length]; n.setItemVisual(i, 'color', s); var l = a.get(i); l != null && e.setItemVisual(l, 'color', s) }) }) } }, function (t, e, n) { var i = n(1); var r = n(0); n(423), n(424), n(426); var a = n(81); var o = n(427); var s = n(63); i.registerVisual(r.curry(a, 'sunburst')), i.registerLayout(r.curry(o, 'sunburst')), i.registerProcessor(r.curry(s, 'sunburst')) }, function (t, e, n) { var i = n(0); var r = n(14); var a = n(104); var o = n(40).wrapTreePathInfo; var s = r.extend({ type: 'series.sunburst', _viewRoot: null, getInitialData: function (t, e) { var n = { name: t.name, children: t.data }; !(function t (e) { var n = 0; i.each(e.children, function (e) { t(e); var r = e.value; i.isArray(r) && (r = r[0]), n += r }); var r = e.value; i.isArray(r) && (r = r[0]); (r == null || isNaN(r)) && (r = n); r < 0 && (r = 0); i.isArray(e.value) ? e.value[0] = r : e.value = r }(n)); var r = t.levels || []; var o = {}; return o.levels = r, a.createTree(n, this, o).data }, optionUpdated: function () { this.resetViewRoot() }, getDataParams: function (t) { var e = r.prototype.getDataParams.apply(this, arguments); var n = this.getData().tree.getNodeByDataIndex(t); return e.treePathInfo = o(n, this), e }, defaultOption: { zlevel: 0, z: 2, center: ['50%', '50%'], radius: [0, '75%'], clockwise: !0, startAngle: 90, minAngle: 0, percentPrecision: 2, stillShowZeroSum: !0, highlightPolicy: 'descendant', nodeClick: 'rootToNode', renderLabelForZeroData: !1, label: { rotate: 'radial', show: !0, opacity: 1, align: 'center', position: 'inside', distance: 5, silent: !0, emphasis: {} }, itemStyle: { borderWidth: 1, borderColor: 'white', borderType: 'solid', shadowBlur: 0, shadowColor: 'rgba(0, 0, 0, 0.2)', shadowOffsetX: 0, shadowOffsetY: 0, opacity: 1, emphasis: {}, highlight: { opacity: 1 }, downplay: { opacity: 0.9 } }, animationType: 'expansion', animationDuration: 1e3, animationDurationUpdate: 500, animationEasing: 'cubicOut', data: [], levels: [], sort: 'desc' }, getViewRoot: function () { return this._viewRoot }, resetViewRoot: function (t) { t ? this._viewRoot = t : t = this._viewRoot; var e = this.getRawData().tree.root; t && (t === e || e.contains(t)) || (this._viewRoot = e) } }); t.exports = s }, function (t, e, n) { var i = n(0); var r = n(24); var a = n(425); var o = n(37); var s = r.extend({ type: 'sunburst', init: function () {}, render: function (t, e, n, r) { var s = this; this.seriesModel = t, this.api = n, this.ecModel = e; var l = t.getData(); var u = l.tree.root; var c = t.getViewRoot(); var h = this.group; var d = t.get('renderLabelForZeroData'); var f = []; c.eachNode(function (t) { f.push(t) }); var p = this._oldChildren || []; if ((function (n, r) { if (n.length === 0 && r.length === 0) return; function s (t) { return t.getId() } function c (i, o) { !(function (n, i) { d || !n || n.getValue() || (n = null); if (n !== u && i !== u) if (i && i.piece)n ? (i.piece.updateData(!1, n, 'normal', t, e), l.setItemGraphicEl(n.dataIndex, i.piece)) : (function (t) { if (!t) return; t.piece && (h.remove(t.piece), t.piece = null) }(i)); else if (n) { var r = new a(n, t, e); h.add(r), l.setItemGraphicEl(n.dataIndex, r) } }(i == null ? null : n[i], o == null ? null : r[o])) } new o(r, n, s, s).add(c).update(c).remove(i.curry(c, null)).execute() }(f, p)), (function (n, i) { if (i.depth > 0) { s.virtualPiece ? s.virtualPiece.updateData(!1, n, 'normal', t, e) : (s.virtualPiece = new a(n, t, e), h.add(s.virtualPiece)), i.piece._onclickEvent && i.piece.off('click', i.piece._onclickEvent); var r = function (t) { s._rootToNode(i.parentNode) }; i.piece._onclickEvent = r, s.virtualPiece.on('click', r) } else s.virtualPiece && (h.remove(s.virtualPiece), s.virtualPiece = null) }(u, c)), r && r.highlight && r.highlight.piece) { var g = t.getShallow('highlightPolicy'); r.highlight.piece.onEmphasis(g) } else if (r && r.unhighlight) { var v = this.virtualPiece; !v && u.children.length && (v = u.children[0].piece), v && v.onNormal() } this._initEvents(), this._oldChildren = f }, dispose: function () {}, _initEvents: function () { var t = this; var e = function (e) { var n = !1; t.seriesModel.getViewRoot().eachNode(function (i) { if (!n && i.piece && i.piece.childAt(0) === e.target) { var r = i.getModel().get('nodeClick'); if (r === 'rootToNode')t._rootToNode(i); else if (r === 'link') { var a = i.getModel(); var o = a.get('link'); if (o) { var s = a.get('target', !0) || '_blank'; window.open(o, s) } }n = !0 } }) }; this.group._onclickEvent && this.group.off('click', this.group._onclickEvent), this.group.on('click', e), this.group._onclickEvent = e }, _rootToNode: function (t) { t !== this.seriesModel.getViewRoot() && this.api.dispatchAction({ type: 'sunburstRootToNode', from: this.uid, seriesId: this.seriesModel.id, targetNode: t }) }, containPoint: function (t, e) { var n = e.getData().getItemLayout(0); if (n) { var i = t[0] - n.cx; var r = t[1] - n.cy; var a = Math.sqrt(i * i + r * r); return a <= n.r && a >= n.r0 } } }); t.exports = s }, function (t, e, n) { var i = n(0); var r = n(2); var a = { NONE: 'none', DESCENDANT: 'descendant', ANCESTOR: 'ancestor', SELF: 'self' }; var o = 2; var s = 4; function l (t, e, n) { r.Group.call(this); var i = new r.Sector({ z2: o }); i.seriesIndex = e.seriesIndex; var a = new r.Text({ z2: s, silent: t.getModel('label').get('silent') }); function l () { a.ignore = a.hoverIgnore } function u () { a.ignore = a.normalIgnore } this.add(i), this.add(a), this.updateData(!0, t, 'normal', e, n), this.on('emphasis', l).on('normal', u).on('mouseover', l).on('mouseout', u) } var u = l.prototype; u.updateData = function (t, e, n, a, o) { this.node = e, e.piece = this, a = a || this._seriesModel, o = o || this._ecModel; var s = this.childAt(0); s.dataIndex = e.dataIndex; var l = e.getModel(); var u = e.getLayout(); var c = i.extend({}, u); c.label = null; var h = (function (t, e, n) { var r = t.getVisual('color'); var a = t.getVisual('visualMeta'); a && a.length !== 0 || (r = null); var o = t.getModel('itemStyle').get('color'); if (o) return o; if (r) return r; if (t.depth === 0) return n.option.color[0]; var s = n.option.color.length; o = n.option.color[(function (t) { var e = t; for (;e.depth > 1;)e = e.parentNode; var n = t.getAncestors()[0]; return i.indexOf(n.children, e) }(t)) % s]; return o }(e, 0, o)); !(function (t, e, n) { e.getData().setItemVisual(t.dataIndex, 'color', n) }(e, a, h)); var d; var f = l.getModel('itemStyle').getItemStyle(); if (n === 'normal')d = f; else { var p = l.getModel(n + '.itemStyle').getItemStyle(); d = i.merge(p, f) }d = i.defaults({ lineJoin: 'bevel', fill: d.fill || h }, d), t ? (s.setShape(c), s.shape.r = u.r0, r.updateProps(s, { shape: { r: u.r } }, a, e.dataIndex), s.useStyle(d)) : typeof d.fill === 'object' && d.fill.type || typeof s.style.fill === 'object' && s.style.fill.type ? (r.updateProps(s, { shape: c }, a), s.useStyle(d)) : r.updateProps(s, { shape: c, style: d }, a), this._updateLabel(a, h, n); var g = l.getShallow('cursor'); if (g && s.attr('cursor', g), t) { var v = a.getShallow('highlightPolicy'); this._initEvents(s, e, a, v) } this._seriesModel = a || this._seriesModel, this._ecModel = o || this._ecModel }, u.onEmphasis = function (t) { var e = this; this.node.hostTree.root.eachNode(function (n) { var i, r, o; n.piece && (e.node === n ? n.piece.updateData(!1, n, 'emphasis') : (i = n, r = e.node, (o = t) !== a.NONE && (o === a.SELF ? i === r : o === a.ANCESTOR ? i === r || i.isAncestorOf(r) : i === r || i.isDescendantOf(r)) ? n.piece.childAt(0).trigger('highlight') : t !== a.NONE && n.piece.childAt(0).trigger('downplay'))) }) }, u.onNormal = function () { this.node.hostTree.root.eachNode(function (t) { t.piece && t.piece.updateData(!1, t, 'normal') }) }, u.onHighlight = function () { this.updateData(!1, this.node, 'highlight') }, u.onDownplay = function () { this.updateData(!1, this.node, 'downplay') }, u._updateLabel = function (t, e, n) { var a = this.node.getModel(); var o = a.getModel('label'); var s = n === 'normal' || n === 'emphasis' ? o : a.getModel(n + '.label'); var l = a.getModel('emphasis.label'); var u = i.retrieve(t.getFormattedLabel(this.node.dataIndex, n, null, null, 'label'), this.node.name); !1 === I('show') && (u = ''); var c = this.node.getLayout(); var h = s.get('minAngle'); h == null && (h = o.get('minAngle')), h = h / 180 * Math.PI; var d = c.endAngle - c.startAngle; h != null && Math.abs(d) < h && (u = ''); var f = this.childAt(1); r.setLabelStyle(f.style, f.hoverStyle || {}, o, l, { defaultText: s.getShallow('show') ? u : null, autoColor: e, useInsideStyle: !0 }); var p; var g = (c.startAngle + c.endAngle) / 2; var v = Math.cos(g); var m = Math.sin(g); var y = I('position'); var x = I('distance') || 0; var _ = I('align'); y === 'outside' ? (p = c.r + x, _ = g > Math.PI / 2 ? 'right' : 'left') : _ && _ !== 'center' ? _ === 'left' ? (p = c.r0 + x, g > Math.PI / 2 && (_ = 'right')) : _ === 'right' && (p = c.r - x, g > Math.PI / 2 && (_ = 'left')) : (p = (c.r + c.r0) / 2, _ = 'center'), f.attr('style', { text: u, textAlign: _, textVerticalAlign: I('verticalAlign') || 'middle', opacity: I('opacity') }); var b = p * v + c.cx; var w = p * m + c.cy; f.attr('position', [b, w]); var S = I('rotate'); var M = 0; function I (t) { var e = s.get(t); return e == null ? o.get(t) : e }S === 'radial' ? (M = -g) < -Math.PI / 2 && (M += Math.PI) : S === 'tangential' ? (M = Math.PI / 2 - g) > Math.PI / 2 ? M -= Math.PI : M < -Math.PI / 2 && (M += Math.PI) : typeof S === 'number' && (M = S * Math.PI / 180), f.attr('rotation', M) }, u._initEvents = function (t, e, n, i) { t.off('mouseover').off('mouseout').off('emphasis').off('normal'); var r = this; var a = function () { r.onEmphasis(i) }; var o = function () { r.onNormal() }; n.isAnimationEnabled() && t.on('mouseover', a).on('mouseout', o).on('emphasis', a).on('normal', o).on('downplay', function () { r.onDownplay() }).on('highlight', function () { r.onHighlight() }) }, i.inherits(l, r.Group); var c = l; t.exports = c }, function (t, e, n) { var i = n(1); var r = n(40); var a = 'sunburstRootToNode'; i.registerAction({ type: a, update: 'updateView' }, function (t, e) { e.eachComponent({ mainType: 'series', subType: 'sunburst', query: t }, function (e, n) { var i = r.retrieveTargetInfo(t, [a], e); if (i) { var o = e.getViewRoot(); o && (t.direction = r.aboveViewRoot(o, i.node) ? 'rollUp' : 'drillDown'), e.resetViewRoot(i.node) } }) }); var o = 'sunburstHighlight'; i.registerAction({ type: o, update: 'updateView' }, function (t, e) { e.eachComponent({ mainType: 'series', subType: 'sunburst', query: t }, function (e, n) { var i = r.retrieveTargetInfo(t, [o], e); i && (t.highlight = i.node) }) }); i.registerAction({ type: 'sunburstUnhighlight', update: 'updateView' }, function (t, e) { e.eachComponent({ mainType: 'series', subType: 'sunburst', query: t }, function (e, n) { t.unhighlight = !0 }) }) }, function (t, e, n) { var i = n(3).parsePercent; var r = n(0); var a = Math.PI / 180; function o (t, e) { var n = t.children || []; t.children = (function (t, e) { if (typeof e === 'function') return t.sort(e); var n = e === 'asc'; return t.sort(function (t, e) { var i = (t.getValue() - e.getValue()) * (n ? 1 : -1); return i === 0 ? (t.dataIndex - e.dataIndex) * (n ? -1 : 1) : i }) }(n, e)), n.length && r.each(t.children, function (t) { o(t, e) }) }t.exports = function (t, e, n, s) { e.eachSeriesByType(t, function (t) { var e = t.get('center'); var s = t.get('radius'); r.isArray(s) || (s = [0, s]), r.isArray(e) || (e = [e, e]); var l = n.getWidth(); var u = n.getHeight(); var c = Math.min(l, u); var h = i(e[0], l); var d = i(e[1], u); var f = i(s[0], c / 2); var p = i(s[1], c / 2); var g = -t.get('startAngle') * a; var v = t.get('minAngle') * a; var m = t.getData().tree.root; var y = t.getViewRoot(); var x = y.depth; var _ = t.get('sort'); _ != null && o(y, _); var b = 0; r.each(y.children, function (t) { !isNaN(t.getValue()) && b++ }); var w = y.getValue(); var S = Math.PI / (w || b) * 2; var M = y.depth > 0; var I = y.height - (M ? -1 : 1); var A = (p - f) / (I || 1); var T = t.get('clockwise'); var C = t.get('stillShowZeroSum'); var D = T ? 1 : -1; var L = function (t, e) { if (t) { var n = e; if (t !== m) { var a = t.getValue(); var o = w === 0 && C ? S : a * S; o < v && (o = v), n = e + D * o; var s = t.depth - x - (M ? -1 : 1); var l = f + A * s; var u = f + A * (s + 1); var p = t.getModel(); p.get('r0') != null && (l = i(p.get('r0'), c / 2)), p.get('r') != null && (u = i(p.get('r'), c / 2)), t.setLayout({ angle: o, startAngle: e, endAngle: n, clockwise: T, cx: h, cy: d, r0: l, r: u }) } if (t.children && t.children.length) { var g = 0; r.each(t.children, function (t) { g += L(t, e + g) }) } return n - e } }; if (M) { var P = f; var k = f + A; var O = 2 * Math.PI; m.setLayout({ angle: O, startAngle: g, endAngle: g + O, clockwise: T, cx: h, cy: d, r0: P, r: k }) }L(y, g) }) } }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(2); var a = n(97).getDefaultLabel; var o = n(27); var s = n(77).getLayoutOnAxis; var l = n(37); var u = n(14); var c = n(12); var h = n(24); var d = n(60).createClipPath; var f = n(429); var p = n(430); var g = n(431); var v = n(432); var m = n(433); var y = r.CACHED_LABEL_STYLE_PROPERTIES; var x = ['itemStyle']; var _ = ['emphasis', 'itemStyle']; var b = ['label']; var w = ['emphasis', 'label']; var S = 'e\0\0'; var M = { cartesian2d: f, geo: p, singleAxis: g, polar: v, calendar: m }; function I (t, e, n, i, r) { n[t] == null || r || (e[t] = n[t], n[t] = i[t]) } function A (t, e, n, o) { var l = t.get('renderItem'); var u = t.coordinateSystem; var c = {}; u && (c = u.prepareCustoms ? u.prepareCustoms() : M[u.type](u)); var h; var d; var f; var p; var g; var v = i.defaults({ getWidth: o.getWidth, getHeight: o.getHeight, getZr: o.getZr, getDevicePixelRatio: o.getDevicePixelRatio, value: function (t, n) { return n == null && (n = h), e.get(e.getDimension(t || 0), n) }, style: function (n, o) { o == null && (o = h), S(o); var s = d.getModel(x).getItemStyle(); g != null && (s.fill = g); var l = e.getItemVisual(o, 'opacity'); l != null && (s.opacity = l); var u = n ? k(n, f) : f; return r.setTextStyle(s, u, null, { autoColor: g, isRectText: !0 }), s.text = u.getShallow('show') ? i.retrieve2(t.getFormattedLabel(o, 'normal'), a(e, o)) : null, n && O(s, n), s }, styleEmphasis: function (n, o) { o == null && (o = h), S(o); var s = d.getModel(_).getItemStyle(); var l = n ? k(n, p) : p; return r.setTextStyle(s, l, null, { isRectText: !0 }, !0), s.text = l.getShallow('show') ? i.retrieve3(t.getFormattedLabel(o, 'emphasis'), t.getFormattedLabel(o, 'normal'), a(e, o)) : null, n && O(s, n), s }, visual: function (t, n) { return n == null && (n = h), e.getItemVisual(n, t) }, barLayout: function (t) { if (u.getBaseAxis) { var e = u.getBaseAxis(); return s(i.defaults({ axis: e }, t), o) } }, currentSeriesIndices: function () { return n.getCurrentSeriesIndices() }, font: function (t) { return r.getFont(t, n) } }, c.api || {}); var m = { context: {}, seriesId: t.id, seriesName: t.name, seriesIndex: t.seriesIndex, coordSys: c.coordSys, dataInsideLength: e.count(), encode: T(t.getData()) }; var y = !0; return function (t, n) { return h = t, y = !0, l && l(i.defaults({ dataIndexInside: t, dataIndex: e.getRawIndex(t), actionType: n ? n.type : null }, m), v) }; function S (t) { t == null && (t = h), y && (d = e.getItemModel(t), f = d.getModel(b), p = d.getModel(w), g = e.getItemVisual(t, 'color'), y = !1) } } function T (t) { var e = {}; return i.each(t.dimensions, function (n, i) { var r = t.getDimensionInfo(n); if (!r.isExtraCoord) { var a = r.coordDim; (e[a] = e[a] || [])[r.coordDimIndex] = i } }), e } function C (t, e, n, i, r, a) { return (t = D(t, e, n, i, r, a, !0)) && a.setItemGraphicEl(e, t), t } function D (t, e, n, a, o, s, u) { var c; var h = !n; var d = (n = n || {}).type; var f = n.shape; var p = n.style; if (t && (h || d != null && d !== t.__customGraphicType || d === 'path' && ((c = f) && (c.hasOwnProperty('pathData') || c.hasOwnProperty('d'))) && R(f) !== t.__customPathData || d === 'image' && N(p, 'image') && p.image !== t.__customImagePath || d === 'text' && N(f, 'text') && p.text !== t.__customText) && (o.remove(t), t = null), !h) { var g = !t; return !t && (t = (function (t) { var e; var n = t.type; if (n === 'path') { var i = t.shape; var a = i.width != null && i.height != null ? { x: i.x || 0, y: i.y || 0, width: i.width, height: i.height } : null; var o = R(i); (e = r.makePath(o, null, a, i.layout || 'center')).__customPathData = o } else if (n === 'image')(e = new r.Image({})).__customImagePath = t.style.image; else if (n === 'text')(e = new r.Text({})).__customText = t.style.text; else if (n === 'group')e = new r.Group(); else { if (n === 'compoundPath') throw new Error('"compoundPath" is not supported yet.'); e = new (r.getShapeClass(n))() } return e.__customGraphicType = n, e.name = t.name, e }(n))), (function (t, e, n, a, o, s, l) { var u = {}; var c = n.style || {}; if (n.shape && (u.shape = i.clone(n.shape)), n.position && (u.position = n.position.slice()), n.scale && (u.scale = n.scale.slice()), n.origin && (u.origin = n.origin.slice()), n.rotation && (u.rotation = n.rotation), t.type === 'image' && n.style) { var h = u.style = {}; i.each(['x', 'y', 'width', 'height'], function (e) { I(e, h, c, t.style, s) }) } if (t.type === 'text' && n.style) { h = u.style = {}; i.each(['x', 'y'], function (e) { I(e, h, c, t.style, s) }), !c.hasOwnProperty('textFill') && c.fill && (c.textFill = c.fill), !c.hasOwnProperty('textStroke') && c.stroke && (c.textStroke = c.stroke) } if (t.type !== 'group' && (t.useStyle(c), s)) { t.style.opacity = 0; var d = c.opacity; d == null && (d = 1), r.initProps(t, { style: { opacity: d } }, a, e) }s ? t.attr(u) : r.updateProps(t, u, a, e), n.hasOwnProperty('z2') && t.attr('z2', n.z2 || 0), n.hasOwnProperty('silent') && t.attr('silent', n.silent), n.hasOwnProperty('invisible') && t.attr('invisible', n.invisible), n.hasOwnProperty('ignore') && t.attr('ignore', n.ignore), n.hasOwnProperty('info') && t.attr('info', n.info); var f = n.styleEmphasis; r.setElementHoverStyle(t, f), l && r.setAsHighDownDispatcher(t, !1 !== f) }(t, e, n, a, 0, g, u)), d === 'group' && (function (t, e, n, i, r) { var a = n.children; var o = a ? a.length : 0; var s = n.$mergeChildren; var u = s === 'byName' || n.diffChildrenByName; var c = !1 === s; if (!o && !u && !c) return; if (u) return h = { oldChildren: t.children() || [], newChildren: a || [], dataIndex: e, animatableModel: i, group: t, data: r }, void new l(h.oldChildren, h.newChildren, L, L, h).add(P).update(P).remove(E).execute(); var h; c && t.removeAll(); for (var d = 0; d < o; d++)a[d] && D(t.childAt(d), e, a[d], i, t, r) }(t, e, n, a, s)), o.add(t), t } } function L (t, e) { var n = t && t.name; return n != null ? n : S + e } function P (t, e) { var n = this.context; var i = t != null ? n.newChildren[t] : null; D(e != null ? n.oldChildren[e] : null, n.dataIndex, i, n.animatableModel, n.group, n.data) } function k (t, e) { var n = new c({}, e); return i.each(y, function (e, i) { t.hasOwnProperty(e) && (n.option[i] = t[e]) }), n } function O (t, e) { for (var n in e)!e.hasOwnProperty(n) && y.hasOwnProperty(n) || (t[n] = e[n]) } function E (t) { var e = this.context; var n = e.oldChildren[t]; n && e.group.remove(n) } function R (t) { return t && (t.pathData || t.d) } function N (t, e) { return t && t.hasOwnProperty(e) }u.extend({ type: 'series.custom', dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'], defaultOption: { coordinateSystem: 'cartesian2d', zlevel: 0, z: 2, legendHoverLink: !0, useTransform: !0, clip: !1 }, getInitialData: function (t, e) { return o(this.getSource(), this) }, getDataParams: function (t, e, n) { var i = u.prototype.getDataParams.apply(this, arguments); return n && (i.info = n.info), i } }), h.extend({ type: 'custom', _data: null, render: function (t, e, n, i) { var r = this._data; var a = t.getData(); var o = this.group; var s = A(t, a, e, n); a.diff(r).add(function (e) { C(null, e, s(e, i), t, o, a) }).update(function (e, n) { C(r.getItemGraphicEl(n), e, s(e, i), t, o, a) }).remove(function (t) { var e = r.getItemGraphicEl(t); e && o.remove(e) }).execute(); var l = t.get('clip', !0) ? d(t.coordinateSystem, !1, t) : null; l ? o.setClipPath(l) : o.removeClipPath(), this._data = a }, incrementalPrepareRender: function (t, e, n) { this.group.removeAll(), this._data = null }, incrementalRender: function (t, e, n, i, r) { var a = e.getData(); var o = A(e, a, n, i); function s (t) { t.isGroup || (t.incremental = !0, t.useHoverLayer = !0) } for (var l = t.start; l < t.end; l++) { C(null, l, o(l, r), e, this.group, a).traverse(s) } }, dispose: i.noop, filterForExposedEvent: function (t, e, n, i) { var r = e.element; if (r == null || n.name === r) return !0; for (;(n = n.parent) && n !== this.group;) if (n.name === r) return !0; return !1 } }) }, function (t, e, n) { var i = n(0); function r (t, e) { return e = e || [0, 0], i.map(['x', 'y'], function (n, i) { var r = this.getAxis(n); var a = e[i]; var o = t[i] / 2; return r.type === 'category' ? r.getBandWidth() : Math.abs(r.dataToCoord(a - o) - r.dataToCoord(a + o)) }, this) }t.exports = function (t) { var e = t.grid.getRect(); return { coordSys: { type: 'cartesian2d', x: e.x, y: e.y, width: e.width, height: e.height }, api: { coord: function (e) { return t.dataToPoint(e) }, size: i.bind(r, t) } } } }, function (t, e, n) { var i = n(0); function r (t, e) { return e = e || [0, 0], i.map([0, 1], function (n) { var i = e[n]; var r = t[n] / 2; var a = []; var o = []; return a[n] = i - r, o[n] = i + r, a[1 - n] = o[1 - n] = e[1 - n], Math.abs(this.dataToPoint(a)[n] - this.dataToPoint(o)[n]) }, this) }t.exports = function (t) { var e = t.getBoundingRect(); return { coordSys: { type: 'geo', x: e.x, y: e.y, width: e.width, height: e.height, zoom: t.getZoom() }, api: { coord: function (e) { return t.dataToPoint(e) }, size: i.bind(r, t) } } } }, function (t, e, n) { var i = n(0); function r (t, e) { var n = this.getAxis(); var i = e instanceof Array ? e[0] : e; var r = (t instanceof Array ? t[0] : t) / 2; return n.type === 'category' ? n.getBandWidth() : Math.abs(n.dataToCoord(i - r) - n.dataToCoord(i + r)) }t.exports = function (t) { var e = t.getRect(); return { coordSys: { type: 'singleAxis', x: e.x, y: e.y, width: e.width, height: e.height }, api: { coord: function (e) { return t.dataToPoint(e) }, size: i.bind(r, t) } } } }, function (t, e, n) { var i = n(0); function r (t, e) { return i.map(['Radius', 'Angle'], function (n, i) { var r = this['get' + n + 'Axis'](); var a = e[i]; var o = t[i] / 2; var s = 'dataTo' + n; var l = r.type === 'category' ? r.getBandWidth() : Math.abs(r[s](a - o) - r[s](a + o)); return n === 'Angle' && (l = l * Math.PI / 180), l }, this) }t.exports = function (t) { var e = t.getRadiusAxis(); var n = t.getAngleAxis(); var a = e.getExtent(); return a[0] > a[1] && a.reverse(), { coordSys: { type: 'polar', cx: t.cx, cy: t.cy, r: a[1], r0: a[0] }, api: { coord: i.bind(function (i) { var r = e.dataToRadius(i[0]); var a = n.dataToAngle(i[1]); var o = t.coordToPoint([r, a]); return o.push(r, a * Math.PI / 180), o }), size: i.bind(r, t) } } } }, function (t, e) { t.exports = function (t) { var e = t.getRect(); var n = t.getRangeInfo(); return { coordSys: { type: 'calendar', x: e.x, y: e.y, width: e.width, height: e.height, cellWidth: t.getCellWidth(), cellHeight: t.getCellHeight(), rangeInfo: { start: n.start, end: n.end, weeks: n.weeks, dayCount: n.allDay } }, api: { coord: function (e, n) { return t.dataToPoint(e, n) } } } } }, function (t, e, n) { n(62), n(192), n(65) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(436); n(110), n(442), n(444), n(65), n(446), i.registerLayout(r.curry(a, 'bar')), i.extendComponentView({ type: 'polar' }) }, function (t, e, n) { var i = n(0); var r = n(3).parsePercent; var a = n(25).isDimensionStacked; function o (t) { return t.get('stack') || '__ec_stack_' + t.seriesIndex } function s (t, e) { return e.dim + t.model.componentIndex } var l = function (t, e, n) { var l = {}; var u = (function (t, e) { var n = {}; i.each(t, function (t, e) { var i = t.getData(); var a = t.coordinateSystem; var l = a.getBaseAxis(); var u = s(a, l); var c = l.getExtent(); var h = l.type === 'category' ? l.getBandWidth() : Math.abs(c[1] - c[0]) / i.count(); var d = n[u] || { bandWidth: h, remainedWidth: h, autoWidthCount: 0, categoryGap: '20%', gap: '30%', stacks: {} }; var f = d.stacks; n[u] = d; var p = o(t); f[p] || d.autoWidthCount++, f[p] = f[p] || { width: 0, maxWidth: 0 }; var g = r(t.get('barWidth'), h); var v = r(t.get('barMaxWidth'), h); var m = t.get('barGap'); var y = t.get('barCategoryGap'); g && !f[p].width && (g = Math.min(d.remainedWidth, g), f[p].width = g, d.remainedWidth -= g), v && (f[p].maxWidth = v), m != null && (d.gap = m), y != null && (d.categoryGap = y) }); var a = {}; return i.each(n, function (t, e) { a[e] = {}; var n = t.stacks; var o = t.bandWidth; var s = r(t.categoryGap, o); var l = r(t.gap, 1); var u = t.remainedWidth; var c = t.autoWidthCount; var h = (u - s) / (c + (c - 1) * l); h = Math.max(h, 0), i.each(n, function (t, e) { var n = t.maxWidth; n && n < h && (n = Math.min(n, u), t.width && (n = Math.min(n, t.width)), u -= n, t.width = n, c--) }), h = (u - s) / (c + (c - 1) * l), h = Math.max(h, 0); var d; var f = 0; i.each(n, function (t, e) { t.width || (t.width = h), d = t, f += t.width * (1 + l) }), d && (f -= d.width * l); var p = -f / 2; i.each(n, function (t, n) { a[e][n] = a[e][n] || { offset: p, width: t.width }, p += t.width * (1 + l) }) }), a }(i.filter(e.getSeriesByType(t), function (t) { return !e.isSeriesFiltered(t) && t.coordinateSystem && t.coordinateSystem.type === 'polar' }))); e.eachSeriesByType(t, function (t) { if (t.coordinateSystem.type === 'polar') { var e = t.getData(); var n = t.coordinateSystem; var i = n.getBaseAxis(); var r = s(n, i); var c = o(t); var h = u[r][c]; var d = h.offset; var f = h.width; var p = n.getOtherAxis(i); var g = t.coordinateSystem.cx; var v = t.coordinateSystem.cy; var m = t.get('barMinHeight') || 0; var y = t.get('barMinAngle') || 0; l[c] = l[c] || []; for (var x = e.mapDimension(p.dim), _ = e.mapDimension(i.dim), b = a(e, x), w = i.dim !== 'radius' || !t.get('roundCap', !0), S = p.getExtent()[0], M = 0, I = e.count(); M < I; M++) { var A = e.get(x, M); var T = e.get(_, M); if (!isNaN(A)) { var C; var D; var L; var P; var k = A >= 0 ? 'p' : 'n'; var O = S; if (b && (l[c][T] || (l[c][T] = { p: S, n: S }), O = l[c][T][k]), p.dim === 'radius') { var E = p.dataToRadius(A) - S; var R = i.dataToAngle(T); Math.abs(E) < m && (E = (E < 0 ? -1 : 1) * m), C = O, D = O + E, P = (L = R - d) - f, b && (l[c][T][k] = D) } else { var N = p.dataToAngle(A, w) - S; var z = i.dataToRadius(T); Math.abs(N) < y && (N = (N < 0 ? -1 : 1) * y), D = (C = z + d) + f, L = O, P = O + N, b && (l[c][T][k] = P) }e.setItemLayout(M, { cx: g, cy: v, r0: C, r: D, startAngle: -L * Math.PI / 180, endAngle: -P * Math.PI / 180 }) } } } }, this) }; t.exports = l }, function (t, e, n) { var i = n(438); var r = n(439); var a = function (t) { this.name = t || '', this.cx = 0, this.cy = 0, this._radiusAxis = new i(), this._angleAxis = new r(), this._radiusAxis.polar = this._angleAxis.polar = this }; a.prototype = { type: 'polar', axisPointerEnabled: !0, constructor: a, dimensions: ['radius', 'angle'], model: null, containPoint: function (t) { var e = this.pointToCoord(t); return this._radiusAxis.contain(e[0]) && this._angleAxis.contain(e[1]) }, containData: function (t) { return this._radiusAxis.containData(t[0]) && this._angleAxis.containData(t[1]) }, getAxis: function (t) { return this['_' + t + 'Axis'] }, getAxes: function () { return [this._radiusAxis, this._angleAxis] }, getAxesByScale: function (t) { var e = []; var n = this._angleAxis; var i = this._radiusAxis; return n.scale.type === t && e.push(n), i.scale.type === t && e.push(i), e }, getAngleAxis: function () { return this._angleAxis }, getRadiusAxis: function () { return this._radiusAxis }, getOtherAxis: function (t) { var e = this._angleAxis; return t === e ? this._radiusAxis : e }, getBaseAxis: function () { return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAngleAxis() }, getTooltipAxes: function (t) { var e = t != null && t !== 'auto' ? this.getAxis(t) : this.getBaseAxis(); return { baseAxes: [e], otherAxes: [this.getOtherAxis(e)] } }, dataToPoint: function (t, e) { return this.coordToPoint([this._radiusAxis.dataToRadius(t[0], e), this._angleAxis.dataToAngle(t[1], e)]) }, pointToData: function (t, e) { var n = this.pointToCoord(t); return [this._radiusAxis.radiusToData(n[0], e), this._angleAxis.angleToData(n[1], e)] }, pointToCoord: function (t) { var e = t[0] - this.cx; var n = t[1] - this.cy; var i = this.getAngleAxis(); var r = i.getExtent(); var a = Math.min(r[0], r[1]); var o = Math.max(r[0], r[1]); i.inverse ? a = o - 360 : o = a + 360; var s = Math.sqrt(e * e + n * n); e /= s, n /= s; for (var l = Math.atan2(-n, e) / Math.PI * 180, u = l < a ? 1 : -1; l < a || l > o;)l += 360 * u; return [s, l] }, coordToPoint: function (t) { var e = t[0]; var n = t[1] / 180 * Math.PI; return [Math.cos(n) * e + this.cx, -Math.sin(n) * e + this.cy] }, getArea: function () { var t = this.getAngleAxis(); var e = this.getRadiusAxis().getExtent().slice(); e[0] > e[1] && e.reverse(); var n = t.getExtent(); var i = Math.PI / 180; return { cx: this.cx, cy: this.cy, r0: e[0], r: e[1], startAngle: -n[0] * i, endAngle: -n[1] * i, clockwise: t.inverse, contain: function (t, e) { var n = t - this.cx; var i = e - this.cy; var r = n * n + i * i; var a = this.r; var o = this.r0; return r <= a * a && r >= o * o } } } }; var o = a; t.exports = o }, function (t, e, n) { var i = n(0); var r = n(31); function a (t, e) { r.call(this, 'radius', t, e), this.type = 'category' }a.prototype = { constructor: a, pointToData: function (t, e) { return this.polar.pointToData(t, e)[this.dim === 'radius' ? 0 : 1] }, dataToRadius: r.prototype.dataToCoord, radiusToData: r.prototype.coordToData }, i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { var i = n(0); var r = n(17); var a = n(31); var o = (0, n(4).makeInner)(); function s (t, e) { e = e || [0, 360], a.call(this, 'angle', t, e), this.type = 'category' }s.prototype = { constructor: s, pointToData: function (t, e) { return this.polar.pointToData(t, e)[this.dim === 'radius' ? 0 : 1] }, dataToAngle: a.prototype.dataToCoord, angleToData: a.prototype.coordToData, calculateCategoryInterval: function () { var t = this.getLabelModel(); var e = this.scale; var n = e.getExtent(); var i = e.count(); if (n[1] - n[0] < 1) return 0; var a = n[0]; var s = this.dataToCoord(a + 1) - this.dataToCoord(a); var l = Math.abs(s); var u = r.getBoundingRect(a, t.getFont(), 'center', 'top'); var c = Math.max(u.height, 7) / l; isNaN(c) && (c = 1 / 0); var h = Math.max(0, Math.floor(c)); var d = o(this.model); var f = d.lastAutoInterval; var p = d.lastTickCount; return f != null && p != null && Math.abs(f - h) <= 1 && Math.abs(p - i) <= 1 && f > h ? h = f : (d.lastTickCount = i, d.lastAutoInterval = h), h } }, i.inherits(s, a); var l = s; t.exports = l }, function (t, e, n) { var i = n(1); n(441); var r = i.extendComponentModel({ type: 'polar', dependencies: ['polarAxis', 'angleAxis'], coordinateSystem: null, findAxisModel: function (t) { var e; return this.ecModel.eachComponent(t, function (t) { t.getCoordSysModel() === this && (e = t) }, this), e }, defaultOption: { zlevel: 0, z: 0, center: ['50%', '50%'], radius: '80%' } }); t.exports = r }, function (t, e, n) { var i = n(0); var r = n(13); var a = n(79); var o = n(48); var s = r.extend({ type: 'polarAxis', axis: null, getCoordSysModel: function () { return this.ecModel.queryComponents({ mainType: 'polar', index: this.option.polarIndex, id: this.option.polarId })[0] } }); i.merge(s.prototype, o); var l = { splitNumber: 5 }; function u (t, e) { return e.type || (e.data ? 'category' : 'value') }a('angle', s, u, { startAngle: 90, clockwise: !0, splitNumber: 12, axisLabel: { rotate: !1 } }), a('radius', s, u, l) }, function (t, e, n) { n(110), n(443) }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(12); var o = n(39); var s = n(32); var l = ['axisLine', 'axisLabel', 'axisTick', 'splitLine', 'splitArea']; function u (t, e, n) { e[1] > e[0] && (e = e.slice().reverse()); var i = t.coordToPoint([e[0], n]); var r = t.coordToPoint([e[1], n]); return { x1: i[0], y1: i[1], x2: r[0], y2: r[1] } } function c (t) { return t.getRadiusAxis().inverse ? 0 : 1 } function h (t) { var e = t[0]; var n = t[t.length - 1]; e && n && Math.abs(Math.abs(e.coord - n.coord) - 360) < 1e-4 && t.pop() } var d = o.extend({ type: 'angleAxis', axisPointerClass: 'PolarAxisPointer', render: function (t, e) { if (this.group.removeAll(), t.get('show')) { var n = t.axis; var r = n.polar; var a = r.getRadiusAxis().getExtent(); var o = n.getTicksCoords(); var s = i.map(n.getViewLabels(), function (t) { return (t = i.clone(t)).coord = n.dataToCoord(t.tickValue), t }); h(s), h(o), i.each(l, function (e) { !t.get(e + '.show') || n.scale.isBlank() && e !== 'axisLine' || this['_' + e](t, r, o, a, s) }, this) } }, _axisLine: function (t, e, n, i) { var a; var o = t.getModel('axisLine.lineStyle'); var s = c(e); var l = s ? 0 : 1; (a = i[l] === 0 ? new r.Circle({ shape: { cx: e.cx, cy: e.cy, r: i[s] }, style: o.getLineStyle(), z2: 1, silent: !0 }) : new r.Ring({ shape: { cx: e.cx, cy: e.cy, r: i[s], r0: i[l] }, style: o.getLineStyle(), z2: 1, silent: !0 })).style.fill = null, this.group.add(a) }, _axisTick: function (t, e, n, a) { var o = t.getModel('axisTick'); var s = (o.get('inside') ? -1 : 1) * o.get('length'); var l = a[c(e)]; var h = i.map(n, function (t) { return new r.Line({ shape: u(e, [l, l + s], t.coord) }) }); this.group.add(r.mergePath(h, { style: i.defaults(o.getModel('lineStyle').getLineStyle(), { stroke: t.get('axisLine.lineStyle.color') }) })) }, _axisLabel: function (t, e, n, o, l) { var u = t.getCategories(!0); var h = t.getModel('axisLabel'); var d = h.get('margin'); var f = t.get('triggerEvent'); i.each(l, function (n, i) { var l = h; var p = n.tickValue; var g = o[c(e)]; var v = e.coordToPoint([g + d, n.coord]); var m = e.cx; var y = e.cy; var x = Math.abs(v[0] - m) / g < 0.3 ? 'center' : v[0] > m ? 'left' : 'right'; var _ = Math.abs(v[1] - y) / g < 0.3 ? 'middle' : v[1] > y ? 'top' : 'bottom'; u && u[p] && u[p].textStyle && (l = new a(u[p].textStyle, h, h.ecModel)); var b = new r.Text({ silent: s.isLabelSilent(t) }); this.group.add(b), r.setTextStyle(b.style, l, { x: v[0], y: v[1], textFill: l.getTextColor() || t.get('axisLine.lineStyle.color'), text: n.formattedLabel, textAlign: x, textVerticalAlign: _ }), f && (b.eventData = s.makeAxisEventDataBase(t), b.eventData.targetType = 'axisLabel', b.eventData.value = n.rawLabel) }, this) }, _splitLine: function (t, e, n, a) { var o = t.getModel('splitLine').getModel('lineStyle'); var s = o.get('color'); var l = 0; s = s instanceof Array ? s : [s]; for (var c = [], h = 0; h < n.length; h++) { var d = l++ % s.length; c[d] = c[d] || [], c[d].push(new r.Line({ shape: u(e, a, n[h].coord) })) } for (h = 0; h < c.length; h++) this.group.add(r.mergePath(c[h], { style: i.defaults({ stroke: s[h % s.length] }, o.getLineStyle()), silent: !0, z: t.get('z') })) }, _splitArea: function (t, e, n, a) { if (n.length) { var o = t.getModel('splitArea').getModel('areaStyle'); var s = o.get('color'); var l = 0; s = s instanceof Array ? s : [s]; for (var u = [], c = Math.PI / 180, h = -n[0].coord * c, d = Math.min(a[0], a[1]), f = Math.max(a[0], a[1]), p = t.get('clockwise'), g = 1; g < n.length; g++) { var v = l++ % s.length; u[v] = u[v] || [], u[v].push(new r.Sector({ shape: { cx: e.cx, cy: e.cy, r0: d, r: f, startAngle: h, endAngle: -n[g].coord * c, clockwise: p }, silent: !0 })), h = -n[g].coord * c } for (g = 0; g < u.length; g++) this.group.add(r.mergePath(u[g], { style: i.defaults({ fill: s[g % s.length] }, o.getAreaStyle()), silent: !0 })) } } }); t.exports = d }, function (t, e, n) { n(110), n(445) }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(32); var o = n(39); var s = ['axisLine', 'axisTickLabel', 'axisName']; var l = ['splitLine', 'splitArea']; var u = o.extend({ type: 'radiusAxis', axisPointerClass: 'PolarAxisPointer', render: function (t, e) { if (this.group.removeAll(), t.get('show')) { var n = t.axis; var r = n.polar; var o = r.getAngleAxis(); var u = n.getTicksCoords(); var c = o.getExtent()[0]; var h = n.getExtent(); var d = (function (t, e, n) { return { position: [t.cx, t.cy], rotation: n / 180 * Math.PI, labelDirection: -1, tickDirection: -1, nameDirection: 1, labelRotate: e.getModel('axisLabel').get('rotate'), z2: 1 } }(r, t, c)); var f = new a(t, d); i.each(s, f.add, f), this.group.add(f.getGroup()), i.each(l, function (e) { t.get(e + '.show') && !n.scale.isBlank() && this['_' + e](t, r, c, h, u) }, this) } }, _splitLine: function (t, e, n, a, o) { var s = t.getModel('splitLine').getModel('lineStyle'); var l = s.get('color'); var u = 0; l = l instanceof Array ? l : [l]; for (var c = [], h = 0; h < o.length; h++) { var d = u++ % l.length; c[d] = c[d] || [], c[d].push(new r.Circle({ shape: { cx: e.cx, cy: e.cy, r: o[h].coord }, silent: !0 })) } for (h = 0; h < c.length; h++) this.group.add(r.mergePath(c[h], { style: i.defaults({ stroke: l[h % l.length], fill: null }, s.getLineStyle()), silent: !0 })) }, _splitArea: function (t, e, n, a, o) { if (o.length) { var s = t.getModel('splitArea').getModel('areaStyle'); var l = s.get('color'); var u = 0; l = l instanceof Array ? l : [l]; for (var c = [], h = o[0].coord, d = 1; d < o.length; d++) { var f = u++ % l.length; c[f] = c[f] || [], c[f].push(new r.Sector({ shape: { cx: e.cx, cy: e.cy, r0: h, r: o[d].coord, startAngle: 0, endAngle: 2 * Math.PI }, silent: !0 })), h = o[d].coord } for (d = 0; d < c.length; d++) this.group.add(r.mergePath(c[d], { style: i.defaults({ fill: l[d % l.length] }, s.getAreaStyle()), silent: !0 })) } } }); t.exports = u }, function (t, e, n) { var i = n(9); var r = n(109); var a = n(2); var o = n(84); var s = n(15); var l = n(32); var u = n(39); var c = r.extend({ makeElOption: function (t, e, n, r, u) { var c = n.axis; c.dim === 'angle' && (this.animationThreshold = Math.PI / 18); var d; var f = c.polar; var p = f.getOtherAxis(c).getExtent(); d = c['dataTo' + i.capitalFirst(c.dim)](e); var g = r.get('type'); if (g && g !== 'none') { var v = o.buildElStyle(r); var m = h[g](c, f, d, p, v); m.style = v, t.graphicKey = m.type, t.pointer = m } var y = (function (t, e, n, i, r) { var o = e.axis; var u = o.dataToCoord(t); var c = i.getAngleAxis().getExtent()[0]; c = c / 180 * Math.PI; var h; var d; var f; var p = i.getRadiusAxis().getExtent(); if (o.dim === 'radius') { var g = s.create(); s.rotate(g, g, c), s.translate(g, g, [i.cx, i.cy]), h = a.applyTransform([u, -r], g); var v = e.getModel('axisLabel').get('rotate') || 0; var m = l.innerTextLayout(c, v * Math.PI / 180, -1); d = m.textAlign, f = m.textVerticalAlign } else { var y = p[1]; h = i.coordToPoint([y + r, u]); var x = i.cx; var _ = i.cy; d = Math.abs(h[0] - x) / y < 0.3 ? 'center' : h[0] > x ? 'left' : 'right', f = Math.abs(h[1] - _) / y < 0.3 ? 'middle' : h[1] > _ ? 'top' : 'bottom' } return { position: h, align: d, verticalAlign: f } }(e, n, 0, f, r.get('label.margin'))); o.buildLabelElOption(t, n, r, u, y) } }); var h = { line: function (t, e, n, i, r) { return t.dim === 'angle' ? { type: 'Line', shape: o.makeLineShape(e.coordToPoint([i[0], n]), e.coordToPoint([i[1], n])) } : { type: 'Circle', shape: { cx: e.cx, cy: e.cy, r: n } } }, shadow: function (t, e, n, i, r) { var a = Math.max(1, t.getBandWidth()); var s = Math.PI / 180; return t.dim === 'angle' ? { type: 'Sector', shape: o.makeSectorShape(e.cx, e.cy, i[0], i[1], (-n - a / 2) * s, (a / 2 - n) * s) } : { type: 'Sector', shape: o.makeSectorShape(e.cx, e.cy, n - a / 2, n + a / 2, 0, 2 * Math.PI) } } }; u.registerAxisPointerClass('PolarAxisPointer', c); var d = c; t.exports = d }, function (t, e, n) { var i = n(1); var r = n(0); function a (t, e) { e.update = 'updateView', i.registerAction(e, function (e, n) { var i = {}; return n.eachComponent({ mainType: 'geo', query: e }, function (n) { n[t](e.name); var a = n.coordinateSystem; r.each(a.regions, function (t) { i[t.name] = n.isSelected(t.name) || !1 }) }), { selected: i, name: e.name } }) }n(448), n(102), n(449), n(174), a('toggleSelected', { type: 'geoToggleSelect', event: 'geoselectchanged' }), a('select', { type: 'geoSelect', event: 'geoselected' }), a('unSelect', { type: 'geoUnSelect', event: 'geounselected' }) }, function (t, e, n) { var i = n(0); var r = n(4); var a = n(13); var o = n(12); var s = n(99); var l = n(102); var u = a.extend({ type: 'geo', coordinateSystem: null, layoutMode: 'box', init: function (t) { a.prototype.init.apply(this, arguments), r.defaultEmphasis(t, 'label', ['show']) }, optionUpdated: function () { var t = this.option; var e = this; t.regions = l.getFilledRegions(t.regions, t.map, t.nameMap), this._optionModelMap = i.reduce(t.regions || [], function (t, n) { return n.name && t.set(n.name, new o(n, e)), t }, i.createHashMap()), this.updateSelectedMap(t.regions) }, defaultOption: { zlevel: 0, z: 0, show: !0, left: 'center', top: 'center', aspectScale: null, silent: !1, map: '', boundingCoords: null, center: null, zoom: 1, scaleLimit: null, label: { show: !1, color: '#000' }, itemStyle: { borderWidth: 0.5, borderColor: '#444', color: '#eee' }, emphasis: { label: { show: !0, color: 'rgb(100,0,0)' }, itemStyle: { color: 'rgba(255,215,0,0.8)' } }, regions: [] }, getRegionModel: function (t) { return this._optionModelMap.get(t) || new o(null, this, this.ecModel) }, getFormattedLabel: function (t, e) { var n = this.getRegionModel(t).get('label' + (e === 'normal' ? '.' : e + '.') + 'formatter'); var i = { name: t }; return typeof n === 'function' ? (i.status = e, n(i)) : typeof n === 'string' ? n.replace('{a}', t != null ? t : '') : void 0 }, setZoom: function (t) { this.option.zoom = t }, setCenter: function (t) { this.option.center = t } }); i.mixin(u, s); var c = u; t.exports = c }, function (t, e, n) { var i = n(172); var r = n(1).extendComponentView({ type: 'geo', init: function (t, e) { var n = new i(e, !0); this._mapDraw = n, this.group.add(n.group) }, render: function (t, e, n, i) { if (!i || i.type !== 'geoToggleSelect' || i.from !== this.uid) { var r = this._mapDraw; t.get('show') ? r.draw(t, e, n, this, i) : this._mapDraw.group.removeAll(), this.group.silent = t.get('silent') } }, dispose: function () { this._mapDraw && this._mapDraw.remove() } }); t.exports = r }, function (t, e, n) { n(451), n(452), n(453) }, function (t, e, n) { var i = n(0); var r = n(6); var a = n(3); var o = n(20); function s (t, e, n) { this._model = t } function l (t, e, n, i) { var r = n.calendarModel; var a = n.seriesModel; var o = r ? r.coordinateSystem : a ? a.coordinateSystem : null; return o === this ? o[t](i) : null }s.prototype = { constructor: s, type: 'calendar', dimensions: ['time', 'value'], getDimensionsInfo: function () { return [{ name: 'time', type: 'time' }, 'value'] }, getRangeInfo: function () { return this._rangeInfo }, getModel: function () { return this._model }, getRect: function () { return this._rect }, getCellWidth: function () { return this._sw }, getCellHeight: function () { return this._sh }, getOrient: function () { return this._orient }, getFirstDayOfWeek: function () { return this._firstDayOfWeek }, getDateInfo: function (t) { var e = (t = a.parseDate(t)).getFullYear(); var n = t.getMonth() + 1; n = n < 10 ? '0' + n : n; var i = t.getDate(); i = i < 10 ? '0' + i : i; var r = t.getDay(); return { y: e, m: n, d: i, day: r = Math.abs((r + 7 - this.getFirstDayOfWeek()) % 7), time: t.getTime(), formatedDate: e + '-' + n + '-' + i, date: t } }, getNextNDay: function (t, e) { return (e = e || 0) === 0 ? this.getDateInfo(t) : ((t = new Date(this.getDateInfo(t).time)).setDate(t.getDate() + e), this.getDateInfo(t)) }, update: function (t, e) { this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay'), this._orient = this._model.get('orient'), this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0, this._rangeInfo = this._getRangeInfo(this._initRangeOption()); var n = this._rangeInfo.weeks || 1; var a = ['width', 'height']; var o = this._model.get('cellSize').slice(); var s = this._model.getBoxLayoutParams(); var l = this._orient === 'horizontal' ? [n, 7] : [7, n]; i.each([0, 1], function (t) { h(o, t) && (s[a[t]] = o[t] * l[t]) }); var u = { width: e.getWidth(), height: e.getHeight() }; var c = this._rect = r.getLayoutRect(s, u); function h (t, e) { return t[e] != null && t[e] !== 'auto' }i.each([0, 1], function (t) { h(o, t) || (o[t] = c[a[t]] / l[t]) }), this._sw = o[0], this._sh = o[1] }, dataToPoint: function (t, e) { i.isArray(t) && (t = t[0]), e == null && (e = !0); var n = this.getDateInfo(t); var r = this._rangeInfo; var a = n.formatedDate; if (e && !(n.time >= r.start.time && n.time < r.end.time + 864e5)) return [NaN, NaN]; var o = n.day; var s = this._getRangeInfo([r.start.time, a]).nthWeek; return this._orient === 'vertical' ? [this._rect.x + o * this._sw + this._sw / 2, this._rect.y + s * this._sh + this._sh / 2] : [this._rect.x + s * this._sw + this._sw / 2, this._rect.y + o * this._sh + this._sh / 2] }, pointToData: function (t) { var e = this.pointToDate(t); return e && e.time }, dataToRect: function (t, e) { var n = this.dataToPoint(t, e); return { contentShape: { x: n[0] - (this._sw - this._lineWidth) / 2, y: n[1] - (this._sh - this._lineWidth) / 2, width: this._sw - this._lineWidth, height: this._sh - this._lineWidth }, center: n, tl: [n[0] - this._sw / 2, n[1] - this._sh / 2], tr: [n[0] + this._sw / 2, n[1] - this._sh / 2], br: [n[0] + this._sw / 2, n[1] + this._sh / 2], bl: [n[0] - this._sw / 2, n[1] + this._sh / 2] } }, pointToDate: function (t) { var e = Math.floor((t[0] - this._rect.x) / this._sw) + 1; var n = Math.floor((t[1] - this._rect.y) / this._sh) + 1; var i = this._rangeInfo.range; return this._orient === 'vertical' ? this._getDateByWeeksAndDay(n, e - 1, i) : this._getDateByWeeksAndDay(e, n - 1, i) }, convertToPixel: i.curry(l, 'dataToPoint'), convertFromPixel: i.curry(l, 'pointToData'), _initRangeOption: function () { var t = this._model.get('range'); var e = t; if (i.isArray(e) && e.length === 1 && (e = e[0]), /^\d{4}$/.test(e) && (t = [e + '-01-01', e + '-12-31']), /^\d{4}[\/|-]\d{1,2}$/.test(e)) { var n = this.getDateInfo(e); var r = n.date; r.setMonth(r.getMonth() + 1); var a = this.getNextNDay(r, -1); t = [n.formatedDate, a.formatedDate] }/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e) && (t = [e, e]); var o = this._getRangeInfo(t); return o.start.time > o.end.time && t.reverse(), t }, _getRangeInfo: function (t) { var e; (t = [this.getDateInfo(t[0]), this.getDateInfo(t[1])])[0].time > t[1].time && (e = !0, t.reverse()); var n = Math.floor(t[1].time / 864e5) - Math.floor(t[0].time / 864e5) + 1; var i = new Date(t[0].time); var r = i.getDate(); var a = t[1].date.getDate(); if (i.setDate(r + n - 1), i.getDate() !== a) for (var o = i.getTime() - t[1].time > 0 ? 1 : -1; i.getDate() !== a && (i.getTime() - t[1].time) * o > 0;)n -= o, i.setDate(r + n - 1); var s = Math.floor((n + t[0].day + 6) / 7); var l = e ? 1 - s : s - 1; return e && t.reverse(), { range: [t[0].formatedDate, t[1].formatedDate], start: t[0], end: t[1], allDay: n, weeks: s, nthWeek: l, fweek: t[0].day, lweek: t[1].day } }, _getDateByWeeksAndDay: function (t, e, n) { var i = this._getRangeInfo(n); if (t > i.weeks || t === 0 && e < i.fweek || t === i.weeks && e > i.lweek) return !1; var r = 7 * (t - 1) - i.fweek + e; var a = new Date(i.start.time); return a.setDate(i.start.d + r), this.getDateInfo(a) } }, s.dimensions = s.prototype.dimensions, s.getDimensionsInfo = s.prototype.getDimensionsInfo, s.create = function (t, e) { var n = []; return t.eachComponent('calendar', function (i) { var r = new s(i, t, e); n.push(r), i.coordinateSystem = r }), t.eachSeries(function (t) { t.get('coordinateSystem') === 'calendar' && (t.coordinateSystem = n[t.get('calendarIndex') || 0]) }), n }, o.register('calendar', s); var u = s; t.exports = u }, function (t, e, n) { var i = n(0); var r = n(13); var a = n(6); var o = a.getLayoutParams; var s = a.sizeCalculable; var l = a.mergeLayoutParam; var u = r.extend({ type: 'calendar', coordinateSystem: null, defaultOption: { zlevel: 0, z: 2, left: 80, top: 60, cellSize: 20, orient: 'horizontal', splitLine: { show: !0, lineStyle: { color: '#000', width: 1, type: 'solid' } }, itemStyle: { color: '#fff', borderWidth: 1, borderColor: '#ccc' }, dayLabel: { show: !0, firstDay: 0, position: 'start', margin: '50%', nameMap: 'en', color: '#000' }, monthLabel: { show: !0, position: 'start', margin: 5, align: 'center', nameMap: 'en', formatter: null, color: '#000' }, yearLabel: { show: !0, position: null, margin: 30, formatter: null, color: '#ccc', fontFamily: 'sans-serif', fontWeight: 'bolder', fontSize: 20 } }, init: function (t, e, n, i) { var r = o(t); u.superApply(this, 'init', arguments), c(t, r) }, mergeOption: function (t, e) { u.superApply(this, 'mergeOption', arguments), c(this.option, t) } }); function c (t, e) { var n = t.cellSize; i.isArray(n) ? n.length === 1 && (n[1] = n[0]) : n = t.cellSize = [n, n]; var r = i.map([0, 1], function (t) { return s(e, t) && (n[t] = 'auto'), n[t] != null && n[t] !== 'auto' }); l(t, e, { type: 'box', ignoreSize: r }) } var h = u; t.exports = h }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(2); var o = n(9); var s = n(3); var l = { EN: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], CN: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'] }; var u = { EN: ['S', 'M', 'T', 'W', 'T', 'F', 'S'], CN: ['日', '一', '二', '三', '四', '五', '六'] }; var c = i.extendComponentView({ type: 'calendar', _tlpoints: null, _blpoints: null, _firstDayOfMonth: null, _firstDayPoints: null, render: function (t, e, n) { var i = this.group; i.removeAll(); var r = t.coordinateSystem; var a = r.getRangeInfo(); var o = r.getOrient(); this._renderDayRect(t, a, i), this._renderLines(t, a, o, i), this._renderYearText(t, a, o, i), this._renderMonthText(t, o, i), this._renderWeekText(t, a, o, i) }, _renderDayRect: function (t, e, n) { for (var i = t.coordinateSystem, r = t.getModel('itemStyle').getItemStyle(), o = i.getCellWidth(), s = i.getCellHeight(), l = e.start.time; l <= e.end.time; l = i.getNextNDay(l, 1).time) { var u = i.dataToRect([l], !1).tl; var c = new a.Rect({ shape: { x: u[0], y: u[1], width: o, height: s }, cursor: 'default', style: r }); n.add(c) } }, _renderLines: function (t, e, n, i) { var r = this; var a = t.coordinateSystem; var o = t.getModel('splitLine.lineStyle').getLineStyle(); var s = t.get('splitLine.show'); var l = o.lineWidth; this._tlpoints = [], this._blpoints = [], this._firstDayOfMonth = [], this._firstDayPoints = []; for (var u = e.start, c = 0; u.time <= e.end.time; c++) { d(u.formatedDate), c === 0 && (u = a.getDateInfo(e.start.y + '-' + e.start.m)); var h = u.date; h.setMonth(h.getMonth() + 1), u = a.getDateInfo(h) } function d (e) { r._firstDayOfMonth.push(a.getDateInfo(e)), r._firstDayPoints.push(a.dataToRect([e], !1).tl); var l = r._getLinePointsOfOneWeek(t, e, n); r._tlpoints.push(l[0]), r._blpoints.push(l[l.length - 1]), s && r._drawSplitline(l, o, i) }d(a.getNextNDay(e.end.time, 1).formatedDate), s && this._drawSplitline(r._getEdgesPoints(r._tlpoints, l, n), o, i), s && this._drawSplitline(r._getEdgesPoints(r._blpoints, l, n), o, i) }, _getEdgesPoints: function (t, e, n) { var i = [t[0].slice(), t[t.length - 1].slice()]; var r = n === 'horizontal' ? 0 : 1; return i[0][r] = i[0][r] - e / 2, i[1][r] = i[1][r] + e / 2, i }, _drawSplitline: function (t, e, n) { var i = new a.Polyline({ z2: 20, shape: { points: t }, style: e }); n.add(i) }, _getLinePointsOfOneWeek: function (t, e, n) { var i = t.coordinateSystem; e = i.getDateInfo(e); for (var r = [], a = 0; a < 7; a++) { var o = i.getNextNDay(e.time, a); var s = i.dataToRect([o.time], !1); r[2 * o.day] = s.tl, r[2 * o.day + 1] = s[n === 'horizontal' ? 'bl' : 'tr'] } return r }, _formatterLabel: function (t, e) { return typeof t === 'string' && t ? o.formatTplSimple(t, e) : typeof t === 'function' ? t(e) : e.nameMap }, _yearTextPositionControl: function (t, e, n, i, r) { e = e.slice(); var a = ['center', 'bottom']; i === 'bottom' ? (e[1] += r, a = ['center', 'top']) : i === 'left' ? e[0] -= r : i === 'right' ? (e[0] += r, a = ['center', 'top']) : e[1] -= r; var o = 0; return i !== 'left' && i !== 'right' || (o = Math.PI / 2), { rotation: o, position: e, style: { textAlign: a[0], textVerticalAlign: a[1] } } }, _renderYearText: function (t, e, n, i) { var r = t.getModel('yearLabel'); if (r.get('show')) { var o = r.get('margin'); var s = r.get('position'); s || (s = n !== 'horizontal' ? 'top' : 'left'); var l = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]]; var u = (l[0][0] + l[1][0]) / 2; var c = (l[0][1] + l[1][1]) / 2; var h = n === 'horizontal' ? 0 : 1; var d = { top: [u, l[h][1]], bottom: [u, l[1 - h][1]], left: [l[1 - h][0], c], right: [l[h][0], c] }; var f = e.start.y; +e.end.y > +e.start.y && (f = f + '-' + e.end.y); var p = r.get('formatter'); var g = { start: e.start.y, end: e.end.y, nameMap: f }; var v = this._formatterLabel(p, g); var m = new a.Text({ z2: 30 }); a.setTextStyle(m.style, r, { text: v }), m.attr(this._yearTextPositionControl(m, d[s], n, s, o)), i.add(m) } }, _monthTextPositionControl: function (t, e, n, i, r) { var a = 'left'; var o = 'top'; var s = t[0]; var l = t[1]; return n === 'horizontal' ? (l += r, e && (a = 'center'), i === 'start' && (o = 'bottom')) : (s += r, e && (o = 'middle'), i === 'start' && (a = 'right')), { x: s, y: l, textAlign: a, textVerticalAlign: o } }, _renderMonthText: function (t, e, n) { var i = t.getModel('monthLabel'); if (i.get('show')) { var o = i.get('nameMap'); var s = i.get('margin'); var u = i.get('position'); var c = i.get('align'); var h = [this._tlpoints, this._blpoints]; r.isString(o) && (o = l[o.toUpperCase()] || []); var d = u === 'start' ? 0 : 1; var f = e === 'horizontal' ? 0 : 1; s = u === 'start' ? -s : s; for (var p = c === 'center', g = 0; g < h[d].length - 1; g++) { var v = h[d][g].slice(); var m = this._firstDayOfMonth[g]; if (p) { var y = this._firstDayPoints[g]; v[f] = (y[f] + h[0][g + 1][f]) / 2 } var x = i.get('formatter'); var _ = o[+m.m - 1]; var b = { yyyy: m.y, yy: (m.y + '').slice(2), MM: m.m, M: +m.m, nameMap: _ }; var w = this._formatterLabel(x, b); var S = new a.Text({ z2: 30 }); r.extend(a.setTextStyle(S.style, i, { text: w }), this._monthTextPositionControl(v, p, e, u, s)), n.add(S) } } }, _weekTextPositionControl: function (t, e, n, i, r) { var a = 'center'; var o = 'middle'; var s = t[0]; var l = t[1]; var u = n === 'start'; return e === 'horizontal' ? (s = s + i + (u ? 1 : -1) * r[0] / 2, a = u ? 'right' : 'left') : (l = l + i + (u ? 1 : -1) * r[1] / 2, o = u ? 'bottom' : 'top'), { x: s, y: l, textAlign: a, textVerticalAlign: o } }, _renderWeekText: function (t, e, n, i) { var o = t.getModel('dayLabel'); if (o.get('show')) { var l = t.coordinateSystem; var c = o.get('position'); var h = o.get('nameMap'); var d = o.get('margin'); var f = l.getFirstDayOfWeek(); r.isString(h) && (h = u[h.toUpperCase()] || []); var p = l.getNextNDay(e.end.time, 7 - e.lweek).time; var g = [l.getCellWidth(), l.getCellHeight()]; d = s.parsePercent(d, g[n === 'horizontal' ? 0 : 1]), c === 'start' && (p = l.getNextNDay(e.start.time, -(7 + e.fweek)).time, d = -d); for (var v = 0; v < 7; v++) { var m; var y = l.getNextNDay(p, v); var x = l.dataToRect([y.time], !1).center; m = Math.abs((v + f) % 7); var _ = new a.Text({ z2: 30 }); r.extend(a.setTextStyle(_.style, o, { text: h[m] }), this._weekTextPositionControl(x, n, c, d, g)), i.add(_) } } } }); t.exports = c }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(4); var o = n(2); var s = n(6); var l = n(3).parsePercent; var u = { path: null, compoundPath: null, group: o.Group, image: o.Image, text: o.Text }; i.registerPreprocessor(function (t) { var e = t.graphic; r.isArray(e) ? e[0] && e[0].elements ? t.graphic = [t.graphic[0]] : t.graphic = [{ elements: e }] : e && !e.elements && (t.graphic = [{ elements: [e] }]) }); var c = i.extendComponentModel({ type: 'graphic', defaultOption: { elements: [], parentId: null }, _elOptionsToUpdate: null, mergeOption: function (t) { var e = this.option.elements; this.option.elements = null, c.superApply(this, 'mergeOption', arguments), this.option.elements = e }, optionUpdated: function (t, e) { var n = this.option; var i = (e ? n : t).elements; var o = n.elements = e ? [] : n.elements; var l = []; this._flatten(i, l); var u = a.mappingToExists(o, l); a.makeIdAndName(u); var c = this._elOptionsToUpdate = []; r.each(u, function (t, e) { var n = t.option; n && (c.push(n), (function (t, e) { var n = t.exist; if (e.id = t.keyInfo.id, !e.type && n && (e.type = n.type), e.parentId == null) { var i = e.parentOption; i ? e.parentId = i.id : n && (e.parentId = n.parentId) }e.parentOption = null }(t, n)), (function (t, e, n) { var i = r.extend({}, n); var a = t[e]; var o = n.$action || 'merge'; o === 'merge' ? a ? (r.merge(a, i, !0), s.mergeLayoutParam(a, i, { ignoreSize: !0 }), s.copyLayoutParams(n, a)) : t[e] = i : o === 'replace' ? t[e] = i : o === 'remove' && a && (t[e] = null) }(o, e, n)), (function (t, e) { if (!t) return; t.hv = e.hv = [f(e, ['left', 'right']), f(e, ['top', 'bottom'])], t.type === 'group' && (t.width == null && (t.width = e.width = 0), t.height == null && (t.height = e.height = 0)) }(o[e], n))) }, this); for (var h = o.length - 1; h >= 0; h--)o[h] == null ? o.splice(h, 1) : delete o[h].$action }, _flatten: function (t, e, n) { r.each(t, function (t) { if (t) { n && (t.parentOption = n), e.push(t); var i = t.children; t.type === 'group' && i && this._flatten(i, e, t), delete t.children } }, this) }, useElOptionsToUpdate: function () { var t = this._elOptionsToUpdate; return this._elOptionsToUpdate = null, t } }); function h (t, e, n, i) { var r = n.type; var a = new (u.hasOwnProperty(r) ? u[r] : o.getShapeClass(r))(n); e.add(a), i.set(t, a), a.__ecGraphicId = t } function d (t, e) { var n = t && t.parent; n && (t.type === 'group' && t.traverse(function (t) { d(t, e) }), e.removeKey(t.__ecGraphicId), n.remove(t)) } function f (t, e) { var n; return r.each(e, function (e) { t[e] != null && t[e] !== 'auto' && (n = !0) }), n }i.extendComponentView({ type: 'graphic', init: function (t, e) { this._elMap = r.createHashMap(), this._lastGraphicModel }, render: function (t, e, n) { t !== this._lastGraphicModel && this._clear(), this._lastGraphicModel = t, this._updateElements(t), this._relocate(t, n) }, _updateElements: function (t) { var e = t.useElOptionsToUpdate(); if (e) { var n = this._elMap; var i = this.group; r.each(e, function (e) { var a = e.$action; var o = e.id; var l = n.get(o); var u = e.parentId; var c = u != null ? n.get(u) : i; var f = e.style; e.type === 'text' && f && (e.hv && e.hv[1] && (f.textVerticalAlign = f.textBaseline = null), !f.hasOwnProperty('textFill') && f.fill && (f.textFill = f.fill), !f.hasOwnProperty('textStroke') && f.stroke && (f.textStroke = f.stroke)); var p = (function (t) { return t = r.extend({}, t), r.each(['id', 'parentId', '$action', 'hv', 'bounding'].concat(s.LOCATION_PARAMS), function (e) { delete t[e] }), t }(e)); a && a !== 'merge' ? a === 'replace' ? (d(l, n), h(o, c, p, n)) : a === 'remove' && d(l, n) : l ? l.attr(p) : h(o, c, p, n); var g = n.get(o); g && (g.__ecGraphicWidthOption = e.width, g.__ecGraphicHeightOption = e.height, (function (t, e, n) { var i = t.eventData; t.silent || t.ignore || i || (i = t.eventData = { componentType: 'graphic', componentIndex: e.componentIndex, name: t.name }); i && (i.info = t.info) }(g, t))) }) } }, _relocate: function (t, e) { for (var n = t.option.elements, i = this.group, r = this._elMap, a = e.getWidth(), o = e.getHeight(), u = 0; u < n.length; u++) { var c = n[u]; if ((d = r.get(c.id)) && d.isGroup) { var h = (f = d.parent) === i; d.__ecGraphicWidth = l(d.__ecGraphicWidthOption, h ? a : f.__ecGraphicWidth) || 0, d.__ecGraphicHeight = l(d.__ecGraphicHeightOption, h ? o : f.__ecGraphicHeight) || 0 } } for (u = n.length - 1; u >= 0; u--) { var d; c = n[u]; if (d = r.get(c.id)) { var f; var p = (f = d.parent) === i ? { width: a, height: o } : { width: f.__ecGraphicWidth, height: f.__ecGraphicHeight }; s.positionElement(d, c, p, null, { hv: c.hv, boundingMode: c.bounding }) } } }, _clear: function () { var t = this._elMap; t.each(function (e) { d(e, t) }), this._elMap = r.createHashMap() }, dispose: function () { this._clear() } }) }, function (t, e, n) { n(456), n(457), n(458), n(459), n(460), n(461), n(466) }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(33); var o = i.extendComponentModel({ type: 'toolbox', layoutMode: { type: 'box', ignoreSize: !0 }, optionUpdated: function () { o.superApply(this, 'optionUpdated', arguments), r.each(this.option.feature, function (t, e) { var n = a.get(e); n && r.merge(t, n.defaultOption) }) }, defaultOption: { show: !0, z: 6, zlevel: 0, orient: 'horizontal', left: 'right', top: 'top', backgroundColor: 'transparent', borderColor: '#ccc', borderRadius: 0, borderWidth: 0, padding: 5, itemSize: 15, itemGap: 8, showTitle: !0, iconStyle: { borderColor: '#666', color: 'none' }, emphasis: { iconStyle: { borderColor: '#3E98C5' } }, tooltip: { show: !1 } } }); var s = o; t.exports = s }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(17); var o = n(33); var s = n(2); var l = n(12); var u = n(37); var c = n(193); var h = i.extendComponentView({ type: 'toolbox', render: function (t, e, n, i) { var h = this.group; if (h.removeAll(), t.get('show')) { var d = +t.get('itemSize'); var f = t.get('feature') || {}; var p = this._features || (this._features = {}); var g = []; r.each(f, function (t, e) { g.push(e) }), new u(this._featureNames || [], g).add(v).update(v).remove(r.curry(v, null)).execute(), this._featureNames = g, c.layout(h, t, n), h.add(c.makeBackground(h.getBoundingRect(), t)), h.eachChild(function (t) { var e = t.__title; var i = t.hoverStyle; if (i && e) { var r = a.getBoundingRect(e, a.makeFont(i)); var o = t.position[0] + h.position[0]; var s = !1; t.position[1] + h.position[1] + d + r.height > n.getHeight() && (i.textPosition = 'top', s = !0); var l = s ? -5 - r.height : d + 8; o + r.width / 2 > n.getWidth() ? (i.textPosition = ['100%', l], i.textAlign = 'right') : o - r.width / 2 < 0 && (i.textPosition = [0, l], i.textAlign = 'left') } }) } function v (a, u) { var c; var v = g[a]; var m = g[u]; var y = f[v]; var x = new l(y, t, t.ecModel); if (v && !m) { if (function (t) { return t.indexOf('my') === 0 }(v))c = { model: x, onclick: x.option.onclick, featureName: v }; else { var _ = o.get(v); if (!_) return; c = new _(x, e, n) }p[v] = c } else { if (!(c = p[m])) return; c.model = x, c.ecModel = e, c.api = n }v || !m ? x.get('show') && !c.unusable ? (!(function (i, a, o) { var l = i.getModel('iconStyle'); var u = i.getModel('emphasis.iconStyle'); var c = a.getIcons ? a.getIcons() : i.get('icon'); var f = i.get('title') || {}; if (typeof c === 'string') { var p = c; var g = f; f = {}, (c = {})[o] = p, f[o] = g } var v = i.iconPaths = {}; r.each(c, function (o, c) { var p = s.createIcon(o, {}, { x: -d / 2, y: -d / 2, width: d, height: d }); p.setStyle(l.getItemStyle()), p.hoverStyle = u.getItemStyle(), p.setStyle({ text: f[c], textAlign: u.get('textAlign'), textBorderRadius: u.get('textBorderRadius'), textPadding: u.get('textPadding'), textFill: null }); var g = t.getModel('tooltip'); g && g.get('show') && p.attr('tooltip', r.extend({ content: f[c], formatter: g.get('formatter', !0) || function () { return f[c] }, formatterParams: { componentType: 'toolbox', name: c, title: f[c], $vars: ['name', 'title'] }, position: g.get('position', !0) || 'bottom' }, g.option)), s.setHoverStyle(p), t.get('showTitle') && (p.__title = f[c], p.on('mouseover', function () { var e = u.getItemStyle(); var n = t.get('orient') === 'vertical' ? t.get('right') == null ? 'right' : 'left' : t.get('bottom') == null ? 'bottom' : 'top'; p.setStyle({ textFill: u.get('textFill') || e.fill || e.stroke || '#000', textBackgroundColor: u.get('textBackgroundColor'), textPosition: u.get('textPosition') || n }) }).on('mouseout', function () { p.setStyle({ textFill: null, textBackgroundColor: null }) })), p.trigger(i.get('iconStatus.' + c) || 'normal'), h.add(p), p.on('click', r.bind(a.onclick, a, e, n, c)), v[c] = p }) }(x, c, v)), x.setIconStatus = function (t, e) { var n = this.option; var i = this.iconPaths; n.iconStatus = n.iconStatus || {}, n.iconStatus[t] = e, i[t] && i[t].trigger(e) }, c.render && c.render(x, e, n, i)) : c.remove && c.remove(e, n) : c.dispose && c.dispose(e, n) } }, updateView: function (t, e, n, i) { r.each(this._features, function (t) { t.updateView && t.updateView(t.model, e, n, i) }) }, remove: function (t, e) { r.each(this._features, function (n) { n.remove && n.remove(t, e) }), this.group.removeAll() }, dispose: function (t, e) { r.each(this._features, function (n) { n.dispose && n.dispose(t, e) }) } }); t.exports = h }, function (t, e, n) { var i = n(11); var r = n(30); var a = n(33); var o = r.toolbox.saveAsImage; function s (t) { this.model = t }s.defaultOption = { show: !0, icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0', title: o.title, type: 'png', connectedBackgroundColor: '#fff', name: '', excludeComponents: ['toolbox'], pixelRatio: 1, lang: o.lang.slice() }, s.prototype.unusable = !i.canvasSupported, s.prototype.onclick = function (t, e) { var n = this.model; var r = n.get('name') || t.get('title.0.text') || 'echarts'; var a = n.get('type', !0) || 'png'; var o = e.getConnectedDataURL({ type: a, backgroundColor: n.get('backgroundColor', !0) || t.get('backgroundColor') || '#fff', connectedBackgroundColor: n.get('connectedBackgroundColor'), excludeComponents: n.get('excludeComponents'), pixelRatio: n.get('pixelRatio') }); if (typeof MouseEvent !== 'function' || i.browser.ie || i.browser.edge) if (window.navigator.msSaveOrOpenBlob) { for (var s = atob(o.split(',')[1]), l = s.length, u = new Uint8Array(l); l--;)u[l] = s.charCodeAt(l); var c = new Blob([u]); window.navigator.msSaveOrOpenBlob(c, r + '.' + a) } else { var h = n.get('lang'); var d = '<body style="margin:0;"><img src="' + o + '" style="max-width:100%;" title="' + (h && h[0] || '') + '" /></body>'; window.open().document.write(d) } else { var f = document.createElement('a'); f.download = r + '.' + a, f.target = '_blank', f.href = o; var p = new MouseEvent('click', { view: window, bubbles: !0, cancelable: !1 }); f.dispatchEvent(p) } }, a.register('saveAsImage', s); var l = s; t.exports = l }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(30); var o = n(33); var s = a.toolbox.magicType; function l (t) { this.model = t }l.defaultOption = { show: !0, type: [], icon: { line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4', bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7', stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z', tiled: 'M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z' }, title: r.clone(s.title), option: {}, seriesIndex: {} }; var u = l.prototype; u.getIcons = function () { var t = this.model; var e = t.get('icon'); var n = {}; return r.each(t.get('type'), function (t) { e[t] && (n[t] = e[t]) }), n }; var c = { line: function (t, e, n, i) { if (t === 'bar') return r.merge({ id: e, type: 'line', data: n.get('data'), stack: n.get('stack'), markPoint: n.get('markPoint'), markLine: n.get('markLine') }, i.get('option.line') || {}, !0) }, bar: function (t, e, n, i) { if (t === 'line') return r.merge({ id: e, type: 'bar', data: n.get('data'), stack: n.get('stack'), markPoint: n.get('markPoint'), markLine: n.get('markLine') }, i.get('option.bar') || {}, !0) }, stack: function (t, e, n, i) { if (t === 'line' || t === 'bar') return r.merge({ id: e, stack: '__ec_magicType_stack__' }, i.get('option.stack') || {}, !0) }, tiled: function (t, e, n, i) { if (t === 'line' || t === 'bar') return r.merge({ id: e, stack: '' }, i.get('option.tiled') || {}, !0) } }; var h = [['line', 'bar'], ['stack', 'tiled']]; u.onclick = function (t, e, n) { var i = this.model; var a = i.get('seriesIndex.' + n); if (c[n]) { var o = { series: [] }; r.each(h, function (t) { r.indexOf(t, n) >= 0 && r.each(t, function (t) { i.setIconStatus(t, 'normal') }) }), i.setIconStatus(n, 'emphasis'), t.eachComponent({ mainType: 'series', query: a == null ? null : { seriesIndex: a } }, function (e) { var a = e.subType; var s = e.id; var l = c[n](a, s, e, i); l && (r.defaults(l, e.option), o.series.push(l)); var u = e.coordinateSystem; if (u && u.type === 'cartesian2d' && (n === 'line' || n === 'bar')) { var h = u.getAxesByScale('ordinal')[0]; if (h) { var d = h.dim + 'Axis'; var f = t.queryComponents({ mainType: d, index: e.get(name + 'Index'), id: e.get(name + 'Id') })[0].componentIndex; o[d] = o[d] || []; for (var p = 0; p <= f; p++)o[d][f] = o[d][f] || {}; o[d][f].boundaryGap = n === 'bar' } } }), e.dispatchAction({ type: 'changeMagicType', currentType: n, newOption: o }) } }, i.registerAction({ type: 'changeMagicType', event: 'magicTypeChanged', update: 'prepareAndUpdate' }, function (t, e) { e.mergeOption(t.newOption) }), o.register('magicType', l); var d = l; t.exports = d }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(22); var o = n(30); var s = n(33); var l = o.toolbox.dataView; var u = new Array(60).join('-'); var c = '\t'; function h (t) { return r.map(t, function (t) { var e = t.getRawData(); var n = [t.name]; var i = []; return e.each(e.dimensions, function () { for (var t = arguments.length, r = arguments[t - 1], a = e.getName(r), o = 0; o < t - 1; o++)i[o] = arguments[o]; n.push((a ? a + c : '') + i.join(c)) }), n.join('\n') }).join('\n\n' + u + '\n\n') } function d (t) { return t.replace(/^\s\s*/, '').replace(/\s\s*$/, '') } var f = new RegExp('[' + c + ']+', 'g'); function p (t, e) { var n = t.split(new RegExp('\n*' + u + '\n*', 'g')); var i = { series: [] }; return r.each(n, function (t, n) { if (function (t) { if (t.slice(0, t.indexOf('\n')).indexOf(c) >= 0) return !0 }(t)) { var a = (function (t) { for (var e = t.split(/\n+/g), n = d(e.shift()).split(f), i = [], a = r.map(n, function (t) { return { name: t, data: [] } }), o = 0; o < e.length; o++) { var s = d(e[o]).split(f); i.push(s.shift()); for (var l = 0; l < s.length; l++)a[l] && (a[l].data[o] = s[l]) } return { series: a, categories: i } }(t)); var o = e[n]; var s = o.axisDim + 'Axis'; o && (i[s] = i[s] || [], i[s][o.axisIndex] = { data: a.categories }, i.series = i.series.concat(a.series)) } else { a = (function (t) { for (var e = t.split(/\n+/g), n = d(e.shift()), i = [], r = 0; r < e.length; r++) { var a; var o = d(e[r]).split(f); var s = ''; var l = !1; isNaN(o[0]) ? (l = !0, s = o[0], o = o.slice(1), i[r] = { name: s, value: [] }, a = i[r].value) : a = i[r] = []; for (var u = 0; u < o.length; u++)a.push(+o[u]); a.length === 1 && (l ? i[r].value = a[0] : i[r] = a[0]) } return { name: n, data: i } }(t)); i.series.push(a) } }), i } function g (t) { this._dom = null, this.model = t } function v (t, e) { return r.map(t, function (t, n) { var i = e && e[n]; return r.isObject(i) && !r.isArray(i) ? (r.isObject(t) && !r.isArray(t) && (t = t.value), r.defaults({ value: t }, i)) : t }) }g.defaultOption = { show: !0, readOnly: !1, optionToContent: null, contentToOption: null, icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28', title: r.clone(l.title), lang: r.clone(l.lang), backgroundColor: '#fff', textColor: '#000', textareaColor: '#fff', textareaBorderColor: '#333', buttonColor: '#c23531', buttonTextColor: '#fff' }, g.prototype.onclick = function (t, e) { var n = e.getDom(); var i = this.model; this._dom && n.removeChild(this._dom); var o = document.createElement('div'); o.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;', o.style.backgroundColor = i.get('backgroundColor') || '#fff'; var s = document.createElement('h4'); var l = i.get('lang') || []; s.innerHTML = l[0] || i.get('title'), s.style.cssText = 'margin: 10px 20px;', s.style.color = i.get('textColor'); var d = document.createElement('div'); var f = document.createElement('textarea'); d.style.cssText = 'display:block;width:100%;overflow:auto;'; var g = i.get('optionToContent'); var v = i.get('contentToOption'); var m = (function (t) { var e; var n; var i = (function (t) { var e = {}; var n = []; var i = []; return t.eachRawSeries(function (t) { var r = t.coordinateSystem; if (!r || r.type !== 'cartesian2d' && r.type !== 'polar')n.push(t); else { var a = r.getBaseAxis(); if (a.type === 'category') { var o = a.dim + '_' + a.index; e[o] || (e[o] = { categoryAxis: a, valueAxis: r.getOtherAxis(a), series: [] }, i.push({ axisDim: a.dim, axisIndex: a.index })), e[o].series.push(t) } else n.push(t) } }), { seriesGroupByCategoryAxis: e, other: n, meta: i } }(t)); return { value: r.filter([(e = i.seriesGroupByCategoryAxis, n = [], r.each(e, function (t, e) { var i = t.categoryAxis; var a = t.valueAxis.dim; var o = [' '].concat(r.map(t.series, function (t) { return t.name })); var s = [i.model.getCategories()]; r.each(t.series, function (t) { s.push(t.getRawData().mapArray(a, function (t) { return t })) }); for (var l = [o.join(c)], u = 0; u < s[0].length; u++) { for (var h = [], d = 0; d < s.length; d++)h.push(s[d][u]); l.push(h.join(c)) }n.push(l.join('\n')) }), n.join('\n\n' + u + '\n\n')), h(i.other)], function (t) { return t.replace(/[\n\t\s]/g, '') }).join('\n\n' + u + '\n\n'), meta: i.meta } }(t)); if (typeof g === 'function') { var y = g(e.getOption()); typeof y === 'string' ? d.innerHTML = y : r.isDom(y) && d.appendChild(y) } else d.appendChild(f), f.readOnly = i.get('readOnly'), f.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;', f.style.color = i.get('textColor'), f.style.borderColor = i.get('textareaBorderColor'), f.style.backgroundColor = i.get('textareaColor'), f.value = m.value; var x = m.meta; var _ = document.createElement('div'); _.style.cssText = 'position:absolute;bottom:0;left:0;right:0;'; var b = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px'; var w = document.createElement('div'); var S = document.createElement('div'); b += ';background-color:' + i.get('buttonColor'), b += ';color:' + i.get('buttonTextColor'); var M = this; function I () { n.removeChild(o), M._dom = null }a.addEventListener(w, 'click', I), a.addEventListener(S, 'click', function () { var t; try { t = typeof v === 'function' ? v(d, e.getOption()) : p(f.value, x) } catch (t) { throw I(), new Error('Data view format error ' + t) }t && e.dispatchAction({ type: 'changeDataView', newOption: t }), I() }), w.innerHTML = l[1], S.innerHTML = l[2], S.style.cssText = b, w.style.cssText = b, !i.get('readOnly') && _.appendChild(S), _.appendChild(w), o.appendChild(s), o.appendChild(d), o.appendChild(_), d.style.height = n.clientHeight - 80 + 'px', n.appendChild(o), this._dom = o }, g.prototype.remove = function (t, e) { this._dom && e.getDom().removeChild(this._dom) }, g.prototype.dispose = function (t, e) { this.remove(t, e) }, s.register('dataView', g), i.registerAction({ type: 'changeDataView', event: 'dataViewChanged', update: 'prepareAndUpdate' }, function (t, e) { var n = []; r.each(t.newOption.series, function (t) { var i = e.getSeriesByName(t.name)[0]; if (i) { var a = i.get('data'); n.push({ name: t.name, data: v(t.data, a) }) } else n.push(r.extend({ type: 'scatter' }, t)) }), e.mergeOption(r.defaults({ series: n }, t.newOption)) }); var m = g; t.exports = m }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(108); var o = n(194); var s = n(195); var l = n(50); var u = n(30); var c = n(33); n(462); var h = u.toolbox.dataZoom; var d = r.each; var f = '\0_ec_\0toolbox-dataZoom_'; function p (t, e, n) { (this._brushController = new a(n.getZr())).on('brush', r.bind(this._onBrush, this)).mount(), this._isZoomActive }p.defaultOption = { show: !0, filterMode: 'filter', icon: { zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1', back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26' }, title: r.clone(h.title) }; var g = p.prototype; g.render = function (t, e, n, i) { this.model = t, this.ecModel = e, this.api = n, (function (t, e, n, i, r) { var a = n._isZoomActive; i && i.type === 'takeGlobalCursor' && (a = i.key === 'dataZoomSelect' && i.dataZoomSelectActive); n._isZoomActive = a, t.setIconStatus('zoom', a ? 'emphasis' : 'normal'); var s = new o(m(t.option), e, { include: ['grid'] }); n._brushController.setPanels(s.makePanelOpts(r, function (t) { return t.xAxisDeclared && !t.yAxisDeclared ? 'lineX' : !t.xAxisDeclared && t.yAxisDeclared ? 'lineY' : 'rect' })).enableBrush(!!a && { brushType: 'auto', brushStyle: { lineWidth: 0, fill: 'rgba(0,0,0,0.2)' } }) }(t, e, this, i, n)), (function (t, e) { t.setIconStatus('back', s.count(e) > 1 ? 'emphasis' : 'normal') }(t, e)) }, g.onclick = function (t, e, n) { v[n].call(this) }, g.remove = function (t, e) { this._brushController.unmount() }, g.dispose = function (t, e) { this._brushController.dispose() }; var v = { zoom: function () { var t = !this._isZoomActive; this.api.dispatchAction({ type: 'takeGlobalCursor', key: 'dataZoomSelect', dataZoomSelectActive: t }) }, back: function () { this._dispatchZoomAction(s.pop(this.ecModel)) } }; function m (t) { var e = {}; return r.each(['xAxisIndex', 'yAxisIndex'], function (n) { e[n] = t[n], e[n] == null && (e[n] = 'all'), (!1 === e[n] || e[n] === 'none') && (e[n] = []) }), e }g._onBrush = function (t, e) { if (e.isEnd && t.length) { var n = {}; var i = this.ecModel; this._brushController.updateCovers([]), new o(m(this.model.option), i, { include: ['grid'] }).matchOutputRanges(t, i, function (t, e, n) { if (n.type === 'cartesian2d') { var i = t.brushType; i === 'rect' ? (r('x', n, e[0]), r('y', n, e[1])) : r({ lineX: 'x', lineY: 'y' }[i], n, e) } }), s.push(i, n), this._dispatchZoomAction(n) } function r (t, e, r) { var a = e.getAxis(t); var o = a.model; var s = (function (t, e, n) { var i; return n.eachComponent({ mainType: 'dataZoom', subType: 'select' }, function (n) { n.getAxisModel(t, e.componentIndex) && (i = n) }), i }(t, o, i)); var u = s.findRepresentativeAxisProxy(o).getMinMaxSpan(); u.minValueSpan == null && u.maxValueSpan == null || (r = l(0, r.slice(), a.scale.getExtent(), 0, u.minValueSpan, u.maxValueSpan)), s && (n[s.id] = { dataZoomId: s.id, startValue: r[0], endValue: r[1] }) } }, g._dispatchZoomAction = function (t) { var e = []; d(t, function (t, n) { e.push(r.clone(t)) }), e.length && this.api.dispatchAction({ type: 'dataZoom', from: this.uid, batch: e }) }, c.register('dataZoom', p), i.registerPreprocessor(function (t) { if (t) { var e = t.dataZoom || (t.dataZoom = []); r.isArray(e) || (t.dataZoom = e = [e]); var n = t.toolbox; if (n && (r.isArray(n) && (n = n[0]), n && n.feature)) { var i = n.feature.dataZoom; a('xAxis', i), a('yAxis', i) } } function a (n, i) { if (i) { var a = n + 'Index'; var o = i[a]; o == null || o === 'all' || r.isArray(o) || (o = !1 === o || o === 'none' ? [] : [o]), (function (e, n) { var i = t[e]; r.isArray(i) || (i = i ? [i] : []); d(i, n) }(n, function (t, s) { if (o == null || o === 'all' || r.indexOf(o, s) !== -1) { var l = { type: 'select', $fromToolbox: !0, filterMode: i.filterMode || 'filter', id: f + n + s }; l[a] = s, e.push(l) } })) } } }); var y = p; t.exports = y }, function (t, e, n) { n(111), n(51), n(52), n(464), n(465), n(113), n(114) }, function (t, e, n) { var i = n(0); var r = n(3); var a = n(112); var o = n(50); var s = i.each; var l = r.asc; var u = function (t, e, n, i) { this._dimName = t, this._axisIndex = e, this._valueWindow, this._percentWindow, this._dataExtent, this._minMaxSpan, this.ecModel = i, this._dataZoomModel = n }; function c (t, e) { var n = t.getAxisModel(); var i = t._percentWindow; var a = t._valueWindow; if (i) { var o = r.getPixelPrecision(a, [0, 500]); o = Math.min(o, 20); var s = e || i[0] === 0 && i[1] === 100; n.setRange(s ? null : +a[0].toFixed(o), s ? null : +a[1].toFixed(o)) } }u.prototype = { constructor: u, hostedBy: function (t) { return this._dataZoomModel === t }, getDataValueWindow: function () { return this._valueWindow.slice() }, getDataPercentWindow: function () { return this._percentWindow.slice() }, getTargetSeriesModels: function () { var t = []; var e = this.ecModel; return e.eachSeries(function (n) { if (a.isCoordSupported(n.get('coordinateSystem'))) { var i = this._dimName; var r = e.queryComponents({ mainType: i + 'Axis', index: n.get(i + 'AxisIndex'), id: n.get(i + 'AxisId') })[0]; this._axisIndex === (r && r.componentIndex) && t.push(n) } }, this), t }, getAxisModel: function () { return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex) }, getOtherAxisModel: function () { var t; var e; var n; var i = this._dimName; var r = this.ecModel; var a = this.getAxisModel(); return i === 'x' || i === 'y' ? (e = 'gridIndex', t = i === 'x' ? 'y' : 'x') : (e = 'polarIndex', t = i === 'angle' ? 'radius' : 'angle'), r.eachComponent(t + 'Axis', function (t) { (t.get(e) || 0) === (a.get(e) || 0) && (n = t) }), n }, getMinMaxSpan: function () { return i.clone(this._minMaxSpan) }, calculateDataWindow: function (t) { var e; var n = this._dataExtent; var i = this.getAxisModel().axis.scale; var a = this._dataZoomModel.getRangePropMode(); var u = [0, 100]; var c = []; var h = []; s(['start', 'end'], function (o, s) { var l = t[o]; var d = t[o + 'Value']; a[s] === 'percent' ? (l == null && (l = u[s]), d = i.parse(r.linearMap(l, u, n))) : (e = !0, d = d == null ? n[s] : i.parse(d), l = r.linearMap(d, n, u)), h[s] = d, c[s] = l }), l(h), l(c); var d = this._minMaxSpan; function f (t, e, n, a, s) { var l = s ? 'Span' : 'ValueSpan'; o(0, t, n, 'all', d['min' + l], d['max' + l]); for (var u = 0; u < 2; u++)e[u] = r.linearMap(t[u], n, a, !0), s && (e[u] = i.parse(e[u])) } return e ? f(h, c, n, u, !1) : f(c, h, u, n, !0), { valueWindow: h, percentWindow: c } }, reset: function (t) { if (t === this._dataZoomModel) { var e = this.getTargetSeriesModels(); this._dataExtent = (function (t, e, n) { var i = [1 / 0, -1 / 0]; s(n, function (t) { var n = t.getData(); n && s(n.mapDimension(e, !0), function (t) { var e = n.getApproximateExtent(t); e[0] < i[0] && (i[0] = e[0]), e[1] > i[1] && (i[1] = e[1]) }) }), i[1] < i[0] && (i = [NaN, NaN]); return (function (t, e) { var n = t.getAxisModel(); var i = n.getMin(!0); var r = n.get('type') === 'category'; var a = r && n.getCategories().length; i != null && i !== 'dataMin' && typeof i !== 'function' ? e[0] = i : r && (e[0] = a > 0 ? 0 : NaN); var o = n.getMax(!0); o != null && o !== 'dataMax' && typeof o !== 'function' ? e[1] = o : r && (e[1] = a > 0 ? a - 1 : NaN); n.get('scale', !0) || (e[0] > 0 && (e[0] = 0), e[1] < 0 && (e[1] = 0)) }(t, i)), i }(this, this._dimName, e)), (function (t) { var e = t._minMaxSpan = {}; var n = t._dataZoomModel; var i = t._dataExtent; s(['min', 'max'], function (a) { var o = n.get(a + 'Span'); var s = n.get(a + 'ValueSpan'); s != null && (s = t.getAxisModel().axis.scale.parse(s)), s != null ? o = r.linearMap(i[0] + s, i, [0, 100], !0) : o != null && (s = r.linearMap(o, [0, 100], i, !0) - i[0]), e[a + 'Span'] = o, e[a + 'ValueSpan'] = s }) }(this)); var n = this.calculateDataWindow(t.settledOption); this._valueWindow = n.valueWindow, this._percentWindow = n.percentWindow, c(this) } }, restore: function (t) { t === this._dataZoomModel && (this._valueWindow = this._percentWindow = null, c(this, !0)) }, filterData: function (t, e) { if (t === this._dataZoomModel) { var n = this._dimName; var i = this.getTargetSeriesModels(); var r = t.get('filterMode'); var a = this._valueWindow; r !== 'none' && s(i, function (t) { var e = t.getData(); var i = e.mapDimension(n, !0); i.length && (r === 'weakFilter' ? e.filterSelf(function (t) { for (var n, r, o, s = 0; s < i.length; s++) { var l = e.get(i[s], t); var u = !isNaN(l); var c = l < a[0]; var h = l > a[1]; if (u && !c && !h) return !0; u && (o = !0), c && (n = !0), h && (r = !0) } return o && n && r }) : s(i, function (n) { if (r === 'empty')t.setData(e = e.map(n, function (t) { return (function (t) { return t >= a[0] && t <= a[1] }(t)) ? t : NaN })); else { var i = {}; i[n] = a, e.selectRange(i) } }), s(i, function (t) { e.setApproximateExtent(a, t) })) }) } } }; var h = u; t.exports = h }, function (t, e, n) { var i = n(51).extend({ type: 'dataZoom.select' }); t.exports = i }, function (t, e, n) { var i = n(52).extend({ type: 'dataZoom.select' }); t.exports = i }, function (t, e, n) { var i = n(1); var r = n(195); var a = n(30); var o = n(33); var s = a.toolbox.restore; function l (t) { this.model = t }l.defaultOption = { show: !0, icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5', title: s.title }, l.prototype.onclick = function (t, e, n) { r.clear(t), e.dispatchAction({ type: 'restore', from: this.uid }) }, o.register('restore', l), i.registerAction({ type: 'restore', event: 'restore', update: 'prepareAndUpdate' }, function (t, e) { e.resetOption('recreate') }); var u = l; t.exports = u }, function (t, e, n) { var i = n(1); n(65), n(468), n(469), i.registerAction({ type: 'showTip', event: 'showTip', update: 'tooltip:manuallyShowTip' }, function () {}), i.registerAction({ type: 'hideTip', event: 'hideTip', update: 'tooltip:manuallyHideTip' }, function () {}) }, function (t, e, n) { var i = n(1).extendComponentModel({ type: 'tooltip', dependencies: ['axisPointer'], defaultOption: { zlevel: 0, z: 60, show: !0, showContent: !0, trigger: 'item', triggerOn: 'mousemove|click', alwaysShowContent: !1, displayMode: 'single', renderMode: 'auto', confine: !1, showDelay: 0, hideDelay: 100, transitionDuration: 0.4, enterable: !1, backgroundColor: 'rgba(50,50,50,0.7)', borderColor: '#333', borderRadius: 4, borderWidth: 0, padding: 5, extraCssText: '', axisPointer: { type: 'line', axis: 'auto', animation: 'auto', animationDurationUpdate: 200, animationEasingUpdate: 'exponentialOut', crossStyle: { color: '#999', width: 1, type: 'dashed', textStyle: {} } }, textStyle: { color: '#fff', fontSize: 14 } } }); t.exports = i }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(11); var o = n(470); var s = n(471); var l = n(9); var u = n(3); var c = n(2); var h = n(190); var d = n(6); var f = n(12); var p = n(191); var g = n(21); var v = n(84); var m = n(4).getTooltipRenderMode; var y = r.bind; var x = r.each; var _ = u.parsePercent; var b = new c.Rect({ shape: { x: -1, y: -1, width: 2, height: 2 } }); var w = i.extendComponentView({ type: 'tooltip', init: function (t, e) { if (!a.node) { var n; var i = t.getComponent('tooltip').get('renderMode'); this._renderMode = m(i), this._renderMode === 'html' ? (n = new o(e.getDom(), e), this._newLine = '<br/>') : (n = new s(e), this._newLine = '\n'), this._tooltipContent = n } }, render: function (t, e, n) { if (!a.node) { this.group.removeAll(), this._tooltipModel = t, this._ecModel = e, this._api = n, this._lastDataByCoordSys = null, this._alwaysShowContent = t.get('alwaysShowContent'); var i = this._tooltipContent; i.update(), i.setEnterable(t.get('enterable')), this._initGlobalListener(), this._keepShow() } }, _initGlobalListener: function () { var t = this._tooltipModel.get('triggerOn'); p.register('itemTooltip', this._api, y(function (e, n, i) { t !== 'none' && (t.indexOf(e) >= 0 ? this._tryShow(n, i) : e === 'leave' && this._hide(i)) }, this)) }, _keepShow: function () { var t = this._tooltipModel; var e = this._ecModel; var n = this._api; if (this._lastX != null && this._lastY != null && t.get('triggerOn') !== 'none') { var i = this; clearTimeout(this._refreshUpdateTimeout), this._refreshUpdateTimeout = setTimeout(function () { !n.isDisposed() && i.manuallyShowTip(t, e, n, { x: i._lastX, y: i._lastY }) }) } }, manuallyShowTip: function (t, e, n, i) { if (i.from !== this.uid && !a.node) { var r = M(i, n); this._ticket = ''; var o = i.dataByCoordSys; if (i.tooltip && i.x != null && i.y != null) { var s = b; s.position = [i.x, i.y], s.update(), s.tooltip = i.tooltip, this._tryShow({ offsetX: i.x, offsetY: i.y, target: s }, r) } else if (o) this._tryShow({ offsetX: i.x, offsetY: i.y, position: i.position, event: {}, dataByCoordSys: i.dataByCoordSys, tooltipOption: i.tooltipOption }, r); else if (i.seriesIndex != null) { if (this._manuallyAxisShowTip(t, e, n, i)) return; var l = h(i, e); var u = l.point[0]; var c = l.point[1]; u != null && c != null && this._tryShow({ offsetX: u, offsetY: c, position: i.position, target: l.el, event: {} }, r) } else i.x != null && i.y != null && (n.dispatchAction({ type: 'updateAxisPointer', x: i.x, y: i.y }), this._tryShow({ offsetX: i.x, offsetY: i.y, position: i.position, target: n.getZr().findHover(i.x, i.y).target, event: {} }, r)) } }, manuallyHideTip: function (t, e, n, i) { var r = this._tooltipContent; !this._alwaysShowContent && this._tooltipModel && r.hideLater(this._tooltipModel.get('hideDelay')), this._lastX = this._lastY = null, i.from !== this.uid && this._hide(M(i, n)) }, _manuallyAxisShowTip: function (t, e, n, i) { var r = i.seriesIndex; var a = i.dataIndex; var o = e.getComponent('axisPointer').coordSysAxesInfo; if (r != null && a != null && o != null) { var s = e.getSeriesByIndex(r); if (s) if ((t = S([s.getData().getItemModel(a), s, (s.coordinateSystem || {}).model, t])).get('trigger') === 'axis') return n.dispatchAction({ type: 'updateAxisPointer', seriesIndex: r, dataIndex: a, position: i.position }), !0 } }, _tryShow: function (t, e) { var n = t.target; if (this._tooltipModel) { this._lastX = t.offsetX, this._lastY = t.offsetY; var i = t.dataByCoordSys; i && i.length ? this._showAxisTooltip(i, t) : n && n.dataIndex != null ? (this._lastDataByCoordSys = null, this._showSeriesItemTooltip(t, n, e)) : n && n.tooltip ? (this._lastDataByCoordSys = null, this._showComponentItemTooltip(t, n, e)) : (this._lastDataByCoordSys = null, this._hide(e)) } }, _showOrMove: function (t, e) { var n = t.get('showDelay'); e = r.bind(e, this), clearTimeout(this._showTimout), n > 0 ? this._showTimout = setTimeout(e, n) : e() }, _showAxisTooltip: function (t, e) { var n = this._ecModel; var i = this._tooltipModel; var a = [e.offsetX, e.offsetY]; var o = []; var s = []; var u = S([e.tooltipOption, i]); var c = this._renderMode; var h = this._newLine; var d = {}; x(t, function (t) { x(t.dataByAxis, function (t) { var e = n.getComponent(t.axisDim + 'Axis', t.axisIndex); var i = t.value; var a = []; if (e && i != null) { var u = v.getValueLabel(i, e.axis, n, t.seriesDataIndices, t.valueLabelOpt); r.each(t.seriesDataIndices, function (o) { var l = n.getSeriesByIndex(o.seriesIndex); var h = o.dataIndexInside; var f = l && l.getDataParams(h); if (f.axisDim = t.axisDim, f.axisIndex = t.axisIndex, f.axisType = t.axisType, f.axisId = t.axisId, f.axisValue = g.getAxisRawValue(e.axis, i), f.axisValueLabel = u, f) { s.push(f); var p; var v = l.formatTooltip(h, !0, null, c); if (r.isObject(v)) { p = v.html; var m = v.markers; r.merge(d, m) } else p = v; a.push(p) } }); var f = u; c !== 'html' ? o.push(a.join(h)) : o.push((f ? l.encodeHTML(f) + h : '') + a.join(h)) } }) }, this), o.reverse(), o = o.join(this._newLine + this._newLine); var f = e.position; this._showOrMove(u, function () { this._updateContentNotChangedOnAxis(t) ? this._updatePosition(u, f, a[0], a[1], this._tooltipContent, s) : this._showTooltipContent(u, o, s, Math.random(), a[0], a[1], f, void 0, d) }) }, _showSeriesItemTooltip: function (t, e, n) { var i = this._ecModel; var a = e.seriesIndex; var o = i.getSeriesByIndex(a); var s = e.dataModel || o; var l = e.dataIndex; var u = e.dataType; var c = s.getData(); var h = S([c.getItemModel(l), s, o && (o.coordinateSystem || {}).model, this._tooltipModel]); var d = h.get('trigger'); if (d == null || d === 'item') { var f; var p; var g = s.getDataParams(l, u); var v = s.formatTooltip(l, !1, u, this._renderMode); r.isObject(v) ? (f = v.html, p = v.markers) : (f = v, p = null); var m = 'item_' + s.name + '_' + l; this._showOrMove(h, function () { this._showTooltipContent(h, f, g, m, t.offsetX, t.offsetY, t.position, t.target, p) }), n({ type: 'showTip', dataIndexInside: l, dataIndex: c.getRawIndex(l), seriesIndex: a, from: this.uid }) } }, _showComponentItemTooltip: function (t, e, n) { var i = e.tooltip; if (typeof i === 'string') { i = { content: i, formatter: i } } var r = new f(i, this._tooltipModel, this._ecModel); var a = r.get('content'); var o = Math.random(); this._showOrMove(r, function () { this._showTooltipContent(r, a, r.get('formatterParams') || {}, o, t.offsetX, t.offsetY, t.position, e) }), n({ type: 'showTip', from: this.uid }) }, _showTooltipContent: function (t, e, n, i, r, a, o, s, u) { if (this._ticket = '', t.get('showContent') && t.get('show')) { var c = this._tooltipContent; var h = t.get('formatter'); o = o || t.get('position'); var d = e; if (h && typeof h === 'string')d = l.formatTpl(h, n, !0); else if (typeof h === 'function') { var f = y(function (e, i) { e === this._ticket && (c.setContent(i, u, t), this._updatePosition(t, o, r, a, c, n, s)) }, this); this._ticket = i, d = h(n, i, f) }c.setContent(d, u, t), c.show(t), this._updatePosition(t, o, r, a, c, n, s) } }, _updatePosition: function (t, e, n, i, a, o, s) { var l = this._api.getWidth(); var u = this._api.getHeight(); e = e || t.get('position'); var c = a.getSize(); var h = t.get('align'); var f = t.get('verticalAlign'); var p = s && s.getBoundingRect().clone(); if (s && p.applyTransform(s.transform), typeof e === 'function' && (e = e([n, i], o, a.el, p, { viewSize: [l, u], contentSize: c.slice() })), r.isArray(e))n = _(e[0], l), i = _(e[1], u); else if (r.isObject(e)) { e.width = c[0], e.height = c[1]; var g = d.getLayoutRect(e, { width: l, height: u }); n = g.x, i = g.y, h = null, f = null } else if (typeof e === 'string' && s) { var v = (function (t, e, n) { var i = n[0]; var r = n[1]; var a = 0; var o = 0; var s = e.width; var l = e.height; switch (t) { case 'inside':a = e.x + s / 2 - i / 2, o = e.y + l / 2 - r / 2; break; case 'top':a = e.x + s / 2 - i / 2, o = e.y - r - 5; break; case 'bottom':a = e.x + s / 2 - i / 2, o = e.y + l + 5; break; case 'left':a = e.x - i - 5, o = e.y + l / 2 - r / 2; break; case 'right':a = e.x + s + 5, o = e.y + l / 2 - r / 2 } return [a, o] }(e, p, c)); n = v[0], i = v[1] } else { v = (function (t, e, n, i, r, a, o) { var s = n.getOuterSize(); var l = s.width; var u = s.height; a != null && (t + l + a > i ? t -= l + a : t += a); o != null && (e + u + o > r ? e -= u + o : e += o); return [t, e] }(n, i, a, l, u, h ? null : 20, f ? null : 20)); n = v[0], i = v[1] } if (h && (n -= I(h) ? c[0] / 2 : h === 'right' ? c[0] : 0), f && (i -= I(f) ? c[1] / 2 : f === 'bottom' ? c[1] : 0), t.get('confine')) { v = (function (t, e, n, i, r) { var a = n.getOuterSize(); var o = a.width; var s = a.height; return t = Math.min(t + o, i) - o, e = Math.min(e + s, r) - s, t = Math.max(t, 0), e = Math.max(e, 0), [t, e] }(n, i, a, l, u)); n = v[0], i = v[1] }a.moveTo(n, i) }, _updateContentNotChangedOnAxis: function (t) { var e = this._lastDataByCoordSys; var n = !!e && e.length === t.length; return n && x(e, function (e, i) { var r = e.dataByAxis || {}; var a = (t[i] || {}).dataByAxis || []; (n &= r.length === a.length) && x(r, function (t, e) { var i = a[e] || {}; var r = t.seriesDataIndices || []; var o = i.seriesDataIndices || []; (n &= t.value === i.value && t.axisType === i.axisType && t.axisId === i.axisId && r.length === o.length) && x(r, function (t, e) { var i = o[e]; n &= t.seriesIndex === i.seriesIndex && t.dataIndex === i.dataIndex }) }) }), this._lastDataByCoordSys = t, !!n }, _hide: function (t) { this._lastDataByCoordSys = null, t({ type: 'hideTip', from: this.uid }) }, dispose: function (t, e) { a.node || (this._tooltipContent.hide(), p.unregister('itemTooltip', e)) } }); function S (t) { for (var e = t.pop(); t.length;) { var n = t.pop(); n && (f.isInstance(n) && (n = n.get('tooltip', !0)), typeof n === 'string' && (n = { formatter: n }), e = new f(n, e, e.ecModel)) } return e } function M (t, e) { return t.dispatchAction || r.bind(e.dispatchAction, e) } function I (t) { return t === 'center' || t === 'middle' }t.exports = w }, function (t, e, n) { var i = n(0); var r = n(23); var a = n(22); var o = n(11); var s = n(9); var l = i.each; var u = s.toCamelCase; var c = ['', '-webkit-', '-moz-', '-o-']; function h (t) { var e; var n; var a = []; var h = t.get('transitionDuration'); var d = t.get('backgroundColor'); var f = t.getModel('textStyle'); var p = t.get('padding'); return h && a.push((n = 'left ' + (e = h) + 's cubic-bezier(0.23, 1, 0.32, 1),top ' + e + 's cubic-bezier(0.23, 1, 0.32, 1)', i.map(c, function (t) { return t + 'transition:' + n }).join(';'))), d && (o.canvasSupported ? a.push('background-Color:' + d) : (a.push('background-Color:#' + r.toHex(d)), a.push('filter:alpha(opacity=70)'))), l(['width', 'color', 'radius'], function (e) { var n = 'border-' + e; var i = u(n); var r = t.get(i); r != null && a.push(n + ':' + r + (e === 'color' ? '' : 'px')) }), a.push(function (t) { var e = []; var n = t.get('fontSize'); var i = t.getTextColor(); return i && e.push('color:' + i), e.push('font:' + t.getFont()), n && e.push('line-height:' + Math.round(3 * n / 2) + 'px'), l(['decoration', 'align'], function (n) { var i = t.get(n); i && e.push('text-' + n + ':' + i) }), e.join(';') }(f)), p != null && a.push('padding:' + s.normalizeCssArray(p).join('px ') + 'px'), a.join(';') + ';' } function d (t, e) { if (o.wxa) return null; var n = document.createElement('div'); var i = this._zr = e.getZr(); this.el = n, this._x = e.getWidth() / 2, this._y = e.getHeight() / 2, t.appendChild(n), this._container = t, this._show = !1, this._hideTimeout; var r = this; n.onmouseenter = function () { r._enterable && (clearTimeout(r._hideTimeout), r._show = !0), r._inContent = !0 }, n.onmousemove = function (e) { if (e = e || window.event, !r._enterable) { var n = i.handler; a.normalizeEvent(t, e, !0), n.dispatch('mousemove', e) } }, n.onmouseleave = function () { r._enterable && r._show && r.hideLater(r._hideDelay), r._inContent = !1 } }d.prototype = { constructor: d, _enterable: !0, update: function () { var t = this._container; var e = t.currentStyle || document.defaultView.getComputedStyle(t); var n = t.style; n.position !== 'absolute' && e.position !== 'absolute' && (n.position = 'relative') }, show: function (t) { clearTimeout(this._hideTimeout); var e = this.el; e.style.cssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;' + h(t) + ';left:' + this._x + 'px;top:' + this._y + 'px;' + (t.get('extraCssText') || ''), e.style.display = e.innerHTML ? 'block' : 'none', e.style.pointerEvents = this._enterable ? 'auto' : 'none', this._show = !0 }, setContent: function (t) { this.el.innerHTML = t == null ? '' : t }, setEnterable: function (t) { this._enterable = t }, getSize: function () { var t = this.el; return [t.clientWidth, t.clientHeight] }, moveTo: function (t, e) { var n; var i = this._zr; i && i.painter && (n = i.painter.getViewportRootOffset()) && (t += n.offsetLeft, e += n.offsetTop); var r = this.el.style; r.left = t + 'px', r.top = e + 'px', this._x = t, this._y = e }, hide: function () { this.el.style.display = 'none', this._show = !1 }, hideLater: function (t) { !this._show || this._inContent && this._enterable || (t ? (this._hideDelay = t, this._show = !1, this._hideTimeout = setTimeout(i.bind(this.hide, this), t)) : this.hide()) }, isShow: function () { return this._show }, getOuterSize: function () { var t = this.el.clientWidth; var e = this.el.clientHeight; if (document.defaultView && document.defaultView.getComputedStyle) { var n = document.defaultView.getComputedStyle(this.el); n && (t += parseInt(n.borderLeftWidth, 10) + parseInt(n.borderRightWidth, 10), e += parseInt(n.borderTopWidth, 10) + parseInt(n.borderBottomWidth, 10)) } return { width: t, height: e } } }; var f = d; t.exports = f }, function (t, e, n) { var i = n(0); var r = n(35); function a (t) { this._zr = t.getZr(), this._show = !1, this._hideTimeout }a.prototype = { constructor: a, _enterable: !0, update: function () {}, show: function (t) { this._hideTimeout && clearTimeout(this._hideTimeout), this.el.attr('show', !0), this._show = !0 }, setContent: function (t, e, n) { this.el && this._zr.remove(this.el); for (var i = {}, a = t, o = a.indexOf('{marker'); o >= 0;) { var s = a.indexOf('|}'); var l = a.substr(o + '{marker'.length, s - o - '{marker'.length); l.indexOf('sub') > -1 ? i['marker' + l] = { textWidth: 4, textHeight: 4, textBorderRadius: 2, textBackgroundColor: e[l], textOffset: [3, 0] } : i['marker' + l] = { textWidth: 10, textHeight: 10, textBorderRadius: 5, textBackgroundColor: e[l] }, o = (a = a.substr(s + 1)).indexOf('{marker') } this.el = new r({ style: { rich: i, text: t, textLineHeight: 20, textBackgroundColor: n.get('backgroundColor'), textBorderRadius: n.get('borderRadius'), textFill: n.get('textStyle.color'), textPadding: n.get('padding') }, z: n.get('z') }), this._zr.add(this.el); var u = this; this.el.on('mouseover', function () { u._enterable && (clearTimeout(u._hideTimeout), u._show = !0), u._inContent = !0 }), this.el.on('mouseout', function () { u._enterable && u._show && u.hideLater(u._hideDelay), u._inContent = !1 }) }, setEnterable: function (t) { this._enterable = t }, getSize: function () { var t = this.el.getBoundingRect(); return [t.width, t.height] }, moveTo: function (t, e) { this.el && this.el.attr('position', [t, e]) }, hide: function () { this.el && this.el.hide(), this._show = !1 }, hideLater: function (t) { !this._show || this._inContent && this._enterable || (t ? (this._hideDelay = t, this._show = !1, this._hideTimeout = setTimeout(i.bind(this.hide, this), t)) : this.hide()) }, isShow: function () { return this._show }, getOuterSize: function () { var t = this.getSize(); return { width: t[0], height: t[1] } } }; var o = a; t.exports = o }, function (t, e, n) { var i = n(1); var r = n(473); n(474), n(476), n(477), n(478), n(479), i.registerPreprocessor(r) }, function (t, e, n) { var i = n(0); var r = ['rect', 'polygon', 'keep', 'clear']; t.exports = function (t, e) { var n = t && t.brush; if (i.isArray(n) || (n = n ? [n] : []), n.length) { var a = []; i.each(n, function (t) { var e = t.hasOwnProperty('toolbox') ? t.toolbox : []; e instanceof Array && (a = a.concat(e)) }); var o = t && t.toolbox; i.isArray(o) && (o = o[0]), o || (o = { feature: {} }, t.toolbox = [o]); var s; var l; var u = o.feature || (o.feature = {}); var c = u.brush || (u.brush = {}); var h = c.type || (c.type = []); h.push.apply(h, a), s = h, l = {}, i.each(s, function (t) { l[t] = 1 }), s.length = 0, i.each(l, function (t, e) { s.push(e) }), e && !h.length && h.push.apply(h, r) } } }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(8); var o = n(85); var s = n(475); var l = n(29); var u = n(194); var c = ['inBrush', 'outOfBrush']; var h = '__ecBrushSelect'; var d = '__ecInBrushSelectEvent'; var f = i.PRIORITY.VISUAL.BRUSH; function p (t, e) { if (!t.isDisposed()) { var n = t.getZr(); n[d] = !0, t.dispatchAction({ type: 'brushSelect', batch: e }), n[d] = !1 } } function g (t, e, n, i) { for (var r = 0, a = e.length; r < a; r++) { var o = e[r]; if (t[o.brushType](i, n, o.selectors, o)) return !0 } } function v (t) { var e = t.brushSelector; if (r.isString(e)) { var n = []; return r.each(s, function (t, i) { n[i] = function (n, i, r, a) { var o = i.getItemLayout(n); return t[e](o, r, a) } }), n } if (r.isFunction(e)) { var i = {}; return r.each(s, function (t, n) { i[n] = e }), i } return e }i.registerLayout(f, function (t, e, n) { t.eachComponent({ mainType: 'brush' }, function (e) { n && n.type === 'takeGlobalCursor' && e.setBrushOption(n.key === 'brush' ? n.brushOption : { brushType: !1 }), (e.brushTargetManager = new u(e.option, t)).setInputRanges(e.areas, t) }) }), i.registerVisual(f, function (t, e, n) { var i; var a; var u = []; t.eachComponent({ mainType: 'brush' }, function (e, n) { var l = { brushId: e.id, brushIndex: n, brushName: e.name, areas: r.clone(e.areas), selected: [] }; u.push(l); var h = e.option; var d = h.brushLink; var f = []; var p = []; var y = []; var x = 0; n || (i = h.throttleType, a = h.throttleDelay); var _ = r.map(e.areas, function (t) { return (function (t) { var e = t.selectors = {}; return r.each(s[t.brushType], function (n, i) { e[i] = function (i) { return n(i, e, t) } }), t }(r.defaults({ boundingRect: m[t.brushType](t) }, t))) }); var b = o.createVisualMappings(e.option, c, function (t) { t.mappingMethod = 'fixed' }); function w (t) { return d === 'all' || f[t] } function S (t) { return !!t.length }r.isArray(d) && r.each(d, function (t) { f[t] = 1 }), t.eachSeries(function (n, i) { var a = y[i] = []; n.subType === 'parallel' ? (function (t, e) { var n = t.coordinateSystem; x |= n.hasAxisBrushed(), w(e) && n.eachActiveState(t.getData(), function (t, e) { t === 'active' && (p[e] = 1) }) }(n, i)) : (function (n, i, a) { var o = v(n); if (!o || (function (t, e) { var n = t.option.seriesIndex; return n != null && n !== 'all' && (r.isArray(n) ? r.indexOf(n, e) < 0 : e !== n) }(e, i))) return; if (r.each(_, function (i) { o[i.brushType] && e.brushTargetManager.controlSeries(i, n, t) && a.push(i), x |= S(a) }), w(i) && S(a)) { var s = n.getData(); s.each(function (t) { g(o, a, s, t) && (p[t] = 1) }) } }(n, i, a)) }), t.eachSeries(function (t, e) { var n = { seriesId: t.id, seriesIndex: e, seriesName: t.name, dataIndex: [] }; l.selected.push(n); var i = v(t); var r = y[e]; var a = t.getData(); var s = w(e) ? function (t) { return p[t] ? (n.dataIndex.push(a.getRawIndex(t)), 'inBrush') : 'outOfBrush' } : function (t) { return g(i, r, a, t) ? (n.dataIndex.push(a.getRawIndex(t)), 'inBrush') : 'outOfBrush' }; (w(e) ? x : S(r)) && o.applyVisual(c, b, a, s) }) }), (function (t, e, n, i, r) { if (!r) return; var a = t.getZr(); if (a[d]) return; a[h] || (a[h] = p); l.createOrUpdate(a, h, n, e)(t, i) }(e, i, a, u, n)) }); var m = { lineX: r.noop, lineY: r.noop, rect: function (t) { return y(t.range) }, polygon: function (t) { for (var e, n = t.range, i = 0, r = n.length; i < r; i++) { e = e || [[1 / 0, -1 / 0], [1 / 0, -1 / 0]]; var a = n[i]; a[0] < e[0][0] && (e[0][0] = a[0]), a[0] > e[0][1] && (e[0][1] = a[0]), a[1] < e[1][0] && (e[1][0] = a[1]), a[1] > e[1][1] && (e[1][1] = a[1]) } return e && y(e) } }; function y (t) { return new a(t[0][0], t[1][0], t[0][1] - t[0][0], t[1][1] - t[1][0]) } }, function (t, e, n) { var i = n(163); var r = n(8); var a = n(2).linePolygonIntersect; function o (t) { var e = ['x', 'y']; var n = ['width', 'height']; return { point: function (e, n, i) { if (e) { var r = i.range; return s(e[t], r) } }, rect: function (i, r, a) { if (i) { var o = a.range; var l = [i[e[t]], i[e[t]] + i[n[t]]]; return l[1] < l[0] && l.reverse(), s(l[0], o) || s(l[1], o) || s(o[0], l) || s(o[1], l) } } } } function s (t, e) { return e[0] <= t && t <= e[1] } var l = { lineX: o(0), lineY: o(1), rect: { point: function (t, e, n) { return t && n.boundingRect.contain(t[0], t[1]) }, rect: function (t, e, n) { return t && n.boundingRect.intersect(t) } }, polygon: { point: function (t, e, n) { return t && n.boundingRect.contain(t[0], t[1]) && i.contain(n.range, t[0], t[1]) }, rect: function (t, e, n) { var o = n.range; if (!t || o.length <= 1) return !1; var s = t.x; var l = t.y; var u = t.width; var c = t.height; var h = o[0]; return !!(i.contain(o, s, l) || i.contain(o, s + u, l) || i.contain(o, s, l + c) || i.contain(o, s + u, l + c) || r.create(t).contain(h[0], h[1]) || a(s, l, s + u, l, o) || a(s, l, s, l + c, o) || a(s + u, l, s + u, l + c, o) || a(s, l + c, s + u, l + c, o)) || void 0 } } }; t.exports = l }, function (t, e, n) { n(5).__DEV__; var i = n(1); var r = n(0); var a = n(85); var o = n(12); var s = ['#ddd']; function l (t, e) { return r.merge({ brushType: t.brushType, brushMode: t.brushMode, transformable: t.transformable, brushStyle: new o(t.brushStyle).getItemStyle(), removeOnClick: t.removeOnClick, z: t.z }, e, !0) } var u = i.extendComponentModel({ type: 'brush', dependencies: ['geo', 'grid', 'xAxis', 'yAxis', 'parallel', 'series'], defaultOption: { toolbox: null, brushLink: null, seriesIndex: 'all', geoIndex: null, xAxisIndex: null, yAxisIndex: null, brushType: 'rect', brushMode: 'single', transformable: !0, brushStyle: { borderWidth: 1, color: 'rgba(120,140,180,0.3)', borderColor: 'rgba(120,140,180,0.8)' }, throttleType: 'fixRate', throttleDelay: 0, removeOnClick: !0, z: 1e4 }, areas: [], brushType: null, brushOption: {}, coordInfoList: [], optionUpdated: function (t, e) { var n = this.option; !e && a.replaceVisualOption(n, t, ['inBrush', 'outOfBrush']); var i = n.inBrush = n.inBrush || {}; n.outOfBrush = n.outOfBrush || { color: s }, i.hasOwnProperty('liftZ') || (i.liftZ = 5) }, setAreas: function (t) { t && (this.areas = r.map(t, function (t) { return l(this.option, t) }, this)) }, setBrushOption: function (t) { this.brushOption = l(this.option, t), this.brushType = this.brushOption.brushType } }); t.exports = u }, function (t, e, n) { var i = n(1); var r = n(0); var a = n(108); var o = i.extendComponentView({ type: 'brush', init: function (t, e) { this.ecModel = t, this.api = e, this.model, (this._brushController = new a(e.getZr())).on('brush', r.bind(this._onBrush, this)).mount() }, render: function (t) { return this.model = t, s.apply(this, arguments) }, updateTransform: s, updateView: s, dispose: function () { this._brushController.dispose() }, _onBrush: function (t, e) { var n = this.model.id; this.model.brushTargetManager.setOutputRanges(t, this.ecModel), (!e.isEnd || e.removeOnClick) && this.api.dispatchAction({ type: 'brush', brushId: n, areas: r.clone(t), $from: n }), e.isEnd && this.api.dispatchAction({ type: 'brushEnd', brushId: n, areas: r.clone(t), $from: n }) } }); function s (t, e, n, i) { (!i || i.$from !== t.id) && this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice()) }t.exports = o }, function (t, e, n) { var i = n(1); i.registerAction({ type: 'brush', event: 'brush' }, function (t, e) { e.eachComponent({ mainType: 'brush', query: t }, function (e) { e.setAreas(t.areas) }) }), i.registerAction({ type: 'brushSelect', event: 'brushSelected', update: 'none' }, function () {}), i.registerAction({ type: 'brushEnd', event: 'brushEnd', update: 'none' }, function () {}) }, function (t, e, n) { var i = n(0); var r = n(33); var a = n(30).toolbox.brush; function o (t, e, n) { this.model = t, this.ecModel = e, this.api = n, this._brushType, this._brushMode }o.defaultOption = { show: !0, type: ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'], icon: { rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13', polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2', lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4', lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4', keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z', clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' }, title: i.clone(a.title) }; var s = o.prototype; s.render = s.updateView = function (t, e, n) { var r, a, o; e.eachComponent({ mainType: 'brush' }, function (t) { r = t.brushType, a = t.brushOption.brushMode || 'single', o |= t.areas.length }), this._brushType = r, this._brushMode = a, i.each(t.get('type', !0), function (e) { t.setIconStatus(e, (e === 'keep' ? a === 'multiple' : e === 'clear' ? o : e === r) ? 'emphasis' : 'normal') }) }, s.getIcons = function () { var t = this.model; var e = t.get('icon', !0); var n = {}; return i.each(t.get('type', !0), function (t) { e[t] && (n[t] = e[t]) }), n }, s.onclick = function (t, e, n) { var i = this._brushType; var r = this._brushMode; n === 'clear' ? (e.dispatchAction({ type: 'axisAreaSelect', intervals: [] }), e.dispatchAction({ type: 'brush', command: 'clear', areas: [] })) : e.dispatchAction({ type: 'takeGlobalCursor', key: 'brush', brushOption: { brushType: n === 'keep' ? i : i !== n && n, brushMode: n === 'keep' ? r === 'multiple' ? 'single' : 'multiple' : r } }) }, r.register('brush', o); var l = o; t.exports = l }, function (t, e, n) { var i = n(0); var r = n(1); var a = n(2); var o = n(6).getLayoutRect; r.extendComponentModel({ type: 'title', layoutMode: { type: 'box', ignoreSize: !0 }, defaultOption: { zlevel: 0, z: 6, show: !0, text: '', target: 'blank', subtext: '', subtarget: 'blank', left: 0, top: 0, backgroundColor: 'rgba(0,0,0,0)', borderColor: '#ccc', borderWidth: 0, padding: 5, itemGap: 10, textStyle: { fontSize: 18, fontWeight: 'bolder', color: '#333' }, subtextStyle: { color: '#aaa' } } }), r.extendComponentView({ type: 'title', render: function (t, e, n) { if (this.group.removeAll(), t.get('show')) { var r = this.group; var s = t.getModel('textStyle'); var l = t.getModel('subtextStyle'); var u = t.get('textAlign'); var c = i.retrieve2(t.get('textBaseline'), t.get('textVerticalAlign')); var h = new a.Text({ style: a.setTextStyle({}, s, { text: t.get('text'), textFill: s.getTextColor() }, { disableBox: !0 }), z2: 10 }); var d = h.getBoundingRect(); var f = t.get('subtext'); var p = new a.Text({ style: a.setTextStyle({}, l, { text: f, textFill: l.getTextColor(), y: d.height + t.get('itemGap'), textVerticalAlign: 'top' }, { disableBox: !0 }), z2: 10 }); var g = t.get('link'); var v = t.get('sublink'); var m = t.get('triggerEvent', !0); h.silent = !g && !m, p.silent = !v && !m, g && h.on('click', function () { window.open(g, '_' + t.get('target')) }), v && p.on('click', function () { window.open(v, '_' + t.get('subtarget')) }), h.eventData = p.eventData = m ? { componentType: 'title', componentIndex: t.componentIndex } : null, r.add(h), f && r.add(p); var y = r.getBoundingRect(); var x = t.getBoxLayoutParams(); x.width = y.width, x.height = y.height; var _ = o(x, { width: n.getWidth(), height: n.getHeight() }, t.get('padding')); u || ((u = t.get('left') || t.get('right')) === 'middle' && (u = 'center'), u === 'right' ? _.x += _.width : u === 'center' && (_.x += _.width / 2)), c || ((c = t.get('top') || t.get('bottom')) === 'center' && (c = 'middle'), c === 'bottom' ? _.y += _.height : c === 'middle' && (_.y += _.height / 2), c = c || 'top'), r.attr('position', [_.x, _.y]); var b = { textAlign: u, textVerticalAlign: c }; h.setStyle(b), p.setStyle(b), y = r.getBoundingRect(); var w = _.margin; var S = t.getItemStyle(['color', 'opacity']); S.fill = t.get('backgroundColor'); var M = new a.Rect({ shape: { x: y.x - w[3], y: y.y - w[0], width: y.width + w[1] + w[3], height: y.height + w[0] + w[2], r: t.get('borderRadius') }, style: S, subPixelOptimize: !0, silent: !0 }); r.add(M) } } }) }, function (t, e, n) { var i = n(1); var r = n(482); n(483), n(484), n(485), n(487), i.registerPreprocessor(r) }, function (t, e, n) { var i = n(0); function r (t) { var e = t.itemStyle || (t.itemStyle = {}); var n = e.emphasis || (e.emphasis = {}); var r = t.label || t.label || {}; var o = r.normal || (r.normal = {}); var s = { normal: 1, emphasis: 1 }; i.each(r, function (t, e) { s[e] || a(o, e) || (o[e] = t) }), n.label && !a(r, 'emphasis') && (r.emphasis = n.label, delete n.label) } function a (t, e) { return t.hasOwnProperty(e) }t.exports = function (t) { var e = t && t.timeline; i.isArray(e) || (e = e ? [e] : []), i.each(e, function (t) { t && (function (t) { var e = t.type; var n = { number: 'value', time: 'time' }; n[e] && (t.axisType = n[e], delete t.type); if (r(t), a(t, 'controlPosition')) { var o = t.controlStyle || (t.controlStyle = {}); a(o, 'position') || (o.position = t.controlPosition), o.position !== 'none' || a(o, 'show') || (o.show = !1, delete o.position), delete t.controlPosition }i.each(t.data || [], function (t) { i.isObject(t) && !i.isArray(t) && (!a(t, 'value') && a(t, 'name') && (t.value = t.name), r(t)) }) }(t)) }) } }, function (t, e, n) { n(13).registerSubTypeDefaulter('timeline', function () { return 'slider' }) }, function (t, e, n) { var i = n(1); var r = n(0); i.registerAction({ type: 'timelineChange', event: 'timelineChanged', update: 'prepareAndUpdate' }, function (t, e) { var n = e.getComponent('timeline'); return n && t.currentIndex != null && (n.setCurrentIndex(t.currentIndex), !n.get('loop', !0) && n.isIndexMax() && n.setPlayState(!1)), e.resetOption('timeline'), r.defaults({ currentIndex: n.option.currentIndex }, t) }), i.registerAction({ type: 'timelinePlayChange', event: 'timelinePlayChanged', update: 'update' }, function (t, e) { var n = e.getComponent('timeline'); n && t.playState != null && n.setPlayState(t.playState) }) }, function (t, e, n) { var i = n(0); var r = n(486); var a = n(94); var o = r.extend({ type: 'timeline.slider', defaultOption: { backgroundColor: 'rgba(0,0,0,0)', borderColor: '#ccc', borderWidth: 0, orient: 'horizontal', inverse: !1, tooltip: { trigger: 'item' }, symbol: 'emptyCircle', symbolSize: 10, lineStyle: { show: !0, width: 2, color: '#304654' }, label: { position: 'auto', show: !0, interval: 'auto', rotate: 0, color: '#304654' }, itemStyle: { color: '#304654', borderWidth: 1 }, checkpointStyle: { symbol: 'circle', symbolSize: 13, color: '#c23531', borderWidth: 5, borderColor: 'rgba(194,53,49, 0.5)', animation: !0, animationDuration: 300, animationEasing: 'quinticInOut' }, controlStyle: { show: !0, showPlayBtn: !0, showPrevBtn: !0, showNextBtn: !0, itemSize: 22, itemGap: 12, position: 'left', playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z', stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z', nextIcon: 'path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z', prevIcon: 'path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z', color: '#304654', borderColor: '#304654', borderWidth: 1 }, emphasis: { label: { show: !0, color: '#c23531' }, itemStyle: { color: '#c23531' }, controlStyle: { color: '#c23531', borderColor: '#c23531', borderWidth: 2 } }, data: [] } }); i.mixin(o, a); var s = o; t.exports = s }, function (t, e, n) { var i = n(0); var r = n(13); var a = n(18); var o = n(4); var s = r.extend({ type: 'timeline', layoutMode: 'box', defaultOption: { zlevel: 0, z: 4, show: !0, axisType: 'time', realtime: !0, left: '20%', top: null, right: '20%', bottom: 0, width: null, height: 40, padding: 5, controlPosition: 'left', autoPlay: !1, rewind: !1, loop: !0, playInterval: 2e3, currentIndex: 0, itemStyle: {}, label: { color: '#000' }, data: [] }, init: function (t, e, n) { this._data, this._names, this.mergeDefaultAndTheme(t, n), this._initData() }, mergeOption: function (t) { s.superApply(this, 'mergeOption', arguments), this._initData() }, setCurrentIndex: function (t) { t == null && (t = this.option.currentIndex); var e = this._data.count(); this.option.loop ? t = (t % e + e) % e : (t >= e && (t = e - 1), t < 0 && (t = 0)), this.option.currentIndex = t }, getCurrentIndex: function () { return this.option.currentIndex }, isIndexMax: function () { return this.getCurrentIndex() >= this._data.count() - 1 }, setPlayState: function (t) { this.option.autoPlay = !!t }, getPlayState: function () { return !!this.option.autoPlay }, _initData: function () { var t = this.option; var e = t.data || []; var n = t.axisType; var r = this._names = []; if (n === 'category') { var s = []; i.each(e, function (t, e) { var n; var a = o.getDataItemValue(t); i.isObject(t) ? (n = i.clone(t)).value = e : n = e, s.push(n), i.isString(a) || a != null && !isNaN(a) || (a = ''), r.push(a + '') }), e = s } var l = { category: 'ordinal', time: 'time' }[n] || 'number'; (this._data = new a([{ name: 'value', type: l }], this)).initData(e, r) }, getData: function () { return this._data }, getCategories: function () { if (this.get('axisType') === 'category') return this._names.slice() } }); var l = s; t.exports = l }, function (t, e, n) { var i = n(0); var r = n(8); var a = n(15); var o = n(2); var s = n(6); var l = n(488); var u = n(489); var c = n(19).createSymbol; var h = n(21); var d = n(3); var f = n(9).encodeHTML; var p = i.bind; var g = i.each; var v = Math.PI; var m = l.extend({ type: 'timeline.slider', init: function (t, e) { this.api = e, this._axis, this._viewRect, this._timer, this._currentPointer, this._mainGroup, this._labelGroup }, render: function (t, e, n, i) { if (this.model = t, this.api = n, this.ecModel = e, this.group.removeAll(), t.get('show', !0)) { var r = this._layout(t, n); var a = this._createGroup('mainGroup'); var o = this._createGroup('labelGroup'); var s = this._axis = this._createAxis(r, t); t.formatTooltip = function (t) { return f(s.scale.getLabel(t)) }, g(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (e) { this['_render' + e](r, a, s, t) }, this), this._renderAxisLabel(r, o, s, t), this._position(r, t) } this._doPlayStop() }, remove: function () { this._clearTimer(), this.group.removeAll() }, dispose: function () { this._clearTimer() }, _layout: function (t, e) { var n = t.get('label.position'); var i = t.get('orient'); var r = (function (t, e) { return s.getLayoutRect(t.getBoxLayoutParams(), { width: e.getWidth(), height: e.getHeight() }, t.get('padding')) }(t, e)); n == null || n === 'auto' ? n = i === 'horizontal' ? r.y + r.height / 2 < e.getHeight() / 2 ? '-' : '+' : r.x + r.width / 2 < e.getWidth() / 2 ? '+' : '-' : isNaN(n) && (n = { horizontal: { top: '-', bottom: '+' }, vertical: { left: '-', right: '+' } }[i][n]); var a; var o; var l; var u; var c = { horizontal: 'center', vertical: n >= 0 || n === '+' ? 'left' : 'right' }; var h = { horizontal: n >= 0 || n === '+' ? 'top' : 'bottom', vertical: 'middle' }; var d = { horizontal: 0, vertical: v / 2 }; var f = i === 'vertical' ? r.height : r.width; var p = t.getModel('controlStyle'); var g = p.get('show', !0); var m = g ? p.get('itemSize') : 0; var y = g ? p.get('itemGap') : 0; var x = m + y; var _ = t.get('label.rotate') || 0; _ = _ * v / 180; var b = p.get('position', !0); var w = g && p.get('showPlayBtn', !0); var S = g && p.get('showPrevBtn', !0); var M = g && p.get('showNextBtn', !0); var I = 0; var A = f; return b === 'left' || b === 'bottom' ? (w && (a = [0, 0], I += x), S && (o = [I, 0], I += x), M && (l = [A - m, 0], A -= x)) : (w && (a = [A - m, 0], A -= x), S && (o = [0, 0], I += x), M && (l = [A - m, 0], A -= x)), u = [I, A], t.get('inverse') && u.reverse(), { viewRect: r, mainLength: f, orient: i, rotation: d[i], labelRotation: _, labelPosOpt: n, labelAlign: t.get('label.align') || c[i], labelBaseline: t.get('label.verticalAlign') || t.get('label.baseline') || h[i], playPosition: a, prevBtnPosition: o, nextBtnPosition: l, axisExtent: u, controlSize: m, controlGap: y } }, _position: function (t, e) { var n = this._mainGroup; var i = this._labelGroup; var r = t.viewRect; if (t.orient === 'vertical') { var o = a.create(); var s = r.x; var l = r.y + r.height; a.translate(o, o, [-s, -l]), a.rotate(o, o, -v / 2), a.translate(o, o, [s, l]), (r = r.clone()).applyTransform(o) } var u = y(r); var c = y(n.getBoundingRect()); var h = y(i.getBoundingRect()); var d = n.position; var f = i.position; f[0] = d[0] = u[0][0]; var p; var g = t.labelPosOpt; isNaN(g) ? (x(d, c, u, 1, p = g === '+' ? 0 : 1), x(f, h, u, 1, 1 - p)) : (x(d, c, u, 1, p = g >= 0 ? 0 : 1), f[1] = d[1] + g); function m (t) { var e = t.position; t.origin = [u[0][0] - e[0], u[1][0] - e[1]] } function y (t) { return [[t.x, t.x + t.width], [t.y, t.y + t.height]] } function x (t, e, n, i, r) { t[i] += n[i][r] - e[i][r] }n.attr('position', d), i.attr('position', f), n.rotation = i.rotation = t.rotation, m(n), m(i) }, _createAxis: function (t, e) { var n = e.getData(); var i = e.get('axisType'); var r = h.createScaleByModel(e, i); r.getTicks = function () { return n.mapArray(['value'], function (t) { return t }) }; var a = n.getDataExtent('value'); r.setExtent(a[0], a[1]), r.niceTicks(); var o = new u('value', r, t.axisExtent, i); return o.model = e, o }, _createGroup: function (t) { var e = this['_' + t] = new o.Group(); return this.group.add(e), e }, _renderAxisLine: function (t, e, n, r) { var a = n.getExtent(); r.get('lineStyle.show') && e.add(new o.Line({ shape: { x1: a[0], y1: 0, x2: a[1], y2: 0 }, style: i.extend({ lineCap: 'round' }, r.getModel('lineStyle').getLineStyle()), silent: !0, z2: 1 })) }, _renderAxisTick: function (t, e, n, i) { var r = i.getData(); var a = n.scale.getTicks(); g(a, function (t) { var a = n.dataToCoord(t); var s = r.getItemModel(t); var l = s.getModel('itemStyle'); var u = s.getModel('emphasis.itemStyle'); var c = { position: [a, 0], onclick: p(this._changeTimeline, this, t) }; var h = y(s, l, e, c); o.setHoverStyle(h, u.getItemStyle()), s.get('tooltip') ? (h.dataIndex = t, h.dataModel = i) : h.dataIndex = h.dataModel = null }, this) }, _renderAxisLabel: function (t, e, n, i) { if (n.getLabelModel().get('show')) { var r = i.getData(); var a = n.getViewLabels(); g(a, function (i) { var a = i.tickValue; var s = r.getItemModel(a); var l = s.getModel('label'); var u = s.getModel('emphasis.label'); var c = n.dataToCoord(i.tickValue); var h = new o.Text({ position: [c, 0], rotation: t.labelRotation - t.rotation, onclick: p(this._changeTimeline, this, a), silent: !1 }); o.setTextStyle(h.style, l, { text: i.formattedLabel, textAlign: t.labelAlign, textVerticalAlign: t.labelBaseline }), e.add(h), o.setHoverStyle(h, o.setTextStyle({}, u)) }, this) } }, _renderControl: function (t, e, n, a) { var s = t.controlSize; var l = t.rotation; var u = a.getModel('controlStyle').getItemStyle(); var c = a.getModel('emphasis.controlStyle').getItemStyle(); var h = [0, -s / 2, s, s]; var d = a.getPlayState(); var f = a.get('inverse', !0); function g (t, n, d, f) { if (t) { var p = (function (t, e, n, a) { return o.makePath(t.get(e).replace(/^path:\/\//, ''), i.clone(a || {}), new r(n[0], n[1], n[2], n[3]), 'center') }(a, n, h, { position: t, origin: [s / 2, 0], rotation: f ? -l : 0, rectHover: !0, style: u, onclick: d })); e.add(p), o.setHoverStyle(p, c) } }g(t.nextBtnPosition, 'controlStyle.nextIcon', p(this._changeTimeline, this, f ? '-' : '+')), g(t.prevBtnPosition, 'controlStyle.prevIcon', p(this._changeTimeline, this, f ? '+' : '-')), g(t.playPosition, 'controlStyle.' + (d ? 'stopIcon' : 'playIcon'), p(this._handlePlayClick, this, !d), !0) }, _renderCurrentPointer: function (t, e, n, i) { var r = i.getData(); var a = i.getCurrentIndex(); var o = r.getItemModel(a).getModel('checkpointStyle'); var s = this; var l = { onCreate: function (t) { t.draggable = !0, t.drift = p(s._handlePointerDrag, s), t.ondragend = p(s._handlePointerDragend, s), x(t, a, n, i, !0) }, onUpdate: function (t) { x(t, a, n, i) } }; this._currentPointer = y(o, o, this._mainGroup, {}, this._currentPointer, l) }, _handlePlayClick: function (t) { this._clearTimer(), this.api.dispatchAction({ type: 'timelinePlayChange', playState: t, from: this.uid }) }, _handlePointerDrag: function (t, e, n) { this._clearTimer(), this._pointerChangeTimeline([n.offsetX, n.offsetY]) }, _handlePointerDragend: function (t) { this._pointerChangeTimeline([t.offsetX, t.offsetY], !0) }, _pointerChangeTimeline: function (t, e) { var n = this._toAxisCoord(t)[0]; var i = this._axis; var r = d.asc(i.getExtent().slice()); n > r[1] && (n = r[1]), n < r[0] && (n = r[0]), this._currentPointer.position[0] = n, this._currentPointer.dirty(); var a = this._findNearestTick(n); var o = this.model; (e || a !== o.getCurrentIndex() && o.get('realtime')) && this._changeTimeline(a) }, _doPlayStop: function () { this._clearTimer(), this.model.getPlayState() && (this._timer = setTimeout(p(function () { var t = this.model; this._changeTimeline(t.getCurrentIndex() + (t.get('rewind', !0) ? -1 : 1)) }, this), this.model.get('playInterval'))) }, _toAxisCoord: function (t) { var e = this._mainGroup.getLocalTransform(); return o.applyTransform(t, e, !0) }, _findNearestTick: function (t) { var e; var n = this.model.getData(); var i = 1 / 0; var r = this._axis; return n.each(['value'], function (n, a) { var o = r.dataToCoord(n); var s = Math.abs(o - t); s < i && (i = s, e = a) }), e }, _clearTimer: function () { this._timer && (clearTimeout(this._timer), this._timer = null) }, _changeTimeline: function (t) { var e = this.model.getCurrentIndex(); t === '+' ? t = e + 1 : t === '-' && (t = e - 1), this.api.dispatchAction({ type: 'timelineChange', currentIndex: t, from: this.uid }) } }); function y (t, e, n, r, a, o) { var s = e.get('color'); if (a)a.setColor(s), n.add(a), o && o.onUpdate(a); else { var l = t.get('symbol'); (a = c(l, -1, -1, 2, 2, s)).setStyle('strokeNoScale', !0), n.add(a), o && o.onCreate(a) } var u = e.getItemStyle(['color', 'symbol', 'symbolSize']); a.setStyle(u), r = i.merge({ rectHover: !0, z2: 100 }, r, !0); var h = t.get('symbolSize'); (h = h instanceof Array ? h.slice() : [+h, +h])[0] /= 2, h[1] /= 2, r.scale = h; var f = t.get('symbolOffset'); if (f) { var p = r.position = r.position || [0, 0]; p[0] += d.parsePercent(f[0], h[0]), p[1] += d.parsePercent(f[1], h[1]) } var g = t.get('symbolRotate'); return r.rotation = (g || 0) * Math.PI / 180 || 0, a.attr(r), a.updateTransform(), a } function x (t, e, n, i, r) { if (!t.dragging) { var a = i.getModel('checkpointStyle'); var o = n.dataToCoord(i.getData().get(['value'], e)); r || !a.get('animation', !0) ? t.attr({ position: [o, 0] }) : (t.stopAnimation(!0), t.animateTo({ position: [o, 0] }, a.get('animationDuration', !0), a.get('animationEasing', !0))) } }t.exports = m }, function (t, e, n) { var i = n(74).extend({ type: 'timeline' }); t.exports = i }, function (t, e, n) { var i = n(0); var r = n(31); var a = function (t, e, n, i) { r.call(this, t, e, n), this.type = i || 'value', this.model = null }; a.prototype = { constructor: a, getLabelModel: function () { return this.model.getModel('label') }, isHorizontal: function () { return this.model.get('orient') === 'horizontal' } }, i.inherits(a, r); var o = a; t.exports = o }, function (t, e, n) { var i = n(1); n(491), n(492), i.registerPreprocessor(function (t) { t.markPoint = t.markPoint || {} }) }, function (t, e, n) { var i = n(115).extend({ type: 'markPoint', defaultOption: { zlevel: 0, z: 5, symbol: 'pin', symbolSize: 50, tooltip: { trigger: 'item' }, label: { show: !0, position: 'inside' }, itemStyle: { borderWidth: 2 }, emphasis: { label: { show: !0 } } } }); t.exports = i }, function (t, e, n) { var i = n(0); var r = n(59); var a = n(3); var o = n(18); var s = n(116); function l (t, e, n) { var i = e.coordinateSystem; t.each(function (r) { var o; var s = t.getItemModel(r); var l = a.parsePercent(s.get('x'), n.getWidth()); var u = a.parsePercent(s.get('y'), n.getHeight()); if (isNaN(l) || isNaN(u)) { if (e.getMarkerPosition)o = e.getMarkerPosition(t.getValues(t.dimensions, r)); else if (i) { var c = t.get(i.dimensions[0], r); var h = t.get(i.dimensions[1], r); o = i.dataToPoint([c, h]) } } else o = [l, u]; isNaN(l) || (o[0] = l), isNaN(u) || (o[1] = u), t.setItemLayout(r, o) }) } var u = n(117).extend({ type: 'markPoint', updateTransform: function (t, e, n) { e.eachSeries(function (t) { var e = t.markPointModel; e && (l(e.getData(), t, n), this.markerGroupMap.get(t.id).updateLayout(e)) }, this) }, renderSeries: function (t, e, n, a) { var u = t.coordinateSystem; var c = t.id; var h = t.getData(); var d = this.markerGroupMap; var f = d.get(c) || d.set(c, new r()); var p = (function (t, e, n) { var r; r = t ? i.map(t && t.dimensions, function (t) { var n = e.getData().getDimensionInfo(e.getData().mapDimension(t)) || {}; return i.defaults({ name: t }, n) }) : [{ name: 'value', type: 'float' }]; var a = new o(r, n); var l = i.map(n.get('data'), i.curry(s.dataTransform, e)); t && (l = i.filter(l, i.curry(s.dataFilter, t))); return a.initData(l, null, t ? s.dimValueGetter : function (t) { return t.value }), a }(u, t, e)); e.setData(p), l(e.getData(), t, a), p.each(function (t) { var n = p.getItemModel(t); var r = n.getShallow('symbol'); var a = n.getShallow('symbolSize'); var o = i.isFunction(r); var s = i.isFunction(a); if (o || s) { var l = e.getRawValue(t); var u = e.getDataParams(t); o && (r = r(l, u)), s && (a = a(l, u)) }p.setItemVisual(t, { symbol: r, symbolSize: a, color: n.get('itemStyle.color') || h.getVisual('color') }) }), f.updateData(p), this.group.add(f.group), p.eachItemGraphicEl(function (t) { t.traverse(function (t) { t.dataModel = e }) }), f.__keep = !0, f.group.silent = e.get('silent') || t.get('silent') } }); t.exports = u }, function (t, e, n) { var i = n(1); n(494), n(495), i.registerPreprocessor(function (t) { t.markLine = t.markLine || {} }) }, function (t, e, n) { var i = n(115).extend({ type: 'markLine', defaultOption: { zlevel: 0, z: 5, symbol: ['circle', 'arrow'], symbolSize: [8, 16], precision: 2, tooltip: { trigger: 'item' }, label: { show: !0, position: 'end' }, lineStyle: { type: 'dashed' }, emphasis: { label: { show: !0 }, lineStyle: { width: 3 } }, animationEasing: 'linear' } }); t.exports = i }, function (t, e, n) { var i = n(0); var r = n(18); var a = n(3); var o = n(116); var s = n(105); var l = n(117); var u = n(25).getStackedDimension; var c = function (t, e, n, r) { var a = t.getData(); var s = r.type; if (!i.isArray(r) && (s === 'min' || s === 'max' || s === 'average' || s === 'median' || r.xAxis != null || r.yAxis != null)) { var l, c; if (r.yAxis != null || r.xAxis != null)l = e.getAxis(r.yAxis != null ? 'y' : 'x'), c = i.retrieve(r.yAxis, r.xAxis); else { var h = o.getAxisInfo(r, a, e, t); l = h.valueAxis; var d = u(a, h.valueDataDim); c = o.numCalculate(a, d, s) } var f = l.dim === 'x' ? 0 : 1; var p = 1 - f; var g = i.clone(r); var v = {}; g.type = null, g.coord = [], v.coord = [], g.coord[p] = -1 / 0, v.coord[p] = 1 / 0; var m = n.get('precision'); m >= 0 && typeof c === 'number' && (c = +c.toFixed(Math.min(m, 20))), g.coord[f] = v.coord[f] = c, r = [g, v, { type: s, valueIndex: r.valueIndex, value: c }] } return (r = [o.dataTransform(t, r[0]), o.dataTransform(t, r[1]), i.extend({}, r[2])])[2].type = r[2].type || '', i.merge(r[2], r[0]), i.merge(r[2], r[1]), r }; function h (t) { return !isNaN(t) && !isFinite(t) } function d (t, e, n, i) { var r = 1 - t; var a = i.dimensions[t]; return h(e[r]) && h(n[r]) && e[t] === n[t] && i.getAxis(a).containData(e[t]) } function f (t, e) { if (t.type === 'cartesian2d') { var n = e[0].coord; var i = e[1].coord; if (n && i && (d(1, n, i, t) || d(0, n, i, t))) return !0 } return o.dataFilter(t, e[0]) && o.dataFilter(t, e[1]) } function p (t, e, n, i, r) { var o; var s = i.coordinateSystem; var l = t.getItemModel(e); var u = a.parsePercent(l.get('x'), r.getWidth()); var c = a.parsePercent(l.get('y'), r.getHeight()); if (isNaN(u) || isNaN(c)) { if (i.getMarkerPosition)o = i.getMarkerPosition(t.getValues(t.dimensions, e)); else { var d = s.dimensions; var f = t.get(d[0], e); var p = t.get(d[1], e); o = s.dataToPoint([f, p]) } if (s.type === 'cartesian2d') { var g = s.getAxis('x'); var v = s.getAxis('y'); d = s.dimensions; h(t.get(d[0], e)) ? o[0] = g.toGlobalCoord(g.getExtent()[n ? 0 : 1]) : h(t.get(d[1], e)) && (o[1] = v.toGlobalCoord(v.getExtent()[n ? 0 : 1])) }isNaN(u) || (o[0] = u), isNaN(c) || (o[1] = c) } else o = [u, c]; t.setItemLayout(e, o) } var g = l.extend({ type: 'markLine', updateTransform: function (t, e, n) { e.eachSeries(function (t) { var e = t.markLineModel; if (e) { var i = e.getData(); var r = e.__from; var a = e.__to; r.each(function (e) { p(r, e, !0, t, n), p(a, e, !1, t, n) }), i.each(function (t) { i.setItemLayout(t, [r.getItemLayout(t), a.getItemLayout(t)]) }), this.markerGroupMap.get(t.id).updateLayout() } }, this) }, renderSeries: function (t, e, n, a) { var l = t.coordinateSystem; var u = t.id; var h = t.getData(); var d = this.markerGroupMap; var g = d.get(u) || d.set(u, new s()); this.group.add(g.group); var v = (function (t, e, n) { var a; a = t ? i.map(t && t.dimensions, function (t) { var n = e.getData().getDimensionInfo(e.getData().mapDimension(t)) || {}; return i.defaults({ name: t }, n) }) : [{ name: 'value', type: 'float' }]; var s = new r(a, n); var l = new r(a, n); var u = new r([], n); var h = i.map(n.get('data'), i.curry(c, e, t, n)); t && (h = i.filter(h, i.curry(f, t))); var d = t ? o.dimValueGetter : function (t) { return t.value }; return s.initData(i.map(h, function (t) { return t[0] }), null, d), l.initData(i.map(h, function (t) { return t[1] }), null, d), u.initData(i.map(h, function (t) { return t[2] })), u.hasItemOption = !0, { from: s, to: l, line: u } }(l, t, e)); var m = v.from; var y = v.to; var x = v.line; e.__from = m, e.__to = y, e.setData(x); var _ = e.get('symbol'); var b = e.get('symbolSize'); function w (e, n, i) { var r = e.getItemModel(n); p(e, n, i, t, a), e.setItemVisual(n, { symbolSize: r.get('symbolSize') || b[i ? 0 : 1], symbol: r.get('symbol', !0) || _[i ? 0 : 1], color: r.get('itemStyle.color') || h.getVisual('color') }) }i.isArray(_) || (_ = [_, _]), typeof b === 'number' && (b = [b, b]), v.from.each(function (t) { w(m, t, !0), w(y, t, !1) }), x.each(function (t) { var e = x.getItemModel(t).get('lineStyle.color'); x.setItemVisual(t, { color: e || m.getItemVisual(t, 'color') }), x.setItemLayout(t, [m.getItemLayout(t), y.getItemLayout(t)]), x.setItemVisual(t, { fromSymbolSize: m.getItemVisual(t, 'symbolSize'), fromSymbol: m.getItemVisual(t, 'symbol'), toSymbolSize: y.getItemVisual(t, 'symbolSize'), toSymbol: y.getItemVisual(t, 'symbol') }) }), g.updateData(x), v.line.eachItemGraphicEl(function (t, n) { t.traverse(function (t) { t.dataModel = e }) }), g.__keep = !0, g.group.silent = e.get('silent') || t.get('silent') } }); t.exports = g }, function (t, e, n) { var i = n(1); n(497), n(498), i.registerPreprocessor(function (t) { t.markArea = t.markArea || {} }) }, function (t, e, n) { var i = n(115).extend({ type: 'markArea', defaultOption: { zlevel: 0, z: 1, tooltip: { trigger: 'item' }, animation: !1, label: { show: !0, position: 'top' }, itemStyle: { borderWidth: 0 }, emphasis: { label: { show: !0, position: 'top' } } } }); t.exports = i }, function (t, e, n) { var i = n(0); var r = n(23); var a = n(18); var o = n(3); var s = n(2); var l = n(116); var u = n(117); var c = function (t, e, n, r) { var a = l.dataTransform(t, r[0]); var o = l.dataTransform(t, r[1]); var s = i.retrieve; var u = a.coord; var c = o.coord; u[0] = s(u[0], -1 / 0), u[1] = s(u[1], -1 / 0), c[0] = s(c[0], 1 / 0), c[1] = s(c[1], 1 / 0); var h = i.mergeAll([{}, a, o]); return h.coord = [a.coord, o.coord], h.x0 = a.x, h.y0 = a.y, h.x1 = o.x, h.y1 = o.y, h }; function h (t) { return !isNaN(t) && !isFinite(t) } function d (t, e, n, i) { var r = 1 - t; return h(e[r]) && h(n[r]) } function f (t, e) { var n = e.coord[0]; var i = e.coord[1]; return !(t.type !== 'cartesian2d' || !n || !i || !d(1, n, i) && !d(0, n, i)) || (l.dataFilter(t, { coord: n, x: e.x0, y: e.y0 }) || l.dataFilter(t, { coord: i, x: e.x1, y: e.y1 })) } function p (t, e, n, i, r) { var a; var s = i.coordinateSystem; var l = t.getItemModel(e); var u = o.parsePercent(l.get(n[0]), r.getWidth()); var c = o.parsePercent(l.get(n[1]), r.getHeight()); if (isNaN(u) || isNaN(c)) { if (i.getMarkerPosition)a = i.getMarkerPosition(t.getValues(n, e)); else { var d = [g = t.get(n[0], e), v = t.get(n[1], e)]; s.clampData && s.clampData(d, d), a = s.dataToPoint(d, !0) } if (s.type === 'cartesian2d') { var f = s.getAxis('x'); var p = s.getAxis('y'); var g = t.get(n[0], e); var v = t.get(n[1], e); h(g) ? a[0] = f.toGlobalCoord(f.getExtent()[n[0] === 'x0' ? 0 : 1]) : h(v) && (a[1] = p.toGlobalCoord(p.getExtent()[n[1] === 'y0' ? 0 : 1])) }isNaN(u) || (a[0] = u), isNaN(c) || (a[1] = c) } else a = [u, c]; return a } var g = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']]; u.extend({ type: 'markArea', updateTransform: function (t, e, n) { e.eachSeries(function (t) { var e = t.markAreaModel; if (e) { var r = e.getData(); r.each(function (e) { var a = i.map(g, function (i) { return p(r, e, i, t, n) }); r.setItemLayout(e, a), r.getItemGraphicEl(e).setShape('points', a) }) } }, this) }, renderSeries: function (t, e, n, o) { var l = t.coordinateSystem; var u = t.id; var h = t.getData(); var d = this.markerGroupMap; var v = d.get(u) || d.set(u, { group: new s.Group() }); this.group.add(v.group), v.__keep = !0; var m = (function (t, e, n) { var r, o; t ? (r = i.map(t && t.dimensions, function (t) { var n = e.getData(); var r = n.getDimensionInfo(n.mapDimension(t)) || {}; return i.defaults({ name: t }, r) }), o = new a(i.map(['x0', 'y0', 'x1', 'y1'], function (t, e) { return { name: t, type: r[e % 2].type } }), n)) : o = new a(r = [{ name: 'value', type: 'float' }], n); var s = i.map(n.get('data'), i.curry(c, e, t, n)); t && (s = i.filter(s, i.curry(f, t))); var l = t ? function (t, e, n, i) { return t.coord[Math.floor(i / 2)][i % 2] } : function (t) { return t.value }; return o.initData(s, null, l), o.hasItemOption = !0, o }(l, t, e)); e.setData(m), m.each(function (e) { m.setItemLayout(e, i.map(g, function (n) { return p(m, e, n, t, o) })), m.setItemVisual(e, { color: h.getVisual('color') }) }), m.diff(v.__data).add(function (t) { var e = new s.Polygon({ shape: { points: m.getItemLayout(t) } }); m.setItemGraphicEl(t, e), v.group.add(e) }).update(function (t, n) { var i = v.__data.getItemGraphicEl(n); s.updateProps(i, { shape: { points: m.getItemLayout(t) } }, e, t), v.group.add(i), m.setItemGraphicEl(t, i) }).remove(function (t) { var e = v.__data.getItemGraphicEl(t); v.group.remove(e) }).execute(), m.eachItemGraphicEl(function (t, n) { var a = m.getItemModel(n); var o = a.getModel('label'); var l = a.getModel('emphasis.label'); var u = m.getItemVisual(n, 'color'); t.useStyle(i.defaults(a.getModel('itemStyle').getItemStyle(), { fill: r.modifyAlpha(u, 0.4), stroke: u })), t.hoverStyle = a.getModel('emphasis.itemStyle').getItemStyle(), s.setLabelStyle(t.style, t.hoverStyle, o, l, { labelFetcher: e, labelDataIndex: n, defaultText: m.getName(n) || '', isRectText: !0, autoColor: u }), s.setHoverStyle(t, {}), t.dataModel = e }), v.__data = m, v.group.silent = e.get('silent') || t.get('silent') } }) }, function (t, e, n) { n(196), n(502), n(503), n(504) }, function (t, e, n) { var i = n(1); var r = n(0); function a (t, e, n) { var i; var a = {}; var o = t === 'toggleSelected'; return n.eachComponent('legend', function (n) { o && i != null ? n[i ? 'select' : 'unSelect'](e.name) : t === 'allSelect' || t === 'inverseSelect' ? n[t]() : (n[t](e.name), i = n.isSelected(e.name)); var s = n.getData(); r.each(s, function (t) { var e = t.get('name'); if (e !== '\n' && e !== '') { var i = n.isSelected(e); a.hasOwnProperty(e) ? a[e] = a[e] && i : a[e] = i } }) }), t === 'allSelect' || t === 'inverseSelect' ? { selected: a } : { name: e.name, selected: a } }i.registerAction('legendToggleSelect', 'legendselectchanged', r.curry(a, 'toggleSelected')), i.registerAction('legendAllSelect', 'legendselectall', r.curry(a, 'allSelect')), i.registerAction('legendInverseSelect', 'legendinverseselect', r.curry(a, 'inverseSelect')), i.registerAction('legendSelect', 'legendselected', r.curry(a, 'select')), i.registerAction('legendUnSelect', 'legendunselected', r.curry(a, 'unSelect')) }, function (t, e) { t.exports = function (t) { var e = t.findComponents({ mainType: 'legend' }); e && e.length && t.filterSeries(function (t) { for (var n = 0; n < e.length; n++) if (!e[n].isSelected(t.name)) return !1; return !0 }) } }, function (t, e, n) { var i = n(197); var r = n(6); var a = r.mergeLayoutParam; var o = r.getLayoutParams; var s = i.extend({ type: 'legend.scroll', setScrollDataIndex: function (t) { this.option.scrollDataIndex = t }, defaultOption: { scrollDataIndex: 0, pageButtonItemGap: 5, pageButtonGap: null, pageButtonPosition: 'end', pageFormatter: '{current}/{total}', pageIcons: { horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'], vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z'] }, pageIconColor: '#2f4554', pageIconInactiveColor: '#aaa', pageIconSize: 15, pageTextStyle: { color: '#333' }, animationDurationUpdate: 800 }, init: function (t, e, n, i) { var r = o(t); s.superCall(this, 'init', t, e, n, i), l(this, t, r) }, mergeOption: function (t, e) { s.superCall(this, 'mergeOption', t, e), l(this, this.option, t) } }); function l (t, e, n) { var i = [1, 1]; i[t.getOrient().index] = 0, a(e, n, { type: 'box', ignoreSize: i }) } var u = s; t.exports = u }, function (t, e, n) { var i = n(0); var r = n(2); var a = n(6); var o = n(198); var s = r.Group; var l = ['width', 'height']; var u = ['x', 'y']; var c = o.extend({ type: 'legend.scroll', newlineDisabled: !0, init: function () { c.superCall(this, 'init'), this._currentIndex = 0, this.group.add(this._containerGroup = new s()), this._containerGroup.add(this.getContentGroup()), this.group.add(this._controllerGroup = new s()), this._showController }, resetInner: function () { c.superCall(this, 'resetInner'), this._controllerGroup.removeAll(), this._containerGroup.removeClipPath(), this._containerGroup.__rectSize = null }, renderInner: function (t, e, n, a, o, s, l) { var u = this; c.superCall(this, 'renderInner', t, e, n, a, o, s, l); var h = this._controllerGroup; var d = e.get('pageIconSize', !0); i.isArray(d) || (d = [d, d]), p('pagePrev', 0); var f = e.getModel('pageTextStyle'); function p (t, n) { var o = t + 'DataIndex'; var s = r.createIcon(e.get('pageIcons', !0)[e.getOrient().name][n], { onclick: i.bind(u._pageGo, u, o, e, a) }, { x: -d[0] / 2, y: -d[1] / 2, width: d[0], height: d[1] }); s.name = t, h.add(s) }h.add(new r.Text({ name: 'pageText', style: { textFill: f.getTextColor(), font: f.getFont(), textVerticalAlign: 'middle', textAlign: 'center' }, silent: !0 })), p('pageNext', 1) }, layoutInner: function (t, e, n, r, o, s) { var c = this.getSelectorGroup(); var h = t.getOrient().index; var d = l[h]; var f = u[h]; var p = l[1 - h]; var g = u[1 - h]; o && a.box('horizontal', c, t.get('selectorItemGap', !0)); var v = t.get('selectorButtonGap', !0); var m = c.getBoundingRect(); var y = [-m.x, -m.y]; var x = i.clone(n); o && (x[d] = n[d] - m[d] - v); var _ = this._layoutContentAndController(t, r, x, h, d, p, g); if (o) { if (s === 'end')y[h] += _[d] + v; else { var b = m[d] + v; y[h] -= b, _[f] -= b }_[d] += m[d] + v, y[1 - h] += _[g] + _[p] / 2 - m[p] / 2, _[p] = Math.max(_[p], m[p]), _[g] = Math.min(_[g], m[g] + y[1 - h]), c.attr('position', y) } return _ }, _layoutContentAndController: function (t, e, n, o, s, l, u) { var c = this.getContentGroup(); var h = this._containerGroup; var d = this._controllerGroup; a.box(t.get('orient'), c, t.get('itemGap'), o ? n.width : null, o ? null : n.height), a.box('horizontal', d, t.get('pageButtonItemGap', !0)); var f = c.getBoundingRect(); var p = d.getBoundingRect(); var g = this._showController = f[s] > n[s]; var v = [-f.x, -f.y]; e || (v[o] = c.position[o]); var m = [0, 0]; var y = [-p.x, -p.y]; var x = i.retrieve2(t.get('pageButtonGap', !0), t.get('itemGap', !0)); g && (t.get('pageButtonPosition', !0) === 'end' ? y[o] += n[s] - p[s] : m[o] += p[s] + x); y[1 - o] += f[l] / 2 - p[l] / 2, c.attr('position', v), h.attr('position', m), d.attr('position', y); var _ = { x: 0, y: 0 }; if (_[s] = g ? n[s] : f[s], _[l] = Math.max(f[l], p[l]), _[u] = Math.min(0, p[u] + y[1 - o]), h.__rectSize = n[s], g) { var b = { x: 0, y: 0 }; b[s] = Math.max(n[s] - p[s] - x, 0), b[l] = _[l], h.setClipPath(new r.Rect({ shape: b })), h.__rectSize = b[s] } else d.eachChild(function (t) { t.attr({ invisible: !0, silent: !0 }) }); var w = this._getPageInfo(t); return w.pageIndex != null && r.updateProps(c, { position: w.contentPosition }, !!g && t), this._updatePageInfoView(t, w), _ }, _pageGo: function (t, e, n) { var i = this._getPageInfo(e)[t]; i != null && n.dispatchAction({ type: 'legendScroll', scrollDataIndex: i, legendId: e.id }) }, _updatePageInfoView: function (t, e) { var n = this._controllerGroup; i.each(['pagePrev', 'pageNext'], function (i) { var r = e[i + 'DataIndex'] != null; var a = n.childOfName(i); a && (a.setStyle('fill', r ? t.get('pageIconColor', !0) : t.get('pageIconInactiveColor', !0)), a.cursor = r ? 'pointer' : 'default') }); var r = n.childOfName('pageText'); var a = t.get('pageFormatter'); var o = e.pageIndex; var s = o != null ? o + 1 : 0; var l = e.pageCount; r && a && r.setStyle('text', i.isString(a) ? a.replace('{current}', s).replace('{total}', l) : a({ current: s, total: l })) }, _getPageInfo: function (t) { var e = t.get('scrollDataIndex', !0); var n = this.getContentGroup(); var i = this._containerGroup.__rectSize; var r = t.getOrient().index; var a = l[r]; var o = u[r]; var s = this._findTargetItemIndex(e); var c = n.children(); var h = c[s]; var d = c.length; var f = d ? 1 : 0; var p = { contentPosition: n.position.slice(), pageCount: f, pageIndex: f - 1, pagePrevDataIndex: null, pageNextDataIndex: null }; if (!h) return p; var g = _(h); p.contentPosition[r] = -g.s; for (var v = s + 1, m = g, y = g, x = null; v <= d; ++v)(!(x = _(c[v])) && y.e > m.s + i || x && !b(x, m.s)) && (m = y.i > m.i ? y : x) && (p.pageNextDataIndex == null && (p.pageNextDataIndex = m.i), ++p.pageCount), y = x; for (v = s - 1, m = g, y = g, x = null; v >= -1; --v)(x = _(c[v])) && b(y, x.s) || !(m.i < y.i) || (y = m, p.pagePrevDataIndex == null && (p.pagePrevDataIndex = m.i), ++p.pageCount, ++p.pageIndex), m = x; return p; function _ (t) { if (t) { var e = t.getBoundingRect(); var n = e[o] + t.position[r]; return { s: n, e: n + e[a], i: t.__legendDataIndex } } } function b (t, e) { return t.e >= e && t.s <= e + i } }, _findTargetItemIndex: function (t) { var e; var n; var i = this.getContentGroup(); return this._showController && i.eachChild(function (i, r) { var a = i.__legendDataIndex; n == null && a != null && (n = r), a === t && (e = r) }), e != null ? e : n } }); var h = c; t.exports = h }, function (t, e, n) { n(1).registerAction('legendScroll', 'legendscroll', function (t, e) { var n = t.scrollDataIndex; n != null && e.eachComponent({ mainType: 'legend', subType: 'scroll', query: t }, function (t) { t.setScrollDataIndex(n) }) }) }, function (t, e, n) { n(199), n(200) }, function (t, e, n) { var i = n(51).extend({ type: 'dataZoom.slider', layoutMode: 'box', defaultOption: { show: !0, right: 'ph', top: 'ph', width: 'ph', height: 'ph', left: null, bottom: null, backgroundColor: 'rgba(47,69,84,0)', dataBackground: { lineStyle: { color: '#2f4554', width: 0.5, opacity: 0.3 }, areaStyle: { color: 'rgba(47,69,84,0.3)', opacity: 0.3 } }, borderColor: '#ddd', fillerColor: 'rgba(167,183,204,0.4)', handleIcon: 'M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z', handleSize: '100%', handleStyle: { color: '#a7b7cc' }, labelPrecision: null, labelFormatter: null, showDetail: !0, showDataShadow: 'auto', realtime: !0, zoomLock: !1, textStyle: { color: '#333' } } }); t.exports = i }, function (t, e, n) { var i = n(0); var r = n(22); var a = n(2); var o = n(29); var s = n(52); var l = n(3); var u = n(6); var c = n(50); var h = a.Rect; var d = l.linearMap; var f = l.asc; var p = i.bind; var g = i.each; var v = 'horizontal'; var m = 5; var y = ['line', 'bar', 'candlestick', 'scatter']; var x = s.extend({ type: 'dataZoom.slider', init: function (t, e) { this._displayables = {}, this._orient, this._range, this._handleEnds, this._size, this._handleWidth, this._handleHeight, this._location, this._dragging, this._dataShadowInfo, this.api = e }, render: function (t, e, n, i) { x.superApply(this, 'render', arguments), o.createOrUpdate(this, '_dispatchZoomAction', this.dataZoomModel.get('throttle'), 'fixRate'), this._orient = t.get('orient'), !1 !== this.dataZoomModel.get('show') ? (i && i.type === 'dataZoom' && i.from === this.uid || this._buildView(), this._updateView()) : this.group.removeAll() }, remove: function () { x.superApply(this, 'remove', arguments), o.clear(this, '_dispatchZoomAction') }, dispose: function () { x.superApply(this, 'dispose', arguments), o.clear(this, '_dispatchZoomAction') }, _buildView: function () { var t = this.group; t.removeAll(), this._resetLocation(), this._resetInterval(); var e = this._displayables.barGroup = new a.Group(); this._renderBackground(), this._renderHandle(), this._renderDataShadow(), t.add(e), this._positionGroup() }, _resetLocation: function () { var t = this.dataZoomModel; var e = this.api; var n = this._findCoordRect(); var r = { width: e.getWidth(), height: e.getHeight() }; var a = this._orient === v ? { right: r.width - n.x - n.width, top: r.height - 30 - 7, width: n.width, height: 30 } : { right: 7, top: n.y, width: 30, height: n.height }; var o = u.getLayoutParams(t.option); i.each(['right', 'top', 'width', 'height'], function (t) { o[t] === 'ph' && (o[t] = a[t]) }); var s = u.getLayoutRect(o, r, t.padding); this._location = { x: s.x, y: s.y }, this._size = [s.width, s.height], this._orient === 'vertical' && this._size.reverse() }, _positionGroup: function () { var t = this.group; var e = this._location; var n = this._orient; var i = this.dataZoomModel.getFirstTargetAxisModel(); var r = i && i.get('inverse'); var a = this._displayables.barGroup; var o = (this._dataShadowInfo || {}).otherAxisInverse; a.attr(n !== v || r ? n === v && r ? { scale: o ? [-1, 1] : [-1, -1] } : n !== 'vertical' || r ? { scale: o ? [-1, -1] : [-1, 1], rotation: Math.PI / 2 } : { scale: o ? [1, -1] : [1, 1], rotation: Math.PI / 2 } : { scale: o ? [1, 1] : [1, -1] }); var s = t.getBoundingRect([a]); t.attr('position', [e.x - s.x, e.y - s.y]) }, _getViewExtent: function () { return [0, this._size[0]] }, _renderBackground: function () { var t = this.dataZoomModel; var e = this._size; var n = this._displayables.barGroup; n.add(new h({ silent: !0, shape: { x: 0, y: 0, width: e[0], height: e[1] }, style: { fill: t.get('backgroundColor') }, z2: -40 })), n.add(new h({ shape: { x: 0, y: 0, width: e[0], height: e[1] }, style: { fill: 'transparent' }, z2: 0, onclick: i.bind(this._onClickPanelClick, this) })) }, _renderDataShadow: function () { var t = this._dataShadowInfo = this._prepareDataShadowInfo(); if (t) { var e = this._size; var n = t.series; var r = n.getRawData(); var o = n.getShadowDim ? n.getShadowDim() : t.otherDim; if (o != null) { var s = r.getDataExtent(o); var l = 0.3 * (s[1] - s[0]); s = [s[0] - l, s[1] + l]; var u; var c = [0, e[1]]; var h = [0, e[0]]; var f = [[e[0], 0], [0, 0]]; var p = []; var g = h[1] / (r.count() - 1); var v = 0; var m = Math.round(r.count() / e[0]); r.each([o], function (t, e) { if (m > 0 && e % m)v += g; else { var n = t == null || isNaN(t) || t === ''; var i = n ? 0 : d(t, s, c, !0); n && !u && e ? (f.push([f[f.length - 1][0], 0]), p.push([p[p.length - 1][0], 0])) : !n && u && (f.push([v, 0]), p.push([v, 0])), f.push([v, i]), p.push([v, i]), v += g, u = n } }); var y = this.dataZoomModel; this._displayables.barGroup.add(new a.Polygon({ shape: { points: f }, style: i.defaults({ fill: y.get('dataBackgroundColor') }, y.getModel('dataBackground.areaStyle').getAreaStyle()), silent: !0, z2: -20 })), this._displayables.barGroup.add(new a.Polyline({ shape: { points: p }, style: y.getModel('dataBackground.lineStyle').getLineStyle(), silent: !0, z2: -19 })) } } }, _prepareDataShadowInfo: function () { var t = this.dataZoomModel; var e = t.get('showDataShadow'); if (!1 !== e) { var n; var r = this.ecModel; return t.eachTargetAxis(function (a, o) { var s = t.getAxisProxy(a.name, o).getTargetSeriesModels(); i.each(s, function (t) { if (!(n || !0 !== e && i.indexOf(y, t.get('type')) < 0)) { var s; var l = r.getComponent(a.axis, o).axis; var u = { x: 'y', y: 'x', radius: 'angle', angle: 'radius' }[a.name]; var c = t.coordinateSystem; u != null && c.getOtherAxis && (s = c.getOtherAxis(l).inverse), u = t.getData().mapDimension(u), n = { thisAxis: l, series: t, thisDim: a.name, otherDim: u, otherAxisInverse: s } } }, this) }, this), n } }, _renderHandle: function () { var t = this._displayables; var e = t.handles = []; var n = t.handleLabels = []; var i = this._displayables.barGroup; var o = this._size; var s = this.dataZoomModel; i.add(t.filler = new h({ draggable: !0, cursor: _(this._orient), drift: p(this._onDragMove, this, 'all'), onmousemove: function (t) { r.stop(t.event) }, ondragstart: p(this._showDataInfo, this, !0), ondragend: p(this._onDragEnd, this), onmouseover: p(this._showDataInfo, this, !0), onmouseout: p(this._showDataInfo, this, !1), style: { fill: s.get('fillerColor'), textPosition: 'inside' } })), i.add(new h({ silent: !0, subPixelOptimize: !0, shape: { x: 0, y: 0, width: o[0], height: o[1] }, style: { stroke: s.get('dataBackgroundColor') || s.get('borderColor'), lineWidth: 1, fill: 'rgba(0,0,0,0)' } })), g([0, 1], function (t) { var o = a.createIcon(s.get('handleIcon'), { cursor: _(this._orient), draggable: !0, drift: p(this._onDragMove, this, t), onmousemove: function (t) { r.stop(t.event) }, ondragend: p(this._onDragEnd, this), onmouseover: p(this._showDataInfo, this, !0), onmouseout: p(this._showDataInfo, this, !1) }, { x: -1, y: 0, width: 2, height: 2 }); var u = o.getBoundingRect(); this._handleHeight = l.parsePercent(s.get('handleSize'), this._size[1]), this._handleWidth = u.width / u.height * this._handleHeight, o.setStyle(s.getModel('handleStyle').getItemStyle()); var c = s.get('handleColor'); c != null && (o.style.fill = c), i.add(e[t] = o); var h = s.textStyleModel; this.group.add(n[t] = new a.Text({ silent: !0, invisible: !0, style: { x: 0, y: 0, text: '', textVerticalAlign: 'middle', textAlign: 'center', textFill: h.getTextColor(), textFont: h.getFont() }, z2: 10 })) }, this) }, _resetInterval: function () { var t = this._range = this.dataZoomModel.getPercentRange(); var e = this._getViewExtent(); this._handleEnds = [d(t[0], [0, 100], e, !0), d(t[1], [0, 100], e, !0)] }, _updateInterval: function (t, e) { var n = this.dataZoomModel; var i = this._handleEnds; var r = this._getViewExtent(); var a = n.findRepresentativeAxisProxy().getMinMaxSpan(); var o = [0, 100]; c(e, i, r, n.get('zoomLock') ? 'all' : t, a.minSpan != null ? d(a.minSpan, o, r, !0) : null, a.maxSpan != null ? d(a.maxSpan, o, r, !0) : null); var s = this._range; var l = this._range = f([d(i[0], r, o, !0), d(i[1], r, o, !0)]); return !s || s[0] !== l[0] || s[1] !== l[1] }, _updateView: function (t) { var e = this._displayables; var n = this._handleEnds; var i = f(n.slice()); var r = this._size; g([0, 1], function (t) { var i = e.handles[t]; var a = this._handleHeight; i.attr({ scale: [a / 2, a / 2], position: [n[t], r[1] / 2 - a / 2] }) }, this), e.filler.setShape({ x: i[0], y: 0, width: i[1] - i[0], height: r[1] }), this._updateDataInfo(t) }, _updateDataInfo: function (t) { var e = this.dataZoomModel; var n = this._displayables; var i = n.handleLabels; var r = this._orient; var o = ['', '']; if (e.get('showDetail')) { var s = e.findRepresentativeAxisProxy(); if (s) { var l = s.getAxisModel().axis; var u = this._range; var c = t ? s.calculateDataWindow({ start: u[0], end: u[1] }).valueWindow : s.getDataValueWindow(); o = [this._formatLabel(c[0], l), this._formatLabel(c[1], l)] } } var h = f(this._handleEnds.slice()); function d (t) { var e = a.getTransform(n.handles[t].parent, this.group); var s = a.transformDirection(t === 0 ? 'right' : 'left', e); var l = this._handleWidth / 2 + m; var u = a.applyTransform([h[t] + (t === 0 ? -l : l), this._size[1] / 2], e); i[t].setStyle({ x: u[0], y: u[1], textVerticalAlign: r === v ? 'middle' : s, textAlign: r === v ? s : 'center', text: o[t] }) }d.call(this, 0), d.call(this, 1) }, _formatLabel: function (t, e) { var n = this.dataZoomModel; var r = n.get('labelFormatter'); var a = n.get('labelPrecision'); a != null && a !== 'auto' || (a = e.getPixelPrecision()); var o = t == null || isNaN(t) ? '' : e.type === 'category' || e.type === 'time' ? e.scale.getLabel(Math.round(t)) : t.toFixed(Math.min(a, 20)); return i.isFunction(r) ? r(t, o) : i.isString(r) ? r.replace('{value}', o) : o }, _showDataInfo: function (t) { t = this._dragging || t; var e = this._displayables.handleLabels; e[0].attr('invisible', !t), e[1].attr('invisible', !t) }, _onDragMove: function (t, e, n) { this._dragging = !0; var i = this._displayables.barGroup.getLocalTransform(); var r = a.applyTransform([e, n], i, !0); var o = this._updateInterval(t, r[0]); var s = this.dataZoomModel.get('realtime'); this._updateView(!s), o && s && this._dispatchZoomAction() }, _onDragEnd: function () { this._dragging = !1, this._showDataInfo(!1), !this.dataZoomModel.get('realtime') && this._dispatchZoomAction() }, _onClickPanelClick: function (t) { var e = this._size; var n = this._displayables.barGroup.transformCoordToLocal(t.offsetX, t.offsetY); if (!(n[0] < 0 || n[0] > e[0] || n[1] < 0 || n[1] > e[1])) { var i = this._handleEnds; var r = (i[0] + i[1]) / 2; var a = this._updateInterval('all', n[0] - r); this._updateView(), a && this._dispatchZoomAction() } }, _dispatchZoomAction: function () { var t = this._range; this.api.dispatchAction({ type: 'dataZoom', from: this.uid, dataZoomId: this.dataZoomModel.id, start: t[0], end: t[1] }) }, _findCoordRect: function () { var t; if (g(this.getTargetCoordInfo(), function (e) { if (!t && e.length) { var n = e[0].model.coordinateSystem; t = n.getRect && n.getRect() } }), !t) { var e = this.api.getWidth(); var n = this.api.getHeight(); t = { x: 0.2 * e, y: 0.2 * n, width: 0.6 * e, height: 0.6 * n } } return t } }); function _ (t) { return t === 'vertical' ? 'ns-resize' : 'ew-resize' } var b = x; t.exports = b }, function (t, e, n) { var i = n(51).extend({ type: 'dataZoom.inside', defaultOption: { disabled: !1, zoomLock: !1, zoomOnMouseWheel: !0, moveOnMouseMove: !0, moveOnMouseWheel: !1, preventDefaultMouseMove: !0 } }); t.exports = i }, function (t, e, n) { var i = n(0); var r = n(52); var a = n(50); var o = n(510); var s = i.bind; var l = r.extend({ type: 'dataZoom.inside', init: function (t, e) { this._range }, render: function (t, e, n, r) { l.superApply(this, 'render', arguments), this._range = t.getPercentRange(), i.each(this.getTargetCoordInfo(), function (e, r) { var a = i.map(e, function (t) { return o.generateCoordId(t.model) }); i.each(e, function (e) { var l = e.model; var c = {}; i.each(['pan', 'zoom', 'scrollMove'], function (t) { c[t] = s(u[t], this, e, r) }, this), o.register(n, { coordId: o.generateCoordId(l), allCoordIds: a, containsPoint: function (t, e, n) { return l.coordinateSystem.containPoint([e, n]) }, dataZoomId: t.id, dataZoomModel: t, getRange: c }) }, this) }, this) }, dispose: function () { o.unregister(this.api, this.dataZoomModel.id), l.superApply(this, 'dispose', arguments), this._range = null } }); var u = { zoom: function (t, e, n, i) { var r = this._range; var o = r.slice(); var s = t.axisModels[0]; if (s) { var l = h[e](null, [i.originX, i.originY], s, n, t); var u = (l.signal > 0 ? l.pixelStart + l.pixelLength - l.pixel : l.pixel - l.pixelStart) / l.pixelLength * (o[1] - o[0]) + o[0]; var c = Math.max(1 / i.scale, 0); o[0] = (o[0] - u) * c + u, o[1] = (o[1] - u) * c + u; var d = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan(); return a(0, o, [0, 100], 0, d.minSpan, d.maxSpan), this._range = o, r[0] !== o[0] || r[1] !== o[1] ? o : void 0 } }, pan: c(function (t, e, n, i, r, a) { var o = h[i]([a.oldX, a.oldY], [a.newX, a.newY], e, r, n); return o.signal * (t[1] - t[0]) * o.pixel / o.pixelLength }), scrollMove: c(function (t, e, n, i, r, a) { return h[i]([0, 0], [a.scrollDelta, a.scrollDelta], e, r, n).signal * (t[1] - t[0]) * a.scrollDelta }) }; function c (t) { return function (e, n, i, r) { var o = this._range; var s = o.slice(); var l = e.axisModels[0]; if (l) { var u = t(s, l, e, n, i, r); return a(u, s, [0, 100], 'all'), this._range = s, o[0] !== s[0] || o[1] !== s[1] ? s : void 0 } } } var h = { grid: function (t, e, n, i, r) { var a = n.axis; var o = {}; var s = r.model.coordinateSystem.getRect(); return t = t || [0, 0], a.dim === 'x' ? (o.pixel = e[0] - t[0], o.pixelLength = s.width, o.pixelStart = s.x, o.signal = a.inverse ? 1 : -1) : (o.pixel = e[1] - t[1], o.pixelLength = s.height, o.pixelStart = s.y, o.signal = a.inverse ? -1 : 1), o }, polar: function (t, e, n, i, r) { var a = n.axis; var o = {}; var s = r.model.coordinateSystem; var l = s.getRadiusAxis().getExtent(); var u = s.getAngleAxis().getExtent(); return t = t ? s.pointToCoord(t) : [0, 0], e = s.pointToCoord(e), n.mainType === 'radiusAxis' ? (o.pixel = e[0] - t[0], o.pixelLength = l[1] - l[0], o.pixelStart = l[0], o.signal = a.inverse ? 1 : -1) : (o.pixel = e[1] - t[1], o.pixelLength = u[1] - u[0], o.pixelStart = u[0], o.signal = a.inverse ? -1 : 1), o }, singleAxis: function (t, e, n, i, r) { var a = n.axis; var o = r.model.coordinateSystem.getRect(); var s = {}; return t = t || [0, 0], a.orient === 'horizontal' ? (s.pixel = e[0] - t[0], s.pixelLength = o.width, s.pixelStart = o.x, s.signal = a.inverse ? 1 : -1) : (s.pixel = e[1] - t[1], s.pixelLength = o.height, s.pixelStart = o.y, s.signal = a.inverse ? -1 : 1), s } }; var d = l; t.exports = d }, function (t, e, n) { var i = n(0); var r = n(64); var a = n(29); var o = '\0_ec_dataZoom_roams'; function s (t) { var e = t.getZr(); return e[o] || (e[o] = {}) } function l (t) { i.each(t, function (e, n) { e.count || (e.controller.dispose(), delete t[n]) }) } function u (t, e) { t.dispatchAction({ type: 'dataZoom', batch: e }) }e.register = function (t, e) { var n = s(t); var o = e.dataZoomId; var c = e.coordId; i.each(n, function (t, n) { var r = t.dataZoomInfos; r[o] && i.indexOf(e.allCoordIds, c) < 0 && (delete r[o], t.count--) }), l(n); var h = n[c]; h || ((h = n[c] = { coordId: c, dataZoomInfos: {}, count: 0 }).controller = (function (t, e) { var n = new r(t.getZr()); return i.each(['pan', 'zoom', 'scrollMove'], function (t) { n.on(t, function (n) { var r = []; i.each(e.dataZoomInfos, function (i) { if (n.isAvailableBehavior(i.dataZoomModel.option)) { var a = (i.getRange || {})[t]; var o = a && a(e.controller, n); !i.dataZoomModel.get('disabled', !0) && o && r.push({ dataZoomId: i.dataZoomId, start: o[0], end: o[1] }) } }), r.length && e.dispatchAction(r) }) }), n }(t, h)), h.dispatchAction = i.curry(u, t)), !h.dataZoomInfos[o] && h.count++, h.dataZoomInfos[o] = e; var d; var f; var p; var g; var v = (d = h.dataZoomInfos, p = { type_true: 2, type_move: 1, type_false: 0, type_undefined: -1 }, g = !0, i.each(d, function (t) { var e = t.dataZoomModel; var n = !e.get('disabled', !0) && (!e.get('zoomLock', !0) || 'move'); p['type_' + n] > p['type_' + f] && (f = n), g &= e.get('preventDefaultMouseMove', !0) }), { controlType: f, opt: { zoomOnMouseWheel: !0, moveOnMouseMove: !0, moveOnMouseWheel: !0, preventDefaultMouseMove: !!g } }); h.controller.enable(v.controlType, v.opt), h.controller.setPointerChecker(e.containsPoint), a.createOrUpdate(h, 'dispatchAction', e.dataZoomModel.get('throttle', !0), 'fixRate') }, e.unregister = function (t, e) { var n = s(t); i.each(n, function (t) { t.controller.dispose(); var n = t.dataZoomInfos; n[e] && (delete n[e], t.count--) }), l(n) }, e.generateCoordId = function (t) { return t.type + '\0_' + t.id } }, function (t, e, n) { n(201), n(210) }, function (t, e, n) { var i = n(0); var r = n(205); var a = n(3); var o = [20, 140]; var s = r.extend({ type: 'visualMap.continuous', defaultOption: { align: 'auto', calculable: !1, range: null, realtime: !0, itemHeight: null, itemWidth: null, hoverLink: !0, hoverLinkDataSize: null, hoverLinkOnHandle: null }, optionUpdated: function (t, e) { s.superApply(this, 'optionUpdated', arguments), this.resetExtent(), this.resetVisual(function (t) { t.mappingMethod = 'linear', t.dataExtent = this.getExtent() }), this._resetRange() }, resetItemSize: function () { s.superApply(this, 'resetItemSize', arguments); var t = this.itemSize; this._orient === 'horizontal' && t.reverse(), (t[0] == null || isNaN(t[0])) && (t[0] = o[0]), (t[1] == null || isNaN(t[1])) && (t[1] = o[1]) }, _resetRange: function () { var t = this.getExtent(); var e = this.option.range; !e || e.auto ? (t.auto = 1, this.option.range = t) : i.isArray(e) && (e[0] > e[1] && e.reverse(), e[0] = Math.max(e[0], t[0]), e[1] = Math.min(e[1], t[1])) }, completeVisualOption: function () { r.prototype.completeVisualOption.apply(this, arguments), i.each(this.stateList, function (t) { var e = this.option.controller[t].symbolSize; e && e[0] !== e[1] && (e[0] = 0) }, this) }, setSelected: function (t) { this.option.range = t.slice(), this._resetRange() }, getSelected: function () { var t = this.getExtent(); var e = a.asc((this.get('range') || []).slice()); return e[0] > t[1] && (e[0] = t[1]), e[1] > t[1] && (e[1] = t[1]), e[0] < t[0] && (e[0] = t[0]), e[1] < t[0] && (e[1] = t[0]), e }, getValueState: function (t) { var e = this.option.range; var n = this.getExtent(); return (e[0] <= n[0] || e[0] <= t) && (e[1] >= n[1] || t <= e[1]) ? 'inRange' : 'outOfRange' }, findTargetDataIndices: function (t) { var e = []; return this.eachTargetSeries(function (n) { var i = []; var r = n.getData(); r.each(this.getDataDimension(r), function (e, n) { t[0] <= e && e <= t[1] && i.push(n) }, this), e.push({ seriesId: n.id, dataIndex: i }) }, this), e }, getVisualMeta: function (t) { var e = l(this, 'outOfRange', this.getExtent()); var n = l(this, 'inRange', this.option.range.slice()); var i = []; function r (e, n) { i.push({ value: e, color: t(e, n) }) } for (var a = 0, o = 0, s = n.length, u = e.length; o < u && (!n.length || e[o] <= n[0]); o++)e[o] < n[a] && r(e[o], 'outOfRange'); for (var c = 1; a < s; a++, c = 0)c && i.length && r(n[a], 'outOfRange'), r(n[a], 'inRange'); for (c = 1; o < u; o++)(!n.length || n[n.length - 1] < e[o]) && (c && (i.length && r(i[i.length - 1].value, 'outOfRange'), c = 0), r(e[o], 'outOfRange')); var h = i.length; return { stops: i, outerColors: [h ? i[0].color : 'transparent', h ? i[h - 1].color : 'transparent'] } } }); function l (t, e, n) { if (n[0] === n[1]) return n.slice(); for (var i = (n[1] - n[0]) / 200, r = n[0], a = [], o = 0; o <= 200 && r < n[1]; o++)a.push(r), r += i; return a.push(n[1]), a } var u = s; t.exports = u }, function (t, e, n) { var i = n(0); var r = n(92); var a = n(22); var o = n(207); var s = n(2); var l = n(3); var u = n(50); var c = n(208); var h = n(4); var d = l.linearMap; var f = i.each; var p = Math.min; var g = Math.max; var v = 12; var m = 6; var y = o.extend({ type: 'visualMap.continuous', init: function () { y.superApply(this, 'init', arguments), this._shapes = {}, this._dataInterval = [], this._handleEnds = [], this._orient, this._useHandle, this._hoverLinkDataIndices = [], this._dragging, this._hovering }, doRender: function (t, e, n, i) { i && i.type === 'selectDataRange' && i.from === this.uid || this._buildView() }, _buildView: function () { this.group.removeAll(); var t = this.visualMapModel; var e = this.group; this._orient = t.get('orient'), this._useHandle = t.get('calculable'), this._resetInterval(), this._renderBar(e); var n = t.get('text'); this._renderEndsText(e, n, 0), this._renderEndsText(e, n, 1), this._updateView(!0), this.renderBackground(e), this._updateView(), this._enableHoverLinkToSeries(), this._enableHoverLinkFromSeries(), this.positionGroup(e) }, _renderEndsText: function (t, e, n) { if (e) { var i = e[1 - n]; i = i != null ? i + '' : ''; var r = this.visualMapModel; var a = r.get('textGap'); var o = r.itemSize; var l = this._shapes.barGroup; var u = this._applyTransform([o[0] / 2, n === 0 ? -a : o[1] + a], l); var c = this._applyTransform(n === 0 ? 'bottom' : 'top', l); var h = this._orient; var d = this.visualMapModel.textStyleModel; this.group.add(new s.Text({ style: { x: u[0], y: u[1], textVerticalAlign: h === 'horizontal' ? 'middle' : c, textAlign: h === 'horizontal' ? c : 'center', text: i, textFont: d.getFont(), textFill: d.getTextColor() } })) } }, _renderBar: function (t) { var e = this.visualMapModel; var n = this._shapes; var r = e.itemSize; var a = this._orient; var o = this._useHandle; var s = c.getItemAlign(e, this.api, r); var l = n.barGroup = this._createBarGroup(s); l.add(n.outOfRange = x()), l.add(n.inRange = x(null, o ? b(this._orient) : null, i.bind(this._dragHandle, this, 'all', !1), i.bind(this._dragHandle, this, 'all', !0))); var u = e.textStyleModel.getTextRect('国'); var h = g(u.width, u.height); o && (n.handleThumbs = [], n.handleLabels = [], n.handleLabelPoints = [], this._createHandle(l, 0, r, h, a, s), this._createHandle(l, 1, r, h, a, s)), this._createIndicator(l, r, h, a), t.add(l) }, _createHandle: function (t, e, n, r, o) { var l = i.bind(this._dragHandle, this, e, !1); var u = i.bind(this._dragHandle, this, e, !0); var c = x((function (t, e) { return t === 0 ? [[0, 0], [e, 0], [e, -e]] : [[0, 0], [e, 0], [e, e]] }(e, r)), b(this._orient), l, u); c.position[0] = n[0], t.add(c); var h = this.visualMapModel.textStyleModel; var d = new s.Text({ draggable: !0, drift: l, onmousemove: function (t) { a.stop(t.event) }, ondragend: u, style: { x: 0, y: 0, text: '', textFont: h.getFont(), textFill: h.getTextColor() } }); this.group.add(d); var f = [o === 'horizontal' ? r / 2 : 1.5 * r, o === 'horizontal' ? e === 0 ? -1.5 * r : 1.5 * r : e === 0 ? -r / 2 : r / 2]; var p = this._shapes; p.handleThumbs[e] = c, p.handleLabelPoints[e] = f, p.handleLabels[e] = d }, _createIndicator: function (t, e, n, i) { var r = x([[0, 0]], 'move'); r.position[0] = e[0], r.attr({ invisible: !0, silent: !0 }), t.add(r); var a = this.visualMapModel.textStyleModel; var o = new s.Text({ silent: !0, invisible: !0, style: { x: 0, y: 0, text: '', textFont: a.getFont(), textFill: a.getTextColor() } }); this.group.add(o); var l = [i === 'horizontal' ? n / 2 : m + 3, 0]; var u = this._shapes; u.indicator = r, u.indicatorLabel = o, u.indicatorLabelPoint = l }, _dragHandle: function (t, e, n, i) { if (this._useHandle) { if (this._dragging = !e, !e) { var r = this._applyTransform([n, i], this._shapes.barGroup, !0); this._updateInterval(t, r[1]), this._updateView() }e === !this.visualMapModel.get('realtime') && this.api.dispatchAction({ type: 'selectDataRange', from: this.uid, visualMapId: this.visualMapModel.id, selected: this._dataInterval.slice() }), e ? !this._hovering && this._clearHoverLinkToSeries() : _(this.visualMapModel) && this._doHoverLinkToSeries(this._handleEnds[t], !1) } }, _resetInterval: function () { var t = this.visualMapModel; var e = this._dataInterval = t.getSelected(); var n = t.getExtent(); var i = [0, t.itemSize[1]]; this._handleEnds = [d(e[0], n, i, !0), d(e[1], n, i, !0)] }, _updateInterval: function (t, e) { e = e || 0; var n = this.visualMapModel; var i = this._handleEnds; var r = [0, n.itemSize[1]]; u(e, i, r, t, 0); var a = n.getExtent(); this._dataInterval = [d(i[0], r, a, !0), d(i[1], r, a, !0)] }, _updateView: function (t) { var e = this.visualMapModel; var n = e.getExtent(); var i = this._shapes; var r = [0, e.itemSize[1]]; var a = t ? r : this._handleEnds; var o = this._createBarVisual(this._dataInterval, n, a, 'inRange'); var s = this._createBarVisual(n, n, r, 'outOfRange'); i.inRange.setStyle({ fill: o.barColor, opacity: o.opacity }).setShape('points', o.barPoints), i.outOfRange.setStyle({ fill: s.barColor, opacity: s.opacity }).setShape('points', s.barPoints), this._updateHandle(a, o) }, _createBarVisual: function (t, e, n, i) { var a = { forceState: i, convertOpacityToAlpha: !0 }; var o = this._makeColorGradient(t, a); var s = [this.getControllerVisual(t[0], 'symbolSize', a), this.getControllerVisual(t[1], 'symbolSize', a)]; var l = this._createBarPoints(n, s); return { barColor: new r(0, 0, 0, 1, o), barPoints: l, handlesColor: [o[0].color, o[o.length - 1].color] } }, _makeColorGradient: function (t, e) { var n = []; var i = (t[1] - t[0]) / 100; n.push({ color: this.getControllerVisual(t[0], 'color', e), offset: 0 }); for (var r = 1; r < 100; r++) { var a = t[0] + i * r; if (a > t[1]) break; n.push({ color: this.getControllerVisual(a, 'color', e), offset: r / 100 }) } return n.push({ color: this.getControllerVisual(t[1], 'color', e), offset: 1 }), n }, _createBarPoints: function (t, e) { var n = this.visualMapModel.itemSize; return [[n[0] - e[0], t[0]], [n[0], t[0]], [n[0], t[1]], [n[0] - e[1], t[1]]] }, _createBarGroup: function (t) { var e = this._orient; var n = this.visualMapModel.get('inverse'); return new s.Group(e !== 'horizontal' || n ? e === 'horizontal' && n ? { scale: t === 'bottom' ? [-1, 1] : [1, 1], rotation: -Math.PI / 2 } : e !== 'vertical' || n ? { scale: t === 'left' ? [1, 1] : [-1, 1] } : { scale: t === 'left' ? [1, -1] : [-1, -1] } : { scale: t === 'bottom' ? [1, 1] : [-1, 1], rotation: Math.PI / 2 }) }, _updateHandle: function (t, e) { if (this._useHandle) { var n = this._shapes; var i = this.visualMapModel; var r = n.handleThumbs; var a = n.handleLabels; f([0, 1], function (o) { var l = r[o]; l.setStyle('fill', e.handlesColor[o]), l.position[1] = t[o]; var u = s.applyTransform(n.handleLabelPoints[o], s.getTransform(l, this.group)); a[o].setStyle({ x: u[0], y: u[1], text: i.formatValueText(this._dataInterval[o]), textVerticalAlign: 'middle', textAlign: this._applyTransform(this._orient === 'horizontal' ? o === 0 ? 'bottom' : 'top' : 'left', n.barGroup) }) }, this) } }, _showIndicator: function (t, e, n, i) { var r = this.visualMapModel; var a = r.getExtent(); var o = r.itemSize; var l = [0, o[1]]; var u = d(t, a, l, !0); var c = this._shapes; var h = c.indicator; if (h) { h.position[1] = u, h.attr('invisible', !1), h.setShape('points', (function (t, e, n, i) { return t ? [[0, -p(e, g(n, 0))], [m, 0], [0, p(e, g(i - n, 0))]] : [[0, 0], [5, -5], [5, 5]] }(!!n, i, u, o[1]))); var f = this.getControllerVisual(t, 'color', { convertOpacityToAlpha: !0 }); h.setStyle('fill', f); var v = s.applyTransform(c.indicatorLabelPoint, s.getTransform(h, this.group)); var y = c.indicatorLabel; y.attr('invisible', !1); var x = this._applyTransform('left', c.barGroup); var _ = this._orient; y.setStyle({ text: (n || '') + r.formatValueText(e), textVerticalAlign: _ === 'horizontal' ? x : 'middle', textAlign: _ === 'horizontal' ? 'center' : x, x: v[0], y: v[1] }) } }, _enableHoverLinkToSeries: function () { var t = this; this._shapes.barGroup.on('mousemove', function (e) { if (t._hovering = !0, !t._dragging) { var n = t.visualMapModel.itemSize; var i = t._applyTransform([e.offsetX, e.offsetY], t._shapes.barGroup, !0, !0); i[1] = p(g(0, i[1]), n[1]), t._doHoverLinkToSeries(i[1], i[0] >= 0 && i[0] <= n[0]) } }).on('mouseout', function () { t._hovering = !1, !t._dragging && t._clearHoverLinkToSeries() }) }, _enableHoverLinkFromSeries: function () { var t = this.api.getZr(); this.visualMapModel.option.hoverLink ? (t.on('mouseover', this._hoverLinkFromSeriesMouseOver, this), t.on('mouseout', this._hideIndicator, this)) : this._clearHoverLinkFromSeries() }, _doHoverLinkToSeries: function (t, e) { var n = this.visualMapModel; var i = n.itemSize; if (n.option.hoverLink) { var r = [0, i[1]]; var a = n.getExtent(); t = p(g(r[0], t), r[1]); var o = (function (t, e, n) { var i = v / 2; var r = t.get('hoverLinkDataSize'); r && (i = d(r, e, n, !0) / 2); return i }(n, a, r)); var s = [t - o, t + o]; var l = d(t, r, a, !0); var u = [d(s[0], r, a, !0), d(s[1], r, a, !0)]; s[0] < r[0] && (u[0] = -1 / 0), s[1] > r[1] && (u[1] = 1 / 0), e && (u[0] === -1 / 0 ? this._showIndicator(l, u[1], '< ', o) : u[1] === 1 / 0 ? this._showIndicator(l, u[0], '> ', o) : this._showIndicator(l, l, '≈ ', o)); var f = this._hoverLinkDataIndices; var m = []; (e || _(n)) && (m = this._hoverLinkDataIndices = n.findTargetDataIndices(u)); var y = h.compressBatches(f, m); this._dispatchHighDown('downplay', c.makeHighDownBatch(y[0], n)), this._dispatchHighDown('highlight', c.makeHighDownBatch(y[1], n)) } }, _hoverLinkFromSeriesMouseOver: function (t) { var e = t.target; var n = this.visualMapModel; if (e && e.dataIndex != null) { var i = this.ecModel.getSeriesByIndex(e.seriesIndex); if (n.isTargetSeries(i)) { var r = i.getData(e.dataType); var a = r.get(n.getDataDimension(r), e.dataIndex, !0); isNaN(a) || this._showIndicator(a, a) } } }, _hideIndicator: function () { var t = this._shapes; t.indicator && t.indicator.attr('invisible', !0), t.indicatorLabel && t.indicatorLabel.attr('invisible', !0) }, _clearHoverLinkToSeries: function () { this._hideIndicator(); var t = this._hoverLinkDataIndices; this._dispatchHighDown('downplay', c.makeHighDownBatch(t, this.visualMapModel)), t.length = 0 }, _clearHoverLinkFromSeries: function () { this._hideIndicator(); var t = this.api.getZr(); t.off('mouseover', this._hoverLinkFromSeriesMouseOver), t.off('mouseout', this._hideIndicator) }, _applyTransform: function (t, e, n, r) { var a = s.getTransform(e, r ? null : this.group); return s[i.isArray(t) ? 'applyTransform' : 'transformDirection'](t, a, n) }, _dispatchHighDown: function (t, e) { e && e.length && this.api.dispatchAction({ type: t, batch: e }) }, dispose: function () { this._clearHoverLinkFromSeries(), this._clearHoverLinkToSeries() }, remove: function () { this._clearHoverLinkFromSeries(), this._clearHoverLinkToSeries() } }); function x (t, e, n, i) { return new s.Polygon({ shape: { points: t }, draggable: !!n, cursor: e, drift: n, onmousemove: function (t) { a.stop(t.event) }, ondragend: i }) } function _ (t) { var e = t.get('hoverLinkOnHandle'); return !!(e == null ? t.get('realtime') : e) } function b (t) { return t === 'vertical' ? 'ns-resize' : 'ew-resize' } var w = y; t.exports = w }, function (t, e, n) { n(5).__DEV__; var i = n(0); var r = n(205); var a = n(41); var o = n(206); var s = n(3).reformIntervals; var l = r.extend({ type: 'visualMap.piecewise', defaultOption: { selected: null, minOpen: !1, maxOpen: !1, align: 'auto', itemWidth: 20, itemHeight: 14, itemSymbol: 'roundRect', pieceList: null, categories: null, splitNumber: 5, selectedMode: 'multiple', itemGap: 10, hoverLink: !0, showLabel: null }, optionUpdated: function (t, e) { l.superApply(this, 'optionUpdated', arguments), this._pieceList = [], this.resetExtent(); var n = this._mode = this._determineMode(); u[this._mode].call(this), this._resetSelected(t, e); var r = this.option.categories; this.resetVisual(function (t, e) { n === 'categories' ? (t.mappingMethod = 'category', t.categories = i.clone(r)) : (t.dataExtent = this.getExtent(), t.mappingMethod = 'piecewise', t.pieceList = i.map(this._pieceList, function (t) { t = i.clone(t); return e !== 'inRange' && (t.visual = null), t })) }) }, completeVisualOption: function () { var t = this.option; var e = {}; var n = a.listVisualTypes(); var s = this.isCategory(); function l (t, e, n) { return t && t[e] && (i.isObject(t[e]) ? t[e].hasOwnProperty(n) : t[e] === n) }i.each(t.pieces, function (t) { i.each(n, function (n) { t.hasOwnProperty(n) && (e[n] = 1) }) }), i.each(e, function (e, n) { var r = 0; i.each(this.stateList, function (e) { r |= l(t, e, n) || l(t.target, e, n) }, this), !r && i.each(this.stateList, function (e) { (t[e] || (t[e] = {}))[n] = o.get(n, e === 'inRange' ? 'active' : 'inactive', s) }) }, this), r.prototype.completeVisualOption.apply(this, arguments) }, _resetSelected: function (t, e) { var n = this.option; var r = this._pieceList; var a = (e ? n : t).selected || {}; if (n.selected = a, i.each(r, function (t, e) { var n = this.getSelectedMapKey(t); a.hasOwnProperty(n) || (a[n] = !0) }, this), n.selectedMode === 'single') { var o = !1; i.each(r, function (t, e) { var n = this.getSelectedMapKey(t); a[n] && (o ? a[n] = !1 : o = !0) }, this) } }, getSelectedMapKey: function (t) { return this._mode === 'categories' ? t.value + '' : t.index + '' }, getPieceList: function () { return this._pieceList }, _determineMode: function () { var t = this.option; return t.pieces && t.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber' }, setSelected: function (t) { this.option.selected = i.clone(t) }, getValueState: function (t) { var e = a.findPieceIndex(t, this._pieceList); return e != null && this.option.selected[this.getSelectedMapKey(this._pieceList[e])] ? 'inRange' : 'outOfRange' }, findTargetDataIndices: function (t) { var e = []; return this.eachTargetSeries(function (n) { var i = []; var r = n.getData(); r.each(this.getDataDimension(r), function (e, n) { a.findPieceIndex(e, this._pieceList) === t && i.push(n) }, this), e.push({ seriesId: n.id, dataIndex: i }) }, this), e }, getRepresentValue: function (t) { var e; if (this.isCategory())e = t.value; else if (t.value != null)e = t.value; else { var n = t.interval || []; e = n[0] === -1 / 0 && n[1] === 1 / 0 ? 0 : (n[0] + n[1]) / 2 } return e }, getVisualMeta: function (t) { if (!this.isCategory()) { var e = []; var n = []; var r = this; var a = this._pieceList.slice(); if (a.length) { var o = a[0].interval[0]; o !== -1 / 0 && a.unshift({ interval: [-1 / 0, o] }), (o = a[a.length - 1].interval[1]) !== 1 / 0 && a.push({ interval: [o, 1 / 0] }) } else a.push({ interval: [-1 / 0, 1 / 0] }); var s = -1 / 0; return i.each(a, function (t) { var e = t.interval; e && (e[0] > s && l([s, e[0]], 'outOfRange'), l(e.slice()), s = e[1]) }, this), { stops: e, outerColors: n } } function l (i, a) { var o = r.getRepresentValue({ interval: i }); a || (a = r.getValueState(o)); var s = t(o, a); i[0] === -1 / 0 ? n[0] = s : i[1] === 1 / 0 ? n[1] = s : e.push({ value: i[0], color: s }, { value: i[1], color: s }) } } }); var u = { splitNumber: function () { var t = this.option; var e = this._pieceList; var n = Math.min(t.precision, 20); var r = this.getExtent(); var a = t.splitNumber; a = Math.max(parseInt(a, 10), 1), t.splitNumber = a; for (var o = (r[1] - r[0]) / a; +o.toFixed(n) !== o && n < 5;)n++; t.precision = n, o = +o.toFixed(n); var l = 0; t.minOpen && e.push({ index: l++, interval: [-1 / 0, r[0]], close: [0, 0] }); for (var u = r[0], c = l + a; l < c; u += o) { var h = l === a - 1 ? r[1] : u + o; e.push({ index: l++, interval: [u, h], close: [1, 1] }) }t.maxOpen && e.push({ index: l++, interval: [r[1], 1 / 0], close: [0, 0] }), s(e), i.each(e, function (t) { t.text = this.formatValueText(t.interval) }, this) }, categories: function () { var t = this.option; i.each(t.categories, function (t) { this._pieceList.push({ text: this.formatValueText(t, !0), value: t }) }, this), c(t, this._pieceList) }, pieces: function () { var t = this.option; var e = this._pieceList; i.each(t.pieces, function (t, n) { i.isObject(t) || (t = { value: t }); var r = { text: '', index: n }; if (t.label != null && (r.text = t.label), t.hasOwnProperty('value')) { var o = r.value = t.value; r.interval = [o, o], r.close = [1, 1] } else { for (var s = r.interval = [], l = r.close = [0, 0], u = [1, 0, 1], c = [-1 / 0, 1 / 0], h = [], d = 0; d < 2; d++) { for (var f = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][d], p = 0; p < 3 && s[d] == null; p++)s[d] = t[f[p]], l[d] = u[p], h[d] = p === 2; s[d] == null && (s[d] = c[d]) }h[0] && s[1] === 1 / 0 && (l[0] = 0), h[1] && s[0] === -1 / 0 && (l[1] = 0), s[0] === s[1] && l[0] && l[1] && (r.value = s[0]) }r.visual = a.retrieveVisuals(t), e.push(r) }, this), c(t, e), s(e), i.each(e, function (t) { var e = t.close; var n = [['<', '≤'][e[1]], ['>', '≥'][e[0]]]; t.text = t.text || this.formatValueText(t.value != null ? t.value : t.interval, !1, n) }, this) } }; function c (t, e) { var n = t.inverse; (t.orient === 'vertical' ? !n : n) && e.reverse() } var h = l; t.exports = h }, function (t, e, n) { var i = n(0); var r = n(207); var a = n(2); var o = n(19).createSymbol; var s = n(6); var l = n(208); var u = r.extend({ type: 'visualMap.piecewise', doRender: function () { var t = this.group; t.removeAll(); var e = this.visualMapModel; var n = e.get('textGap'); var r = e.textStyleModel; var o = r.getFont(); var l = r.getTextColor(); var u = this._getItemAlign(); var c = e.itemSize; var h = this._getViewData(); var d = h.endsText; var f = i.retrieve(e.get('showLabel', !0), !d); d && this._renderEndsText(t, d[0], c, f, u), i.each(h.viewPieceList, function (r) { var s = r.piece; var h = new a.Group(); h.onclick = i.bind(this._onItemClick, this, s), this._enableHoverLink(h, r.indexInModelPieceList); var d = e.getRepresentValue(s); if (this._createItemSymbol(h, d, [0, 0, c[0], c[1]]), f) { var p = this.visualMapModel.getValueState(d); h.add(new a.Text({ style: { x: u === 'right' ? -n : c[0] + n, y: c[1] / 2, text: s.text, textVerticalAlign: 'middle', textAlign: u, textFont: o, textFill: l, opacity: p === 'outOfRange' ? 0.5 : 1 } })) }t.add(h) }, this), d && this._renderEndsText(t, d[1], c, f, u), s.box(e.get('orient'), t, e.get('itemGap')), this.renderBackground(t), this.positionGroup(t) }, _enableHoverLink: function (t, e) { function n (t) { var n = this.visualMapModel; n.option.hoverLink && this.api.dispatchAction({ type: t, batch: l.makeHighDownBatch(n.findTargetDataIndices(e), n) }) }t.on('mouseover', i.bind(n, this, 'highlight')).on('mouseout', i.bind(n, this, 'downplay')) }, _getItemAlign: function () { var t = this.visualMapModel; var e = t.option; if (e.orient === 'vertical') return l.getItemAlign(t, this.api, t.itemSize); var n = e.align; return n && n !== 'auto' || (n = 'left'), n }, _renderEndsText: function (t, e, n, i, r) { if (e) { var o = new a.Group(); var s = this.visualMapModel.textStyleModel; o.add(new a.Text({ style: { x: i ? r === 'right' ? n[0] : 0 : n[0] / 2, y: n[1] / 2, textVerticalAlign: 'middle', textAlign: i ? r : 'center', text: e, textFont: s.getFont(), textFill: s.getTextColor() } })), t.add(o) } }, _getViewData: function () { var t = this.visualMapModel; var e = i.map(t.getPieceList(), function (t, e) { return { piece: t, indexInModelPieceList: e } }); var n = t.get('text'); var r = t.get('orient'); var a = t.get('inverse'); return (r === 'horizontal' ? a : !a) ? e.reverse() : n && (n = n.slice().reverse()), { viewPieceList: e, endsText: n } }, _createItemSymbol: function (t, e, n) { t.add(o(this.getControllerVisual(e, 'symbol'), n[0], n[1], n[2], n[3], this.getControllerVisual(e, 'color'))) }, _onItemClick: function (t) { var e = this.visualMapModel; var n = e.option; var r = i.clone(n.selected); var a = e.getSelectedMapKey(t); n.selectedMode === 'single' ? (r[a] = !0, i.each(r, function (t, e) { r[e] = e === a })) : r[a] = !r[a], this.api.dispatchAction({ type: 'selectDataRange', from: this.uid, visualMapId: this.visualMapModel.id, selected: r }) } }); t.exports = u }, function (t, e, n) { n(517), (0, n(67).registerPainter)('vml', n(518)) }, function (t, e, n) { var i = n(11); var r = n(7).applyTransform; var a = n(8); var o = n(23); var s = n(17); var l = n(70); var u = n(137); var c = n(54); var h = n(43); var d = n(35); var f = n(10); var p = n(45); var g = n(72); var v = n(211); var m = p.CMD; var y = Math.round; var x = Math.sqrt; var _ = Math.abs; var b = Math.cos; var w = Math.sin; var S = Math.max; if (!i.canvasSupported) { var M = 21600; var I = M / 2; var A = function (t) { t.style.cssText = 'position:absolute;left:0;top:0;width:1px;height:1px;', t.coordsize = M + ',' + M, t.coordorigin = '0,0' }; var T = function (t, e, n) { return 'rgb(' + [t, e, n].join(',') + ')' }; var C = function (t, e) { e && t && e.parentNode !== t && t.appendChild(e) }; var D = function (t, e) { e && t && e.parentNode === t && t.removeChild(e) }; var L = function (t, e, n) { return 1e5 * (parseFloat(t) || 0) + 1e3 * (parseFloat(e) || 0) + n }; var P = l.parsePercent; var k = function (t, e, n) { var i = o.parse(e); n = +n, isNaN(n) && (n = 1), i && (t.color = T(i[0], i[1], i[2]), t.opacity = n * i[3]) }; var O = function (t, e, n, i) { var a = e === 'fill'; var s = t.getElementsByTagName(e)[0]; n[e] != null && n[e] !== 'none' && (a || !a && n.lineWidth) ? (t[a ? 'filled' : 'stroked'] = 'true', n[e] instanceof g && D(t, s), s || (s = v.createNode(e)), a ? (function (t, e, n) { var i; var a; var s = e.fill; if (s != null) if (s instanceof g) { var l; var u = 0; var c = [0, 0]; var h = 0; var d = 1; var f = n.getBoundingRect(); var p = f.width; var v = f.height; if (s.type === 'linear') { l = 'gradient'; var m = n.transform; var y = [s.x * p, s.y * v]; var x = [s.x2 * p, s.y2 * v]; m && (r(y, y, m), r(x, x, m)); var _ = x[0] - y[0]; var b = x[1] - y[1]; (u = 180 * Math.atan2(_, b) / Math.PI) < 0 && (u += 360), u < 1e-6 && (u = 0) } else { l = 'gradientradial'; y = [s.x * p, s.y * v], m = n.transform; var w = n.scale; var I = p; var A = v; c = [(y[0] - f.x) / I, (y[1] - f.y) / A], m && r(y, y, m), I /= w[0] * M, A /= w[1] * M; var C = S(I, A); h = 0 / C, d = 2 * s.r / C - h } var D = s.colorStops.slice(); D.sort(function (t, e) { return t.offset - e.offset }); for (var L = D.length, P = [], O = [], E = 0; E < L; E++) { var R = D[E]; var N = (i = R.color, a = void 0, a = o.parse(i), [T(a[0], a[1], a[2]), a[3]]); O.push(R.offset * d + h + ' ' + N[0]), E !== 0 && E !== L - 1 || P.push(N) } if (L >= 2) { var z = P[0][0]; var B = P[1][0]; var V = P[0][1] * e.opacity; var F = P[1][1] * e.opacity; t.type = l, t.method = 'none', t.focus = '100%', t.angle = u, t.color = z, t.color2 = B, t.colors = O.join(','), t.opacity = F, t.opacity2 = V }l === 'radial' && (t.focusposition = c.join(',')) } else k(t, s, e.opacity) }(s, n, i)) : (function (t, e) { e.lineDash && (t.dashstyle = e.lineDash.join(' ')), e.stroke == null || e.stroke instanceof g || k(t, e.stroke, e.opacity) }(s, n)), C(t, s)) : (t[a ? 'filled' : 'stroked'] = 'false', D(t, s)) }; var E = [[], [], []]; f.prototype.brushVML = function (t) { var e = this.style; var n = this._vmlEl; n || (n = v.createNode('shape'), A(n), this._vmlEl = n), O(n, 'fill', e, this), O(n, 'stroke', e, this); var i = this.transform; var a = i != null; var o = n.getElementsByTagName('stroke')[0]; if (o) { var s = e.lineWidth; if (a && !e.strokeNoScale) { var l = i[0] * i[3] - i[1] * i[2]; s *= x(_(l)) }o.weight = s + 'px' } var u = this.path || (this.path = new p()); this.__dirtyPath && (u.beginPath(), u.subPixelOptimize = !1, this.buildPath(u, this.shape), u.toStatic(), this.__dirtyPath = !1), n.path = (function (t, e) { var n; var i; var a; var o; var s; var l; var u = m.M; var c = m.C; var h = m.L; var d = m.A; var f = m.Q; var p = []; var g = t.data; var v = t.len(); for (o = 0; o < v;) { switch (i = '', n = 0, a = g[o++]) { case u:i = ' m ', n = 1, s = g[o++], l = g[o++], E[0][0] = s, E[0][1] = l; break; case h:i = ' l ', n = 1, s = g[o++], l = g[o++], E[0][0] = s, E[0][1] = l; break; case f:case c:i = ' c ', n = 3; var _; var S; var A = g[o++]; var T = g[o++]; var C = g[o++]; var D = g[o++]; a === f ? (_ = C, S = D, C = (C + 2 * A) / 3, D = (D + 2 * T) / 3, A = (s + 2 * A) / 3, T = (l + 2 * T) / 3) : (_ = g[o++], S = g[o++]), E[0][0] = A, E[0][1] = T, E[1][0] = C, E[1][1] = D, E[2][0] = _, E[2][1] = S, s = _, l = S; break; case d:var L = 0; var P = 0; var k = 1; var O = 1; var R = 0; e && (L = e[4], P = e[5], k = x(e[0] * e[0] + e[1] * e[1]), O = x(e[2] * e[2] + e[3] * e[3]), R = Math.atan2(-e[1] / O, e[0] / k)); var N = g[o++]; var z = g[o++]; var B = g[o++]; var V = g[o++]; var F = g[o++] + R; var G = g[o++] + F + R; o++; var H = g[o++]; var W = N + b(F) * B; var j = z + w(F) * V; var U = (A = N + b(G) * B, T = z + w(G) * V, H ? ' wa ' : ' at '); Math.abs(W - A) < 1e-4 && (Math.abs(G - F) > 0.01 ? H && (W += 0.0125) : Math.abs(j - z) < 1e-4 ? H && W < N || !H && W > N ? T -= 0.0125 : T += 0.0125 : H && j < z || !H && j > z ? A += 0.0125 : A -= 0.0125), p.push(U, y(((N - B) * k + L) * M - I), ',', y(((z - V) * O + P) * M - I), ',', y(((N + B) * k + L) * M - I), ',', y(((z + V) * O + P) * M - I), ',', y((W * k + L) * M - I), ',', y((j * O + P) * M - I), ',', y((A * k + L) * M - I), ',', y((T * O + P) * M - I)), s = A, l = T; break; case m.R:var Z = E[0]; var $ = E[1]; Z[0] = g[o++], Z[1] = g[o++], $[0] = Z[0] + g[o++], $[1] = Z[1] + g[o++], e && (r(Z, Z, e), r($, $, e)), Z[0] = y(Z[0] * M - I), $[0] = y($[0] * M - I), Z[1] = y(Z[1] * M - I), $[1] = y($[1] * M - I), p.push(' m ', Z[0], ',', Z[1], ' l ', $[0], ',', Z[1], ' l ', $[0], ',', $[1], ' l ', Z[0], ',', $[1]); break; case m.Z:p.push(' x ') } if (n > 0) { p.push(i); for (var Y = 0; Y < n; Y++) { var X = E[Y]; e && r(X, X, e), p.push(y(X[0] * M - I), ',', y(X[1] * M - I), Y < n - 1 ? ',' : '') } } } return p.join('') }(u, this.transform)), n.style.zIndex = L(this.zlevel, this.z, this.z2), C(t, n), e.text != null ? this.drawRectText(t, this.getBoundingRect()) : this.removeRectText(t) }, f.prototype.onRemove = function (t) { D(t, this._vmlEl), this.removeRectText(t) }, f.prototype.onAdd = function (t) { C(t, this._vmlEl), this.appendRectText(t) }; h.prototype.brushVML = function (t) { var e; var n; var i; var a = this.style; var o = a.image; if (typeof (i = o) === 'object' && i.tagName && i.tagName.toUpperCase() === 'IMG') { var s = o.src; if (s === this._imageSrc)e = this._imageWidth, n = this._imageHeight; else { var l = o.runtimeStyle; var u = l.width; var c = l.height; l.width = 'auto', l.height = 'auto', e = o.width, n = o.height, l.width = u, l.height = c, this._imageSrc = s, this._imageWidth = e, this._imageHeight = n }o = s } else o === this._imageSrc && (e = this._imageWidth, n = this._imageHeight); if (o) { var h = a.x || 0; var d = a.y || 0; var f = a.width; var p = a.height; var g = a.sWidth; var m = a.sHeight; var _ = a.sx || 0; var b = a.sy || 0; var w = g && m; var M = this._vmlEl; M || (M = v.doc.createElement('div'), A(M), this._vmlEl = M); var I; var T = M.style; var D = !1; var P = 1; var k = 1; if (this.transform && (I = this.transform, P = x(I[0] * I[0] + I[1] * I[1]), k = x(I[2] * I[2] + I[3] * I[3]), D = I[1] || I[2]), D) { var O = [h, d]; var E = [h + f, d]; var R = [h, d + p]; var N = [h + f, d + p]; r(O, O, I), r(E, E, I), r(R, R, I), r(N, N, I); var z = S(O[0], E[0], R[0], N[0]); var B = S(O[1], E[1], R[1], N[1]); var V = []; V.push('M11=', I[0] / P, ',', 'M12=', I[2] / k, ',', 'M21=', I[1] / P, ',', 'M22=', I[3] / k, ',', 'Dx=', y(h * P + I[4]), ',', 'Dy=', y(d * k + I[5])), T.padding = '0 ' + y(z) + 'px ' + y(B) + 'px 0', T.filter = 'progid:DXImageTransform.Microsoft.Matrix(' + V.join('') + ', SizingMethod=clip)' } else I && (h = h * P + I[4], d = d * k + I[5]), T.filter = '', T.left = y(h) + 'px', T.top = y(d) + 'px'; var F = this._imageEl; var G = this._cropEl; F || (F = v.doc.createElement('div'), this._imageEl = F); var H = F.style; if (w) { if (e && n)H.width = y(P * e * f / g) + 'px', H.height = y(k * n * p / m) + 'px'; else { var W = new Image(); var j = this; W.onload = function () { W.onload = null, e = W.width, n = W.height, H.width = y(P * e * f / g) + 'px', H.height = y(k * n * p / m) + 'px', j._imageWidth = e, j._imageHeight = n, j._imageSrc = o }, W.src = o }G || ((G = v.doc.createElement('div')).style.overflow = 'hidden', this._cropEl = G); var U = G.style; U.width = y((f + _ * f / g) * P), U.height = y((p + b * p / m) * k), U.filter = 'progid:DXImageTransform.Microsoft.Matrix(Dx=' + -_ * f / g * P + ',Dy=' + -b * p / m * k + ')', G.parentNode || M.appendChild(G), F.parentNode !== G && G.appendChild(F) } else H.width = y(P * f) + 'px', H.height = y(k * p) + 'px', M.appendChild(F), G && G.parentNode && (M.removeChild(G), this._cropEl = null); var Z = ''; var $ = a.opacity; $ < 1 && (Z += '.Alpha(opacity=' + y(100 * $) + ') '), Z += 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=' + o + ', SizingMethod=scale)', H.filter = Z, M.style.zIndex = L(this.zlevel, this.z, this.z2), C(t, M), a.text != null && this.drawRectText(t, this.getBoundingRect()) } }, h.prototype.onRemove = function (t) { D(t, this._vmlEl), this._vmlEl = null, this._cropEl = null, this._imageEl = null, this.removeRectText(t) }, h.prototype.onAdd = function (t) { C(t, this._vmlEl), this.appendRectText(t) }; var R; var N = {}; var z = 0; var B = document.createElement('div'); s.$override('measureText', function (t, e) { var n = v.doc; R || ((R = n.createElement('div')).style.cssText = 'position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;', v.doc.body.appendChild(R)); try { R.style.font = e } catch (t) {} return R.innerHTML = '', R.appendChild(n.createTextNode(t)), { width: R.offsetWidth } }); for (var V = new a(), F = function (t, e, n, i) { var a = this.style; this.__dirty && l.normalizeTextStyle(a, !0); var o = a.text; if (o != null && (o += ''), o) { if (a.rich) { var u = s.parseRichText(o, a); o = []; for (var c = 0; c < u.lines.length; c++) { for (var h = u.lines[c].tokens, d = [], f = 0; f < h.length; f++)d.push(h[f].text); o.push(d.join('')) }o = o.join('\n') } var p; var g; var m = a.textAlign; var x = a.textVerticalAlign; var _ = (function (t) { var e = N[t]; if (!e) { z > 100 && (z = 0, N = {}); var n; var i = B.style; try { i.font = t, n = i.fontFamily.split(',')[0] } catch (t) {}e = { style: i.fontStyle || 'normal', variant: i.fontVariant || 'normal', weight: i.fontWeight || 'normal', size: 0 | parseFloat(i.fontSize || 12), family: n || 'Microsoft YaHei' }, N[t] = e, z++ } return e }(a.font)); var b = _.style + ' ' + _.variant + ' ' + _.weight + ' ' + _.size + 'px "' + _.family + '"'; n = n || s.getBoundingRect(o, b, m, x, a.textPadding, a.textLineHeight); var w = this.transform; if (w && !i && (V.copy(e), V.applyTransform(w), e = V), i)p = e.x, g = e.y; else { var S = a.textPosition; if (S instanceof Array)p = e.x + P(S[0], e.width), g = e.y + P(S[1], e.height), m = m || 'left'; else { var M = this.calculateTextPosition ? this.calculateTextPosition({}, a, e) : s.calculateTextPosition({}, a, e); p = M.x, g = M.y, m = m || M.textAlign, x = x || M.textVerticalAlign } }p = s.adjustTextX(p, n.width, m), g = s.adjustTextY(g, n.height, x), g += n.height / 2; var I; var T; var D; var k = v.createNode; var E = this._textVmlEl; E ? T = (I = (D = E.firstChild).nextSibling).nextSibling : (E = k('line'), I = k('path'), T = k('textpath'), D = k('skew'), T.style['v-text-align'] = 'left', A(E), I.textpathok = !0, T.on = !0, E.from = '0 0', E.to = '1000 0.05', C(E, D), C(E, I), C(E, T), this._textVmlEl = E); var R = [p, g]; var F = E.style; w && i ? (r(R, R, w), D.on = !0, D.matrix = w[0].toFixed(3) + ',' + w[2].toFixed(3) + ',' + w[1].toFixed(3) + ',' + w[3].toFixed(3) + ',0,0', D.offset = (y(R[0]) || 0) + ',' + (y(R[1]) || 0), D.origin = '0 0', F.left = '0px', F.top = '0px') : (D.on = !1, F.left = y(p) + 'px', F.top = y(g) + 'px'), T.string = String(o).replace(/&/g, '&amp;').replace(/"/g, '&quot;'); try { T.style.font = b } catch (t) {}O(E, 'fill', { fill: a.textFill, opacity: a.opacity }, this), O(E, 'stroke', { stroke: a.textStroke, opacity: a.opacity, lineDash: a.lineDash || null }, this), E.style.zIndex = L(this.zlevel, this.z, this.z2), C(t, E) } }, G = function (t) { D(t, this._textVmlEl), this._textVmlEl = null }, H = function (t) { C(t, this._textVmlEl) }, W = [u, c, h, f, d], j = 0; j < W.length; j++) { var U = W[j].prototype; U.drawRectText = F, U.removeRectText = G, U.appendRectText = H }d.prototype.brushVML = function (t) { var e = this.style; e.text != null ? this.drawRectText(t, { x: e.x || 0, y: e.y || 0, width: 0, height: 0 }, this.getBoundingRect(), !0) : this.removeRectText(t) }, d.prototype.onRemove = function (t) { this.removeRectText(t) }, d.prototype.onAdd = function (t) { this.appendRectText(t) } } }, function (t, e, n) { var i = n(53); var r = n(211); var a = n(0).each; function o (t) { return parseInt(t, 10) } function s (t, e) { r.initVML(), this.root = t, this.storage = e; var n = document.createElement('div'); var i = document.createElement('div'); n.style.cssText = 'display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;', i.style.cssText = 'position:absolute;left:0;top:0;', t.appendChild(n), this._vmlRoot = i, this._vmlViewport = n, this.resize(); var a = e.delFromStorage; var o = e.addToStorage; e.delFromStorage = function (t) { a.call(e, t), t && t.onRemove && t.onRemove(i) }, e.addToStorage = function (t) { t.onAdd && t.onAdd(i), o.call(e, t) }, this._firstPaint = !0 }s.prototype = { constructor: s, getType: function () { return 'vml' }, getViewportRoot: function () { return this._vmlViewport }, getViewportRootOffset: function () { var t = this.getViewportRoot(); if (t) return { offsetLeft: t.offsetLeft || 0, offsetTop: t.offsetTop || 0 } }, refresh: function () { var t = this.storage.getDisplayList(!0, !0); this._paintList(t) }, _paintList: function (t) { for (var e = this._vmlRoot, n = 0; n < t.length; n++) { var i = t[n]; i.invisible || i.ignore ? (i.__alreadyNotVisible || i.onRemove(e), i.__alreadyNotVisible = !0) : (i.__alreadyNotVisible && i.onAdd(e), i.__alreadyNotVisible = !1, i.__dirty && (i.beforeBrush && i.beforeBrush(), (i.brushVML || i.brush).call(i, e), i.afterBrush && i.afterBrush())), i.__dirty = !1 } this._firstPaint && (this._vmlViewport.appendChild(e), this._firstPaint = !1) }, resize: function (t, e) { t = t == null ? this._getWidth() : t, e = e == null ? this._getHeight() : e; if (this._width !== t || this._height !== e) { this._width = t, this._height = e; var n = this._vmlViewport.style; n.width = t + 'px', n.height = e + 'px' } }, dispose: function () { this.root.innerHTML = '', this._vmlRoot = this._vmlViewport = this.storage = null }, getWidth: function () { return this._width }, getHeight: function () { return this._height }, clear: function () { this._vmlViewport && this.root.removeChild(this._vmlViewport) }, _getWidth: function () { var t = this.root; var e = t.currentStyle; return (t.clientWidth || o(e.width)) - o(e.paddingLeft) - o(e.paddingRight) | 0 }, _getHeight: function () { var t = this.root; var e = t.currentStyle; return (t.clientHeight || o(e.height)) - o(e.paddingTop) - o(e.paddingBottom) | 0 } }, a(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'toDataURL', 'pathToImage'], function (t) { var e; s.prototype[t] = (e = t, function () { i('In IE8.0 VML mode painter not support method "' + e + '"') }) }); var l = s; t.exports = l }, function (t, e, n) { n(118), (0, n(67).registerPainter)('svg', n(520)) }, function (t, e, n) { var i = n(119).createElement; var r = n(0); var a = n(53); var o = n(10); var s = n(43); var l = n(35); var u = n(521); var c = n(522); var h = n(523); var d = n(524); var f = n(118); var p = f.path; var g = f.image; var v = f.text; function m (t) { return parseInt(t, 10) } function y (t, e) { return e && t && e.parentNode !== t } function x (t, e, n) { if (y(t, e) && n) { var i = n.nextSibling; i ? t.insertBefore(e, i) : t.appendChild(e) } } function _ (t, e) { if (y(t, e)) { var n = t.firstChild; n ? t.insertBefore(e, n) : t.appendChild(e) } } function b (t, e) { e && t && e.parentNode === t && t.removeChild(e) } function w (t) { return t.__textSvgEl } function S (t) { return t.__svgEl } var M = function (t, e, n, a) { this.root = t, this.storage = e, this._opts = n = r.extend({}, n || {}); var o = i('svg'); o.setAttribute('xmlns', 'http://www.w3.org/2000/svg'), o.setAttribute('version', '1.1'), o.setAttribute('baseProfile', 'full'), o.style.cssText = 'user-select:none;position:absolute;left:0;top:0;', this.gradientManager = new c(a, o), this.clipPathManager = new h(a, o), this.shadowManager = new d(a, o); var s = document.createElement('div'); s.style.cssText = 'overflow:hidden;position:relative', this._svgRoot = o, this._viewport = s, t.appendChild(s), s.appendChild(o), this.resize(n.width, n.height), this._visibleList = [] }; M.prototype = { constructor: M, getType: function () { return 'svg' }, getViewportRoot: function () { return this._viewport }, getViewportRootOffset: function () { var t = this.getViewportRoot(); if (t) return { offsetLeft: t.offsetLeft || 0, offsetTop: t.offsetTop || 0 } }, refresh: function () { var t = this.storage.getDisplayList(!0); this._paintList(t) }, setBackgroundColor: function (t) { this._viewport.style.background = t }, _paintList: function (t) { this.gradientManager.markAllUnused(), this.clipPathManager.markAllUnused(), this.shadowManager.markAllUnused(); var e; var n; var i = this._svgRoot; var r = this._visibleList; var a = t.length; var c = []; for (e = 0; e < a; e++) { var h = t[e]; var d = (n = h) instanceof o ? p : n instanceof s ? g : n instanceof l ? v : p; var f = S(h) || w(h); h.invisible || (h.__dirty && (d && d.brush(h), this.clipPathManager.update(h), h.style && (this.gradientManager.update(h.style.fill), this.gradientManager.update(h.style.stroke), this.shadowManager.update(f, h)), h.__dirty = !1), c.push(h)) } var m; var y = u(r, c); for (e = 0; e < y.length; e++) { if ((A = y[e]).removed) for (var M = 0; M < A.count; M++) { f = S(h = r[A.indices[M]]); var I = w(h); b(i, f), b(i, I) } } for (e = 0; e < y.length; e++) { var A; if ((A = y[e]).added) for (M = 0; M < A.count; M++) { f = S(h = c[A.indices[M]]), I = w(h); m ? x(i, f, m) : _(i, f), f ? x(i, I, f) : m ? x(i, I, m) : _(i, I), x(i, I, f), m = I || f || m, this.gradientManager.addWithoutUpdate(f || I, h), this.shadowManager.addWithoutUpdate(f || I, h), this.clipPathManager.markUsed(h) } else if (!A.removed) for (M = 0; M < A.count; M++) { m = w(h = c[A.indices[M]]) || S(h) || m; f = S(h), I = w(h); this.gradientManager.markUsed(h), this.gradientManager.addWithoutUpdate(f || I, h), this.shadowManager.markUsed(h), this.shadowManager.addWithoutUpdate(f || I, h), this.clipPathManager.markUsed(h) } } this.gradientManager.removeUnused(), this.clipPathManager.removeUnused(), this.shadowManager.removeUnused(), this._visibleList = c }, _getDefs: function (t) { var e; var n = this._svgRoot; return (e = this._svgRoot.getElementsByTagName('defs')).length === 0 ? t ? ((e = n.insertBefore(i('defs'), n.firstChild)).contains || (e.contains = function (t) { var n = e.children; if (!n) return !1; for (var i = n.length - 1; i >= 0; --i) if (n[i] === t) return !0; return !1 }), e) : null : e[0] }, resize: function (t, e) { var n = this._viewport; n.style.display = 'none'; var i = this._opts; if (t != null && (i.width = t), e != null && (i.height = e), t = this._getSize(0), e = this._getSize(1), n.style.display = '', this._width !== t || this._height !== e) { this._width = t, this._height = e; var r = n.style; r.width = t + 'px', r.height = e + 'px'; var a = this._svgRoot; a.setAttribute('width', t), a.setAttribute('height', e) } }, getWidth: function () { return this._width }, getHeight: function () { return this._height }, _getSize: function (t) { var e = this._opts; var n = ['width', 'height'][t]; var i = ['clientWidth', 'clientHeight'][t]; var r = ['paddingLeft', 'paddingTop'][t]; var a = ['paddingRight', 'paddingBottom'][t]; if (e[n] != null && e[n] !== 'auto') return parseFloat(e[n]); var o = this.root; var s = document.defaultView.getComputedStyle(o); return (o[i] || m(s[n]) || m(o.style[n])) - (m(s[r]) || 0) - (m(s[a]) || 0) | 0 }, dispose: function () { this.root.innerHTML = '', this._svgRoot = this._viewport = this.storage = null }, clear: function () { this._viewport && this.root.removeChild(this._viewport) }, pathToDataUrl: function () { return this.refresh(), 'data:image/svg+xml;charset=UTF-8,' + this._svgRoot.outerHTML } }, r.each(['getLayer', 'insertLayer', 'eachLayer', 'eachBuiltinLayer', 'eachOtherLayer', 'getLayers', 'modLayer', 'delLayer', 'clearLayer', 'toDataURL', 'pathToImage'], function (t) { var e; M.prototype[t] = (e = t, function () { a('In SVG mode painter not support method "' + e + '"') }) }); var I = M; t.exports = I }, function (t, e) { function n () {} function i (t, e, n, i) { for (var r = 0, a = e.length, o = 0, s = 0; r < a; r++) { var l = e[r]; if (l.removed) { for (u = [], c = s; c < s + l.count; c++)u.push(c); l.indices = u, s += l.count } else { for (var u = [], c = o; c < o + l.count; c++)u.push(c); l.indices = u, o += l.count, l.added || (s += l.count) } } return e }n.prototype = { diff: function (t, e, n) { n || (n = function (t, e) { return t === e }), this.equals = n; var r = this; t = t.slice(); var a = (e = e.slice()).length; var o = t.length; var s = 1; var l = a + o; var u = [{ newPos: -1, components: [] }]; var c = this.extractCommon(u[0], e, t, 0); if (u[0].newPos + 1 >= a && c + 1 >= o) { for (var h = [], d = 0; d < e.length; d++)h.push(d); return [{ indices: h, count: e.length }] } function f () { for (var n = -1 * s; n <= s; n += 2) { var l; var c = u[n - 1]; var h = u[n + 1]; var d = (h ? h.newPos : 0) - n; c && (u[n - 1] = void 0); var f = c && c.newPos + 1 < a; var p = h && d >= 0 && d < o; if (f || p) { if (!f || p && c.newPos < h.newPos ? (l = { newPos: (g = h).newPos, components: g.components.slice(0) }, r.pushComponent(l.components, void 0, !0)) : ((l = c).newPos++, r.pushComponent(l.components, !0, void 0)), d = r.extractCommon(l, e, t, n), l.newPos + 1 >= a && d + 1 >= o) return i(r, l.components, e, t); u[n] = l } else u[n] = void 0 } var g; s++ } for (;s <= l;) { var p = f(); if (p) return p } }, pushComponent: function (t, e, n) { var i = t[t.length - 1]; i && i.added === e && i.removed === n ? t[t.length - 1] = { count: i.count + 1, added: e, removed: n } : t.push({ count: 1, added: e, removed: n }) }, extractCommon: function (t, e, n, i) { for (var r = e.length, a = n.length, o = t.newPos, s = o - i, l = 0; o + 1 < r && s + 1 < a && this.equals(e[o + 1], n[s + 1]);)o++, s++, l++; return l && t.components.push({ count: l }), t.newPos = o, s }, tokenize: function (t) { return t.slice() }, join: function (t) { return t.slice() } }; var r = new n(); t.exports = function (t, e, n) { return r.diff(t, e, n) } }, function (t, e, n) { var i = n(120); var r = n(0); var a = n(53); var o = n(23); function s (t, e) { i.call(this, t, e, ['linearGradient', 'radialGradient'], '__gradient_in_use__') }r.inherits(s, i), s.prototype.addWithoutUpdate = function (t, e) { if (e && e.style) { var n = this; r.each(['fill', 'stroke'], function (i) { if (e.style[i] && (e.style[i].type === 'linear' || e.style[i].type === 'radial')) { var r; var a = e.style[i]; var o = n.getDefs(!0); a._dom ? (r = a._dom, o.contains(a._dom) || n.addDom(r)) : r = n.add(a), n.markUsed(e); var s = r.getAttribute('id'); t.setAttribute(i, 'url(#' + s + ')') } }) } }, s.prototype.add = function (t) { var e; if (t.type === 'linear')e = this.createElement('linearGradient'); else { if (t.type !== 'radial') return a('Illegal gradient type.'), null; e = this.createElement('radialGradient') } return t.id = t.id || this.nextId++, e.setAttribute('id', 'zr' + this._zrId + '-gradient-' + t.id), this.updateDom(t, e), this.addDom(e), e }, s.prototype.update = function (t) { var e = this; i.prototype.update.call(this, t, function () { var n = t.type; var i = t._dom.tagName; n === 'linear' && i === 'linearGradient' || n === 'radial' && i === 'radialGradient' ? e.updateDom(t, t._dom) : (e.removeDom(t), e.add(t)) }) }, s.prototype.updateDom = function (t, e) { if (t.type === 'linear')e.setAttribute('x1', t.x), e.setAttribute('y1', t.y), e.setAttribute('x2', t.x2), e.setAttribute('y2', t.y2); else { if (t.type !== 'radial') return void a('Illegal gradient type.'); e.setAttribute('cx', t.x), e.setAttribute('cy', t.y), e.setAttribute('r', t.r) }t.global ? e.setAttribute('gradientUnits', 'userSpaceOnUse') : e.setAttribute('gradientUnits', 'objectBoundingBox'), e.innerHTML = ''; for (var n = t.colorStops, i = 0, r = n.length; i < r; ++i) { var s = this.createElement('stop'); s.setAttribute('offset', 100 * n[i].offset + '%'); var l = n[i].color; if (l.indexOf(!1)) { var u = o.parse(l)[3]; var c = o.toHex(l); s.setAttribute('stop-color', '#' + c), s.setAttribute('stop-opacity', u) } else s.setAttribute('stop-color', n[i].color); e.appendChild(s) }t._dom = e }, s.prototype.markUsed = function (t) { if (t.style) { var e = t.style.fill; e && e._dom && i.prototype.markUsed.call(this, e._dom), (e = t.style.stroke) && e._dom && i.prototype.markUsed.call(this, e._dom) } }; var l = s; t.exports = l }, function (t, e, n) { var i = n(120); var r = n(0); var a = n(15); function o (t, e) { i.call(this, t, e, 'clipPath', '__clippath_in_use__') }r.inherits(o, i), o.prototype.update = function (t) { var e = this.getSvgElement(t); e && this.updateDom(e, t.__clipPaths, !1); var n = this.getTextSvgElement(t); n && this.updateDom(n, t.__clipPaths, !0), this.markUsed(t) }, o.prototype.updateDom = function (t, e, n) { if (e && e.length > 0) { var i; var r; var o = this.getDefs(!0); var s = e[0]; var l = n ? '_textDom' : '_dom'; s[l] ? (r = s[l].getAttribute('id'), i = s[l], o.contains(i) || o.appendChild(i)) : (r = 'zr' + this._zrId + '-clip-' + this.nextId, ++this.nextId, (i = this.createElement('clipPath')).setAttribute('id', r), o.appendChild(i), s[l] = i); var u = this.getSvgProxy(s); if (s.transform && s.parent.invTransform && !n) { var c = Array.prototype.slice.call(s.transform); a.mul(s.transform, s.parent.invTransform, s.transform), u.brush(s), s.transform = c } else u.brush(s); var h = this.getSvgElement(s); i.innerHTML = '', i.appendChild(h.cloneNode()), t.setAttribute('clip-path', 'url(#' + r + ')'), e.length > 1 && this.updateDom(i, e.slice(1), n) } else t && t.setAttribute('clip-path', 'none') }, o.prototype.markUsed = function (t) { var e = this; t.__clipPaths && r.each(t.__clipPaths, function (t) { t._dom && i.prototype.markUsed.call(e, t._dom), t._textDom && i.prototype.markUsed.call(e, t._textDom) }) }; var s = o; t.exports = s }, function (t, e, n) { var i = n(120); function r (t, e) { i.call(this, t, e, ['filter'], '__filter_in_use__', '_shadowDom') } function a (t) { return t && (t.shadowBlur || t.shadowOffsetX || t.shadowOffsetY || t.textShadowBlur || t.textShadowOffsetX || t.textShadowOffsetY) }n(0).inherits(r, i), r.prototype.addWithoutUpdate = function (t, e) { if (e && a(e.style)) { var n; if (e._shadowDom)n = e._shadowDom, this.getDefs(!0).contains(e._shadowDom) || this.addDom(n); else n = this.add(e); this.markUsed(e); var i = n.getAttribute('id'); t.style.filter = 'url(#' + i + ')' } }, r.prototype.add = function (t) { var e = this.createElement('filter'); return t._shadowDomId = t._shadowDomId || this.nextId++, e.setAttribute('id', 'zr' + this._zrId + '-shadow-' + t._shadowDomId), this.updateDom(t, e), this.addDom(e), e }, r.prototype.update = function (t, e) { if (a(e.style)) { var n = this; i.prototype.update.call(this, e, function () { n.updateDom(e, e._shadowDom) }) } else this.remove(t, e) }, r.prototype.remove = function (t, e) { e._shadowDomId != null && (this.removeDom(t), t.style.filter = '') }, r.prototype.updateDom = function (t, e) { var n = e.getElementsByTagName('feDropShadow'); n = n.length === 0 ? this.createElement('feDropShadow') : n[0]; var i; var r; var a; var o; var s = t.style; var l = t.scale && t.scale[0] || 1; var u = t.scale && t.scale[1] || 1; if (s.shadowBlur || s.shadowOffsetX || s.shadowOffsetY)i = s.shadowOffsetX || 0, r = s.shadowOffsetY || 0, a = s.shadowBlur, o = s.shadowColor; else { if (!s.textShadowBlur) return void this.removeDom(e, s); i = s.textShadowOffsetX || 0, r = s.textShadowOffsetY || 0, a = s.textShadowBlur, o = s.textShadowColor }n.setAttribute('dx', i / l), n.setAttribute('dy', r / u), n.setAttribute('flood-color', o); var c = a / 2 / l + ' ' + a / 2 / u; n.setAttribute('stdDeviation', c), e.setAttribute('x', '-100%'), e.setAttribute('y', '-100%'), e.setAttribute('width', Math.ceil(a / 2 * 200) + '%'), e.setAttribute('height', Math.ceil(a / 2 * 200) + '%'), e.appendChild(n), t._shadowDom = e }, r.prototype.markUsed = function (t) { t._shadowDom && i.prototype.markUsed.call(this, t._shadowDom) }; var o = r; t.exports = o }, function (t, e, n) {
  'use strict'; n.r(e), (function (t, n) {
    /*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
    var i = Object.freeze({}); function r (t) { return t == null } function a (t) { return t != null } function o (t) { return !0 === t } function s (t) { return typeof t === 'string' || typeof t === 'number' || typeof t === 'symbol' || typeof t === 'boolean' } function l (t) { return t !== null && typeof t === 'object' } var u = Object.prototype.toString; function c (t) { return u.call(t) === '[object Object]' } function h (t) { return u.call(t) === '[object RegExp]' } function d (t) { var e = parseFloat(String(t)); return e >= 0 && Math.floor(e) === e && isFinite(t) } function f (t) { return a(t) && typeof t.then === 'function' && typeof t.catch === 'function' } function p (t) { return t == null ? '' : Array.isArray(t) || c(t) && t.toString === u ? JSON.stringify(t, null, 2) : String(t) } function g (t) { var e = parseFloat(t); return isNaN(e) ? t : e } function v (t, e) { for (var n = Object.create(null), i = t.split(','), r = 0; r < i.length; r++)n[i[r]] = !0; return e ? function (t) { return n[t.toLowerCase()] } : function (t) { return n[t] } }v('slot,component', !0); var m = v('key,ref,slot,slot-scope,is'); function y (t, e) { if (t.length) { var n = t.indexOf(e); if (n > -1) return t.splice(n, 1) } } var x = Object.prototype.hasOwnProperty; function _ (t, e) { return x.call(t, e) } function b (t) { var e = Object.create(null); return function (n) { return e[n] || (e[n] = t(n)) } } var w = /-(\w)/g; var S = b(function (t) { return t.replace(w, function (t, e) { return e ? e.toUpperCase() : '' }) }); var M = b(function (t) { return t.charAt(0).toUpperCase() + t.slice(1) }); var I = /\B([A-Z])/g; var A = b(function (t) { return t.replace(I, '-$1').toLowerCase() }); var T = Function.prototype.bind ? function (t, e) { return t.bind(e) } : function (t, e) { function n (n) { var i = arguments.length; return i ? i > 1 ? t.apply(e, arguments) : t.call(e, n) : t.call(e) } return n._length = t.length, n }; function C (t, e) { e = e || 0; for (var n = t.length - e, i = new Array(n); n--;)i[n] = t[n + e]; return i } function D (t, e) { for (var n in e)t[n] = e[n]; return t } function L (t) { for (var e = {}, n = 0; n < t.length; n++)t[n] && D(e, t[n]); return e } function P (t, e, n) {} var k = function (t, e, n) { return !1 }; var O = function (t) { return t }; function E (t, e) { if (t === e) return !0; var n = l(t); var i = l(e); if (!n || !i) return !n && !i && String(t) === String(e); try { var r = Array.isArray(t); var a = Array.isArray(e); if (r && a) return t.length === e.length && t.every(function (t, n) { return E(t, e[n]) }); if (t instanceof Date && e instanceof Date) return t.getTime() === e.getTime(); if (r || a) return !1; var o = Object.keys(t); var s = Object.keys(e); return o.length === s.length && o.every(function (n) { return E(t[n], e[n]) }) } catch (t) { return !1 } } function R (t, e) { for (var n = 0; n < t.length; n++) if (E(t[n], e)) return n; return -1 } function N (t) { var e = !1; return function () { e || (e = !0, t.apply(this, arguments)) } } var z = 'data-server-rendered'; var B = ['component', 'directive', 'filter']; var V = ['beforeCreate', 'created', 'beforeMount', 'mounted', 'beforeUpdate', 'updated', 'beforeDestroy', 'destroyed', 'activated', 'deactivated', 'errorCaptured', 'serverPrefetch']; var F = { optionMergeStrategies: Object.create(null), silent: !1, productionTip: !1, devtools: !1, performance: !1, errorHandler: null, warnHandler: null, ignoredElements: [], keyCodes: Object.create(null), isReservedTag: k, isReservedAttr: k, isUnknownElement: k, getTagNamespace: P, parsePlatformTagName: O, mustUseProp: k, async: !0, _lifecycleHooks: V }; var G = /a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/; function H (t, e, n, i) { Object.defineProperty(t, e, { value: n, enumerable: !!i, writable: !0, configurable: !0 }) } var W = new RegExp('[^' + G.source + '.$_\\d]'); var j; var U = '__proto__' in {}; var Z = typeof window !== 'undefined'; var $ = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform; var Y = $ && WXEnvironment.platform.toLowerCase(); var X = Z && window.navigator.userAgent.toLowerCase(); var q = X && /msie|trident/.test(X); var K = X && X.indexOf('msie 9.0') > 0; var J = X && X.indexOf('edge/') > 0; var Q = (X && X.indexOf('android'), X && /iphone|ipad|ipod|ios/.test(X) || Y === 'ios'); var tt = (X && /chrome\/\d+/.test(X), X && /phantomjs/.test(X), X && X.match(/firefox\/(\d+)/)); var et = {}.watch; var nt = !1; if (Z) try { var it = {}; Object.defineProperty(it, 'passive', { get: function () { nt = !0 } }), window.addEventListener('test-passive', null, it) } catch (t) {} var rt = function () { return void 0 === j && (j = !Z && !$ && void 0 !== t && (t.process && t.process.env.VUE_ENV === 'server')), j }; var at = Z && window.__VUE_DEVTOOLS_GLOBAL_HOOK__; function ot (t) { return typeof t === 'function' && /native code/.test(t.toString()) } var st; var lt = typeof Symbol !== 'undefined' && ot(Symbol) && typeof Reflect !== 'undefined' && ot(Reflect.ownKeys); st = typeof Set !== 'undefined' && ot(Set) ? Set : (function () { function t () { this.set = Object.create(null) } return t.prototype.has = function (t) { return !0 === this.set[t] }, t.prototype.add = function (t) { this.set[t] = !0 }, t.prototype.clear = function () { this.set = Object.create(null) }, t }()); var ut = P; var ct = 0; var ht = function () { this.id = ct++, this.subs = [] }; ht.prototype.addSub = function (t) { this.subs.push(t) }, ht.prototype.removeSub = function (t) { y(this.subs, t) }, ht.prototype.depend = function () { ht.target && ht.target.addDep(this) }, ht.prototype.notify = function () { var t = this.subs.slice(); for (var e = 0, n = t.length; e < n; e++)t[e].update() }, ht.target = null; var dt = []; function ft (t) { dt.push(t), ht.target = t } function pt () { dt.pop(), ht.target = dt[dt.length - 1] } var gt = function (t, e, n, i, r, a, o, s) { this.tag = t, this.data = e, this.children = n, this.text = i, this.elm = r, this.ns = void 0, this.context = a, this.fnContext = void 0, this.fnOptions = void 0, this.fnScopeId = void 0, this.key = e && e.key, this.componentOptions = o, this.componentInstance = void 0, this.parent = void 0, this.raw = !1, this.isStatic = !1, this.isRootInsert = !0, this.isComment = !1, this.isCloned = !1, this.isOnce = !1, this.asyncFactory = s, this.asyncMeta = void 0, this.isAsyncPlaceholder = !1 }; var vt = { child: { configurable: !0 } }; vt.child.get = function () { return this.componentInstance }, Object.defineProperties(gt.prototype, vt); var mt = function (t) { void 0 === t && (t = ''); var e = new gt(); return e.text = t, e.isComment = !0, e }; function yt (t) { return new gt(void 0, void 0, void 0, String(t)) } function xt (t) { var e = new gt(t.tag, t.data, t.children && t.children.slice(), t.text, t.elm, t.context, t.componentOptions, t.asyncFactory); return e.ns = t.ns, e.isStatic = t.isStatic, e.key = t.key, e.isComment = t.isComment, e.fnContext = t.fnContext, e.fnOptions = t.fnOptions, e.fnScopeId = t.fnScopeId, e.asyncMeta = t.asyncMeta, e.isCloned = !0, e } var _t = Array.prototype; var bt = Object.create(_t); ['push', 'pop', 'shift', 'unshift', 'splice', 'sort', 'reverse'].forEach(function (t) { var e = _t[t]; H(bt, t, function () { for (var n = [], i = arguments.length; i--;)n[i] = arguments[i]; var r; var a = e.apply(this, n); var o = this.__ob__; switch (t) { case 'push':case 'unshift':r = n; break; case 'splice':r = n.slice(2) } return r && o.observeArray(r), o.dep.notify(), a }) }); var wt = Object.getOwnPropertyNames(bt); var St = !0; function Mt (t) { St = t } var It = function (t) { this.value = t, this.dep = new ht(), this.vmCount = 0, H(t, '__ob__', this), Array.isArray(t) ? (U ? (function (t, e) { t.__proto__ = e }(t, bt)) : (function (t, e, n) { for (var i = 0, r = n.length; i < r; i++) { var a = n[i]; H(t, a, e[a]) } }(t, bt, wt)), this.observeArray(t)) : this.walk(t) }; function At (t, e) { var n; if (l(t) && !(t instanceof gt)) return _(t, '__ob__') && t.__ob__ instanceof It ? n = t.__ob__ : St && !rt() && (Array.isArray(t) || c(t)) && Object.isExtensible(t) && !t._isVue && (n = new It(t)), e && n && n.vmCount++, n } function Tt (t, e, n, i, r) { var a = new ht(); var o = Object.getOwnPropertyDescriptor(t, e); if (!o || !1 !== o.configurable) { var s = o && o.get; var l = o && o.set; s && !l || arguments.length !== 2 || (n = t[e]); var u = !r && At(n); Object.defineProperty(t, e, { enumerable: !0, configurable: !0, get: function () { var e = s ? s.call(t) : n; return ht.target && (a.depend(), u && (u.dep.depend(), Array.isArray(e) && (function t (e) { for (var n = void 0, i = 0, r = e.length; i < r; i++)(n = e[i]) && n.__ob__ && n.__ob__.dep.depend(), Array.isArray(n) && t(n) }(e)))), e }, set: function (e) { var i = s ? s.call(t) : n; e === i || e != e && i != i || s && !l || (l ? l.call(t, e) : n = e, u = !r && At(e), a.notify()) } }) } } function Ct (t, e, n) { if (Array.isArray(t) && d(e)) return t.length = Math.max(t.length, e), t.splice(e, 1, n), n; if (e in t && !(e in Object.prototype)) return t[e] = n, n; var i = t.__ob__; return t._isVue || i && i.vmCount ? n : i ? (Tt(i.value, e, n), i.dep.notify(), n) : (t[e] = n, n) } function Dt (t, e) { if (Array.isArray(t) && d(e))t.splice(e, 1); else { var n = t.__ob__; t._isVue || n && n.vmCount || _(t, e) && (delete t[e], n && n.dep.notify()) } }It.prototype.walk = function (t) { for (var e = Object.keys(t), n = 0; n < e.length; n++)Tt(t, e[n]) }, It.prototype.observeArray = function (t) { for (var e = 0, n = t.length; e < n; e++)At(t[e]) }; var Lt = F.optionMergeStrategies; function Pt (t, e) { if (!e) return t; for (var n, i, r, a = lt ? Reflect.ownKeys(e) : Object.keys(e), o = 0; o < a.length; o++)(n = a[o]) !== '__ob__' && (i = t[n], r = e[n], _(t, n) ? i !== r && c(i) && c(r) && Pt(i, r) : Ct(t, n, r)); return t } function kt (t, e, n) { return n ? function () { var i = typeof e === 'function' ? e.call(n, n) : e; var r = typeof t === 'function' ? t.call(n, n) : t; return i ? Pt(i, r) : r } : e ? t ? function () { return Pt(typeof e === 'function' ? e.call(this, this) : e, typeof t === 'function' ? t.call(this, this) : t) } : e : t } function Ot (t, e) { var n = e ? t ? t.concat(e) : Array.isArray(e) ? e : [e] : t; return n ? (function (t) { for (var e = [], n = 0; n < t.length; n++)e.indexOf(t[n]) === -1 && e.push(t[n]); return e }(n)) : n } function Et (t, e, n, i) { var r = Object.create(t || null); return e ? D(r, e) : r }Lt.data = function (t, e, n) { return n ? kt(t, e, n) : e && typeof e !== 'function' ? t : kt(t, e) }, V.forEach(function (t) { Lt[t] = Ot }), B.forEach(function (t) { Lt[t + 's'] = Et }), Lt.watch = function (t, e, n, i) { if (t === et && (t = void 0), e === et && (e = void 0), !e) return Object.create(t || null); if (!t) return e; var r = {}; for (var a in D(r, t), e) { var o = r[a]; var s = e[a]; o && !Array.isArray(o) && (o = [o]), r[a] = o ? o.concat(s) : Array.isArray(s) ? s : [s] } return r }, Lt.props = Lt.methods = Lt.inject = Lt.computed = function (t, e, n, i) { if (!t) return e; var r = Object.create(null); return D(r, t), e && D(r, e), r }, Lt.provide = kt; var Rt = function (t, e) { return void 0 === e ? t : e }; function Nt (t, e, n) { if (typeof e === 'function' && (e = e.options), (function (t, e) { var n = t.props; if (n) { var i; var r; var a = {}; if (Array.isArray(n)) for (i = n.length; i--;) typeof (r = n[i]) === 'string' && (a[S(r)] = { type: null }); else if (c(n)) for (var o in n)r = n[o], a[S(o)] = c(r) ? r : { type: r }; else 0; t.props = a } }(e)), (function (t, e) { var n = t.inject; if (n) { var i = t.inject = {}; if (Array.isArray(n)) for (var r = 0; r < n.length; r++)i[n[r]] = { from: n[r] }; else if (c(n)) for (var a in n) { var o = n[a]; i[a] = c(o) ? D({ from: a }, o) : { from: o } } else 0 } }(e)), (function (t) { var e = t.directives; if (e) for (var n in e) { var i = e[n]; typeof i === 'function' && (e[n] = { bind: i, update: i }) } }(e)), !e._base && (e.extends && (t = Nt(t, e.extends, n)), e.mixins)) for (var i = 0, r = e.mixins.length; i < r; i++)t = Nt(t, e.mixins[i], n); var a; var o = {}; for (a in t)s(a); for (a in e)_(t, a) || s(a); function s (i) { var r = Lt[i] || Rt; o[i] = r(t[i], e[i], n, i) } return o } function zt (t, e, n, i) { if (typeof n === 'string') { var r = t[e]; if (_(r, n)) return r[n]; var a = S(n); if (_(r, a)) return r[a]; var o = M(a); return _(r, o) ? r[o] : r[n] || r[a] || r[o] } } function Bt (t, e, n, i) { var r = e[t]; var a = !_(n, t); var o = n[t]; var s = Gt(Boolean, r.type); if (s > -1) if (a && !_(r, 'default'))o = !1; else if (o === '' || o === A(t)) { var l = Gt(String, r.type); (l < 0 || s < l) && (o = !0) } if (void 0 === o) { o = (function (t, e, n) { if (!_(e, 'default')) return; var i = e.default; 0; if (t && t.$options.propsData && void 0 === t.$options.propsData[n] && void 0 !== t._props[n]) return t._props[n]; return typeof i === 'function' && Vt(e.type) !== 'Function' ? i.call(t) : i }(i, r, t)); var u = St; Mt(!0), At(o), Mt(u) } return o } function Vt (t) { var e = t && t.toString().match(/^\s*function (\w+)/); return e ? e[1] : '' } function Ft (t, e) { return Vt(t) === Vt(e) } function Gt (t, e) { if (!Array.isArray(e)) return Ft(e, t) ? 0 : -1; for (var n = 0, i = e.length; n < i; n++) if (Ft(e[n], t)) return n; return -1 } function Ht (t, e, n) { ft(); try { if (e) for (var i = e; i = i.$parent;) { var r = i.$options.errorCaptured; if (r) for (var a = 0; a < r.length; a++) try { if (!1 === r[a].call(i, t, e, n)) return } catch (t) { jt(t, i, 'errorCaptured hook') } }jt(t, e, n) } finally { pt() } } function Wt (t, e, n, i, r) { var a; try { (a = n ? t.apply(e, n) : t.call(e)) && !a._isVue && f(a) && !a._handled && (a.catch(function (t) { return Ht(t, i, r + ' (Promise/async)') }), a._handled = !0) } catch (t) { Ht(t, i, r) } return a } function jt (t, e, n) { if (F.errorHandler) try { return F.errorHandler.call(null, t, e, n) } catch (e) { e !== t && Ut(e, null, 'config.errorHandler') }Ut(t, e, n) } function Ut (t, e, n) { if (!Z && !$ || typeof console === 'undefined') throw t; console.error(t) } var Zt; var $t = !1; var Yt = []; var Xt = !1; function qt () { Xt = !1; var t = Yt.slice(0); Yt.length = 0; for (var e = 0; e < t.length; e++)t[e]() } if (typeof Promise !== 'undefined' && ot(Promise)) { var Kt = Promise.resolve(); Zt = function () { Kt.then(qt), Q && setTimeout(P) }, $t = !0 } else if (q || typeof MutationObserver === 'undefined' || !ot(MutationObserver) && MutationObserver.toString() !== '[object MutationObserverConstructor]')Zt = void 0 !== n && ot(n) ? function () { n(qt) } : function () { setTimeout(qt, 0) }; else { var Jt = 1; var Qt = new MutationObserver(qt); var te = document.createTextNode(String(Jt)); Qt.observe(te, { characterData: !0 }), Zt = function () { Jt = (Jt + 1) % 2, te.data = String(Jt) }, $t = !0 } function ee (t, e) { var n; if (Yt.push(function () { if (t) try { t.call(e) } catch (t) { Ht(t, e, 'nextTick') } else n && n(e) }), Xt || (Xt = !0, Zt()), !t && typeof Promise !== 'undefined') return new Promise(function (t) { n = t }) } var ne = new st(); function ie (t) { !(function t (e, n) { var i; var r; var a = Array.isArray(e); if (!a && !l(e) || Object.isFrozen(e) || e instanceof gt) return; if (e.__ob__) { var o = e.__ob__.dep.id; if (n.has(o)) return; n.add(o) } if (a) for (i = e.length; i--;)t(e[i], n); else for (r = Object.keys(e), i = r.length; i--;)t(e[r[i]], n) }(t, ne)), ne.clear() } var re = b(function (t) { var e = t.charAt(0) === '&'; var n = (t = e ? t.slice(1) : t).charAt(0) === '~'; var i = (t = n ? t.slice(1) : t).charAt(0) === '!'; return { name: t = i ? t.slice(1) : t, once: n, capture: i, passive: e } }); function ae (t, e) { function n () { var t = arguments; var i = n.fns; if (!Array.isArray(i)) return Wt(i, null, arguments, e, 'v-on handler'); for (var r = i.slice(), a = 0; a < r.length; a++)Wt(r[a], null, t, e, 'v-on handler') } return n.fns = t, n } function oe (t, e, n, i, a, s) { var l, u, c, h; for (l in t)u = t[l], c = e[l], h = re(l), r(u) || (r(c) ? (r(u.fns) && (u = t[l] = ae(u, s)), o(h.once) && (u = t[l] = a(h.name, u, h.capture)), n(h.name, u, h.capture, h.passive, h.params)) : u !== c && (c.fns = u, t[l] = c)); for (l in e)r(t[l]) && i((h = re(l)).name, e[l], h.capture) } function se (t, e, n) { var i; t instanceof gt && (t = t.data.hook || (t.data.hook = {})); var s = t[e]; function l () { n.apply(this, arguments), y(i.fns, l) }r(s) ? i = ae([l]) : a(s.fns) && o(s.merged) ? (i = s).fns.push(l) : i = ae([s, l]), i.merged = !0, t[e] = i } function le (t, e, n, i, r) { if (a(e)) { if (_(e, n)) return t[n] = e[n], r || delete e[n], !0; if (_(e, i)) return t[n] = e[i], r || delete e[i], !0 } return !1 } function ue (t) { return s(t) ? [yt(t)] : Array.isArray(t) ? (function t (e, n) { var i; var l; var u; var c; var h = []; for (i = 0; i < e.length; i++)r(l = e[i]) || typeof l === 'boolean' || (u = h.length - 1, c = h[u], Array.isArray(l) ? l.length > 0 && (ce((l = t(l, (n || '') + '_' + i))[0]) && ce(c) && (h[u] = yt(c.text + l[0].text), l.shift()), h.push.apply(h, l)) : s(l) ? ce(c) ? h[u] = yt(c.text + l) : l !== '' && h.push(yt(l)) : ce(l) && ce(c) ? h[u] = yt(c.text + l.text) : (o(e._isVList) && a(l.tag) && r(l.key) && a(n) && (l.key = '__vlist' + n + '_' + i + '__'), h.push(l))); return h }(t)) : void 0 } function ce (t) { return a(t) && a(t.text) && !1 === t.isComment } function he (t, e) { if (t) { for (var n = Object.create(null), i = lt ? Reflect.ownKeys(t) : Object.keys(t), r = 0; r < i.length; r++) { var a = i[r]; if (a !== '__ob__') { for (var o = t[a].from, s = e; s;) { if (s._provided && _(s._provided, o)) { n[a] = s._provided[o]; break }s = s.$parent } if (!s) if ('default' in t[a]) { var l = t[a].default; n[a] = typeof l === 'function' ? l.call(e) : l } else 0 } } return n } } function de (t, e) { if (!t || !t.length) return {}; for (var n = {}, i = 0, r = t.length; i < r; i++) { var a = t[i]; var o = a.data; if (o && o.attrs && o.attrs.slot && delete o.attrs.slot, a.context !== e && a.fnContext !== e || !o || o.slot == null)(n.default || (n.default = [])).push(a); else { var s = o.slot; var l = n[s] || (n[s] = []); a.tag === 'template' ? l.push.apply(l, a.children || []) : l.push(a) } } for (var u in n)n[u].every(fe) && delete n[u]; return n } function fe (t) { return t.isComment && !t.asyncFactory || t.text === ' ' } function pe (t, e, n) { var r; var a = Object.keys(e).length > 0; var o = t ? !!t.$stable : !a; var s = t && t.$key; if (t) { if (t._normalized) return t._normalized; if (o && n && n !== i && s === n.$key && !a && !n.$hasNormal) return n; for (var l in r = {}, t)t[l] && l[0] !== '$' && (r[l] = ge(e, l, t[l])) } else r = {}; for (var u in e)u in r || (r[u] = ve(e, u)); return t && Object.isExtensible(t) && (t._normalized = r), H(r, '$stable', o), H(r, '$key', s), H(r, '$hasNormal', a), r } function ge (t, e, n) { var i = function () { var t = arguments.length ? n.apply(null, arguments) : n({}); return (t = t && typeof t === 'object' && !Array.isArray(t) ? [t] : ue(t)) && (t.length === 0 || t.length === 1 && t[0].isComment) ? void 0 : t }; return n.proxy && Object.defineProperty(t, e, { get: i, enumerable: !0, configurable: !0 }), i } function ve (t, e) { return function () { return t[e] } } function me (t, e) { var n, i, r, o, s; if (Array.isArray(t) || typeof t === 'string') for (n = new Array(t.length), i = 0, r = t.length; i < r; i++)n[i] = e(t[i], i); else if (typeof t === 'number') for (n = new Array(t), i = 0; i < t; i++)n[i] = e(i + 1, i); else if (l(t)) if (lt && t[Symbol.iterator]) { n = []; for (var u = t[Symbol.iterator](), c = u.next(); !c.done;)n.push(e(c.value, n.length)), c = u.next() } else for (o = Object.keys(t), n = new Array(o.length), i = 0, r = o.length; i < r; i++)s = o[i], n[i] = e(t[s], s, i); return a(n) || (n = []), n._isVList = !0, n } function ye (t, e, n, i) { var r; var a = this.$scopedSlots[t]; a ? (n = n || {}, i && (n = D(D({}, i), n)), r = a(n) || e) : r = this.$slots[t] || e; var o = n && n.slot; return o ? this.$createElement('template', { slot: o }, r) : r } function xe (t) { return zt(this.$options, 'filters', t) || O } function _e (t, e) { return Array.isArray(t) ? t.indexOf(e) === -1 : t !== e } function be (t, e, n, i, r) { var a = F.keyCodes[e] || n; return r && i && !F.keyCodes[e] ? _e(r, i) : a ? _e(a, t) : i ? A(i) !== e : void 0 } function we (t, e, n, i, r) { if (n) if (l(n)) { var a; Array.isArray(n) && (n = L(n)); var o = function (o) { if (o === 'class' || o === 'style' || m(o))a = t; else { var s = t.attrs && t.attrs.type; a = i || F.mustUseProp(e, s, o) ? t.domProps || (t.domProps = {}) : t.attrs || (t.attrs = {}) } var l = S(o); var u = A(o); l in a || u in a || (a[o] = n[o], r && ((t.on || (t.on = {}))['update:' + o] = function (t) { n[o] = t })) }; for (var s in n)o(s) } else;return t } function Se (t, e) { var n = this._staticTrees || (this._staticTrees = []); var i = n[t]; return i && !e ? i : (Ie(i = n[t] = this.$options.staticRenderFns[t].call(this._renderProxy, null, this), '__static__' + t, !1), i) } function Me (t, e, n) { return Ie(t, '__once__' + e + (n ? '_' + n : ''), !0), t } function Ie (t, e, n) { if (Array.isArray(t)) for (var i = 0; i < t.length; i++)t[i] && typeof t[i] !== 'string' && Ae(t[i], e + '_' + i, n); else Ae(t, e, n) } function Ae (t, e, n) { t.isStatic = !0, t.key = e, t.isOnce = n } function Te (t, e) { if (e) if (c(e)) { var n = t.on = t.on ? D({}, t.on) : {}; for (var i in e) { var r = n[i]; var a = e[i]; n[i] = r ? [].concat(r, a) : a } } else;return t } function Ce (t, e, n, i) { e = e || { $stable: !n }; for (var r = 0; r < t.length; r++) { var a = t[r]; Array.isArray(a) ? Ce(a, e, n) : a && (a.proxy && (a.fn.proxy = !0), e[a.key] = a.fn) } return i && (e.$key = i), e } function De (t, e) { for (var n = 0; n < e.length; n += 2) { var i = e[n]; typeof i === 'string' && i && (t[e[n]] = e[n + 1]) } return t } function Le (t, e) { return typeof t === 'string' ? e + t : t } function Pe (t) { t._o = Me, t._n = g, t._s = p, t._l = me, t._t = ye, t._q = E, t._i = R, t._m = Se, t._f = xe, t._k = be, t._b = we, t._v = yt, t._e = mt, t._u = Ce, t._g = Te, t._d = De, t._p = Le } function ke (t, e, n, r, a) { var s; var l = this; var u = a.options; _(r, '_uid') ? (s = Object.create(r))._original = r : (s = r, r = r._original); var c = o(u._compiled); var h = !c; this.data = t, this.props = e, this.children = n, this.parent = r, this.listeners = t.on || i, this.injections = he(u.inject, r), this.slots = function () { return l.$slots || pe(t.scopedSlots, l.$slots = de(n, r)), l.$slots }, Object.defineProperty(this, 'scopedSlots', { enumerable: !0, get: function () { return pe(t.scopedSlots, this.slots()) } }), c && (this.$options = u, this.$slots = this.slots(), this.$scopedSlots = pe(t.scopedSlots, this.$slots)), u._scopeId ? this._c = function (t, e, n, i) { var a = Ge(s, t, e, n, i, h); return a && !Array.isArray(a) && (a.fnScopeId = u._scopeId, a.fnContext = r), a } : this._c = function (t, e, n, i) { return Ge(s, t, e, n, i, h) } } function Oe (t, e, n, i, r) { var a = xt(t); return a.fnContext = n, a.fnOptions = i, e.slot && ((a.data || (a.data = {})).slot = e.slot), a } function Ee (t, e) { for (var n in e)t[S(n)] = e[n] }Pe(ke.prototype); var Re = { init: function (t, e) { if (t.componentInstance && !t.componentInstance._isDestroyed && t.data.keepAlive) { var n = t; Re.prepatch(n, n) } else { (t.componentInstance = (function (t, e) { var n = { _isComponent: !0, _parentVnode: t, parent: e }; var i = t.data.inlineTemplate; a(i) && (n.render = i.render, n.staticRenderFns = i.staticRenderFns); return new t.componentOptions.Ctor(n) }(t, Ke))).$mount(e ? t.elm : void 0, e) } }, prepatch: function (t, e) { var n = e.componentOptions; !(function (t, e, n, r, a) { 0; var o = r.data.scopedSlots; var s = t.$scopedSlots; var l = !!(o && !o.$stable || s !== i && !s.$stable || o && t.$scopedSlots.$key !== o.$key); var u = !!(a || t.$options._renderChildren || l); t.$options._parentVnode = r, t.$vnode = r, t._vnode && (t._vnode.parent = r); if (t.$options._renderChildren = a, t.$attrs = r.data.attrs || i, t.$listeners = n || i, e && t.$options.props) { Mt(!1); for (var c = t._props, h = t.$options._propKeys || [], d = 0; d < h.length; d++) { var f = h[d]; var p = t.$options.props; c[f] = Bt(f, p, e, t) }Mt(!0), t.$options.propsData = e }n = n || i; var g = t.$options._parentListeners; t.$options._parentListeners = n, qe(t, n, g), u && (t.$slots = de(a, r.context), t.$forceUpdate()); 0 }(e.componentInstance = t.componentInstance, n.propsData, n.listeners, e, n.children)) }, insert: function (t) { var e; var n = t.context; var i = t.componentInstance; i._isMounted || (i._isMounted = !0, en(i, 'mounted')), t.data.keepAlive && (n._isMounted ? ((e = i)._inactive = !1, rn.push(e)) : tn(i, !0)) }, destroy: function (t) { var e = t.componentInstance; e._isDestroyed || (t.data.keepAlive ? (function t (e, n) { if (n && (e._directInactive = !0, Qe(e))) return; if (!e._inactive) { e._inactive = !0; for (var i = 0; i < e.$children.length; i++)t(e.$children[i]); en(e, 'deactivated') } }(e, !0)) : e.$destroy()) } }; var Ne = Object.keys(Re); function ze (t, e, n, s, u) { if (!r(t)) { var c = n.$options._base; if (l(t) && (t = c.extend(t)), typeof t === 'function') { var h; if (r(t.cid) && void 0 === (t = (function (t, e) { if (o(t.error) && a(t.errorComp)) return t.errorComp; if (a(t.resolved)) return t.resolved; var n = We; n && a(t.owners) && t.owners.indexOf(n) === -1 && t.owners.push(n); if (o(t.loading) && a(t.loadingComp)) return t.loadingComp; if (n && !a(t.owners)) { var i = t.owners = [n]; var s = !0; var u = null; var c = null; n.$on('hook:destroyed', function () { return y(i, n) }); var h = function (t) { for (var e = 0, n = i.length; e < n; e++)i[e].$forceUpdate(); t && (i.length = 0, u !== null && (clearTimeout(u), u = null), c !== null && (clearTimeout(c), c = null)) }; var d = N(function (n) { t.resolved = je(n, e), s ? i.length = 0 : h(!0) }); var p = N(function (e) { a(t.errorComp) && (t.error = !0, h(!0)) }); var g = t(d, p); return l(g) && (f(g) ? r(t.resolved) && g.then(d, p) : f(g.component) && (g.component.then(d, p), a(g.error) && (t.errorComp = je(g.error, e)), a(g.loading) && (t.loadingComp = je(g.loading, e), g.delay === 0 ? t.loading = !0 : u = setTimeout(function () { u = null, r(t.resolved) && r(t.error) && (t.loading = !0, h(!1)) }, g.delay || 200)), a(g.timeout) && (c = setTimeout(function () { c = null, r(t.resolved) && p(null) }, g.timeout)))), s = !1, t.loading ? t.loadingComp : t.resolved } }(h = t, c)))) return (function (t, e, n, i, r) { var a = mt(); return a.asyncFactory = t, a.asyncMeta = { data: e, context: n, children: i, tag: r }, a }(h, e, n, s, u)); e = e || {}, Mn(t), a(e.model) && (function (t, e) { var n = t.model && t.model.prop || 'value'; var i = t.model && t.model.event || 'input'; (e.attrs || (e.attrs = {}))[n] = e.model.value; var r = e.on || (e.on = {}); var o = r[i]; var s = e.model.callback; a(o) ? (Array.isArray(o) ? o.indexOf(s) === -1 : o !== s) && (r[i] = [s].concat(o)) : r[i] = s }(t.options, e)); var d = (function (t, e, n) { var i = e.options.props; if (!r(i)) { var o = {}; var s = t.attrs; var l = t.props; if (a(s) || a(l)) for (var u in i) { var c = A(u); le(o, l, u, c, !0) || le(o, s, u, c, !1) } return o } }(e, t)); if (o(t.options.functional)) return (function (t, e, n, r, o) { var s = t.options; var l = {}; var u = s.props; if (a(u)) for (var c in u)l[c] = Bt(c, u, e || i); else a(n.attrs) && Ee(l, n.attrs), a(n.props) && Ee(l, n.props); var h = new ke(n, l, o, r, t); var d = s.render.call(null, h._c, h); if (d instanceof gt) return Oe(d, n, h.parent, s, h); if (Array.isArray(d)) { for (var f = ue(d) || [], p = new Array(f.length), g = 0; g < f.length; g++)p[g] = Oe(f[g], n, h.parent, s, h); return p } }(t, d, e, n, s)); var p = e.on; if (e.on = e.nativeOn, o(t.options.abstract)) { var g = e.slot; e = {}, g && (e.slot = g) }!(function (t) { for (var e = t.hook || (t.hook = {}), n = 0; n < Ne.length; n++) { var i = Ne[n]; var r = e[i]; var a = Re[i]; r === a || r && r._merged || (e[i] = r ? Be(a, r) : a) } }(e)); var v = t.options.name || u; return new gt('vue-component-' + t.cid + (v ? '-' + v : ''), e, void 0, void 0, void 0, n, { Ctor: t, propsData: d, listeners: p, tag: u, children: s }, h) } } } function Be (t, e) { var n = function (n, i) { t(n, i), e(n, i) }; return n._merged = !0, n } var Ve = 1; var Fe = 2; function Ge (t, e, n, i, u, c) { return (Array.isArray(n) || s(n)) && (u = i, i = n, n = void 0), o(c) && (u = Fe), (function (t, e, n, i, s) { if (a(n) && a(n.__ob__)) return mt(); a(n) && a(n.is) && (e = n.is); if (!e) return mt(); 0; Array.isArray(i) && typeof i[0] === 'function' && ((n = n || {}).scopedSlots = { default: i[0] }, i.length = 0); s === Fe ? i = ue(i) : s === Ve && (i = (function (t) { for (var e = 0; e < t.length; e++) if (Array.isArray(t[e])) return Array.prototype.concat.apply([], t); return t }(i))); var u, c; if (typeof e === 'string') { var h; c = t.$vnode && t.$vnode.ns || F.getTagNamespace(e), u = F.isReservedTag(e) ? new gt(F.parsePlatformTagName(e), n, i, void 0, void 0, t) : n && n.pre || !a(h = zt(t.$options, 'components', e)) ? new gt(e, n, i, void 0, void 0, t) : ze(h, n, t, i, e) } else u = ze(e, n, t, i); return Array.isArray(u) ? u : a(u) ? (a(c) && (function t (e, n, i) { e.ns = n, e.tag === 'foreignObject' && (n = void 0, i = !0); if (a(e.children)) for (var s = 0, l = e.children.length; s < l; s++) { var u = e.children[s]; a(u.tag) && (r(u.ns) || o(i) && u.tag !== 'svg') && t(u, n, i) } }(u, c)), a(n) && (function (t) { l(t.style) && ie(t.style); l(t.class) && ie(t.class) }(n)), u) : mt() }(t, e, n, i, u)) } var He; var We = null; function je (t, e) { return (t.__esModule || lt && t[Symbol.toStringTag] === 'Module') && (t = t.default), l(t) ? e.extend(t) : t } function Ue (t) { return t.isComment && t.asyncFactory } function Ze (t) { if (Array.isArray(t)) for (var e = 0; e < t.length; e++) { var n = t[e]; if (a(n) && (a(n.componentOptions) || Ue(n))) return n } } function $e (t, e) { He.$on(t, e) } function Ye (t, e) { He.$off(t, e) } function Xe (t, e) { var n = He; return function i () { var r = e.apply(null, arguments); r !== null && n.$off(t, i) } } function qe (t, e, n) { He = t, oe(e, n || {}, $e, Ye, Xe, t), He = void 0 } var Ke = null; function Je (t) { var e = Ke; return Ke = t, function () { Ke = e } } function Qe (t) { for (;t && (t = t.$parent);) if (t._inactive) return !0; return !1 } function tn (t, e) { if (e) { if (t._directInactive = !1, Qe(t)) return } else if (t._directInactive) return; if (t._inactive || t._inactive === null) { t._inactive = !1; for (var n = 0; n < t.$children.length; n++)tn(t.$children[n]); en(t, 'activated') } } function en (t, e) { ft(); var n = t.$options[e]; var i = e + ' hook'; if (n) for (var r = 0, a = n.length; r < a; r++)Wt(n[r], t, null, t, i); t._hasHookEvent && t.$emit('hook:' + e), pt() } var nn = []; var rn = []; var an = {}; var on = !1; var sn = !1; var ln = 0; var un = 0; var cn = Date.now; if (Z && !q) { var hn = window.performance; hn && typeof hn.now === 'function' && cn() > document.createEvent('Event').timeStamp && (cn = function () { return hn.now() }) } function dn () { var t, e; for (un = cn(), sn = !0, nn.sort(function (t, e) { return t.id - e.id }), ln = 0; ln < nn.length; ln++)(t = nn[ln]).before && t.before(), e = t.id, an[e] = null, t.run(); var n = rn.slice(); var i = nn.slice(); ln = nn.length = rn.length = 0, an = {}, on = sn = !1, (function (t) { for (var e = 0; e < t.length; e++)t[e]._inactive = !0, tn(t[e], !0) }(n)), (function (t) { var e = t.length; for (;e--;) { var n = t[e]; var i = n.vm; i._watcher === n && i._isMounted && !i._isDestroyed && en(i, 'updated') } }(i)), at && F.devtools && at.emit('flush') } var fn = 0; var pn = function (t, e, n, i, r) { this.vm = t, r && (t._watcher = this), t._watchers.push(this), i ? (this.deep = !!i.deep, this.user = !!i.user, this.lazy = !!i.lazy, this.sync = !!i.sync, this.before = i.before) : this.deep = this.user = this.lazy = this.sync = !1, this.cb = n, this.id = ++fn, this.active = !0, this.dirty = this.lazy, this.deps = [], this.newDeps = [], this.depIds = new st(), this.newDepIds = new st(), this.expression = '', typeof e === 'function' ? this.getter = e : (this.getter = (function (t) { if (!W.test(t)) { var e = t.split('.'); return function (t) { for (var n = 0; n < e.length; n++) { if (!t) return; t = t[e[n]] } return t } } }(e)), this.getter || (this.getter = P)), this.value = this.lazy ? void 0 : this.get() }; pn.prototype.get = function () { var t; ft(this); var e = this.vm; try { t = this.getter.call(e, e) } catch (t) { if (!this.user) throw t; Ht(t, e, 'getter for watcher "' + this.expression + '"') } finally { this.deep && ie(t), pt(), this.cleanupDeps() } return t }, pn.prototype.addDep = function (t) { var e = t.id; this.newDepIds.has(e) || (this.newDepIds.add(e), this.newDeps.push(t), this.depIds.has(e) || t.addSub(this)) }, pn.prototype.cleanupDeps = function () { for (var t = this.deps.length; t--;) { var e = this.deps[t]; this.newDepIds.has(e.id) || e.removeSub(this) } var n = this.depIds; this.depIds = this.newDepIds, this.newDepIds = n, this.newDepIds.clear(), n = this.deps, this.deps = this.newDeps, this.newDeps = n, this.newDeps.length = 0 }, pn.prototype.update = function () { this.lazy ? this.dirty = !0 : this.sync ? this.run() : (function (t) { var e = t.id; if (an[e] == null) { if (an[e] = !0, sn) { for (var n = nn.length - 1; n > ln && nn[n].id > t.id;)n--; nn.splice(n + 1, 0, t) } else nn.push(t); on || (on = !0, ee(dn)) } }(this)) }, pn.prototype.run = function () { if (this.active) { var t = this.get(); if (t !== this.value || l(t) || this.deep) { var e = this.value; if (this.value = t, this.user) try { this.cb.call(this.vm, t, e) } catch (t) { Ht(t, this.vm, 'callback for watcher "' + this.expression + '"') } else this.cb.call(this.vm, t, e) } } }, pn.prototype.evaluate = function () { this.value = this.get(), this.dirty = !1 }, pn.prototype.depend = function () { for (var t = this.deps.length; t--;) this.deps[t].depend() }, pn.prototype.teardown = function () { if (this.active) { this.vm._isBeingDestroyed || y(this.vm._watchers, this); for (var t = this.deps.length; t--;) this.deps[t].removeSub(this); this.active = !1 } }; var gn = { enumerable: !0, configurable: !0, get: P, set: P }; function vn (t, e, n) { gn.get = function () { return this[e][n] }, gn.set = function (t) { this[e][n] = t }, Object.defineProperty(t, n, gn) } function mn (t) { t._watchers = []; var e = t.$options; e.props && (function (t, e) { var n = t.$options.propsData || {}; var i = t._props = {}; var r = t.$options._propKeys = []; t.$parent && Mt(!1); var a = function (a) { r.push(a); var o = Bt(a, e, n, t); Tt(i, a, o), a in t || vn(t, '_props', a) }; for (var o in e)a(o); Mt(!0) }(t, e.props)), e.methods && (function (t, e) { t.$options.props; for (var n in e)t[n] = typeof e[n] !== 'function' ? P : T(e[n], t) }(t, e.methods)), e.data ? (function (t) { var e = t.$options.data; c(e = t._data = typeof e === 'function' ? (function (t, e) { ft(); try { return t.call(e, e) } catch (t) { return Ht(t, e, 'data()'), {} } finally { pt() } }(e, t)) : e || {}) || (e = {}); var n = Object.keys(e); var i = t.$options.props; var r = (t.$options.methods, n.length); for (;r--;) { var a = n[r]; 0, i && _(i, a) || (o = void 0, (o = (a + '').charCodeAt(0)) !== 36 && o !== 95 && vn(t, '_data', a)) } var o; At(e, !0) }(t)) : At(t._data = {}, !0), e.computed && (function (t, e) { var n = t._computedWatchers = Object.create(null); var i = rt(); for (var r in e) { var a = e[r]; var o = typeof a === 'function' ? a : a.get; 0, i || (n[r] = new pn(t, o || P, P, yn)), r in t || xn(t, r, a) } }(t, e.computed)), e.watch && e.watch !== et && (function (t, e) { for (var n in e) { var i = e[n]; if (Array.isArray(i)) for (var r = 0; r < i.length; r++)wn(t, n, i[r]); else wn(t, n, i) } }(t, e.watch)) } var yn = { lazy: !0 }; function xn (t, e, n) { var i = !rt(); typeof n === 'function' ? (gn.get = i ? _n(e) : bn(n), gn.set = P) : (gn.get = n.get ? i && !1 !== n.cache ? _n(e) : bn(n.get) : P, gn.set = n.set || P), Object.defineProperty(t, e, gn) } function _n (t) { return function () { var e = this._computedWatchers && this._computedWatchers[t]; if (e) return e.dirty && e.evaluate(), ht.target && e.depend(), e.value } } function bn (t) { return function () { return t.call(this, this) } } function wn (t, e, n, i) { return c(n) && (i = n, n = n.handler), typeof n === 'string' && (n = t[n]), t.$watch(e, n, i) } var Sn = 0; function Mn (t) { var e = t.options; if (t.super) { var n = Mn(t.super); if (n !== t.superOptions) { t.superOptions = n; var i = (function (t) { var e; var n = t.options; var i = t.sealedOptions; for (var r in n)n[r] !== i[r] && (e || (e = {}), e[r] = n[r]); return e }(t)); i && D(t.extendOptions, i), (e = t.options = Nt(n, t.extendOptions)).name && (e.components[e.name] = t) } } return e } function In (t) { this._init(t) } function An (t) { t.cid = 0; var e = 1; t.extend = function (t) { t = t || {}; var n = this; var i = n.cid; var r = t._Ctor || (t._Ctor = {}); if (r[i]) return r[i]; var a = t.name || n.options.name; var o = function (t) { this._init(t) }; return (o.prototype = Object.create(n.prototype)).constructor = o, o.cid = e++, o.options = Nt(n.options, t), o.super = n, o.options.props && (function (t) { var e = t.options.props; for (var n in e)vn(t.prototype, '_props', n) }(o)), o.options.computed && (function (t) { var e = t.options.computed; for (var n in e)xn(t.prototype, n, e[n]) }(o)), o.extend = n.extend, o.mixin = n.mixin, o.use = n.use, B.forEach(function (t) { o[t] = n[t] }), a && (o.options.components[a] = o), o.superOptions = n.options, o.extendOptions = t, o.sealedOptions = D({}, o.options), r[i] = o, o } } function Tn (t) { return t && (t.Ctor.options.name || t.tag) } function Cn (t, e) { return Array.isArray(t) ? t.indexOf(e) > -1 : typeof t === 'string' ? t.split(',').indexOf(e) > -1 : !!h(t) && t.test(e) } function Dn (t, e) { var n = t.cache; var i = t.keys; var r = t._vnode; for (var a in n) { var o = n[a]; if (o) { var s = Tn(o.componentOptions); s && !e(s) && Ln(n, a, i, r) } } } function Ln (t, e, n, i) { var r = t[e]; !r || i && r.tag === i.tag || r.componentInstance.$destroy(), t[e] = null, y(n, e) }!(function (t) { t.prototype._init = function (t) { var e = this; e._uid = Sn++, e._isVue = !0, t && t._isComponent ? (function (t, e) { var n = t.$options = Object.create(t.constructor.options); var i = e._parentVnode; n.parent = e.parent, n._parentVnode = i; var r = i.componentOptions; n.propsData = r.propsData, n._parentListeners = r.listeners, n._renderChildren = r.children, n._componentTag = r.tag, e.render && (n.render = e.render, n.staticRenderFns = e.staticRenderFns) }(e, t)) : e.$options = Nt(Mn(e.constructor), t || {}, e), e._renderProxy = e, e._self = e, (function (t) { var e = t.$options; var n = e.parent; if (n && !e.abstract) { for (;n.$options.abstract && n.$parent;)n = n.$parent; n.$children.push(t) }t.$parent = n, t.$root = n ? n.$root : t, t.$children = [], t.$refs = {}, t._watcher = null, t._inactive = null, t._directInactive = !1, t._isMounted = !1, t._isDestroyed = !1, t._isBeingDestroyed = !1 }(e)), (function (t) { t._events = Object.create(null), t._hasHookEvent = !1; var e = t.$options._parentListeners; e && qe(t, e) }(e)), (function (t) { t._vnode = null, t._staticTrees = null; var e = t.$options; var n = t.$vnode = e._parentVnode; var r = n && n.context; t.$slots = de(e._renderChildren, r), t.$scopedSlots = i, t._c = function (e, n, i, r) { return Ge(t, e, n, i, r, !1) }, t.$createElement = function (e, n, i, r) { return Ge(t, e, n, i, r, !0) }; var a = n && n.data; Tt(t, '$attrs', a && a.attrs || i, null, !0), Tt(t, '$listeners', e._parentListeners || i, null, !0) }(e)), en(e, 'beforeCreate'), (function (t) { var e = he(t.$options.inject, t); e && (Mt(!1), Object.keys(e).forEach(function (n) { Tt(t, n, e[n]) }), Mt(!0)) }(e)), mn(e), (function (t) { var e = t.$options.provide; e && (t._provided = typeof e === 'function' ? e.call(t) : e) }(e)), en(e, 'created'), e.$options.el && e.$mount(e.$options.el) } }(In)), (function (t) { var e = { get: function () { return this._data } }; var n = { get: function () { return this._props } }; Object.defineProperty(t.prototype, '$data', e), Object.defineProperty(t.prototype, '$props', n), t.prototype.$set = Ct, t.prototype.$delete = Dt, t.prototype.$watch = function (t, e, n) { if (c(e)) return wn(this, t, e, n); (n = n || {}).user = !0; var i = new pn(this, t, e, n); if (n.immediate) try { e.call(this, i.value) } catch (t) { Ht(t, this, 'callback for immediate watcher "' + i.expression + '"') } return function () { i.teardown() } } }(In)), (function (t) { var e = /^hook:/; t.prototype.$on = function (t, n) { var i = this; if (Array.isArray(t)) for (var r = 0, a = t.length; r < a; r++)i.$on(t[r], n); else (i._events[t] || (i._events[t] = [])).push(n), e.test(t) && (i._hasHookEvent = !0); return i }, t.prototype.$once = function (t, e) { var n = this; function i () { n.$off(t, i), e.apply(n, arguments) } return i.fn = e, n.$on(t, i), n }, t.prototype.$off = function (t, e) { var n = this; if (!arguments.length) return n._events = Object.create(null), n; if (Array.isArray(t)) { for (var i = 0, r = t.length; i < r; i++)n.$off(t[i], e); return n } var a; var o = n._events[t]; if (!o) return n; if (!e) return n._events[t] = null, n; for (var s = o.length; s--;) if ((a = o[s]) === e || a.fn === e) { o.splice(s, 1); break } return n }, t.prototype.$emit = function (t) { var e = this; var n = e._events[t]; if (n) { n = n.length > 1 ? C(n) : n; for (var i = C(arguments, 1), r = 'event handler for "' + t + '"', a = 0, o = n.length; a < o; a++)Wt(n[a], e, i, e, r) } return e } }(In)), (function (t) { t.prototype._update = function (t, e) { var n = this; var i = n.$el; var r = n._vnode; var a = Je(n); n._vnode = t, n.$el = r ? n.__patch__(r, t) : n.__patch__(n.$el, t, e, !1), a(), i && (i.__vue__ = null), n.$el && (n.$el.__vue__ = n), n.$vnode && n.$parent && n.$vnode === n.$parent._vnode && (n.$parent.$el = n.$el) }, t.prototype.$forceUpdate = function () { this._watcher && this._watcher.update() }, t.prototype.$destroy = function () { var t = this; if (!t._isBeingDestroyed) { en(t, 'beforeDestroy'), t._isBeingDestroyed = !0; var e = t.$parent; !e || e._isBeingDestroyed || t.$options.abstract || y(e.$children, t), t._watcher && t._watcher.teardown(); for (var n = t._watchers.length; n--;)t._watchers[n].teardown(); t._data.__ob__ && t._data.__ob__.vmCount--, t._isDestroyed = !0, t.__patch__(t._vnode, null), en(t, 'destroyed'), t.$off(), t.$el && (t.$el.__vue__ = null), t.$vnode && (t.$vnode.parent = null) } } }(In)), (function (t) { Pe(t.prototype), t.prototype.$nextTick = function (t) { return ee(t, this) }, t.prototype._render = function () { var t; var e = this; var n = e.$options; var i = n.render; var r = n._parentVnode; r && (e.$scopedSlots = pe(r.data.scopedSlots, e.$slots, e.$scopedSlots)), e.$vnode = r; try { We = e, t = i.call(e._renderProxy, e.$createElement) } catch (n) { Ht(n, e, 'render'), t = e._vnode } finally { We = null } return Array.isArray(t) && t.length === 1 && (t = t[0]), t instanceof gt || (t = mt()), t.parent = r, t } }(In)); var Pn = [String, RegExp, Array]; var kn = { KeepAlive: { name: 'keep-alive', abstract: !0, props: { include: Pn, exclude: Pn, max: [String, Number] }, created: function () { this.cache = Object.create(null), this.keys = [] }, destroyed: function () { for (var t in this.cache)Ln(this.cache, t, this.keys) }, mounted: function () { var t = this; this.$watch('include', function (e) { Dn(t, function (t) { return Cn(e, t) }) }), this.$watch('exclude', function (e) { Dn(t, function (t) { return !Cn(e, t) }) }) }, render: function () { var t = this.$slots.default; var e = Ze(t); var n = e && e.componentOptions; if (n) { var i = Tn(n); var r = this.include; var a = this.exclude; if (r && (!i || !Cn(r, i)) || a && i && Cn(a, i)) return e; var o = this.cache; var s = this.keys; var l = e.key == null ? n.Ctor.cid + (n.tag ? '::' + n.tag : '') : e.key; o[l] ? (e.componentInstance = o[l].componentInstance, y(s, l), s.push(l)) : (o[l] = e, s.push(l), this.max && s.length > parseInt(this.max) && Ln(o, s[0], s, this._vnode)), e.data.keepAlive = !0 } return e || t && t[0] } } }; !(function (t) { var e = { get: function () { return F } }; Object.defineProperty(t, 'config', e), t.util = { warn: ut, extend: D, mergeOptions: Nt, defineReactive: Tt }, t.set = Ct, t.delete = Dt, t.nextTick = ee, t.observable = function (t) { return At(t), t }, t.options = Object.create(null), B.forEach(function (e) { t.options[e + 's'] = Object.create(null) }), t.options._base = t, D(t.options.components, kn), (function (t) { t.use = function (t) { var e = this._installedPlugins || (this._installedPlugins = []); if (e.indexOf(t) > -1) return this; var n = C(arguments, 1); return n.unshift(this), typeof t.install === 'function' ? t.install.apply(t, n) : typeof t === 'function' && t.apply(null, n), e.push(t), this } }(t)), (function (t) { t.mixin = function (t) { return this.options = Nt(this.options, t), this } }(t)), An(t), (function (t) { B.forEach(function (e) { t[e] = function (t, n) { return n ? (e === 'component' && c(n) && (n.name = n.name || t, n = this.options._base.extend(n)), e === 'directive' && typeof n === 'function' && (n = { bind: n, update: n }), this.options[e + 's'][t] = n, n) : this.options[e + 's'][t] } }) }(t)) }(In)), Object.defineProperty(In.prototype, '$isServer', { get: rt }), Object.defineProperty(In.prototype, '$ssrContext', { get: function () { return this.$vnode && this.$vnode.ssrContext } }), Object.defineProperty(In, 'FunctionalRenderContext', { value: ke }), In.version = '2.6.10'; var On = v('style,class'); var En = v('input,textarea,option,select,progress'); var Rn = v('contenteditable,draggable,spellcheck'); var Nn = v('events,caret,typing,plaintext-only'); var zn = function (t, e) { return Hn(e) || e === 'false' ? 'false' : t === 'contenteditable' && Nn(e) ? e : 'true' }; var Bn = v('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible'); var Vn = 'http://www.w3.org/1999/xlink'; var Fn = function (t) { return t.charAt(5) === ':' && t.slice(0, 5) === 'xlink' }; var Gn = function (t) { return Fn(t) ? t.slice(6, t.length) : '' }; var Hn = function (t) { return t == null || !1 === t }; function Wn (t) { for (var e = t.data, n = t, i = t; a(i.componentInstance);)(i = i.componentInstance._vnode) && i.data && (e = jn(i.data, e)); for (;a(n = n.parent);)n && n.data && (e = jn(e, n.data)); return (function (t, e) { if (a(t) || a(e)) return Un(t, Zn(e)); return '' }(e.staticClass, e.class)) } function jn (t, e) { return { staticClass: Un(t.staticClass, e.staticClass), class: a(t.class) ? [t.class, e.class] : e.class } } function Un (t, e) { return t ? e ? t + ' ' + e : t : e || '' } function Zn (t) { return Array.isArray(t) ? (function (t) { for (var e, n = '', i = 0, r = t.length; i < r; i++)a(e = Zn(t[i])) && e !== '' && (n && (n += ' '), n += e); return n }(t)) : l(t) ? (function (t) { var e = ''; for (var n in t)t[n] && (e && (e += ' '), e += n); return e }(t)) : typeof t === 'string' ? t : '' } var $n = { svg: 'http://www.w3.org/2000/svg', math: 'http://www.w3.org/1998/Math/MathML' }; var Yn = v('html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot'); var Xn = v('svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view', !0); var qn = function (t) { return Yn(t) || Xn(t) }; var Kn = Object.create(null); var Jn = v('text,number,password,search,email,tel,url'); var Qn = Object.freeze({ createElement: function (t, e) { var n = document.createElement(t); return t !== 'select' ? n : (e.data && e.data.attrs && void 0 !== e.data.attrs.multiple && n.setAttribute('multiple', 'multiple'), n) }, createElementNS: function (t, e) { return document.createElementNS($n[t], e) }, createTextNode: function (t) { return document.createTextNode(t) }, createComment: function (t) { return document.createComment(t) }, insertBefore: function (t, e, n) { t.insertBefore(e, n) }, removeChild: function (t, e) { t.removeChild(e) }, appendChild: function (t, e) { t.appendChild(e) }, parentNode: function (t) { return t.parentNode }, nextSibling: function (t) { return t.nextSibling }, tagName: function (t) { return t.tagName }, setTextContent: function (t, e) { t.textContent = e }, setStyleScope: function (t, e) { t.setAttribute(e, '') } }); var ti = { create: function (t, e) { ei(e) }, update: function (t, e) { t.data.ref !== e.data.ref && (ei(t, !0), ei(e)) }, destroy: function (t) { ei(t, !0) } }; function ei (t, e) { var n = t.data.ref; if (a(n)) { var i = t.context; var r = t.componentInstance || t.elm; var o = i.$refs; e ? Array.isArray(o[n]) ? y(o[n], r) : o[n] === r && (o[n] = void 0) : t.data.refInFor ? Array.isArray(o[n]) ? o[n].indexOf(r) < 0 && o[n].push(r) : o[n] = [r] : o[n] = r } } var ni = new gt('', {}, []); var ii = ['create', 'activate', 'update', 'remove', 'destroy']; function ri (t, e) { return t.key === e.key && (t.tag === e.tag && t.isComment === e.isComment && a(t.data) === a(e.data) && (function (t, e) { if (t.tag !== 'input') return !0; var n; var i = a(n = t.data) && a(n = n.attrs) && n.type; var r = a(n = e.data) && a(n = n.attrs) && n.type; return i === r || Jn(i) && Jn(r) }(t, e)) || o(t.isAsyncPlaceholder) && t.asyncFactory === e.asyncFactory && r(e.asyncFactory.error)) } function ai (t, e, n) { var i; var r; var o = {}; for (i = e; i <= n; ++i)a(r = t[i].key) && (o[r] = i); return o } var oi = { create: si, update: si, destroy: function (t) { si(t, ni) } }; function si (t, e) { (t.data.directives || e.data.directives) && (function (t, e) { var n; var i; var r; var a = t === ni; var o = e === ni; var s = ui(t.data.directives, t.context); var l = ui(e.data.directives, e.context); var u = []; var c = []; for (n in l)i = s[n], r = l[n], i ? (r.oldValue = i.value, r.oldArg = i.arg, hi(r, 'update', e, t), r.def && r.def.componentUpdated && c.push(r)) : (hi(r, 'bind', e, t), r.def && r.def.inserted && u.push(r)); if (u.length) { var h = function () { for (var n = 0; n < u.length; n++)hi(u[n], 'inserted', e, t) }; a ? se(e, 'insert', h) : h() }c.length && se(e, 'postpatch', function () { for (var n = 0; n < c.length; n++)hi(c[n], 'componentUpdated', e, t) }); if (!a) for (n in s)l[n] || hi(s[n], 'unbind', t, t, o) }(t, e)) } var li = Object.create(null); function ui (t, e) { var n; var i; var r = Object.create(null); if (!t) return r; for (n = 0; n < t.length; n++)(i = t[n]).modifiers || (i.modifiers = li), r[ci(i)] = i, i.def = zt(e.$options, 'directives', i.name); return r } function ci (t) { return t.rawName || t.name + '.' + Object.keys(t.modifiers || {}).join('.') } function hi (t, e, n, i, r) { var a = t.def && t.def[e]; if (a) try { a(n.elm, t, n, i, r) } catch (i) { Ht(i, n.context, 'directive ' + t.name + ' ' + e + ' hook') } } var di = [ti, oi]; function fi (t, e) { var n = e.componentOptions; if (!(a(n) && !1 === n.Ctor.options.inheritAttrs || r(t.data.attrs) && r(e.data.attrs))) { var i; var o; var s = e.elm; var l = t.data.attrs || {}; var u = e.data.attrs || {}; for (i in a(u.__ob__) && (u = e.data.attrs = D({}, u)), u)o = u[i], l[i] !== o && pi(s, i, o); for (i in (q || J) && u.value !== l.value && pi(s, 'value', u.value), l)r(u[i]) && (Fn(i) ? s.removeAttributeNS(Vn, Gn(i)) : Rn(i) || s.removeAttribute(i)) } } function pi (t, e, n) { t.tagName.indexOf('-') > -1 ? gi(t, e, n) : Bn(e) ? Hn(n) ? t.removeAttribute(e) : (n = e === 'allowfullscreen' && t.tagName === 'EMBED' ? 'true' : e, t.setAttribute(e, n)) : Rn(e) ? t.setAttribute(e, zn(e, n)) : Fn(e) ? Hn(n) ? t.removeAttributeNS(Vn, Gn(e)) : t.setAttributeNS(Vn, e, n) : gi(t, e, n) } function gi (t, e, n) { if (Hn(n))t.removeAttribute(e); else { if (q && !K && t.tagName === 'TEXTAREA' && e === 'placeholder' && n !== '' && !t.__ieph) { var i = function (e) { e.stopImmediatePropagation(), t.removeEventListener('input', i) }; t.addEventListener('input', i), t.__ieph = !0 }t.setAttribute(e, n) } } var vi = { create: fi, update: fi }; function mi (t, e) { var n = e.elm; var i = e.data; var o = t.data; if (!(r(i.staticClass) && r(i.class) && (r(o) || r(o.staticClass) && r(o.class)))) { var s = Wn(e); var l = n._transitionClasses; a(l) && (s = Un(s, Zn(l))), s !== n._prevClass && (n.setAttribute('class', s), n._prevClass = s) } } var yi; var xi = { create: mi, update: mi }; var _i = '__r'; var bi = '__c'; function wi (t, e, n) { var i = yi; return function r () { var a = e.apply(null, arguments); a !== null && Ii(t, r, n, i) } } var Si = $t && !(tt && Number(tt[1]) <= 53); function Mi (t, e, n, i) { if (Si) { var r = un; var a = e; e = a._wrapper = function (t) { if (t.target === t.currentTarget || t.timeStamp >= r || t.timeStamp <= 0 || t.target.ownerDocument !== document) return a.apply(this, arguments) } }yi.addEventListener(t, e, nt ? { capture: n, passive: i } : n) } function Ii (t, e, n, i) { (i || yi).removeEventListener(t, e._wrapper || e, n) } function Ai (t, e) { if (!r(t.data.on) || !r(e.data.on)) { var n = e.data.on || {}; var i = t.data.on || {}; yi = e.elm, (function (t) { if (a(t[_i])) { var e = q ? 'change' : 'input'; t[e] = [].concat(t[_i], t[e] || []), delete t[_i] }a(t[bi]) && (t.change = [].concat(t[bi], t.change || []), delete t[bi]) }(n)), oe(n, i, Mi, Ii, wi, e.context), yi = void 0 } } var Ti; var Ci = { create: Ai, update: Ai }; function Di (t, e) { if (!r(t.data.domProps) || !r(e.data.domProps)) { var n; var i; var o = e.elm; var s = t.data.domProps || {}; var l = e.data.domProps || {}; for (n in a(l.__ob__) && (l = e.data.domProps = D({}, l)), s)n in l || (o[n] = ''); for (n in l) { if (i = l[n], n === 'textContent' || n === 'innerHTML') { if (e.children && (e.children.length = 0), i === s[n]) continue; o.childNodes.length === 1 && o.removeChild(o.childNodes[0]) } if (n === 'value' && o.tagName !== 'PROGRESS') { o._value = i; var u = r(i) ? '' : String(i); Li(o, u) && (o.value = u) } else if (n === 'innerHTML' && Xn(o.tagName) && r(o.innerHTML)) { (Ti = Ti || document.createElement('div')).innerHTML = '<svg>' + i + '</svg>'; for (var c = Ti.firstChild; o.firstChild;)o.removeChild(o.firstChild); for (;c.firstChild;)o.appendChild(c.firstChild) } else if (i !== s[n]) try { o[n] = i } catch (t) {} } } } function Li (t, e) { return !t.composing && (t.tagName === 'OPTION' || (function (t, e) { var n = !0; try { n = document.activeElement !== t } catch (t) {} return n && t.value !== e }(t, e)) || (function (t, e) { var n = t.value; var i = t._vModifiers; if (a(i)) { if (i.number) return g(n) !== g(e); if (i.trim) return n.trim() !== e.trim() } return n !== e }(t, e))) } var Pi = { create: Di, update: Di }; var ki = b(function (t) { var e = {}; var n = /:(.+)/; return t.split(/;(?![^(]*\))/g).forEach(function (t) { if (t) { var i = t.split(n); i.length > 1 && (e[i[0].trim()] = i[1].trim()) } }), e }); function Oi (t) { var e = Ei(t.style); return t.staticStyle ? D(t.staticStyle, e) : e } function Ei (t) { return Array.isArray(t) ? L(t) : typeof t === 'string' ? ki(t) : t } var Ri; var Ni = /^--/; var zi = /\s*!important$/; var Bi = function (t, e, n) { if (Ni.test(e))t.style.setProperty(e, n); else if (zi.test(n))t.style.setProperty(A(e), n.replace(zi, ''), 'important'); else { var i = Fi(e); if (Array.isArray(n)) for (var r = 0, a = n.length; r < a; r++)t.style[i] = n[r]; else t.style[i] = n } }; var Vi = ['Webkit', 'Moz', 'ms']; var Fi = b(function (t) { if (Ri = Ri || document.createElement('div').style, (t = S(t)) !== 'filter' && t in Ri) return t; for (var e = t.charAt(0).toUpperCase() + t.slice(1), n = 0; n < Vi.length; n++) { var i = Vi[n] + e; if (i in Ri) return i } }); function Gi (t, e) { var n = e.data; var i = t.data; if (!(r(n.staticStyle) && r(n.style) && r(i.staticStyle) && r(i.style))) { var o; var s; var l = e.elm; var u = i.staticStyle; var c = i.normalizedStyle || i.style || {}; var h = u || c; var d = Ei(e.data.style) || {}; e.data.normalizedStyle = a(d.__ob__) ? D({}, d) : d; var f = (function (t, e) { var n; var i = {}; if (e) for (var r = t; r.componentInstance;)(r = r.componentInstance._vnode) && r.data && (n = Oi(r.data)) && D(i, n); (n = Oi(t.data)) && D(i, n); for (var a = t; a = a.parent;)a.data && (n = Oi(a.data)) && D(i, n); return i }(e, !0)); for (s in h)r(f[s]) && Bi(l, s, ''); for (s in f)(o = f[s]) !== h[s] && Bi(l, s, o == null ? '' : o) } } var Hi = { create: Gi, update: Gi }; var Wi = /\s+/; function ji (t, e) { if (e && (e = e.trim())) if (t.classList)e.indexOf(' ') > -1 ? e.split(Wi).forEach(function (e) { return t.classList.add(e) }) : t.classList.add(e); else { var n = ' ' + (t.getAttribute('class') || '') + ' '; n.indexOf(' ' + e + ' ') < 0 && t.setAttribute('class', (n + e).trim()) } } function Ui (t, e) { if (e && (e = e.trim())) if (t.classList)e.indexOf(' ') > -1 ? e.split(Wi).forEach(function (e) { return t.classList.remove(e) }) : t.classList.remove(e), t.classList.length || t.removeAttribute('class'); else { for (var n = ' ' + (t.getAttribute('class') || '') + ' ', i = ' ' + e + ' '; n.indexOf(i) >= 0;)n = n.replace(i, ' '); (n = n.trim()) ? t.setAttribute('class', n) : t.removeAttribute('class') } } function Zi (t) { if (t) { if (typeof t === 'object') { var e = {}; return !1 !== t.css && D(e, $i(t.name || 'v')), D(e, t), e } return typeof t === 'string' ? $i(t) : void 0 } } var $i = b(function (t) { return { enterClass: t + '-enter', enterToClass: t + '-enter-to', enterActiveClass: t + '-enter-active', leaveClass: t + '-leave', leaveToClass: t + '-leave-to', leaveActiveClass: t + '-leave-active' } }); var Yi = Z && !K; var Xi = 'transition'; var qi = 'animation'; var Ki = 'transition'; var Ji = 'transitionend'; var Qi = 'animation'; var tr = 'animationend'; Yi && (void 0 === window.ontransitionend && void 0 !== window.onwebkittransitionend && (Ki = 'WebkitTransition', Ji = 'webkitTransitionEnd'), void 0 === window.onanimationend && void 0 !== window.onwebkitanimationend && (Qi = 'WebkitAnimation', tr = 'webkitAnimationEnd')); var er = Z ? window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : setTimeout : function (t) { return t() }; function nr (t) { er(function () { er(t) }) } function ir (t, e) { var n = t._transitionClasses || (t._transitionClasses = []); n.indexOf(e) < 0 && (n.push(e), ji(t, e)) } function rr (t, e) { t._transitionClasses && y(t._transitionClasses, e), Ui(t, e) } function ar (t, e, n) { var i = sr(t, e); var r = i.type; var a = i.timeout; var o = i.propCount; if (!r) return n(); var s = r === Xi ? Ji : tr; var l = 0; var u = function () { t.removeEventListener(s, c), n() }; var c = function (e) { e.target === t && ++l >= o && u() }; setTimeout(function () { l < o && u() }, a + 1), t.addEventListener(s, c) } var or = /\b(transform|all)(,|$)/; function sr (t, e) { var n; var i = window.getComputedStyle(t); var r = (i[Ki + 'Delay'] || '').split(', '); var a = (i[Ki + 'Duration'] || '').split(', '); var o = lr(r, a); var s = (i[Qi + 'Delay'] || '').split(', '); var l = (i[Qi + 'Duration'] || '').split(', '); var u = lr(s, l); var c = 0; var h = 0; return e === Xi ? o > 0 && (n = Xi, c = o, h = a.length) : e === qi ? u > 0 && (n = qi, c = u, h = l.length) : h = (n = (c = Math.max(o, u)) > 0 ? o > u ? Xi : qi : null) ? n === Xi ? a.length : l.length : 0, { type: n, timeout: c, propCount: h, hasTransform: n === Xi && or.test(i[Ki + 'Property']) } } function lr (t, e) { for (;t.length < e.length;)t = t.concat(t); return Math.max.apply(null, e.map(function (e, n) { return ur(e) + ur(t[n]) })) } function ur (t) { return 1e3 * Number(t.slice(0, -1).replace(',', '.')) } function cr (t, e) { var n = t.elm; a(n._leaveCb) && (n._leaveCb.cancelled = !0, n._leaveCb()); var i = Zi(t.data.transition); if (!r(i) && !a(n._enterCb) && n.nodeType === 1) { for (var o = i.css, s = i.type, u = i.enterClass, c = i.enterToClass, h = i.enterActiveClass, d = i.appearClass, f = i.appearToClass, p = i.appearActiveClass, v = i.beforeEnter, m = i.enter, y = i.afterEnter, x = i.enterCancelled, _ = i.beforeAppear, b = i.appear, w = i.afterAppear, S = i.appearCancelled, M = i.duration, I = Ke, A = Ke.$vnode; A && A.parent;)I = A.context, A = A.parent; var T = !I._isMounted || !t.isRootInsert; if (!T || b || b === '') { var C = T && d ? d : u; var D = T && p ? p : h; var L = T && f ? f : c; var P = T && _ || v; var k = T && typeof b === 'function' ? b : m; var O = T && w || y; var E = T && S || x; var R = g(l(M) ? M.enter : M); 0; var z = !1 !== o && !K; var B = fr(k); var V = n._enterCb = N(function () { z && (rr(n, L), rr(n, D)), V.cancelled ? (z && rr(n, C), E && E(n)) : O && O(n), n._enterCb = null }); t.data.show || se(t, 'insert', function () { var e = n.parentNode; var i = e && e._pending && e._pending[t.key]; i && i.tag === t.tag && i.elm._leaveCb && i.elm._leaveCb(), k && k(n, V) }), P && P(n), z && (ir(n, C), ir(n, D), nr(function () { rr(n, C), V.cancelled || (ir(n, L), B || (dr(R) ? setTimeout(V, R) : ar(n, s, V))) })), t.data.show && (e && e(), k && k(n, V)), z || B || V() } } } function hr (t, e) { var n = t.elm; a(n._enterCb) && (n._enterCb.cancelled = !0, n._enterCb()); var i = Zi(t.data.transition); if (r(i) || n.nodeType !== 1) return e(); if (!a(n._leaveCb)) { var o = i.css; var s = i.type; var u = i.leaveClass; var c = i.leaveToClass; var h = i.leaveActiveClass; var d = i.beforeLeave; var f = i.leave; var p = i.afterLeave; var v = i.leaveCancelled; var m = i.delayLeave; var y = i.duration; var x = !1 !== o && !K; var _ = fr(f); var b = g(l(y) ? y.leave : y); 0; var w = n._leaveCb = N(function () { n.parentNode && n.parentNode._pending && (n.parentNode._pending[t.key] = null), x && (rr(n, c), rr(n, h)), w.cancelled ? (x && rr(n, u), v && v(n)) : (e(), p && p(n)), n._leaveCb = null }); m ? m(S) : S() } function S () { w.cancelled || (!t.data.show && n.parentNode && ((n.parentNode._pending || (n.parentNode._pending = {}))[t.key] = t), d && d(n), x && (ir(n, u), ir(n, h), nr(function () { rr(n, u), w.cancelled || (ir(n, c), _ || (dr(b) ? setTimeout(w, b) : ar(n, s, w))) })), f && f(n, w), x || _ || w()) } } function dr (t) { return typeof t === 'number' && !isNaN(t) } function fr (t) { if (r(t)) return !1; var e = t.fns; return a(e) ? fr(Array.isArray(e) ? e[0] : e) : (t._length || t.length) > 1 } function pr (t, e) { !0 !== e.data.show && cr(e) } var gr = (function (t) { var e; var n; var i = {}; var l = t.modules; var u = t.nodeOps; for (e = 0; e < ii.length; ++e) for (i[ii[e]] = [], n = 0; n < l.length; ++n)a(l[n][ii[e]]) && i[ii[e]].push(l[n][ii[e]]); function c (t) { var e = u.parentNode(t); a(e) && u.removeChild(e, t) } function h (t, e, n, r, s, l, c) { if (a(t.elm) && a(l) && (t = l[c] = xt(t)), t.isRootInsert = !s, !(function (t, e, n, r) { var s = t.data; if (a(s)) { var l = a(t.componentInstance) && s.keepAlive; if (a(s = s.hook) && a(s = s.init) && s(t, !1), a(t.componentInstance)) return d(t, e), f(n, t.elm, r), o(l) && (function (t, e, n, r) { var o; var s = t; for (;s.componentInstance;) if (s = s.componentInstance._vnode, a(o = s.data) && a(o = o.transition)) { for (o = 0; o < i.activate.length; ++o)i.activate[o](ni, s); e.push(s); break }f(n, t.elm, r) }(t, e, n, r)), !0 } }(t, e, n, r))) { var h = t.data; var g = t.children; var v = t.tag; a(v) ? (t.elm = t.ns ? u.createElementNS(t.ns, v) : u.createElement(v, t), y(t), p(t, g, e), a(h) && m(t, e), f(n, t.elm, r)) : o(t.isComment) ? (t.elm = u.createComment(t.text), f(n, t.elm, r)) : (t.elm = u.createTextNode(t.text), f(n, t.elm, r)) } } function d (t, e) { a(t.data.pendingInsert) && (e.push.apply(e, t.data.pendingInsert), t.data.pendingInsert = null), t.elm = t.componentInstance.$el, g(t) ? (m(t, e), y(t)) : (ei(t), e.push(t)) } function f (t, e, n) { a(t) && (a(n) ? u.parentNode(n) === t && u.insertBefore(t, e, n) : u.appendChild(t, e)) } function p (t, e, n) { if (Array.isArray(e)) { 0; for (var i = 0; i < e.length; ++i)h(e[i], n, t.elm, null, !0, e, i) } else s(t.text) && u.appendChild(t.elm, u.createTextNode(String(t.text))) } function g (t) { for (;t.componentInstance;)t = t.componentInstance._vnode; return a(t.tag) } function m (t, n) { for (var r = 0; r < i.create.length; ++r)i.create[r](ni, t); a(e = t.data.hook) && (a(e.create) && e.create(ni, t), a(e.insert) && n.push(t)) } function y (t) { var e; if (a(e = t.fnScopeId))u.setStyleScope(t.elm, e); else for (var n = t; n;)a(e = n.context) && a(e = e.$options._scopeId) && u.setStyleScope(t.elm, e), n = n.parent; a(e = Ke) && e !== t.context && e !== t.fnContext && a(e = e.$options._scopeId) && u.setStyleScope(t.elm, e) } function x (t, e, n, i, r, a) { for (;i <= r; ++i)h(n[i], a, t, e, !1, n, i) } function _ (t) { var e; var n; var r = t.data; if (a(r)) for (a(e = r.hook) && a(e = e.destroy) && e(t), e = 0; e < i.destroy.length; ++e)i.destroy[e](t); if (a(e = t.children)) for (n = 0; n < t.children.length; ++n)_(t.children[n]) } function b (t, e, n, i) { for (;n <= i; ++n) { var r = e[n]; a(r) && (a(r.tag) ? (w(r), _(r)) : c(r.elm)) } } function w (t, e) { if (a(e) || a(t.data)) { var n; var r = i.remove.length + 1; for (a(e) ? e.listeners += r : e = (function (t, e) { function n () { --n.listeners == 0 && c(t) } return n.listeners = e, n }(t.elm, r)), a(n = t.componentInstance) && a(n = n._vnode) && a(n.data) && w(n, e), n = 0; n < i.remove.length; ++n)i.remove[n](t, e); a(n = t.data.hook) && a(n = n.remove) ? n(t, e) : e() } else c(t.elm) } function S (t, e, n, i) { for (var r = n; r < i; r++) { var o = e[r]; if (a(o) && ri(t, o)) return r } } function M (t, e, n, s, l, c) { if (t !== e) { a(e.elm) && a(s) && (e = s[l] = xt(e)); var d = e.elm = t.elm; if (o(t.isAsyncPlaceholder))a(e.asyncFactory.resolved) ? T(t.elm, e, n) : e.isAsyncPlaceholder = !0; else if (o(e.isStatic) && o(t.isStatic) && e.key === t.key && (o(e.isCloned) || o(e.isOnce)))e.componentInstance = t.componentInstance; else { var f; var p = e.data; a(p) && a(f = p.hook) && a(f = f.prepatch) && f(t, e); var v = t.children; var m = e.children; if (a(p) && g(e)) { for (f = 0; f < i.update.length; ++f)i.update[f](t, e); a(f = p.hook) && a(f = f.update) && f(t, e) }r(e.text) ? a(v) && a(m) ? v !== m && (function (t, e, n, i, o) { var s; var l; var c; var d = 0; var f = 0; var p = e.length - 1; var g = e[0]; var v = e[p]; var m = n.length - 1; var y = n[0]; var _ = n[m]; var w = !o; for (0; d <= p && f <= m;)r(g) ? g = e[++d] : r(v) ? v = e[--p] : ri(g, y) ? (M(g, y, i, n, f), g = e[++d], y = n[++f]) : ri(v, _) ? (M(v, _, i, n, m), v = e[--p], _ = n[--m]) : ri(g, _) ? (M(g, _, i, n, m), w && u.insertBefore(t, g.elm, u.nextSibling(v.elm)), g = e[++d], _ = n[--m]) : ri(v, y) ? (M(v, y, i, n, f), w && u.insertBefore(t, v.elm, g.elm), v = e[--p], y = n[++f]) : (r(s) && (s = ai(e, d, p)), r(l = a(y.key) ? s[y.key] : S(y, e, d, p)) ? h(y, i, t, g.elm, !1, n, f) : ri(c = e[l], y) ? (M(c, y, i, n, f), e[l] = void 0, w && u.insertBefore(t, c.elm, g.elm)) : h(y, i, t, g.elm, !1, n, f), y = n[++f]); d > p ? x(t, r(n[m + 1]) ? null : n[m + 1].elm, n, f, m, i) : f > m && b(0, e, d, p) }(d, v, m, n, c)) : a(m) ? (a(t.text) && u.setTextContent(d, ''), x(d, null, m, 0, m.length - 1, n)) : a(v) ? b(0, v, 0, v.length - 1) : a(t.text) && u.setTextContent(d, '') : t.text !== e.text && u.setTextContent(d, e.text), a(p) && a(f = p.hook) && a(f = f.postpatch) && f(t, e) } } } function I (t, e, n) { if (o(n) && a(t.parent))t.parent.data.pendingInsert = e; else for (var i = 0; i < e.length; ++i)e[i].data.hook.insert(e[i]) } var A = v('attrs,class,staticClass,staticStyle,key'); function T (t, e, n, i) { var r; var s = e.tag; var l = e.data; var u = e.children; if (i = i || l && l.pre, e.elm = t, o(e.isComment) && a(e.asyncFactory)) return e.isAsyncPlaceholder = !0, !0; if (a(l) && (a(r = l.hook) && a(r = r.init) && r(e, !0), a(r = e.componentInstance))) return d(e, n), !0; if (a(s)) { if (a(u)) if (t.hasChildNodes()) if (a(r = l) && a(r = r.domProps) && a(r = r.innerHTML)) { if (r !== t.innerHTML) return !1 } else { for (var c = !0, h = t.firstChild, f = 0; f < u.length; f++) { if (!h || !T(h, u[f], n, i)) { c = !1; break }h = h.nextSibling } if (!c || h) return !1 } else p(e, u, n); if (a(l)) { var g = !1; for (var v in l) if (!A(v)) { g = !0, m(e, n); break }!g && l.class && ie(l.class) } } else t.data !== e.text && (t.data = e.text); return !0 } return function (t, e, n, s) { if (!r(e)) { var l; var c = !1; var d = []; if (r(t))c = !0, h(e, d); else { var f = a(t.nodeType); if (!f && ri(t, e))M(t, e, d, null, null, s); else { if (f) { if (t.nodeType === 1 && t.hasAttribute(z) && (t.removeAttribute(z), n = !0), o(n) && T(t, e, d)) return I(e, d, !0), t; l = t, t = new gt(u.tagName(l).toLowerCase(), {}, [], void 0, l) } var p = t.elm; var v = u.parentNode(p); if (h(e, d, p._leaveCb ? null : v, u.nextSibling(p)), a(e.parent)) for (var m = e.parent, y = g(e); m;) { for (var x = 0; x < i.destroy.length; ++x)i.destroy[x](m); if (m.elm = e.elm, y) { for (var w = 0; w < i.create.length; ++w)i.create[w](ni, m); var S = m.data.hook.insert; if (S.merged) for (var A = 1; A < S.fns.length; A++)S.fns[A]() } else ei(m); m = m.parent }a(v) ? b(0, [t], 0, 0) : a(t.tag) && _(t) } } return I(e, d, c), e.elm }a(t) && _(t) } }({ nodeOps: Qn, modules: [vi, xi, Ci, Pi, Hi, Z ? { create: pr, activate: pr, remove: function (t, e) { !0 !== t.data.show ? hr(t, e) : e() } } : {}].concat(di) })); K && document.addEventListener('selectionchange', function () { var t = document.activeElement; t && t.vmodel && Sr(t, 'input') }); var vr = { inserted: function (t, e, n, i) { n.tag === 'select' ? (i.elm && !i.elm._vOptions ? se(n, 'postpatch', function () { vr.componentUpdated(t, e, n) }) : mr(t, e, n.context), t._vOptions = [].map.call(t.options, _r)) : (n.tag === 'textarea' || Jn(t.type)) && (t._vModifiers = e.modifiers, e.modifiers.lazy || (t.addEventListener('compositionstart', br), t.addEventListener('compositionend', wr), t.addEventListener('change', wr), K && (t.vmodel = !0))) }, componentUpdated: function (t, e, n) { if (n.tag === 'select') { mr(t, e, n.context); var i = t._vOptions; var r = t._vOptions = [].map.call(t.options, _r); if (r.some(function (t, e) { return !E(t, i[e]) }))(t.multiple ? e.value.some(function (t) { return xr(t, r) }) : e.value !== e.oldValue && xr(e.value, r)) && Sr(t, 'change') } } }; function mr (t, e, n) { yr(t, e, n), (q || J) && setTimeout(function () { yr(t, e, n) }, 0) } function yr (t, e, n) { var i = e.value; var r = t.multiple; if (!r || Array.isArray(i)) { for (var a, o, s = 0, l = t.options.length; s < l; s++) if (o = t.options[s], r)a = R(i, _r(o)) > -1, o.selected !== a && (o.selected = a); else if (E(_r(o), i)) return void (t.selectedIndex !== s && (t.selectedIndex = s)); r || (t.selectedIndex = -1) } } function xr (t, e) { return e.every(function (e) { return !E(e, t) }) } function _r (t) { return '_value' in t ? t._value : t.value } function br (t) { t.target.composing = !0 } function wr (t) { t.target.composing && (t.target.composing = !1, Sr(t.target, 'input')) } function Sr (t, e) { var n = document.createEvent('HTMLEvents'); n.initEvent(e, !0, !0), t.dispatchEvent(n) } function Mr (t) { return !t.componentInstance || t.data && t.data.transition ? t : Mr(t.componentInstance._vnode) } var Ir = { model: vr, show: { bind: function (t, e, n) { var i = e.value; var r = (n = Mr(n)).data && n.data.transition; var a = t.__vOriginalDisplay = t.style.display === 'none' ? '' : t.style.display; i && r ? (n.data.show = !0, cr(n, function () { t.style.display = a })) : t.style.display = i ? a : 'none' }, update: function (t, e, n) { var i = e.value; !i != !e.oldValue && ((n = Mr(n)).data && n.data.transition ? (n.data.show = !0, i ? cr(n, function () { t.style.display = t.__vOriginalDisplay }) : hr(n, function () { t.style.display = 'none' })) : t.style.display = i ? t.__vOriginalDisplay : 'none') }, unbind: function (t, e, n, i, r) { r || (t.style.display = t.__vOriginalDisplay) } } }; var Ar = { name: String, appear: Boolean, css: Boolean, mode: String, type: String, enterClass: String, leaveClass: String, enterToClass: String, leaveToClass: String, enterActiveClass: String, leaveActiveClass: String, appearClass: String, appearActiveClass: String, appearToClass: String, duration: [Number, String, Object] }; function Tr (t) { var e = t && t.componentOptions; return e && e.Ctor.options.abstract ? Tr(Ze(e.children)) : t } function Cr (t) { var e = {}; var n = t.$options; for (var i in n.propsData)e[i] = t[i]; var r = n._parentListeners; for (var a in r)e[S(a)] = r[a]; return e } function Dr (t, e) { if (/\d-keep-alive$/.test(e.tag)) return t('keep-alive', { props: e.componentOptions.propsData }) } var Lr = function (t) { return t.tag || Ue(t) }; var Pr = function (t) { return t.name === 'show' }; var kr = { name: 'transition', props: Ar, abstract: !0, render: function (t) { var e = this; var n = this.$slots.default; if (n && (n = n.filter(Lr)).length) { 0; var i = this.mode; 0; var r = n[0]; if (function (t) { for (;t = t.parent;) if (t.data.transition) return !0 }(this.$vnode)) return r; var a = Tr(r); if (!a) return r; if (this._leaving) return Dr(t, r); var o = '__transition-' + this._uid + '-'; a.key = a.key == null ? a.isComment ? o + 'comment' : o + a.tag : s(a.key) ? String(a.key).indexOf(o) === 0 ? a.key : o + a.key : a.key; var l = (a.data || (a.data = {})).transition = Cr(this); var u = this._vnode; var c = Tr(u); if (a.data.directives && a.data.directives.some(Pr) && (a.data.show = !0), c && c.data && !(function (t, e) { return e.key === t.key && e.tag === t.tag }(a, c)) && !Ue(c) && (!c.componentInstance || !c.componentInstance._vnode.isComment)) { var h = c.data.transition = D({}, l); if (i === 'out-in') return this._leaving = !0, se(h, 'afterLeave', function () { e._leaving = !1, e.$forceUpdate() }), Dr(t, r); if (i === 'in-out') { if (Ue(a)) return u; var d; var f = function () { d() }; se(l, 'afterEnter', f), se(l, 'enterCancelled', f), se(h, 'delayLeave', function (t) { d = t }) } } return r } } }; var Or = D({ tag: String, moveClass: String }, Ar); function Er (t) { t.elm._moveCb && t.elm._moveCb(), t.elm._enterCb && t.elm._enterCb() } function Rr (t) { t.data.newPos = t.elm.getBoundingClientRect() } function Nr (t) { var e = t.data.pos; var n = t.data.newPos; var i = e.left - n.left; var r = e.top - n.top; if (i || r) { t.data.moved = !0; var a = t.elm.style; a.transform = a.WebkitTransform = 'translate(' + i + 'px,' + r + 'px)', a.transitionDuration = '0s' } } delete Or.mode; var zr = { Transition: kr, TransitionGroup: { props: Or, beforeMount: function () { var t = this; var e = this._update; this._update = function (n, i) { var r = Je(t); t.__patch__(t._vnode, t.kept, !1, !0), t._vnode = t.kept, r(), e.call(t, n, i) } }, render: function (t) { for (var e = this.tag || this.$vnode.data.tag || 'span', n = Object.create(null), i = this.prevChildren = this.children, r = this.$slots.default || [], a = this.children = [], o = Cr(this), s = 0; s < r.length; s++) { var l = r[s]; if (l.tag) if (l.key != null && String(l.key).indexOf('__vlist') !== 0)a.push(l), n[l.key] = l, (l.data || (l.data = {})).transition = o; else; } if (i) { for (var u = [], c = [], h = 0; h < i.length; h++) { var d = i[h]; d.data.transition = o, d.data.pos = d.elm.getBoundingClientRect(), n[d.key] ? u.push(d) : c.push(d) } this.kept = t(e, null, u), this.removed = c } return t(e, null, a) }, updated: function () { var t = this.prevChildren; var e = this.moveClass || (this.name || 'v') + '-move'; t.length && this.hasMove(t[0].elm, e) && (t.forEach(Er), t.forEach(Rr), t.forEach(Nr), this._reflow = document.body.offsetHeight, t.forEach(function (t) { if (t.data.moved) { var n = t.elm; var i = n.style; ir(n, e), i.transform = i.WebkitTransform = i.transitionDuration = '', n.addEventListener(Ji, n._moveCb = function t (i) { i && i.target !== n || i && !/transform$/.test(i.propertyName) || (n.removeEventListener(Ji, t), n._moveCb = null, rr(n, e)) }) } })) }, methods: { hasMove: function (t, e) { if (!Yi) return !1; if (this._hasMove) return this._hasMove; var n = t.cloneNode(); t._transitionClasses && t._transitionClasses.forEach(function (t) { Ui(n, t) }), ji(n, e), n.style.display = 'none', this.$el.appendChild(n); var i = sr(n); return this.$el.removeChild(n), this._hasMove = i.hasTransform } } } }; In.config.mustUseProp = function (t, e, n) { return n === 'value' && En(t) && e !== 'button' || n === 'selected' && t === 'option' || n === 'checked' && t === 'input' || n === 'muted' && t === 'video' }, In.config.isReservedTag = qn, In.config.isReservedAttr = On, In.config.getTagNamespace = function (t) { return Xn(t) ? 'svg' : t === 'math' ? 'math' : void 0 }, In.config.isUnknownElement = function (t) { if (!Z) return !0; if (qn(t)) return !1; if (t = t.toLowerCase(), Kn[t] != null) return Kn[t]; var e = document.createElement(t); return t.indexOf('-') > -1 ? Kn[t] = e.constructor === window.HTMLUnknownElement || e.constructor === window.HTMLElement : Kn[t] = /HTMLUnknownElement/.test(e.toString()) }, D(In.options.directives, Ir), D(In.options.components, zr), In.prototype.__patch__ = Z ? gr : P, In.prototype.$mount = function (t, e) { return (function (t, e, n) { var i; return t.$el = e, t.$options.render || (t.$options.render = mt), en(t, 'beforeMount'), i = function () { t._update(t._render(), n) }, new pn(t, i, P, { before: function () { t._isMounted && !t._isDestroyed && en(t, 'beforeUpdate') } }, !0), n = !1, t.$vnode == null && (t._isMounted = !0, en(t, 'mounted')), t }(this, t = t && Z ? (function (t) { if (typeof t === 'string') { var e = document.querySelector(t); return e || document.createElement('div') } return t }(t)) : void 0, e)) }, Z && setTimeout(function () { F.devtools && at && at.emit('init', In) }, 0), e.default = In
  }.call(this, n(66), n(526).setImmediate))
}, function (t, e, n) { (function (t) { var i = void 0 !== t && t || typeof self !== 'undefined' && self || window; var r = Function.prototype.apply; function a (t, e) { this._id = t, this._clearFn = e }e.setTimeout = function () { return new a(r.call(setTimeout, i, arguments), clearTimeout) }, e.setInterval = function () { return new a(r.call(setInterval, i, arguments), clearInterval) }, e.clearTimeout = e.clearInterval = function (t) { t && t.close() }, a.prototype.unref = a.prototype.ref = function () {}, a.prototype.close = function () { this._clearFn.call(i, this._id) }, e.enroll = function (t, e) { clearTimeout(t._idleTimeoutId), t._idleTimeout = e }, e.unenroll = function (t) { clearTimeout(t._idleTimeoutId), t._idleTimeout = -1 }, e._unrefActive = e.active = function (t) { clearTimeout(t._idleTimeoutId); var e = t._idleTimeout; e >= 0 && (t._idleTimeoutId = setTimeout(function () { t._onTimeout && t._onTimeout() }, e)) }, n(527), e.setImmediate = typeof self !== 'undefined' && self.setImmediate || void 0 !== t && t.setImmediate || this && this.setImmediate, e.clearImmediate = typeof self !== 'undefined' && self.clearImmediate || void 0 !== t && t.clearImmediate || this && this.clearImmediate }).call(this, n(66)) }, function (t, e, n) { (function (t, e) { !(function (t, n) { 'use strict'; if (!t.setImmediate) { var i; var r; var a; var o; var s; var l = 1; var u = {}; var c = !1; var h = t.document; var d = Object.getPrototypeOf && Object.getPrototypeOf(t); d = d && d.setTimeout ? d : t, {}.toString.call(t.process) === '[object process]' ? i = function (t) { e.nextTick(function () { p(t) }) } : !(function () { if (t.postMessage && !t.importScripts) { var e = !0; var n = t.onmessage; return t.onmessage = function () { e = !1 }, t.postMessage('', '*'), t.onmessage = n, e } }()) ? t.MessageChannel ? ((a = new MessageChannel()).port1.onmessage = function (t) { p(t.data) }, i = function (t) { a.port2.postMessage(t) }) : h && 'onreadystatechange' in h.createElement('script') ? (r = h.documentElement, i = function (t) { var e = h.createElement('script'); e.onreadystatechange = function () { p(t), e.onreadystatechange = null, r.removeChild(e), e = null }, r.appendChild(e) }) : i = function (t) { setTimeout(p, 0, t) } : (o = 'setImmediate$' + Math.random() + '$', s = function (e) { e.source === t && typeof e.data === 'string' && e.data.indexOf(o) === 0 && p(+e.data.slice(o.length)) }, t.addEventListener ? t.addEventListener('message', s, !1) : t.attachEvent('onmessage', s), i = function (e) { t.postMessage(o + e, '*') }), d.setImmediate = function (t) { typeof t !== 'function' && (t = new Function('' + t)); for (var e = new Array(arguments.length - 1), n = 0; n < e.length; n++)e[n] = arguments[n + 1]; var r = { callback: t, args: e }; return u[l] = r, i(l), l++ }, d.clearImmediate = f } function f (t) { delete u[t] } function p (t) { if (c)setTimeout(p, 0, t); else { var e = u[t]; if (e) { c = !0; try { !(function (t) { var e = t.callback; var i = t.args; switch (i.length) { case 0:e(); break; case 1:e(i[0]); break; case 2:e(i[0], i[1]); break; case 3:e(i[0], i[1], i[2]); break; default:e.apply(n, i) } }(e)) } finally { f(t), c = !1 } } } } }(typeof self === 'undefined' ? void 0 === t ? this : t : self)) }).call(this, n(66), n(125)) }]))
