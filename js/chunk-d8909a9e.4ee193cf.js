(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8909a9e"],{"0c749":function(t,e,o){},2909:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var s=o("6b75");function i(t){if(Array.isArray(t))return Object(s["a"])(t)}o("a4d3"),o("e01a"),o("d28b"),o("a630"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var a=o("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t){return i(t)||n(t)||Object(a["a"])(t)||l()}},cf14:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"workflowList"},[o("section",{staticClass:"handerBox"},[o("div",{staticClass:"handerItem"},[o("div",{staticClass:"searchBox"},[o("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:t.onSearch,cancel:t.onCancel},scopedSlots:t._u([{key:"left-icon",fn:function(){return[o("van-icon",{attrs:{name:"search"},on:{click:t.onSearch}})]},proxy:!0}]),model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1)]),o("div",[o("van-swipe",{attrs:{loop:!1,"show-indicators":!1,width:100}},t._l(t.workflowTypeList,(function(e,s){return o("van-swipe-item",{key:s},[o("div",{class:[{active:t.chooseType==e.id},"countItem"],on:{click:function(o){return t.swipeClick(e)}}},[o("label",{staticClass:"countItemName"},[t._v(t._s(e.name))])])])})),1)],1)]),o("div",{style:{height:t.theBoxHight+"px"}},[o("section",{directives:[{name:"show",rawName:"v-show",value:0!=t.workflowList.length,expression:"workflowList.length != 0"}],ref:"wrapper",staticClass:"wrapper",staticStyle:{height:"100%",overflow:"hidden"}},[o("ul",{staticClass:"content"},t._l(t.workflowList,(function(e){return o("van-cell",{key:e.workNumber},[o("section",{staticClass:"eventBox"},[o("div",{staticClass:"workflowTitle"},[t._v("编号:"+t._s(e.workNumber))]),o("div",{staticClass:"workflowContent"},[o("div",{staticClass:"ContentItem"},[t._v("创建人:"+t._s(e.createUser))]),o("div",{staticClass:"ContentItem"},[t._v("流程名称:"+t._s(e.processName))]),o("div",{staticClass:"ContentItem"},[t._v("流程描述:"+t._s(e.processDesc))]),o("div",{staticClass:"ContentItem"},[t._v("当前节点:"+t._s(e.activityName))]),o("div",{staticClass:"ContentItem"},[t._v("当前处理人:"+t._s(e.handleUser))]),o("div",{staticClass:"ContentItem"},[t._v("送达时间:"+t._s(e.applyTime))]),o("div",{staticClass:"ContentItem"},[t._v("创建时间:"+t._s(e.createTime))])]),o("div",{staticClass:"workflowDao"},[e.handle&&"true"===e.handle?o("van-button",{staticClass:"DaoBtn",attrs:{round:"",block:"",type:"info",size:"small"},on:{click:function(o){return t.handelWorkflow(e,"edit")}}},[t._v("处理")]):t._e(),o("van-button",{staticClass:"DaoBtn",attrs:{round:"",block:"",type:"info",size:"small"},on:{click:function(o){return t.handelWorkflow(e,"read")}}},[t._v("查看")])],1)])])})),1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.workflowList.length,expression:"workflowList.length == 0"}],staticClass:"noContentCover"},[o("img",{attrs:{src:t.nullcontent}})])]),o("section",{staticClass:"popupBox"},[o("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消","close-on-click-action":""},on:{cancel:function(e){t.addWorkflowPopup=!1},select:t.onSelect},model:{value:t.addWorkflowPopup,callback:function(e){t.addWorkflowPopup=e},expression:"addWorkflowPopup"}})],1),o("section",{staticClass:"addWorkflow"},[o("div",{attrs:{id:"addWorkflow"},on:{click:function(e){t.addWorkflowPopup=!0}}},[o("van-icon",{attrs:{name:"plus"}})],1)])])},i=[],n=(o("99af"),o("d3b7"),o("2909")),a=o("1fba"),l=o("4690"),r=o.n(l),c={name:"workflowList",data:function(){return{nullcontent:r.a,searchText:"",workflowList:[],workflowListBase:[],chooseType:"handleListAll",workflowTypeList:[{name:"我的待办",id:"handleListAll"},{name:"我的经办",id:"historyHandleListAll"},{name:"我的发起",id:"createUserListAll"},{name:"全部",id:"byPersonListAll"}],actions:[{name:"事件管理",id:"kfw200318105905138"},{name:"测试抢单",id:"kfw200623191458194"},{name:"测试会签",id:"kfw200623191511280"},{name:"服务管理",id:"kfw200318093033597"},{name:"问题管理",id:"kfw200318102602964"},{name:"变更管理",id:"kfw200331171430940"},{name:"任务管理",id:"kfw200318114526656"},{name:"知识管理",id:"kfw200318104325186"},{name:"调班管理",id:"kfw200323104825316"}],isFinsh:!1,theBoxHight:0,pageInfo:{page:1,limit:10},scroll:{},addWorkflowPopup:!1,loadTime:0}},mounted:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});setTimeout((function(){t.init()}),500)},methods:{init:function(){var t=this;this.theBoxHight=document.body.clientHeight-46-50-85,this.$nextTick((function(){t.loadTime=0,t.loadList(!0);try{t.scroll=new a["a"](t.$refs.wrapper,{probeType:1,click:!0,listenScroll:!0,scrollY:!0,scrollX:!1,bounce:{top:!0,bottom:!0},pullUpLoad:{threshold:30}}),t.scroll.on("scrollEnd",(function(){t.scroll.y>=4&&t.loadList(!0),t.scroll.y<=t.scroll.maxScrollY+250&&(t.scroll.refresh(),t.loadList(!1))}))}catch(e){console.error(JSON.stringify(e))}}))},onSearch:function(){""!==this.searchText?this.loadList(!0):this.onCancel()},onCancel:function(){this.loadList(!0)},swipeClick:function(t){this.chooseType=t.id,this.loadList(!0)},onSelect:function(t){this.chooseType=t.id,this.addWorkflow()},loadList:function(t){var e=this,o=(new Date).getTime();if(0==this.loadTime)this.loadTime=o;else{var s=o-this.loadTime;if(s<1e3)return!1;this.loadTime=o}this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t?(this.pageInfo.page=1,this.workflowList=[],this.workflowListBase=[],this.isFinsh=!1):this.pageInfo.page=this.pageInfo.page+1;var i={pageInfo:this.pageInfo,keyWord:this.searchText};if(!this.isFinsh){var a=this.urls.query.historyHandleListAll;"createUserListAll"==this.chooseType&&(a=this.urls.query.createUserListAll),"historyHandleListAll"==this.chooseType&&(a=this.urls.query.historyHandleListAll),"handleListAll"==this.chooseType&&(a=this.urls.query.handleListAll),"byPersonListAll"==this.chooseType&&(a=this.urls.query.byPersonListAll),this.postAxios(a,i).then((function(t){if(e.$toast.clear(),0===t.errorCode){var o=t.responseBody.result||[];e.isFinsh=t.responseBody.pageInfo.limit*t.responseBody.pageInfo.page>=t.responseBody.pageInfo.total,e.workflowList=[].concat(Object(n["a"])(e.workflowList),Object(n["a"])(o));try{e.scroll.refresh()}catch(s){console.error(JSON.stringify(s))}}})).catch((function(){e.$toast.clear()})).finally((function(){e.$toast.clear()}))}},handelWorkflow:function(t,e){this.$router.push({path:"/workflowDetali",query:{uuid:t.uuid,formDaoType:e,processKey:this.chooseType,processInstanceId:t.processInstId,view:"read"==e}})},addWorkflow:function(){this.$router.push({path:"/workflowDetali",query:{formDaoType:"add",processKey:this.chooseType,view:!1}})}}},d=c,h=(o("ede2"),o("2877")),f=Object(h["a"])(d,s,i,!1,null,"28613f6e",null);e["default"]=f.exports},ede2:function(t,e,o){"use strict";var s=o("0c749"),i=o.n(s);i.a}}]);