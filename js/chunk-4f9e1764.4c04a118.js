(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f9e1764"],{"0c34":function(t,e,o){"use strict";var n=o("b71d"),a=o.n(n);a.a},"0c74":function(t,e,o){"use strict";o.d(e,"i",(function(){return c})),o.d(e,"h",(function(){return l})),o.d(e,"c",(function(){return u})),o.d(e,"b",(function(){return d})),o.d(e,"a",(function(){return f})),o.d(e,"d",(function(){return h})),o.d(e,"e",(function(){return p})),o.d(e,"g",(function(){return m})),o.d(e,"f",(function(){return v}));o("99af");var n=o("2b0e");function a(){var t=JSON.parse(window.localStorage.getItem("ITILInfo")),e=t&&t.user?"user_name="+t.user.username+"&login_id="+t.user.loginId+"&loginId="+t.user.loginId+"&user_id="+t.user.userId+"&userId="+t.user.userId+"&app_token="+t.token+"&":"";return e}var r={};function i(){return window.config.itilHost}var s={login:i()+"login2.do",attachUpload:i()+"attachUpload.do?login_id=".concat(r.loginId,"&app_token=").concat(r.token),attachRemove:i()+"attachRemove.do?login_id=".concat(r.loginId,"&app_token=").concat(r.token),getAppFormField:i()+"getAppFormField.do",getAppSubFormField:i()+"getAppSubFormField.do",getAppFormDataByFormId:i()+"getAppFormDataByFormId.do",getAppSubFormDataByFormId:i()+"getAppSubFormDataByFormId.do",queryFormTab:i()+"queryFormTab.do",comboxTreeAll:i()+"comboxTreeAll.do",getSystemUser:i()+"getSystemUser.do",selectUser:i()+"electUser.do",selectUserSelected:i()+"selectUserSelected.do"};function c(t){return n["a"].prototype.postAxios(s.selectUserSelected,a()+t)}function l(t){return n["a"].prototype.postAxios(s.selectUser,a()+t)}function u(t){return n["a"].prototype.postAxios(s.comboxTreeAll,a()+t)}function d(t,e){return n["a"].prototype.postAxios("".concat(s.attachUpload,"&foreignid=").concat(e.foreignid,"&indexTable=").concat(e.indexTable,"&indexId=").concat(e.indexId),a()+t)}function f(t){return n["a"].prototype.postAxios(s.attachRemove,a()+t)}function h(t){return n["a"].prototype.postAxios(s.getAppFormField,a()+t)}function p(t){return n["a"].prototype.postAxios(s.getAppSubFormField,a()+t)}function m(t){return n["a"].prototype.postAxios(s.queryFormTab,a()+t)}function v(t){return n["a"].prototype.postAxios(s.getSystemUser,a()+t)}},"0ce3":function(t,e,o){"use strict";var n=o("a393"),a=o.n(n);a.a},1013:function(t,e,o){"use strict";var n=o("525b"),a=o.n(n);a.a},"112f":function(t,e,o){"use strict";var n=o("877b"),a=o.n(n);a.a},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},1483:function(t,e,o){"use strict";var n=o("1e9d"),a=o.n(n);a.a},1611:function(t,e,o){"use strict";var n=o("30a0"),a=o.n(n);a.a},"1e9d":function(t,e,o){},2461:function(t,e,o){t.exports=o.p+"img/vacancy@2x.9dbe987e.png"},2650:function(t,e,o){},"273e":function(t,e,o){"use strict";var n=o("a386"),a=o.n(n);a.a},"2e83":function(t,e,o){"use strict";var n=o("f7c4"),a=o.n(n);a.a},"30a0":function(t,e,o){},"33e8":function(t,e,o){"use strict";var n=o("5e50"),a=o.n(n);a.a},"3d5e":function(t,e,o){},"45fc":function(t,e,o){"use strict";var n=o("23e7"),a=o("b727").some,r=o("a640"),i=o("ae40"),s=r("some"),c=i("some");n({target:"Array",proto:!0,forced:!s||!c},{some:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"498a":function(t,e,o){"use strict";var n=o("23e7"),a=o("58a8").trim,r=o("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},"4f03":function(t,e,o){"use strict";var n=o("e90d"),a=o.n(n);a.a},"51e2":function(t,e,o){"use strict";var n=o("e021"),a=o.n(n);a.a},"525b":function(t,e,o){},"54ee":function(t,e,o){},5680:function(t,e,o){"use strict";var n=o("98c1"),a=o.n(n);a.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,o){var n=o("1d80"),a=o("5899"),r="["+a+"]",i=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),c=function(t){return function(e){var o=String(n(e));return 1&t&&(o=o.replace(i,"")),2&t&&(o=o.replace(s,"")),o}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5b03":function(t,e,o){"use strict";var n=o("d96e6"),a=o.n(n);a.a},"5e50":function(t,e,o){},"60e5":function(t,e,o){},"713c":function(t,e,o){"use strict";var n=o("f354"),a=o.n(n);a.a},7206:function(t,e,o){},8088:function(t,e,o){"use strict";var n=o("f2a3"),a=o.n(n);a.a},8326:function(t,e,o){},"841c":function(t,e,o){"use strict";var n=o("d784"),a=o("825a"),r=o("1d80"),i=o("129f"),s=o("14c3");n("search",1,(function(t,e,o){return[function(e){var o=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,o):new RegExp(e)[t](String(o))},function(t){var n=o(e,t,this);if(n.done)return n.value;var r=a(t),c=String(this),l=r.lastIndex;i(l,0)||(r.lastIndex=0);var u=s(r,c);return i(r.lastIndex,l)||(r.lastIndex=l),null===u?-1:u.index}]}))},"877b":function(t,e,o){},"8a79":function(t,e,o){"use strict";var n=o("23e7"),a=o("06cf").f,r=o("50c4"),i=o("5a34"),s=o("1d80"),c=o("ab13"),l=o("c430"),u="".endsWith,d=Math.min,f=c("endsWith"),h=!l&&!f&&!!function(){var t=a(String.prototype,"endsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!h&&!f},{endsWith:function(t){var e=String(s(this));i(t);var o=arguments.length>1?arguments[1]:void 0,n=r(e.length),a=void 0===o?n:d(r(o),n),c=String(t);return u?u.call(e,c,a):e.slice(a-c.length,a)===c}})},9414:function(t,e,o){},"96cf":function(t,e,o){var n=function(t){"use strict";var e,o=Object.prototype,n=o.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(t,e,o,n){var a=e&&e.prototype instanceof m?e:m,r=Object.create(a.prototype),i=new I(n||[]);return r._invoke=D(t,o,i),r}function l(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(n){return{type:"throw",arg:n}}}t.wrap=c;var u="suspendedStart",d="suspendedYield",f="executing",h="completed",p={};function m(){}function v(){}function x(){}var g={};g[r]=function(){return this};var y=Object.getPrototypeOf,k=y&&y(y(L([])));k&&k!==o&&n.call(k,r)&&(g=k);var b=x.prototype=m.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t,e){function o(a,r,i,s){var c=l(t[a],t,r);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"===typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,s)}),(function(t){o("throw",t,i,s)})):e.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return o("throw",t,i,s)}))}s(c.arg)}var a;function r(t,n){function r(){return new e((function(e,a){o(t,n,e,a)}))}return a=a?a.then(r,r):r()}this._invoke=r}function D(t,e,o){var n=u;return function(a,r){if(n===f)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw r;return O()}o.method=a,o.arg=r;while(1){var i=o.delegate;if(i){var s=N(i,o);if(s){if(s===p)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===u)throw n=h,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=f;var c=l(t,e,o);if("normal"===c.type){if(n=o.done?h:d,c.arg===p)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(n=h,o.method="throw",o.arg=c.arg)}}}function N(t,o){var n=t.iterator[o.method];if(n===e){if(o.delegate=null,"throw"===o.method){if(t.iterator["return"]&&(o.method="return",o.arg=e,N(t,o),"throw"===o.method))return p;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=l(n,t.iterator,o.arg);if("throw"===a.type)return o.method="throw",o.arg=a.arg,o.delegate=null,p;var r=a.arg;return r?r.done?(o[t.resultName]=r.value,o.next=t.nextLoc,"return"!==o.method&&(o.method="next",o.arg=e),o.delegate=null,p):r:(o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,p)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function L(t){if(t){var o=t[r];if(o)return o.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function o(){while(++a<t.length)if(n.call(t,a))return o.value=t[a],o.done=!1,o;return o.value=e,o.done=!0,o};return i.next=i}}return{next:O}}function O(){return{value:e,done:!0}}return v.prototype=b.constructor=x,x.constructor=v,x[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(_.prototype),_.prototype[i]=function(){return this},t.AsyncIterator=_,t.async=function(e,o,n,a,r){void 0===r&&(r=Promise);var i=new _(c(e,o,n,a),r);return t.isGeneratorFunction(o)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(b),b[s]="Generator",b[r]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var o in t)e.push(o);return e.reverse(),function o(){while(e.length){var n=e.pop();if(n in t)return o.value=n,o.done=!1,o}return o.done=!0,o}},t.values=L,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var o in this)"t"===o.charAt(0)&&n.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function a(n,a){return s.type="throw",s.arg=t,o.next=n,a&&(o.method="next",o.arg=e),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),S(o),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var n=o.completion;if("throw"===n.type){var a=n.arg;S(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,o,n){return this.delegate={iterator:L(t),resultName:o,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},"98c1":function(t,e,o){},"99d4":function(t,e,o){"use strict";var n=o("2650"),a=o.n(n);a.a},a386:function(t,e,o){},a393:function(t,e,o){},a84b7:function(t,e,o){"use strict";var n=o("7206"),a=o.n(n);a.a},a9e3:function(t,e,o){"use strict";var n=o("83ab"),a=o("da84"),r=o("94ca"),i=o("6eeb"),s=o("5135"),c=o("c6b6"),l=o("7156"),u=o("c04e"),d=o("d039"),f=o("7c73"),h=o("241c").f,p=o("06cf").f,m=o("9bf2").f,v=o("58a8").trim,x="Number",g=a[x],y=g.prototype,k=c(f(y))==x,b=function(t){var e,o,n,a,r,i,s,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(o=l.charCodeAt(2),88===o||120===o)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+l}for(r=l.slice(2),i=r.length,s=0;s<i;s++)if(c=r.charCodeAt(s),c<48||c>a)return NaN;return parseInt(r,n)}return+l};if(r(x,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var w,_=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof _&&(k?d((function(){y.valueOf.call(o)})):c(o)!=x)?l(new g(b(e)),o,_):b(e)},D=n?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;D.length>N;N++)s(g,w=D[N])&&!s(_,w)&&m(_,w,p(g,w));_.prototype=y,y.constructor=_,i(a,x,_)}},aa69:function(t,e,o){"use strict";var n=o("ad99"),a=o.n(n);a.a},acf3:function(t,e,o){},ad99:function(t,e,o){},b48a:function(t,e,o){"use strict";var n=o("3d5e"),a=o.n(n);a.a},b71d:function(t,e,o){},bea6:function(t,e,o){"use strict";var n=o("acf3"),a=o.n(n);a.a},c740:function(t,e,o){"use strict";var n=o("23e7"),a=o("b727").findIndex,r=o("44d2"),i=o("ae40"),s="findIndex",c=!0,l=i(s);s in[]&&Array(1)[s]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),r(s)},c8d2:function(t,e,o){var n=o("d039"),a=o("5899"),r="​᠎";t.exports=function(t){return n((function(){return!!a[t]()||r[t]()!=r||a[t].name!==t}))}},d336:function(t,e,o){},d34b:function(t,e,o){},d37a:function(t,e,o){"use strict";var n=o("54ee"),a=o.n(n);a.a},d642:function(t,e,o){"use strict";var n=o("9414"),a=o.n(n);a.a},d823:function(t,e,o){"use strict";var n=o("8326"),a=o.n(n);a.a},d96e6:function(t,e,o){},e021:function(t,e,o){},e2b0:function(t,e,o){"use strict";var n=o("60e5"),a=o.n(n);a.a},e5d4:function(t,e,o){"use strict";var n=o("d336"),a=o.n(n);a.a},e90d:function(t,e,o){},f1c2:function(t,e,o){"use strict";var n=o("d34b"),a=o.n(n);a.a},f2a3:function(t,e,o){},f354:function(t,e,o){},f7c4:function(t,e,o){},f86c:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-nav-bar",{staticClass:"vanNavBar",attrs:{"left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}},[o("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.task&&t.task.odd_number))])]),t.spinnerLoad?o("van-loading",{staticClass:"vanSpinner",staticStyle:{"z-index":"9999999999",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#1989fa"},attrs:{type:"spinner"}}):t._e(),o("van-tabs",{staticClass:"marginTop vanTabs",attrs:{color:"#F6D05D",swipeable:"",animated:""},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("van-tab",{style:{height:t.height+"px",overflow:"auto"},attrs:{title:"表单"}},[o("Form",{attrs:{HChildTableData:t.HChildTableData,formList:t.formList,scriptList:t.scriptList}})],1),o("van-tab",{attrs:{title:"流程日志"}},[o("HProcessLog",{attrs:{processLogs:t.processField.processLogs}})],1),t.HWorkOrderList.length>0?o("van-tab",{attrs:{title:"关联工单"}},[o("HWorkOrder",{attrs:{HWorkOrderList:t.HWorkOrderList[0].tabdata}})],1):t._e(),t.HUtilitySystemList.length>0?o("van-tab",{attrs:{title:"关联配置项"}},[o("HUtilitySystem",{attrs:{HUtilitySystemList:t.HUtilitySystemList[0].tabdata,nowRouter:"getReadyHandle",isGoPreviousPage:!0,isFromRead:t.isFromRead}})],1):t._e()],1),t.isFromRead?t._e():o("div",{staticClass:"footerBotton"},[o("van-button",{directives:[{name:"show",rawName:"v-show",value:!t.buttonList._orderButton&&!t.spinnerLoad,expression:"!buttonList._orderButton&&!spinnerLoad"}],staticClass:"vanButton",staticStyle:{background:"#ffa500"},attrs:{type:"primary",size:"mini",round:""},on:{click:t.clickSaveTemp}},[t._v("暂存")]),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.buttonList._backButton,expression:"buttonList._backButton"}],staticClass:"vanButton",staticStyle:{background:"#d9534f"},attrs:{type:"primary",size:"mini",round:""},on:{click:t.clickBack}},[t._v("退回")]),o("OrderHandle",{attrs:{showPopup:t.footerData.back.showBack,curNodeName:t.processField.curNodeName?t.processField.curNodeName:"",headerColor:"#d9534f",btnDisabled:t.footerData.back.btnDisabled},on:{"update:showPopup":function(e){return t.$set(t.footerData.back,"showBack",e)},"update:show-popup":function(e){return t.$set(t.footerData.back,"showBack",e)},clickSubmit:t.backSubmit},scopedSlots:t._u([{key:"OrderHandleTop",fn:function(){return[o("DropdownMenu",{staticStyle:{padding:"0 !important","line-height":"normal"},attrs:{label:"后续节点",type:"back",param:{pId:t.processField.pId,formId:t.processField.formId},sourceVal:t.footerData.back.nextNodes},on:{"update:sourceVal":function(e){return t.$set(t.footerData.back,"nextNodes",e)},"update:source-val":function(e){return t.$set(t.footerData.back,"nextNodes",e)}}})]},proxy:!0},{key:"OrderHandleMiddle",fn:function(){return[o("DropdownMenu",{staticStyle:{padding:"0 !important","line-height":"normal"},attrs:{label:"处理人",defaultData:t.footerData.back.nextNodes.handleNames,sourceVal:t.footerData.back.handleName},on:{"update:sourceVal":function(e){return t.$set(t.footerData.back,"handleName",e)},"update:source-val":function(e){return t.$set(t.footerData.back,"handleName",e)}}})]},proxy:!0},{key:"OrderHandleBotton",fn:function(){return[o("van-field",{staticClass:"vanField",attrs:{border:"",type:"textarea",placeholder:"退回【APP处理】",label:"处理意见"},model:{value:t.footerData.back.opinion,callback:function(e){t.$set(t.footerData.back,"opinion",e)},expression:"footerData.back.opinion"}})]},proxy:!0}],null,!1,161576244)}),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.buttonList._forwordButton2,expression:"buttonList._forwordButton2"}],staticClass:"vanButton",staticStyle:{background:"#5cb85c"},attrs:{type:"primary",size:"mini",round:""},on:{click:t.clickForword}},[t._v("转发")]),o("OrderHandle",{attrs:{showPopup:t.footerData.forword.showForword,headerColor:"#5cb85c",curNodeName:t.processField.curNodeName?t.processField.curNodeName:"",btnDisabled:t.footerData.forword.btnDisabled},on:{"update:showPopup":function(e){return t.$set(t.footerData.forword,"showForword",e)},"update:show-popup":function(e){return t.$set(t.footerData.forword,"showForword",e)},clickSubmit:t.forwordSubmit},scopedSlots:t._u([{key:"OrderHandleTop",fn:function(){return[o("SelectCheckbox",{staticStyle:{padding:"0 !important","line-height":"normal"},attrs:{label:"部门",sourceVal:t.footerData.forword.nextNodes},on:{"update:sourceVal":function(e){return t.$set(t.footerData.forword,"nextNodes",e)},"update:source-val":function(e){return t.$set(t.footerData.forword,"nextNodes",e)}}})]},proxy:!0},{key:"OrderHandleMiddle",fn:function(){return[o("DropdownMenu",{staticStyle:{padding:"0 !important","line-height":"normal"},attrs:{label:"处理人",type:"forword",param:{departIds:t.footerData.forword.nextNodes.map((function(t){return t.autoid})).join(",")},sourceVal:t.footerData.forword.handleName},on:{"update:sourceVal":function(e){return t.$set(t.footerData.forword,"handleName",e)},"update:source-val":function(e){return t.$set(t.footerData.forword,"handleName",e)}}})]},proxy:!0},{key:"OrderHandleBotton",fn:function(){return[o("van-field",{staticClass:"vanField",attrs:{border:"",type:"textarea",placeholder:"转发【APP处理】",label:"处理意见"},model:{value:t.footerData.forword.opinion,callback:function(e){t.$set(t.footerData.forword,"opinion",e)},expression:"footerData.forword.opinion"}})]},proxy:!0}],null,!1,1871032188)}),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.buttonList._nextButton,expression:"buttonList._nextButton"}],staticClass:"vanButton",staticStyle:{background:"#337ab7"},attrs:{type:"primary",size:"mini",round:""},on:{click:t.clickNext}},[t._v("下一步")]),o("OrderHandle",{attrs:{showPopup:t.footerData.next.showNext,curNodeName:t.processField.curNodeName?t.processField.curNodeName:"",headerColor:"#337ab7",btnDisabled:t.footerData.next.btnDisabled},on:{"update:showPopup":function(e){return t.$set(t.footerData.next,"showNext",e)},"update:show-popup":function(e){return t.$set(t.footerData.next,"showNext",e)},clickSubmit:t.nextSubmit},scopedSlots:t._u([{key:"OrderHandleTop",fn:function(){return[o("DropdownMenu",{staticStyle:{padding:"0 !important","line-height":"normal"},attrs:{label:"后续节点",type:"next",formData:t.footerData.next.nextFormData,param:{pId:t.processField.pId,pKey:t.processField.pKey,formId:t.processField.formId,curNodeName:t.processField.curNodeName,taskId:t.processField.taskId},sourceVal:t.footerData.next.nextNodes},on:{"update:sourceVal":function(e){return t.$set(t.footerData.next,"nextNodes",e)},"update:source-val":function(e){return t.$set(t.footerData.next,"nextNodes",e)}}})]},proxy:!0},"true"===t.footerData.next.nextNodes.showHandleName?{key:"OrderHandleMiddle",fn:function(){return[o("DropdownMenu",{staticStyle:{padding:"0 !important","line-height":"normal"},attrs:{label:"处理人",type:"nextUser",param:{pId:t.processField.pId,pKey:t.processField.pKey,formId:t.processField.formId,curNodeName:t.processField.curNodeName,taskId:t.processField.taskId},defaultData:t.footerData.next.nextNodes.handleNames,sourceVal:t.footerData.next.handleName},on:{"update:sourceVal":function(e){return t.$set(t.footerData.next,"handleName",e)},"update:source-val":function(e){return t.$set(t.footerData.next,"handleName",e)}}})]},proxy:!0}:null,"结束"!=t.footerData.next.nextNodes.id?{key:"OrderHandleBotton",fn:function(){return[o("van-field",{staticClass:"vanField",attrs:{border:"",type:"textarea",placeholder:"下一步【APP处理】",label:"处理意见"},model:{value:t.footerData.next.opinion,callback:function(e){t.$set(t.footerData.next,"opinion",e)},expression:"footerData.next.opinion"}})]},proxy:!0}:null],null,!0)}),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.buttonList._clientButton||t.buttonList._signButton||t.buttonList._assigneeButton,expression:"buttonList._clientButton || buttonList._signButton || buttonList._assigneeButton"}],staticClass:"vanButton",staticStyle:{background:"#337ab7"},attrs:{type:"primary",size:"mini",round:""},on:{click:t.clientClick}},[t._v("同意")]),o("OrderHandle",{attrs:{showPopup:t.footerData.client.showClient,curNodeName:t.processField.curNodeName?t.processField.curNodeName:"",headerColor:"#337ab7",btnDisabled:t.footerData.client.btnDisabled},on:{"update:showPopup":function(e){return t.$set(t.footerData.client,"showClient",e)},"update:show-popup":function(e){return t.$set(t.footerData.client,"showClient",e)},clickSubmit:t.clientSubmit},scopedSlots:t._u([{key:"OrderHandleBotton",fn:function(){return[o("van-field",{staticClass:"vanField",attrs:{border:"",type:"textarea",placeholder:"审批【APP处理】",label:"处理意见"},model:{value:t.footerData.client.opinion,callback:function(e){t.$set(t.footerData.client,"opinion",e)},expression:"footerData.client.opinion"}})]},proxy:!0}],null,!1,376459422)}),o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.buttonList._orderButton,expression:"buttonList._orderButton"}],staticClass:"vanButton",staticStyle:{background:"#337ab7"},attrs:{type:"primary",size:"mini",round:""},on:{click:t.processconfirm}},[t._v(t._s(t.processconfirmBtnText))]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.buttonList._orderButton,expression:"buttonList._orderButton"}],staticClass:"processConfirmPerson overflowP",on:{click:t.showProcessConfirmPerson}},[t._v("可接单人："+t._s(t.processConfirmPerson))])],1)],1)},a=[];o("99af"),o("4de4"),o("4160"),o("c975"),o("a15b"),o("d81d"),o("b0c0"),o("b64b"),o("d3b7"),o("ac1f"),o("1276"),o("159b"),o("96cf"),o("e6cf");function r(t,e,o,n,a,r,i){try{var s=t[r](i),c=s.value}catch(l){return void o(l)}s.done?e(c):Promise.resolve(c).then(n,a)}function i(t){return function(){var e=this,o=arguments;return new Promise((function(n,a){var i=t.apply(e,o);function s(t){r(i,n,a,s,c,"next",t)}function c(t){r(i,n,a,s,c,"throw",t)}s(void 0)}))}}var s=o("5530"),c=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"margin-top":"45px",padding:"10px 8px","margin-bottom":"17vw"}},[o("div",{staticClass:"divisionLine"}),t._l(t.HUtilitySystemList,(function(e,n){return o("div",{key:n,on:{click:function(o){return t.moreInfo(e)}}},[o("van-grid",{staticClass:"van_grid",attrs:{border:t.border,"column-num":t.column_num}},[o("van-grid-item",{staticClass:"grid_item"},[o("a",{staticStyle:{color:"#0078ff"},attrs:{href:"javascript:;"}},[t._v(" "+t._s(e["attrciname"])+" ")])]),o("van-grid-item",[t._v(" "+t._s(e["attrciid"])+" ")]),o("van-grid-item",{directives:[{name:"show",rawName:"v-show",value:3===t.column_num,expression:"column_num===3"}]},[t._v(" "+t._s(e["attrciauthor"])+" ")])],1)],1)})),t.HUtilitySystemList.length<=0?o("NotData"):t._e()],2)},l=[],u=(o("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"no-data-tips",staticStyle:{"margin-top":"40%"}},[n("img",{staticStyle:{width:"100%"},attrs:{src:o("2461"),alt:"no-data-tips"}}),n("span",{staticStyle:{"font-size":"4vw",color:"#7d7e80"}},[t._v(t._s(t.value))])])])}),d=[],f={name:"NotData",props:{value:{type:String,required:!1,default:function(){return"暂无内容"}}}},h=f,p=o("2877"),m=Object(p["a"])(h,u,d,!1,null,"23ead3bb",null),v=m.exports,x={name:"HUtilitySystem",props:{HUtilitySystemList:{required:!0,type:Array},nowRouter:{required:!0,type:String},isGoPreviousPage:{required:!0,type:Boolean},isFromRead:{required:!1,type:Boolean}},data:function(){return{keyWord:"",border:!1,title:"",attrciid:"",column_num:3,uuid:"",headName:""}},methods:{moreInfo:function(t){var e=this;if(this.headName=t["attrciname"]||"",this.attrciid=t.attrciid,!0===this.isGoPreviousPage){if(this.isFromRead)return void this.$router.replace({name:"utilityInfo",params:{title:this.title,headName:this.headName,uuid:this.uuid,attrciid:this.attrciid,isGoPreviousPage:this.isGoPreviousPage,nowRouter:this.nowRouter}});this.$dialog.confirm({title:"温馨提示",message:"请暂存再跳转，否则您已填的信息将会丢失（已暂存请忽略）"}).then((function(){e.$router.replace({name:"utilityInfo",params:{title:e.title,headName:e.headName,uuid:e.uuid,attrciid:e.attrciid,isGoPreviousPage:e.isGoPreviousPage,nowRouter:e.nowRouter}})})).catch((function(){}))}else this.$router.replace({name:"utilityInfo",params:{title:this.title,headName:this.headName,uuid:this.uuid,attrciid:this.attrciid}})}},mounted:function(){var t=this;this.$nextTick((function(){t.title=t.$route.params.title||"",t.uuid=t.$route.params.uuid||""}))},components:{NotData:v}},g=x,y=(o("273e"),Object(p["a"])(g,c,l,!1,null,"32f00f96",null)),k=y.exports,b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"margin-top":"45px",padding:"10px 8px"}},[o("div",{staticClass:"divisionLine"}),t._l(t.HWorkOrderList,(function(e,n){return o("div",{key:n,on:{click:function(o){return t.moreInfo(e)}}},[o("van-grid",{staticClass:"van_grid",attrs:{border:t.border,"column-num":t.column_num}},[o("van-grid-item",{staticClass:"grid_item"},[o("a",{staticStyle:{color:"#0078ff"},attrs:{href:"javascript:;"}},[t._v(" "+t._s(e["pname"])+" ")])]),o("van-grid-item",[t._v(" "+t._s(e["processdesc"])+" ")]),o("van-grid-item",{directives:[{name:"show",rawName:"v-show",value:3===t.column_num,expression:"column_num===3"}]},[t._v(" "+t._s(e["pname"])+" ")])],1)],1)})),t.HWorkOrderList.length<=0?o("NotData"):t._e()],2)},w=[],_={name:"HWorkOrder",props:{HWorkOrderList:{required:!0,type:Array}},data:function(){return{border:!1,column_num:3}},methods:{},mounted:function(){},components:{NotData:v}},D=_,N=(o("5680"),Object(p["a"])(D,b,w,!1,null,"6afe8872",null)),C=N.exports,S=o("0c74"),I=o("2b0e");function L(){return window.config.itilHost}var O={queryOrderTodo:"queryOrderTodo.do",processconfirm:"processConfirm.do",processNextNodes:"processNextNodes.do",saveAndNext:"saveAndNext.do",getProcessBackNode:"getProcessBackNode.do",processSaveTemp:"processSaveTemp.do",processBack:"processBack.do",processOpenOrder:"processOpenOrder.do",getDepartments:"getDepartments.do",getUserByDeptIds:"getUserByDeptIds.do",processForward:"processForward.do",processAnd:"processAnd.do",processLevel:"processLevel.do",processSign:"processSign.do "};function H(){var t=JSON.parse(window.localStorage.getItem("ITILInfo")),e=t&&t.user?"user_name="+t.user.username+"&login_id="+t.user.loginId+"&loginId="+t.user.loginId+"&user_id="+t.user.userId+"&userId="+t.user.userId+"&app_token="+t.token+"&":"";return e}function P(t){return I["a"].prototype.postAxios(L()+O.processSign,H()+t)}function $(t){return I["a"].prototype.postAxios(L()+O.processLevel,H()+t)}function V(t){return I["a"].prototype.postAxios(L()+O.processAnd,H()+t)}function F(t){return I["a"].prototype.postAxios(L()+O.processForward,H()+t)}function E(t){return I["a"].prototype.postAxios(L()+O.getUserByDeptIds,H()+t)}function R(t){return I["a"].prototype.postAxios(L()+O.getDepartments,H()+t)}function q(t){return I["a"].prototype.postAxios(L()+O.processSaveTemp,H()+t)}function A(t){return I["a"].prototype.postAxios(L()+O.processBack,H()+t)}function T(t){return I["a"].prototype.postAxios(L()+O.getProcessBackNode,H()+t)}function B(t){return I["a"].prototype.postAxios(L()+O.saveAndNext,H()+t)}function M(t){return I["a"].prototype.postAxios(L()+O.processconfirm,H()+t)}function j(t){return I["a"].prototype.postAxios(L()+O.processNextNodes,H()+t)}o("4ec9"),o("3ca3"),o("ddb0");function U(){var t=new Date,e=t.getFullYear(),o=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),a="".concat(e,"-").concat(o,"-").concat(n),r=t.toTimeString().split(" ")[0],i=a+" "+r;return i}var K=o("11c1"),J=o.n(K),G=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"FormContent",staticStyle:{"margin-top":"45px",padding:"10px 8px"}},[o("div",{staticClass:"divisionLine"}),o("van-cell-group",{staticClass:"vanCellGroup",attrs:{"abel-align":"left"}},[t.isFromRead?[t._l(t.formList,(function(e,n){return["ckeditor"==e.ext_type?o("HEditor",{key:n,attrs:{form:t.formList[n],isFromRead:!0},on:{"update:form":function(e){return t.$set(t.formList,n,e)}}}):"checkbox"==e.ext_type?o("HCheckbox",{key:n,attrs:{form:t.formList[n],isFromRead:!0},on:{"update:form":function(e){return t.$set(t.formList,n,e)}}}):"radio"==e.ext_type?o("HRadio",{key:n,attrs:{form:t.formList[n],isFromRead:!0},on:{"update:form":function(e){return t.$set(t.formList,n,e)}}}):"attachFile"==e.ext_type?o("HUploader",{key:n,attrs:{form:t.formList[n],isFromRead:!0},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HUploaderClick:t.executeMethod}}):o("HReadonly",{directives:[{name:"show",rawName:"v-show",value:"hidden"!==e.ext_type,expression:"list.ext_type !== 'hidden'"}],key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)}}})]}))]:[t._l(t.formList,(function(e,n){return["text"==e.ext_type?o("HText",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HTextChenge:t.executeMethod,HTextClick:t.executeMethod}}):"multiText"==e.ext_type?o("HMultiText",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HMultiTextChange:t.executeMethod,HMultiTextClick:t.executeMethod}}):"HReadonly"==e.ext_type?o("HReadonly",{key:n,attrs:{form:t.formList[n],formItem:t.formList},on:{"update:form":function(e){return t.$set(t.formList,n,e)}}}):"singleSelect"==e.ext_type?o("HDropdownMenu",{key:n,attrs:{form:t.formList[n],formItem:t.formList},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HDropdownMenuChange:t.executeMethod,HDropdownMenuClick:t.executeMethod}}):"selectOrInput"==e.ext_type?o("HSelectOrInput",{key:n,attrs:{form:t.formList[n],formItem:t.formList},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HSelectOrInputChenge:t.executeMethod,HSelectOrInputClick:t.executeMethod}}):"datetime"==e.ext_type?o("HDatetimePicker",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HDatetimePickerOnchange:t.executeMethod,HDatetimePickerClick:t.executeMethod}}):"date"==e.ext_type?o("HDatePicker",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HDatetimePickerOnchange:t.executeMethod,HDatetimePickerClick:t.executeMethod}}):t._e(),"textarea"==e.ext_type?o("HTextarea",{key:n,attrs:{attr:e.isreadonly,form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HTextareaChenge:t.executeMethod,HTextareaClick:t.executeMethod}}):"ckeditor"==e.ext_type?o("HEditor",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HEditorOnchange:t.executeMethod}}):"attachFile"==e.ext_type?o("HUploader",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HUploaderClick:t.executeMethod}}):"checkbox"==e.ext_type?o("HCheckbox",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HCheckboxOnchange:t.executeMethod,HCheckboxOnClick:t.executeMethod}}):t._e(),"radio"==e.ext_type?o("HRadio",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HRadioOnchange:t.executeMethod,HRadioClick:t.executeMethod}}):"multiSelect"==e.ext_type?o("HSelectCheckbox",{key:n,attrs:{form:t.formList[n]},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HSelectCheckboxOnchange:t.executeMethod,HCheckboxOnblur:t.executeMethod,HSelectCheckboxClick:t.executeMethod}}):"multiSelectAndLevel"==e.ext_type?o("HMultiselectAndLevel",{key:n,attrs:{form:t.formList[n],formItem:t.formList},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HMultiselectAndLevelOnchange:t.executeMethod,HMultiselectAndLevelClick:t.executeMethod}}):"multilevel"==e.ext_type||"multiLevelAndIsleaf"==e.ext_type?o("HMultilevel",{key:n,attrs:{form:t.formList[n],formItem:t.formList},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HMultiselectAndLevelOnchange:t.executeMethod,HMultiselectAndLevelClick:t.executeMethod}}):"oneuserSelect"==e.ext_type?o("HOneuserSelect",{key:n,attrs:{form:t.formList[n],formItem:t.formList},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HOneuserSelectChange:t.executeMethod}}):"userSelect"==e.ext_type?o("HUserSelect",{key:n,attrs:{form:t.formList[n],formItem:t.formList},on:{"update:form":function(e){return t.$set(t.formList,n,e)},HUserSelectChange:t.executeMethod}}):t._e()]}))]],2),o("HChildTable",{attrs:{HChildTableData:t.HChildTableData}})],1)},W=[],z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{clearable:"",border:"",readonly:"是"===t.form.isreadonly,required:t.isrequired,label:t.form.cname},on:{input:t.inputFun,click:t.inputFunClick},model:{value:t.vanfieldVal,callback:function(e){t.vanfieldVal=e},expression:"vanfieldVal"}})],1)],1)},Y=[],Q=(o("a9e3"),{name:"HText",props:{form:{required:!1,type:Object},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},rawvalue:function(){return this.form.value}},data:function(){return{vanfieldVal:this.form.value}},mounted:function(){},methods:{inputFun:function(){var t=this.form.ext_onselect||this.form.ext_onchange||this.form.onchange;this.$emit("HTextChenge",t,this.form,this.iIndex)},inputFunClick:function(){var t=this.form.ext_onclick||this.form.onclick;this.$emit("HTextClick",t,this.form,this.iIndex)}},watch:{vanfieldVal:function(t){this.form.value=t,this.form.rawvalue=t},rawvalue:function(t){this.form.value=t,this.form.rawvalue=t,this.vanfieldVal=t}}}),X=Q,Z=(o("e2b0"),Object(p["a"])(X,z,Y,!1,null,"2b7a9b2d",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type,staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{autosize:"",clearable:"",border:"",type:"textarea",readonly:"",label:t.form.cname},model:{value:t.rawvalue,callback:function(e){t.rawvalue=e},expression:"rawvalue"}})],1)],1)},ot=[],nt=(o("7db0"),{name:"HReadonly",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},rawvalue:function(){return this.form.rawvalue||this.form.value}},data:function(){return{showDialog:!1}},mounted:function(){this.setRadioValue()},methods:{setRadioValue:function(){var t=this,e=this.form.value;this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(o){var n=t.formItem.find((function(t){return t.name===o}));if(n){var a=n.diyParam.split("|"),r=n.ext_select.split("|");a[0]===t.form.name?(n.ext_select="".concat(e||a[0]),2===a.length?n.ext_select="".concat(e||a[0],"|").concat(r[1]):3===a.length&&(n.ext_select="".concat(e||a[0],"|").concat(r[1],"|").concat(r[2]))):a[1]===t.form.name?(n.ext_select="".concat(r[0],"|").concat(e||a[1]),3===a.length&&(n.ext_select="".concat(r[0],"|").concat(e||a[1],"|").concat(r[2]))):a[2]===t.form.name&&(n.ext_select="".concat(r[0],"|").concat(r[1],"|").concat(e||a[2]))}}))}},watch:{rawvalue:function(t){this.setRadioValue()}}}),at=nt,rt=(o("112f"),Object(p["a"])(at,et,ot,!1,null,"2e90788e",null)),it=rt.exports,st=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{readonly:"",clickable:"",placeholder:"--请选择--","right-icon":"arrow-down",required:t.required,label:t.form.cname,value:t.fieldValue},on:{click:t.HDropdownMenuClick}})],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"show-toolbar"},[o("p",[o("a",{on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),o("a",{on:{click:t.onConfirm}},[t._v("确认")])]),o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","show-action":""},on:{search:t.onSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[o("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1)]),o("van-picker",{ref:"vanPicker",attrs:{loading:t.loading,columns:t.columnsData}})],1)],1)},ct=[],lt=(o("fb6a"),o("a434"),o("2909"));function ut(){return window.config.itilHost}var dt={combox:ut()+"combox.do",savaEventHtmlTwo:ut()+"savaEventHtmlTwo.do",getUserByDepartName:ut()+"getUserByDepartName.do"};function ft(){var t=JSON.parse(window.localStorage.getItem("ITILInfo")),e=t&&t.user?"user_name="+t.user.username+"&login_id="+t.user.loginId+"&loginId="+t.user.loginId+"&user_id="+t.user.userId+"&userId="+t.user.userId+"&app_token="+t.token+"&":"";return e}function ht(t){return I["a"].prototype.postAxios(dt.combox,ft()+t)}var pt={name:"HDropdownMenu",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}},iIndex:{required:!1,type:Number}},computed:{fieldValue:function(){return this.form.rawvalue?this.form.rawvalue:this.form.value},param:function(){return this.form.ext_select},sourceVal:function(){return this.form.value},isappshowfield:function(){return"否"===this.form.isappshowfield},required:function(){return"是"===this.form.isrequired}},data:function(){return{value:"",showPicker:!1,columnsData:[],params:"",loading:!1,countData:[],searchVal:""}},mounted:function(){var t=this;this.loading=!0;var e=this.form.ext_select.split("|");e&&e.length>0&&"0"===e[0]?(this.columnsData=[],e.forEach((function(e){var o={id:e,text:e};t.columnsData.push(o)})),this.columnsData.splice(0,1),this.setRadioValue(),this.loading=!1):this.setRadioValue()},methods:{onConfirm:function(){var t=this;setTimeout((function(){var e=t.$refs.vanPicker.getValues()[0],o=JSON.parse(JSON.stringify(t.form));if(o.value=e.id,o.rawvalue=e.text,t.showPicker=!1,t.value=e,e.id){t.$emit("update:form",o);var n=o.ext_onselect||o.ext_onchange||o.onchange;t.$emit("HDropdownMenuChange",n,o,t.iIndex)}}),50)},onSearch:function(){var t=this;if(this.loading=!0,this.searchVal)this.columnsData=this.countData.filter((function(e){return e.text&&e.text.indexOf(t.searchVal)>-1}));else{var e=Object(lt["a"])(this.countData);this.columnsData=e.slice(0,30)}this.loading=!1},combox:function(){var t=this;if(this.form.ext_select){var e="",o=this.form.ext_select.split("|");e=1===o.length?"autoid=".concat(o[0],"&"):2===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&"):3===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&refer1=").concat(o[2],"&"):"autoid=".concat(this.param,"&"),ht(e).then((function(e){var o=e.data.data.filter((function(t){return""!==t.id}));o.length<=0?t.columnsData=[{id:"",text:"未查出数据"}]:(t.countData=o||[],t.columnsData=t.countData.slice(0,30)),t.setRadioValue()})).finally((function(){t.loading=!1}))}},setRadioValue:function(){var t=this,e=this.form.value;this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(o){var n=t.formItem.find((function(t){return t.name===o}));if(n){var a=n.diyParam&&n.diyParam.split("|"),r=n.ext_select&&n.ext_select.split("|");if(!a||!r)return;a[0]===t.form.name?(n.ext_select="".concat(e||a[0]),2===a.length?n.ext_select="".concat(e||a[0],"|").concat(r[1]):3===a.length&&(n.ext_select="".concat(e||a[0],"|").concat(r[1],"|").concat(r[2]))):a[1]===t.form.name?(n.ext_select="".concat(r[0],"|").concat(e||a[1]),3===a.length&&(n.ext_select="".concat(r[0],"|").concat(e||a[1],"|").concat(r[2]))):a[2]===t.form.name&&(n.ext_select="".concat(r[0],"|").concat(r[1],"|").concat(e||a[2]))}}))},HDropdownMenuClick:function(){this.showPicker=!0;var t=this.form.ext_select.split("|");t&&t.length>0&&"0"!==t[0]&&this.combox();var e=this.form.ext_onclick||this.form.onclick;this.$emit("HDropdownMenuClick",e,this.form,this.iIndex)}},watch:{param:function(t){},showPicker:function(t){t&&this.columnsData.length<=0&&(this.columnsData=[{text:this.msg,id:""}])},sourceVal:function(){var t=this;this.setRadioValue(),this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(e){var o=t.formItem.find((function(t){return t.name===e}));"是"!==o.isreadonly&&(o.rawvalue="",o.value="")}))}}},mt=pt,vt=(o("1013"),Object(p["a"])(mt,st,ct,!1,null,"70300e61",null)),xt=vt.exports,gt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{"right-icon":"arrow-down",placeholder:"--请选择--",readonly:"",clickable:"",label:t.form.cname,value:t.sourceVal,required:t.isrequired},on:{click:t.datetimePickerClick}})],1),o("van-action-sheet",{attrs:{round:!1},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("van-datetime-picker",{attrs:{type:"datetime","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.onConfirm,cancel:function(e){t.showPicker=!1}},model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}})],1)],1)},yt=[],kt=(o("25f0"),o("498a"),{name:"HDatetimePicker",props:{form:{required:!1,type:Object},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},sourceVal:function(){return this.form.value?this.form.value:""}},data:function(){return{showPicker:!1,minDate:new Date(1998,1,1),maxDate:new Date(2090,10,1),menuDate:""}},mounted:function(){var t=this.form.value.split(" "),e="".concat(t[0].split("-").join("/")," ").concat(t[1]);this.menuDate="undefined"!==e.toString().trim()?new Date(e):new Date},methods:{onConfirm:function(t){var e=t.getFullYear(),o=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),a="".concat(e,"-").concat(o,"-").concat(n),r=t.toTimeString().split(" ")[0],i=a+" "+r,s=JSON.parse(JSON.stringify(this.form));s.value=i,this.$emit("update:form",s);var c=s.ext_onselect||s.ext_onchange||s.onchange;this.$emit("HDatetimePickerOnchange",c,s,this.iIndex),this.showPicker=!1},datetimePickerClick:function(){this.showPicker=!0;var t=this.form.ext_onclick||this.form.onclick;this.$emit("HDatetimePickerClick",t,this.form,this.iIndex)}}}),bt=kt,wt=(o("d823"),Object(p["a"])(bt,gt,yt,!1,null,"7022145f",null)),_t=wt.exports,Dt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_name+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{"right-icon":"arrow-down",placeholder:"--请选择--",readonly:"",clickable:"",label:t.form.cname,value:t.sourceVal,required:t.isrequired},on:{click:t.datetimePickerClick}})],1),o("van-action-sheet",{attrs:{round:!1},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.onConfirm,cancel:function(e){t.showPicker=!1}},model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}})],1)],1)},Nt=[],Ct={name:"HDatePicker",props:{form:{required:!1,type:Object},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},sourceVal:function(){return this.form.value?this.form.value:""}},data:function(){return{showPicker:!1,minDate:new Date(1998,1,1),maxDate:new Date(2090,10,1),menuDate:""}},mounted:function(){var t=this.form.value,e="".concat(t.split("-").join("/"));this.menuDate=e.toString().trim()?new Date(e):new Date},methods:{onConfirm:function(t){var e=t.getFullYear(),o=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,n=t.getDate()<10?"0"+t.getDate():t.getDate(),a="".concat(e,"-").concat(o,"-").concat(n),r=JSON.parse(JSON.stringify(this.form));r.value=a,this.$emit("update:form",r);var i=r.ext_onselect||r.ext_onchange||r.onchange;this.$emit("HDatetimePickerOnchange",i,r,this.iIndex),this.showPicker=!1},datetimePickerClick:function(){this.showPicker=!0;var t=this.form.ext_onclick||this.form.onclick;this.$emit("HDatetimePickerClick",t,this.form,this.iIndex)}}},St=Ct,It=(o("e5d4"),Object(p["a"])(St,Dt,Nt,!1,null,"0d8a7922",null)),Lt=It.exports,Ot=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{clearable:"",border:"",type:"textarea",readonly:"是"===t.form.isreadonly,required:t.isrequired,label:t.form.cname},on:{input:t.textareaChenge,click:t.textareaClick},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}})],1)],1)},Ht=[],Pt={name:"HTextarea",props:{form:{required:!1,type:Object},iIndex:{required:!1,type:Number}},data:function(){return{}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired}},mounted:function(){},methods:{textareaChenge:function(){var t=this.form.ext_onselect||this.form.ext_onchange||this.form.onchange;this.$emit("HTextareaChenge",t,this.form,this.iIndex)},textareaClick:function(){var t=this.form.ext_onclick||this.form.onclick;this.$emit("HTextareaClick",t,this.form,this.iIndex)}},watch:{}},$t=Pt,Vt=(o("a84b7"),Object(p["a"])($t,Ot,Ht,!1,null,"b415aea8",null)),Ft=Vt.exports,Et=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],staticClass:"WangEditor",class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"===t.form.isreadonly||this.isFromRead?"":" inputAble")},[o("p",{staticClass:"title",class:t.isrequired,on:{click:t.getValue}},[o("span",{staticStyle:{"padding-left":"3px"}},[t._v(t._s(t.form.cname))])]),o("div",{class:t.isreadonly+"ckeditorContent",attrs:{id:t.form.id}})])},Rt=[],qt=o("1a0b"),At=o.n(qt),Tt=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","list","justify","quote","table","undo","redo"],Bt={name:"HEditor",props:{form:{required:!1,type:Object},isFromRead:{required:!1,type:Boolean},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"!==this.form.isrequired||this.isFromRead?"":"required"},isreadonly:function(){return this.form.isreadonly},sourceVal:function(){return this.form.value},scriptSetValue:function(){return this.form.scriptSetValue}},data:function(){return{editor:null,editorId:""}},mounted:function(){this.createEditor()},methods:{createEditor:function(){var t=this;if(this.editor=new At.a(document.getElementById(this.form.id)),this.editor.customConfig.menus=JSON.parse(JSON.stringify(Tt)),(this.isFromRead||"是"===this.form.isreadonly)&&(this.editor.customConfig.menus=[]),!this.isFromRead&&"是"!==this.form.isreadonly){this.editor.customConfig.onchange=function(e){var o=JSON.parse(JSON.stringify(t.form));o.value=e,t.$emit("update:form",o)};var e=this;this.editor.customConfig.onblur=function(t){var o=JSON.parse(JSON.stringify(e.form));o.value=t,e.$emit("update:form",o)}}this.editor.create(),this.editor.txt.html(this.form.value),(this.isFromRead||"是"===this.form.isreadonly)&&this.editor.$textElem.attr("contenteditable",!1)},getValue:function(){this.editor.txt.html()},updateValue:function(){console.log("更新富文本框内容"),this.editor.customConfig.onchange&&this.editor.customConfig.onchange()}},watch:{sourceVal:function(t){var e=this.form.ext_onselect||this.form.ext_onchange||this.form.onchange;this.$emit("HEditorOnchange",e,this.form,this.iIndex)},scriptSetValue:function(t){this.editor.txt.html(t)},isreadonly:function(){this.createEditor()}}},Mt=Bt,jt=(o("1483"),o("0ce3"),Object(p["a"])(Mt,Et,Rt,!1,null,"2e5bb945",null)),Ut=jt.exports,Kt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"===t.form.isreadonly||this.isFromRead?"":" inputAble"),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{clearable:"",readonly:"",border:"",required:t.isrequired,label:t.form.cname},on:{click:t.uploaderClick}},[o("van-uploader",{attrs:{slot:"input","preview-full-image":"","before-read":t.beforeRead,disabled:this.isFromRead||"是"===this.form.isreadonly,deletable:!(this.isFromRead||"是"===this.form.isreadonly),"after-read":t.afterRead,"before-delete":t.beforeRemove,oversize:t.overSize},slot:"input",model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1),o("div",{staticClass:"attachField"},t._l(t.form.rawvalue,(function(e,n){return o("div",{key:n},[o("span",[t._v(t._s(e.attachname))])])})),0)],1)],1)},Jt=[],Gt=(o("c740"),o("8a79"),{name:"HUploader",props:{form:{required:!1,type:Object},isFromRead:{required:!1,type:Boolean},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired}},data:function(){return{fileList:[],newFile:[]}},mounted:function(){var t=[],e=this.$store.getters.getUser;null!=this.form.rawvalue&&""!==this.form.rawvalue||(this.form.rawvalue=[]),this.form.rawvalue.forEach((function(o){var n=o.attachname.toLocaleLowerCase();if(n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".gif")){var a="".concat(window.globalHost.baseURL,"/").concat(o.url,"&login_id=").concat(e.loginId,"&app_token=").concat(e.token);t.push({attachid:o.attachid,name:o.attachname,url:a,isImage:!0})}})),this.fileList=t},methods:{beforeRead:function(t){var e=this;return new Promise((function(o,n){var a=new FormData,r={indexId:e.form.value};a.append("File",t),Object(S["b"])(a,r).then((function(a){if(200===a.status){t.attachid=a.data.attachId;var r={attachid:a.data.attachId,attachname:a.data.attachName,url:"appapi/attachDownload.do?attachId="+a.data.attachId},i=JSON.parse(JSON.stringify(e.form));i.value=a.data.indexId,null!=e.form.rawvalue&&""!==e.form.rawvalue||(i.rawvalue=[]),i.rawvalue.push(r),e.$emit("update:form",i),o()}else e.$toast.fail({message:a.message,duration:3e3}),n(new TypeError(a))})).catch((function(t){console.error(t),e.$toast.fail({message:"上传失败",duration:1e3}),n(new TypeError(t))})).finally((function(){}))}))},overSize:function(){this.$toast.fail({message:"文件过大，请不要超过20M。",duration:1e3})},afterRead:function(){},beforeRemove:function(t,e){var o=this;return new Promise((function(e,n){o.$dialog.confirm({title:"删除提示",message:"删除了将不可恢复，确定要删除此附件吗?"}).then((function(){var a=t.attachid||t.file.attachid,r="attachId="+a+"&";Object(S["a"])(r).then((function(t){if(200===t.status){var r=JSON.parse(JSON.stringify(o.form));r.rawvalue.splice(r.rawvalue.findIndex((function(t){return t.attachid===a})),1),o.$emit("update:form",r),o.$toast.success("文件删除成功"),e()}else o.$toast.fail("文件删除失败"),n(new TypeError(t))})).catch((function(t){console.error(t),o.$toast.fail("文件删除失败"),n(new TypeError(t))})).finally((function(){}))})).catch((function(){n(new TypeError)}))}))},downloadFile:function(t){var e=!0;if(e){this.$toast({message:"下载中...",duration:1e3});var o=this.$store.getters.getUser,n="".concat(window.globalHost.baseURL,"/").concat(t.url,"&login_id=").concat(o.loginId,"&app_token=").concat(o.token),a=document.createElement("a");a.setAttribute("href",n),a.click()}else this.$toast.fail({message:"下载失败，当前附件不存在",duration:1e3})},uploaderClick:function(){var t=this.form.ext_onclick||this.form.onclick;this.$emit("HUploaderClick",t,this.form,this.iIndex)}},watch:{}}),Wt=Gt,zt=(o("33e8"),Object(p["a"])(Wt,Kt,Jt,!1,null,"c9904634",null)),Yt=zt.exports,Qt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"===t.form.isreadonly||this.isFromRead?"":" inputAble"),staticStyle:{padding:"0px !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{clearable:"",readonly:"",border:"",required:t.isrequired,label:t.form.cname}},[o("van-checkbox-group",{staticClass:"checkboxGroup",attrs:{slot:"input",disabled:"是"===t.form.isreadonly||this.isFromRead},on:{change:t.changeCheckbox},slot:"input",model:{value:t.checkboxVal,callback:function(e){t.checkboxVal=e},expression:"checkboxVal"}},t._l(t.list,(function(e,n){return o("van-checkbox",{key:n,attrs:{name:e},on:{click:t.checkboxOnClick}},[t._v(" "+t._s(e.text)+" ")])})),1)],1)],1)],1)},Xt=[],Zt={name:"HCheckbox",props:{form:{required:!1,type:Object},isFromRead:{required:!1,type:Boolean},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired&&!this.isFromRead},sourceVal:function(){return this.form.value}},data:function(){return{checkboxVal:[],list:[]}},mounted:function(){var t=this,e=this.form.ext_select.split("|");e.length>0&&"0"===e[0]?(this.list=[],e.forEach((function(e){var o={id:e,text:e};t.list.push(o)})),this.list.splice(0,1),this.setCheckBoxValue()):this.combox()},methods:{changeCheckbox:function(){var t=this.form,e=this.checkboxVal.map((function(t){return t.id})).join(",");t.value=e,this.$emit("update:form",t)},combox:function(){var t=this,e="",o=this.form.ext_select.split("|");e=o.length<=1?"autoid=".concat(o[0],"&"):2===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&"):3===o.length?"autoid=".concat(o[0],"&Refer1=").concat(o[2],"&"):"autoid=".concat(this.param,"&"),ht(e).then((function(e){t.list=e.data.data,t.setCheckBoxValue()}))},setCheckBoxValue:function(){var t=this,e=this.form.value.split(",");e=e.filter((function(t){return""!==t})),this.checkboxVal=[],e.forEach((function(e){var o=t.list.find((function(t){return e===t.id}));if(o)t.checkboxVal.push(o);else{var n={id:e,text:e};t.list.push(n),t.checkboxVal.push(n)}}))},checkboxOnClick:function(){var t=this.form.ext_onclick||this.form.onclick;this.$emit("HCheckboxOnClick",t,this.form,this.iIndex)}},watch:{sourceVal:function(t){this.setCheckBoxValue();var e=this.form.ext_onselect||this.form.ext_onchange||this.form.onchange;this.$emit("HCheckboxOnchange",e,this.form,this.iIndex)}}},te=Zt,ee=(o("d37a"),Object(p["a"])(te,Qt,Xt,!1,null,"235d6a96",null)),oe=ee.exports,ne=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"===t.form.isreadonly||this.isFromRead?"":" inputAble"),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{clearable:"",readonly:"",border:"",required:t.isrequired,label:t.form.cname}},[o("van-radio-group",{staticClass:"radioGroup",attrs:{slot:"input",disabled:"是"===t.form.isreadonly||this.isFromRead},on:{change:t.changeCheckbox},slot:"input",model:{value:t.checkboxVal,callback:function(e){t.checkboxVal=e},expression:"checkboxVal"}},t._l(t.list,(function(e,n){return o("van-radio",{key:n,attrs:{name:e},on:{click:t.radioClick}},[t._v(" "+t._s(e.text)+" ")])})),1)],1)],1)],1)},ae=[],re={name:"HRadio",props:{form:{required:!1,type:Object},isFromRead:{required:!1,type:Boolean},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired&&!this.isFromRead},sourceVal:function(){return this.form.value}},data:function(){return{checkboxVal:{},list:[]}},mounted:function(){var t=this,e=this.form.ext_select.split("|");e.length>0&&"0"===e[0]?(this.list=[],e.forEach((function(e){var o={id:e,text:e};t.list.push(o)})),this.list.splice(0,1),this.setRadioValue()):this.combox()},methods:{changeCheckbox:function(t){var e=JSON.parse(JSON.stringify(this.form));e.value=this.checkboxVal.id,this.$emit("update:form",e);var o=e.ext_onselect||e.ext_onchange||e.onchange;this.$emit("HRadioOnchange",o,e,this.iIndex)},combox:function(){var t=this;if(this.form.ext_select){var e="",o=this.form.ext_select.split("|");e=o.length<=1?"autoid=".concat(o[0],"&"):2===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&"):3===o.length?"autoid=".concat(o[0],"&Refer1=").concat(o[2],"&"):"autoid=".concat(this.param,"&"),ht(e).then((function(e){t.list=e.data.data,t.setRadioValue()}))}},setRadioValue:function(){var t=this.form.value;if(t){var e=this.list.find((function(e){return e.id===t}));if(e)this.checkboxVal=e;else{var o={id:t,text:t};this.list.push(o),this.checkboxVal=o}}},radioClick:function(){var t=this.form.ext_onclick||this.form.onclick;this.$emit("HRadioClick",t,this.form,this.iIndex)}},watch:{sourceVal:function(){this.setRadioValue()}}},ie=re,se=(o("b48a"),Object(p["a"])(ie,ne,ae,!1,null,"6b49e730",null)),ce=se.exports,le=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{readonly:"",clickable:"",placeholder:"--请选择--","right-icon":"arrow-down",required:t.isrequired,label:t.form.cname,value:t.form.rawvalue},on:{click:t.selectCheckboxClick}})],1),o("van-popup",{attrs:{position:"bottom"},on:{close:t.popupClose},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"show-toolbar"},[o("p",[o("a",{on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),o("a",{on:{click:t.onConfirm}},[t._v("确认")])]),o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","show-action":""},on:{search:t.onSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[o("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1)]),t.loading?o("van-loading",{staticClass:"loading",attrs:{type:"spinner",color:"#1989fa"}}):t._e(),o("van-checkbox-group",{model:{value:t.checkBoxVal,callback:function(e){t.checkBoxVal=e},expression:"checkBoxVal"}},[o("van-cell-group",t._l(t.columnsData,(function(e,n){return o("van-cell",{key:n,attrs:{clickable:"",title:e.text},on:{click:function(e){return t.toggle(n)}}},[o("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{slot:"right-icon",name:e},slot:"right-icon"})],1)})),1)],1)],1)],1)},ue=[],de={name:"HSelectCheckbox",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},param:function(){return this.form.ext_select},sourceVal:function(){return this.form.value}},data:function(){return{showPicker:!1,columnsData:[],loading:!1,checkBoxVal:[],countData:[],searchVal:""}},mounted:function(){var t=this;this.loading=!0;var e=this.form.ext_select.split("|");e&&e.length>0&&"0"===e[0]?(this.countData=[],e.forEach((function(e){var o={id:e,text:e};t.countData.push(o)})),this.countData.splice(0,1),this.columnsData=this.countData.slice(0,30),this.setRadioValue(),this.loading=!1):this.combox()},methods:{onConfirm:function(){var t=JSON.parse(JSON.stringify(this.form)),e=this.checkBoxVal.filter((function(t){return""!==t.id}));t.value=e.map((function(t){return t.id})).join(","),t.rawvalue=e.map((function(t){return t.text})).join(","),this.$emit("update:form",t);var o=t.ext_onselect||t.ext_onchange||t.onchange;this.$emit("HSelectCheckboxOnchange",o,t,this.iIndex),this.showPicker=!1},combox:function(){var t=this;this.loading=!0;var e=this.form.ext_select;if(e){var o="",n=e.split("|");o=n.length<=1?"autoid=".concat(n[0],"&"):2===n.length?"autoid=".concat(n[0],"&refer=").concat(n[1],"&"):3===n.length?"autoid=".concat(n[0],"&refer=").concat(n[1],"&refer1=").concat(n[2],"&"):"autoid=".concat(this.param,"&"),ht(o).then((function(e){t.countData=e.data.data||[],t.columnsData=t.countData.slice(0,30),t.setRadioValue()})).finally((function(){t.loading=!1}))}},onSearch:function(){var t=this;if(this.loading=!0,this.searchVal)this.columnsData=this.countData.filter((function(e){return e.text&&e.text.indexOf(t.searchVal)>-1}));else{var e=Object(lt["a"])(this.countData);this.columnsData=e.slice(0,30)}this.loading=!1},toggle:function(t){this.$refs.checkboxes[t].toggle()},setRadioValue:function(){var t=this,e=this.form.value;this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(o){var n=t.formItem.find((function(t){return t.name===o}));if(n){var a=n.diyParam&&n.diyParam.split("|"),r=n.ext_select&&n.ext_select.split("|");if(!a||!r)return;a[0].split("_")[0]===t.form.name?(n.ext_select="".concat(e||a[0]),2===a.length?n.ext_select="".concat(e||a[0],"|").concat(r[1]):3===a.length&&(n.ext_select="".concat(e||a[0],"|").concat(r[1],"|").concat(r[2]))):a[1].split("_")[0]===t.form.name?(n.ext_select="".concat(r[0],"|").concat(e||a[1]),3===a.length&&(n.ext_select="".concat(r[0],"|").concat(e||a[1],"|").concat(r[2]))):a[2].split("_")[0]===t.form.name&&(n.ext_select="".concat(r[0],"|").concat(r[1],"|").concat(e||a[2]))}}));var o=this.form.value.split(",");o=o.filter((function(t){return""!==t})),this.checkBoxVal=[],o.forEach((function(e){var o=t.countData.find((function(t){return e===t.id}));if(o)t.checkBoxVal.push(o);else{var n={id:e,text:e,value:e};t.countData.push(n),t.checkBoxVal.push(n)}})),this.form.rawvalue=this.checkBoxVal.map((function(t){return t.text})).join(",")},selectCheckboxClick:function(){this.showPicker=!0;var t=this.form.ext_onclick||this.form.onclick;this.$emit("HSelectCheckboxClick",t,this.form,this.iIndex)},popupClose:function(){var t=this.form.ext_onblur||this.form.onblur;this.$emit("HCheckboxOnblur",t,this.form,this.iIndex)}},watch:{param:function(t){this.combox()},sourceVal:function(t){var e=this;this.setRadioValue(),this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(t){var o=e.formItem.find((function(e){return e.name===t}));o.rawvalue="",o.value=""}))}}},fe=de,he=(o("8088"),Object(p["a"])(fe,le,ue,!1,null,"4da0ef19",null)),pe=he.exports,me=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"padding-bottom":"60px"}},[t.isFromRead?[t._l(t.HChildTableData,(function(e,n){return[o("div",{key:n+t.uuid(),staticClass:"divisionLine"}),o("div",{key:e.uuid,class:"container subFormId="+e.uuid},[o("div",{staticClass:"title"},[t._v(t._s(e.name))]),o("van-cell-group",{staticClass:"vanCellGroup",attrs:{"abel-align":"left"}},[t._l(e.list,(function(e,n){return[o("van-divider",{key:n+t.uuid(),staticClass:"vanDivider",attrs:{"content-position":"left"}},[t._v(t._s(n+1))]),t._l(e,(function(n,a){return["ckeditor"==n.ext_type?o("HEditor",{key:n.id,attrs:{form:e[a],isFromRead:!0},on:{"update:form":function(o){return t.$set(e,a,o)}}}):"checkbox"==n.ext_type?o("HCheckbox",{key:n.id,attrs:{form:e[a],isFromRead:!0},on:{"update:form":function(o){return t.$set(e,a,o)}}}):"radio"==n.ext_type?o("HRadio",{key:n.id,attrs:{form:e[a],isFromRead:!0},on:{"update:form":function(o){return t.$set(e,a,o)}}}):"attachFile"==n.ext_type?o("HUploader",{key:n.id,attrs:{form:e[a],isFromRead:!0},on:{"update:form":function(o){return t.$set(e,a,o)}}}):o("HReadonly",{directives:[{name:"show",rawName:"v-show",value:"hidden"!==n.ext_type,expression:"list.ext_type !== 'hidden'"}],key:n.id,attrs:{form:e[a]},on:{"update:form":function(o){return t.$set(e,a,o)}}})]}))]}))],2)],1)]}))]:[t._l(t.HChildTableData,(function(e,n){return[o("div",{key:n,staticClass:"divisionLine"}),o("div",{key:e.uuid,class:"container subFormId="+e.uuid},[o("div",{staticClass:"title"},[t._v(t._s(e.name)+" "),o("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.button.addBtn,expression:"item.button.addBtn"}],staticStyle:{float:"right",right:"5vw"},attrs:{name:"add-o"},on:{click:function(o){return t.addGroup(e)}}})],1),o("van-cell-group",{staticClass:"vanCellGroup",attrs:{"abel-align":"left"}},[t._l(e.list,(function(a,r){return[o("van-divider",{key:r+n,staticClass:"vanDivider",attrs:{"content-position":"left"}},[t._v(t._s(r+1)+" "),o("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.button.delBtn,expression:"item.button.delBtn"}],staticStyle:{position:"absolute",right:"5vw"},attrs:{name:"close"},on:{click:function(o){return t.deleteGroup(e.uuid,r)}}})],1),t._l(a,(function(e,n){return["text"==e.ext_type?o("HText",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HTextChenge:t.executeMethod,HTextClick:t.executeMethod}}):t._e(),"multiText"==e.ext_type?o("HMultiText",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HMultiTextChange:t.executeMethod,HMultiTextClick:t.executeMethod}}):t._e(),"HReadonly"==e.ext_type?o("HReadonly",{key:e.id,attrs:{form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)}}}):"singleSelect"==e.ext_type?o("HDropdownMenu",{key:e.id,attrs:{iIndex:r,form:a[n],formItem:a},on:{"update:form":function(e){return t.$set(a,n,e)},HDropdownMenuChange:t.executeMethod,HDropdownMenuClick:t.executeMethod}}):"selectOrInput"==e.ext_type?o("HSelectOrInput",{key:e.id,attrs:{iIndex:r,form:a[n],formItem:a},on:{"update:form":function(e){return t.$set(a,n,e)},HSelectOrInputChenge:t.executeMethod,HSelectOrInputClick:t.executeMethod}}):"datetime"==e.ext_type?o("HDatetimePicker",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HDatetimePickerOnchange:t.executeMethod,HDatetimePickerClick:t.executeMethod}}):"date"==e.ext_type?o("HDatePicker",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HDatetimePickerOnchange:t.executeMethod,HDatetimePickerClick:t.executeMethod}}):"textarea"==e.ext_type?o("HTextarea",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HTextareaChenge:t.executeMethod,HTextareaClick:t.executeMethod}}):"ckeditor"==e.ext_type?o("HEditor",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HEditorOnchange:t.executeMethod}}):"attachFile"==e.ext_type?o("HUploader",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HUploaderClick:t.executeMethod}}):"checkbox"==e.ext_type?o("HCheckbox",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HCheckboxOnchange:t.executeMethod,HCheckboxOnClick:t.executeMethod}}):"radio"==e.ext_type?o("HRadio",{key:e.id,attrs:{iIndex:r,form:a[n]},on:{"update:form":function(e){return t.$set(a,n,e)},HRadioOnchange:t.executeMethod,HRadioClick:t.executeMethod}}):"multiSelect"==e.ext_type?o("HSelectCheckbox",{key:e.id,attrs:{iIndex:r,form:a[n],formItem:a},on:{"update:form":function(e){return t.$set(a,n,e)},HSelectCheckboxOnchange:t.executeMethod,HCheckboxOnblur:t.executeMethod,HSelectCheckboxClick:t.executeMethod}}):"multiSelectAndLevel"==e.ext_type?o("HMultiselectAndLevel",{key:e.id,attrs:{iIndex:r,form:a[n],formItem:a},on:{"update:form":function(e){return t.$set(a,n,e)},HMultiselectAndLevelOnchange:t.executeMethod,HMultiselectAndLevelClick:t.executeMethod}}):t._e()]}))]}))],2)],1)]}))]],2)},ve=[],xe=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{autosize:"",clearable:"",border:"",type:"textarea",readonly:"",required:t.isrequired,label:t.form.cname},on:{input:t.inputChange,click:t.showDialogMe},model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}})],1),o("van-dialog",{attrs:{title:"请输入内容","show-cancel-button":""},on:{confirm:t.dialogOk},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[o("van-field",{attrs:{rows:"10",placeholder:"请输入内容.....",clearable:"",border:"",type:"textarea"},model:{value:t.form.dialogVal,callback:function(e){t.$set(t.form,"dialogVal",e)},expression:"form.dialogVal"}})],1)],1)},ge=[],ye={name:"HMultiText",props:{form:{required:!1,type:Object},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},dialogVal:function(){return this.form.dialogVal}},data:function(){return{APP_USER:this.$store.getters.getUser,showDialog:!1}},mounted:function(){},methods:{dialogOk:function(){var t="";t=this.form.dialogVal?"".concat(this.form.oldValue,"\n[").concat(this.APP_USER["username"],"][").concat(U(),"]\n").concat(this.form.dialogVal,"\n-----------------------\n"):this.form.oldValue,this.form.value=t,this.form.rawvalue=t},showDialogMe:function(){this.showDialog=!0;var t=this.form.ext_onclick||this.form.onclick;this.$emit("HMultiTextClick",t,this.form,this.iIndex)},inputChange:function(){var t=this.form.ext_onselect||this.form.ext_onchange||this.form.onchange;this.$emit("HMultiTextChange",t,this.form,this.iIndex)}},watch:{dialogVal:function(t){var e="";e=t?"".concat(this.form.oldValue,"\n[").concat(this.APP_USER["username"],"][").concat(U(),"]\n").concat(t,"\n-----------------------\n"):this.form.oldValue,this.form.value=e,this.form.rawvalue=e}}},ke=ye,be=(o("4f03"),Object(p["a"])(ke,xe,ge,!1,null,"505c2713",null)),we=be.exports,_e=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{clickable:"",placeholder:"--请选择--","right-icon":"arrow-down",required:t.isrequired,label:t.form.cname,value:t.fieldValue},on:{input:t.selectOrInputChenge,click:t.selectOrInputClick}},[o("van-icon",{attrs:{slot:"right-icon",name:"arrow-down"},on:{click:function(e){t.showPicker=!0}},slot:"right-icon"})],1)],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("van-picker",{attrs:{loading:t.loading,"show-toolbar":"",columns:t.columnsData},on:{cancel:function(e){t.showPicker=!1},confirm:t.onConfirm}})],1)],1)},De=[],Ne={name:"HSelectOrInput",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},fieldValue:function(){return this.form.rawvalue?this.form.rawvalue:this.form.value},param:function(){return this.form.ext_select},sourceVal:function(){return this.form.value}},data:function(){return{value:"",showPicker:!1,columnsData:[],params:"",loading:!1}},mounted:function(){var t=this;this.loading=!0;var e=this.form.ext_select.split("|");e&&e.length>0&&"0"===e[0]?(this.columnsData=[],e.forEach((function(e){var o={id:e,text:e};t.columnsData.push(o)})),this.columnsData.splice(0,1),this.loading=!1):this.combox()},methods:{onConfirm:function(t){if(t.id){var e=JSON.parse(JSON.stringify(this.form));e.value=t.id,e.rawvalue=t.text,this.showPicker=!1,this.value=t,this.$emit("update:form",e)}},combox:function(){var t=this;if(this.form.ext_select){var e="",o=this.form.ext_select.split("|");e=1===o.length?"autoid=".concat(o[0],"&"):2===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&"):3===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&refer1=").concat(o[2],"&"):"autoid=".concat(this.param,"&"),ht(e).then((function(e){t.columnsData=e.data.data.filter((function(t){return""!==t.id}))})).finally((function(){t.loading=!1}))}},selectOrInputChenge:function(t){if(t){var e=JSON.parse(JSON.stringify(this.form));e.value=t,e.rawvalue=t,this.showPicker=!1,this.value=t,this.$emit("update:form",e);var o=e.ext_onselect||e.ext_onchange||e.onchange;this.$emit("HSelectOrInputChenge",o,e,this.iIndex)}},selectOrInputClick:function(){var t=this.form.ext_onclick||this.form.onclick;this.$emit("HSelectOrInputClick",t,this.form,this.iIndex)}},watch:{param:function(t){this.combox()},showPicker:function(t){t&&this.columnsData.length<=0&&(this.columnsData=[{text:this.msg,id:""}])},sourceVal:function(t){var e=this;this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(o){var n=e.formItem.find((function(t){return t.name===o}));if(n){var a=n.ext_select.split("|");a[0]===e.form.name?(n.ext_select="".concat(t),2===a.length?n.ext_select="".concat(t,"|").concat(a[1]):3===a.length&&(n.ext_select="".concat(t,"|").concat(a[1],"|").concat(a[2]))):a[1]===e.form.name?(n.ext_select="".concat(a[0],"|").concat(t),3===a.length&&(n.ext_select="".concat(a[0],"|").concat(t,"|").concat(a[2]))):a[2]===e.form.name&&(n.ext_select="".concat(a[0],"|").concat(a[1],"|").concat(t))}}))}}},Ce=Ne,Se=(o("0c34"),Object(p["a"])(Ce,_e,De,!1,null,"f2261df0",null)),Ie=Se.exports,Le=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":"")},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none",padding:"2.5vw 0"},attrs:{"abel-align":"left"}},[o("van-field",{staticStyle:{padding:"0 0"},attrs:{value:t.vanFieldVal,readonly:"",clickable:"",placeholder:"--请选择--","right-icon":"arrow-down",label:t.form.cname,required:t.isrequired},on:{click:t.vanFieldClick}})],1),o("van-popup",{staticStyle:{width:"70%",height:"100%"},attrs:{position:"right"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"Tree"},[o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","right-icon":""},on:{search:t.onSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),o("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticStyle:{"text-align":"center"},attrs:{type:"spinner",color:"#1989fa"}}),o("a-tree",{staticStyle:{"margin-bottom":"17vw"},attrs:{checkable:"",expandedKeys:t.expandedKeys,autoExpandParent:t.autoExpandParent,treeData:t.treeData},on:{expand:t.onExpand},scopedSlots:t._u([{key:"title",fn:function(e){var n=e.title;return[n.indexOf(t.searchValue)>-1?o("span",[t._v(" "+t._s(n.substr(0,n.indexOf(t.searchValue)))+" "),o("span",{staticStyle:{color:"#f50"}},[t._v(t._s(t.searchValue))]),t._v(" "+t._s(n.substr(n.indexOf(t.searchValue)+t.searchValue.length))+" ")]):o("span",[t._v(t._s(n))])]}}]),model:{value:t.checkedKeys,callback:function(e){t.checkedKeys=e},expression:"checkedKeys"}})],1)])],1)},Oe=[],He=(o("45fc"),o("841c"),[]),Pe=function t(e,o){var n;return o.forEach((function(o){o.children&&(o.children.some((function(t){return t.key===e}))?n=o.key:t(e,o.children)&&(n=t(e,o.children)))})),n},$e={name:"HMultiselectAndLevel",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},vanFieldVal:function(){return this.checkedKeys.map((function(t){return JSON.parse(t).text})).join(",")},sourceVal:function(){return this.form.value}},data:function(){return{search:"",showPicker:!1,loading:!1,searchValue:"",treeData:[],autoExpandParent:!0,checkedKeys:[],expandedKeys:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.comboxTreeAll()}))},methods:{onSearch:function(){var t=this,e=this.search,o=He.map((function(o){return o.title.indexOf(e)>-1?Pe(o.key,t.treeData):null})).filter((function(t){return t}));Object.assign(this,{expandedKeys:o,searchValue:e,autoExpandParent:!0})},onExpand:function(t){this.expandedKeys=t,this.autoExpandParent=!1},comboxTreeAll:function(){var t=this;this.loading=!0;var e="",o=this.form.ext_select.split("|");e=o.length<=1?"autoid=".concat(o[0],"&"):2===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&"):3===o.length?"autoid=".concat(o[0],"&Refer1=").concat(o[2],"&"):"autoid=".concat(this.param,"&"),Object(S["c"])(e).then((function(o){o.data.selectdata?(t.treeData=t.tranfsData(o.data.selectdata),t.generateList(t.treeData),t.setRadioValue()):console.error("树的下拉没有找到数据，请检查下拉的第二条SQL，"+e)})).catch((function(t){console.error(t)})).finally((function(){t.loading=!1}))},tranfsData:function(t){var e=this,o=[];return t.forEach((function(t){var n={};n.title=t.text,n.name=t.text,n.key=JSON.stringify({value:t.value,text:t.text,isParent:!1}),n.scopedSlots={title:"title"},t.childs.length>0&&(n.children=e.tranfsData(t.childs),n.key=JSON.stringify({value:t.value,text:t.text,isParent:!0})),o.push(n)})),o},generateList:function(t){var e=this;t.forEach((function(t){var o=t.key;He.push({key:o,title:t.title}),t.children&&e.generateList(t.children,t.key)}))},setRadioValue:function(){var t=this,e=this.form.value;this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(o){var n=t.formItem.find((function(t){return t.name===o}));if(n){var a=n.diyParam&&n.diyParam.split("|"),r=n.ext_select&&n.ext_select.split("|");if(!a||!r)return;a[0].split("_")[0]===t.form.name?(n.ext_select="".concat(e||a[0]),2===a.length?n.ext_select="".concat(e||a[0],"|").concat(r[1]):3===a.length&&(n.ext_select="".concat(e||a[0],"|").concat(r[1],"|").concat(r[2]))):a[1].split("_")[0]===t.form.name?(n.ext_select="".concat(r[0],"|").concat(e||a[1]),3===a.length&&(n.ext_select="".concat(r[0],"|").concat(e||a[1],"|").concat(r[2]))):a[2].split("_")[0]===t.form.name&&(n.ext_select="".concat(r[0],"|").concat(r[1],"|").concat(e||a[2]))}}));var o=this.form.value.split(",");o=o.filter((function(t){return""!==t})),this.checkedKeys=[],o.forEach((function(e){t.queryTree(t.treeData,e)}))},queryTree:function(t,e){var o=this;t.forEach((function(t){JSON.parse(t.key).value===e&&o.checkedKeys.push(t.key),t.children&&t.children.length>0&&o.queryTree(t.children,e)}))},vanFieldClick:function(){this.showPicker=!0,this.comboxTreeAll();var t=this.form.ext_onclick||this.form.onclick;this.$emit("HMultiselectAndLevelClick",t,this.form,this.iIndex)}},watch:{checkedKeys:function(t){var e=JSON.parse(JSON.stringify(this.form));t=t.filter((function(t){return!JSON.parse(t).isParent})),e.value=t.map((function(t){return JSON.parse(t).value})).join(","),e.rawvalue=t.map((function(t){return JSON.parse(t).text})).join(","),this.$emit("update:form",e)},sourceVal:function(){var t=this;this.setRadioValue();var e=this.form.ext_onselect||this.form.ext_onchange||this.form.onchange;this.$emit("HMultiselectAndLevelOnchange",e,this.form,this.iIndex),this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(e){var o=t.formItem.find((function(t){return t.name===e}));o.rawvalue="",o.value=""}))}}},Ve=$e,Fe=(o("2e83"),Object(p["a"])(Ve,Le,Oe,!1,null,"5187aad0",null)),Ee=Fe.exports,Re=o("2f62"),qe={name:"HChildTable",props:{HChildTableData:{required:!0,type:Array}},computed:Object(s["a"])({},Object(Re["c"])("form",{isFromRead:"getIsFromRead"})),data:function(){return{uuid:J.a,dataList:[]}},mounted:function(){},methods:{executeMethod:function(t,e,o){if(t){var n="app_"+t.split("(")[0];e.index=o;try{window[n]&&window[n](e)}catch(a){console.error("请检查方法:"+t),console.error("出错信息:"+a)}}},addGroup:function(t){var e=t.subinfo.map((function(t){return t.ext_field})),o=t.uuid,n={};e.forEach((function(t){n[t]=""})),window.app_addSubForm(o,n),this.$toast({message:"添加成功，当前有"+t.list.length+"组数据",duration:1500})},deleteGroup:function(t,e){this.$dialog.confirm({title:"删除提示!",message:"确定删除这组数据吗?"}).then((function(){window.app_deleteSubForm(t,e)})).catch((function(){}))}},components:{HDropdownMenu:xt,HEditor:Ut,HSelectCheckbox:pe,HDatetimePicker:_t,HDatePicker:Lt,HUploader:Yt,HText:tt,HReadonly:it,HMultiText:we,HSelectOrInput:Ie,HCheckbox:oe,HRadio:ce,HTextarea:Ft,HMultiselectAndLevel:Ee}},Ae=qe,Te=(o("713c"),Object(p["a"])(Ae,me,ve,!1,null,"44368eb8",null)),Be=Te.exports,Me=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":"")},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none",padding:"2.5vw 0"},attrs:{"abel-align":"left"}},[o("van-field",{staticStyle:{padding:"0 0"},attrs:{value:t.vanFieldVal,readonly:"",clickable:"",placeholder:"--请选择--","right-icon":"arrow-down",label:t.form.cname,required:t.isrequired},on:{click:t.vanFieldClick}})],1),o("van-popup",{staticStyle:{width:"70%",height:"100%"},attrs:{position:"right"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"Tree"},[o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","right-icon":""},on:{search:t.onSearch},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),o("van-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticStyle:{"text-align":"center"},attrs:{type:"spinner",color:"#1989fa"}}),o("a-tree",{staticStyle:{"margin-bottom":"17vw"},attrs:{checkStrictly:"",expandedKeys:t.expandedKeys,autoExpandParent:t.autoExpandParent,treeData:t.treeData},on:{expand:t.onExpand,select:t.onSelect},scopedSlots:t._u([{key:"title",fn:function(e){var n=e.title;return[n.indexOf(t.searchValue)>-1?o("span",[t._v(" "+t._s(n.substr(0,n.indexOf(t.searchValue)))+" "),o("span",{staticStyle:{color:"#f50"}},[t._v(t._s(t.searchValue))]),t._v(" "+t._s(n.substr(n.indexOf(t.searchValue)+t.searchValue.length))+" ")]):o("span",[t._v(t._s(n))])]}}]),model:{value:t.checkedKeys,callback:function(e){t.checkedKeys=e},expression:"checkedKeys"}})],1)])],1)},je=[],Ue=[],Ke=function t(e,o){var n;return o.forEach((function(o){o.children&&(o.children.some((function(t){return t.key===e}))?n=o.key:t(e,o.children)&&(n=t(e,o.children)))})),n},Je={name:"HMultilevel",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}},iIndex:{required:!1,type:Number}},computed:{isappshowfield:function(){return"否"===this.form.isappshowfield},isrequired:function(){return"是"===this.form.isrequired},vanFieldVal:function(){var t="";return"multilevel"===this.form.ext_type&&(t=this.checkedKeys.filter((function(t){return!JSON.parse(t).isParent}))),t.map((function(t){return JSON.parse(t).text})).join(",")},sourceVal:function(){return this.form.value}},data:function(){return{search:"",showPicker:!1,loading:!1,searchValue:"",treeData:[],autoExpandParent:!0,checkedKeys:[],expandedKeys:[]}},mounted:function(){var t=this;this.$nextTick((function(){t.comboxTreeAll()}))},methods:{onSearch:function(){var t=this,e=this.search,o=Ue.map((function(o){return o.title.indexOf(e)>-1?Ke(o.key,t.treeData):null})).filter((function(t){return t}));Object.assign(this,{expandedKeys:o,searchValue:e,autoExpandParent:!0})},onExpand:function(t){this.expandedKeys=t,this.autoExpandParent=!1},onSelect:function(t){this.checkedKeys=t},comboxTreeAll:function(){var t=this;this.loading=!0;var e="",o=this.form.ext_select.split("|");e=o.length<=1?"autoid=".concat(o[0],"&"):2===o.length?"autoid=".concat(o[0],"&refer=").concat(o[1],"&"):3===o.length?"autoid=".concat(o[0],"&Refer1=").concat(o[2],"&"):"autoid=".concat(this.param,"&"),Object(S["c"])(e).then((function(o){o.data.selectdata?(t.treeData=t.tranfsData(o.data.selectdata),t.generateList(t.treeData),t.setRadioValue()):console.error("树的下拉没有找到数据，请检查下拉的第二条SQL，"+e)})).catch((function(t){console.error(t)})).finally((function(){t.loading=!1}))},tranfsData:function(t){var e=this,o=[];return t.forEach((function(t){var n={};n.title=t.text,n.name=t.text,n.key=JSON.stringify({value:t.value,text:t.text,isParent:!1}),n.scopedSlots={title:"title"},t.childs.length>0&&(n.children=e.tranfsData(t.childs),"multilevel"===e.form.ext_type&&(n.disabled=!0),n.key=JSON.stringify({value:t.value,text:t.text,isParent:!0})),o.push(n)})),o},generateList:function(t){var e=this;t.forEach((function(t){var o=t.key;Ue.push({key:o,title:t.title}),t.children&&e.generateList(t.children,t.key)}))},setRadioValue:function(){var t=this,e=this.form.value;this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(o){var n=t.formItem.find((function(t){return t.name===o}));if(n){var a=n.diyParam&&n.diyParam.split("|"),r=n.ext_select&&n.ext_select.split("|");if(!a||!r)return;a[0].split("_")[0]===t.form.name?(n.ext_select="".concat(e||a[0]),2===a.length?n.ext_select="".concat(e||a[0],"|").concat(r[1]):3===a.length&&(n.ext_select="".concat(e||a[0],"|").concat(r[1],"|").concat(r[2]))):a[1].split("_")[0]===t.form.name?(n.ext_select="".concat(r[0],"|").concat(e||a[1]),3===a.length&&(n.ext_select="".concat(r[0],"|").concat(e||a[1],"|").concat(r[2]))):a[2].split("_")[0]===t.form.name&&(n.ext_select="".concat(r[0],"|").concat(r[1],"|").concat(e||a[2]))}}));var o=this.form.value.split(",");o=o.filter((function(t){return""!==t})),this.checkedKeys=[],o.forEach((function(e){t.queryTree(t.treeData,e)}))},queryTree:function(t,e){var o=this;t.forEach((function(t){JSON.parse(t.key).value===e&&o.checkedKeys.push(t.key),t.children&&t.children.length>0&&o.queryTree(t.children,e)}))},vanFieldClick:function(){this.showPicker=!0,this.comboxTreeAll();var t=this.form.ext_onclick||this.form.onclick;this.$emit("HMultiselectAndLevelClick",t,this.form,this.iIndex)}},watch:{checkedKeys:function(t){var e=JSON.parse(JSON.stringify(this.form));"multilevel"===this.form.ext_type&&(t=t.filter((function(t){return!JSON.parse(t).isParent}))),e.value=t.map((function(t){return JSON.parse(t).value})).join(","),e.rawvalue=t.map((function(t){return JSON.parse(t).text})).join(","),this.$emit("update:form",e)},sourceVal:function(){var t=this;this.setRadioValue();var e=this.form.ext_onselect||this.form.ext_onchange||this.form.onchange;this.$emit("HMultiselectAndLevelOnchange",e,this.form,this.iIndex),this.form&&this.form.linkage&&this.form.linkage.length>0&&this.form.linkage.forEach((function(e){var o=t.formItem.find((function(t){return t.name===e}));o.rawvalue="",o.value=""}))}}},Ge=Je,We=(o("bea6"),Object(p["a"])(Ge,Me,je,!1,null,"5518e900",null)),ze=We.exports,Ye=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{readonly:"",clickable:"",placeholder:"--请选择--","right-icon":"arrow-down",required:t.required,label:t.form.cname,value:t.fieldValue},on:{click:t.HDropdownMenuClick}})],1),o("van-popup",{staticClass:"vanPopup",style:{height:.7*t.height+"px"},attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"show-toolbar"},[o("p",[o("a",{on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),o("a",{on:{click:t.onConfirm}},[t._v("确认")])]),o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","show-action":""},on:{search:t.onSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[o("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1)]),o("van-tabs",{staticClass:"vanTabs",attrs:{color:"#0A7CF7 "},on:{change:t.tabsChange},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[o("van-tab",{staticClass:"vanTab",attrs:{title:"同部门人员"}},[o("van-list",{staticClass:"vanList",style:{height:.5*t.height+"px"},attrs:{finished:t.finished1,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading1,callback:function(e){t.loading1=e},expression:"loading1"}},[o("van-radio-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},[o("van-cell-group",[t._l(t.userList1,(function(e,n){return[o("van-cell",{key:n,attrs:{clickable:"",title:e.name},on:{click:function(e){return t.toggle1(n)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("van-radio",{ref:"checkboxes1",refInFor:!0,attrs:{name:e.id+"-"+e.name}})]},proxy:!0}],null,!0)})]}))],2)],1)],1)],1),o("van-tab",{staticClass:"vanTab",attrs:{title:"所有人"}},[o("van-list",{staticClass:"vanList",style:{height:.5*t.height+"px"},attrs:{color:"#F6D05D",finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[o("van-radio-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},[o("van-cell-group",[t._l(t.userList,(function(e,n){return[o("van-cell",{key:n,attrs:{clickable:"",title:e.name},on:{click:function(e){return t.toggle(n)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("van-radio",{ref:"checkboxes",refInFor:!0,attrs:{name:e.id+"-"+e.name}})]},proxy:!0}],null,!0)})]}))],2)],1)],1)],1)],1)],1)],1)},Qe=[],Xe={name:"HOneuserSelect",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}}},computed:{fieldValue:function(){return this.form.rawvalue?this.form.rawvalue:this.form.value},param:function(){return this.form.ext_select},sourceVal:function(){return this.form.value},isappshowfield:function(){return"否"===this.form.isappshowfield},required:function(){return"是"===this.form.isrequired},height:function(){return window.innerHeight+50}},data:function(){return{activeKey:0,showPicker:!1,searchVal:"",userList:[],loading1:!1,page1:-1,userList1:[],finished1:!1,finished:!1,page:-1,loading:!1,result:""}},mounted:function(){},methods:{onConfirm:function(){var t=JSON.parse(JSON.stringify(this.form));t.value=this.result.split("-")[0],t.rawvalue=this.result.split("-")[1],this.showPicker=!1,this.$emit("update:form",t);try{window.afterSelectUser&&window.afterSelectUser()}catch(o){console.error("请检查方法:afterSelectUser"),console.error("出错信息:"+o)}var e=t.ext_onselect||t.ext_onchange||t.onchange;this.$emit("HOneuserSelectChange",e,t)},tabsChange:function(){this.searchVal=""},onSearch:function(){1===this.activeKey?(this.userList=[],this.finished=!1,this.selectUser(0)):0===this.activeKey&&(this.userList1=[],this.finished1=!1,this.selectUser(0))},selectUser:function(t){var e=this,o="";1===this.activeKey?(this.loading=!0,o+="type=''&search=".concat(this.searchVal,"&page=").concat(t,"&departmentId=","e834c19b93dd470e91124f201be77bc0","&")):0===this.activeKey&&(o+="type=".concat(1,"&search=",this.searchVal,"&page=").concat(t,"&departmentId=","e834c19b93dd470e91124f201be77bc0","&"),this.loading1=!0),Object(S["h"])(o).then((function(t){t.data.length<=0?1===e.activeKey?e.finished=!0:0===e.activeKey&&(e.finished1=!0):1===e.activeKey?e.userList=e.userList.concat(t.data):0===e.activeKey&&(e.userList1=e.userList1.concat(t.data))})).finally((function(){1===e.activeKey?e.loading=!1:0===e.activeKey&&(e.loading1=!1)}))},onLoad:function(){1===this.activeKey?(this.page+=1,this.selectUser(this.page)):0===this.activeKey&&(this.page1+=1,this.selectUser(this.page1))},toggle1:function(t){this.$refs.checkboxes1[t].toggle()},toggle:function(t){this.$refs.checkboxes[t].toggle()},HDropdownMenuClick:function(){this.showPicker=!0}},watch:{searchVal:function(t){t||(1===this.activeKey?(this.userList=[],this.finished=!1,this.selectUser(0)):0===this.activeKey&&(this.userList1=[],this.finished1=!1,this.selectUser(0)))}}},Ze=Xe,to=(o("aa69"),Object(p["a"])(Ze,Ye,Qe,!1,null,"c2603d0c",null)),eo=to.exports,oo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:!t.isappshowfield,expression:"!isappshowfield"}],class:"name="+t.form.ext_field+" type="+t.form.ext_type+("是"!==t.form.isreadonly?" inputAble":""),staticStyle:{padding:"0 !important"}},[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{readonly:"",clickable:"",placeholder:"--请选择--","right-icon":"arrow-down",required:t.required,label:t.form.cname,value:t.fieldValue},on:{click:t.HDropdownMenuClick}})],1),o("van-popup",{staticClass:"vanPopup",style:{height:.7*t.height+"px"},attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"show-toolbar"},[o("p",[o("a",{on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),o("a",{on:{click:t.onConfirm}},[t._v("确认")])]),o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","show-action":""},on:{search:t.onSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[o("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1)]),o("van-tabs",{staticClass:"vanTabs",attrs:{color:"#0A7CF7 "},on:{change:t.tabsChange},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[o("van-tab",{staticClass:"vanTab",attrs:{title:"同部门人员"}},[o("van-list",{staticClass:"vanList",style:{height:.5*t.height+"px"},attrs:{finished:t.finished1,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading1,callback:function(e){t.loading1=e},expression:"loading1"}},[o("van-checkbox-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},[o("van-cell-group",[t._l(t.userList1,(function(e,n){return[o("van-cell",{key:n,attrs:{clickable:"",title:e.name},on:{click:function(e){return t.toggle1(n)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("van-checkbox",{ref:"checkboxes1",refInFor:!0,attrs:{name:e.id+"-"+e.name}})]},proxy:!0}],null,!0)})]}))],2)],1)],1)],1),o("van-tab",{staticClass:"vanTab",attrs:{title:"所有人"}},[o("van-list",{staticClass:"vanList",style:{height:.5*t.height+"px"},attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[o("van-checkbox-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},[o("van-cell-group",[t._l(t.userList,(function(e,n){return[o("van-cell",{key:n,attrs:{clickable:"",title:e.name},on:{click:function(e){return t.toggle(n)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{name:e.id+"-"+e.name}})]},proxy:!0}],null,!0)})]}))],2)],1)],1)],1),o("van-tab",{attrs:{title:"已选"}},[o("van-list",{staticClass:"vanList",style:{height:.5*t.height+"px"},attrs:{finished:!0,"finished-text":"没有更多了"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._l(t.result,(function(e,n){return[[o("van-cell",{key:n,staticStyle:{"line-height":"normal"},attrs:{border:!1,title:e},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("van-icon",{attrs:{name:"clear"},on:{click:function(o){return t.delUser(e)}}})]},proxy:!0}],null,!0)})]]}))],2)],1)],1)],1)],1)},no=[],ao={name:"HUserSelect",props:{form:{required:!1,type:Object},formItem:{required:!1,type:Array,default:function(){return[]}}},computed:{fieldValue:function(){return this.form.rawvalue?this.form.rawvalue:this.form.value},param:function(){return this.form.ext_select},sourceVal:function(){return this.form.value},isappshowfield:function(){return"否"===this.form.isappshowfield},required:function(){return"是"===this.form.isrequired},height:function(){return window.innerHeight+50}},data:function(){return{activeKey:0,showPicker:!1,searchVal:"",userList:[],loading1:!1,page1:-1,userList1:[],finished1:!1,finished:!1,page:-1,loading:!1,result:[],departmentId:""}},mounted:function(){var t=this.$store.getters.getUser;this.departmentId=t.departmentid,""!==this.form.value&&this.selectUserSelected()},methods:{onConfirm:function(){var t=JSON.parse(JSON.stringify(this.form));t.value=this.result.map((function(t){return t.split("-")[0]})).join(","),t.rawvalue=this.result.map((function(t){return t.split("-")[1]})).join(","),this.showPicker=!1,this.$emit("update:form",t);try{window.afterSelectUser&&window.afterSelectUser()}catch(o){console.error("请检查方法:afterSelectUser"),console.error("出错信息:"+o)}var e=t.ext_onselect||t.ext_onchange||t.onchange;this.$emit("HUserSelectChange",e,t)},tabsChange:function(){this.searchVal=""},onSearch:function(){1===this.activeKey?(this.userList=[],this.finished=!1,this.selectUser(0)):0===this.activeKey&&(this.userList1=[],this.finished1=!1,this.selectUser(0))},selectUserSelected:function(){var t=this,e="userIds=".concat(this.form.value,"&");Object(S["i"])(e).then((function(e){t.result=e.data.map((function(t){return"".concat(t.id,"-").concat(t.name)}))}))},selectUser:function(t){var e=this,o="";1===this.activeKey?(this.loading=!0,o+="type=''&search=".concat(this.searchVal,"&page=").concat(t,"&departmentId=").concat(this.departmentId,"&")):0===this.activeKey&&(o+="type=".concat(1,"&search=",this.searchVal,"&page=").concat(t,"&departmentId=").concat(this.departmentId,"&"),this.loading1=!0),Object(S["h"])(o).then((function(t){t.data.length<=0?1===e.activeKey?e.finished=!0:0===e.activeKey&&(e.finished1=!0):1===e.activeKey?e.userList=e.userList.concat(t.data):0===e.activeKey&&(e.userList1=e.userList1.concat(t.data))})).finally((function(){1===e.activeKey?e.loading=!1:0===e.activeKey&&(e.loading1=!1)}))},onLoad:function(){1===this.activeKey?(this.page+=1,this.selectUser(this.page)):0===this.activeKey&&(this.page1+=1,this.selectUser(this.page1))},toggle1:function(t){this.$refs.checkboxes1[t].toggle()},toggle:function(t){this.$refs.checkboxes[t].toggle()},delUser:function(t){this.result=this.result.filter((function(e){return e!==t}))},HDropdownMenuClick:function(){this.showPicker=!0}},watch:{searchVal:function(t){t||(1===this.activeKey?(this.userList=[],this.finished=!1,this.selectUser(0)):0===this.activeKey&&(this.userList1=[],this.finished1=!1,this.selectUser(0)))}}},ro=ao,io=(o("5b03"),Object(p["a"])(ro,oo,no,!1,null,"a8c1e7cc",null)),so=io.exports,co={name:"Form",props:{formList:{required:!0,type:Array},HChildTableData:{required:!0,type:Array},scriptList:{required:!0,type:Object}},computed:Object(s["a"])({},Object(Re["c"])("form",{isFromRead:"getIsFromRead"})),data:function(){return{}},mounted:function(){},methods:{executeMethod:function(t,e){if(t){var o="app_"+t.split("(")[0];try{window[o]&&window[o](e)}catch(n){console.error("请检查方法:"+t),console.error("出错信息:"+n)}}}},watch:{},components:{HText:tt,HDropdownMenu:xt,HDatetimePicker:_t,HDatePicker:Lt,HTextarea:Ft,HEditor:Ut,HUploader:Yt,HCheckbox:oe,HRadio:ce,HSelectCheckbox:pe,HChildTable:Be,HSelectOrInput:Ie,HMultiText:we,HReadonly:it,HMultiselectAndLevel:Ee,HMultilevel:ze,HOneuserSelect:eo,HUserSelect:so}},lo=co,uo=Object(p["a"])(lo,G,W,!1,null,"71d6af33",null),fo=uo.exports,ho=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{required:t.required,readonly:"",clickable:"",label:t.label,value:""!=t.sourceVal.id?t.sourceVal.text:"",placeholder:"--请选择--","right-icon":"arrow-down"},on:{click:function(e){t.showPicker=!0}}})],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"show-toolbar"},[o("p",[o("a",{on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),o("a",{on:{click:t.onConfirm}},[t._v("确认")])]),t.defaultData||"forword"===this.type?o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","show-action":""},on:{search:t.onSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[o("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1):t._e()]),o("van-picker",{ref:"vanPicker",attrs:{loading:t.loading,columns:t.columnsData}})],1)],1)},po=[],mo={name:"DropdownMenu",props:{sourceVal:{required:!0,type:Object},label:{required:!0,type:String},param:{required:!1,type:Object},defaultData:{required:!1,type:Array},type:{required:!1,type:String,default:""},required:{required:!1,type:Boolean,default:!1},msg:{required:!1,type:String},formData:{required:!1,type:String}},data:function(){return{showPicker:!1,originData:[],columnsData:[],loading:!1,handleNames:[],select_type:!0,searchVal:""}},computed:{departIds:function(){return this.param&&this.param.departIds?this.param.departIds:""}},mounted:function(){var t=this;this.$nextTick((function(){t.defaultData?t.columnsData=JSON.parse(JSON.stringify(t.defaultData)):"next"===t.type?t.processNextNodes():"back"===t.type?t.getProcessBackNode():"forword"===t.type&&t.getUserByDeptIds()}))},methods:{onConfirm:function(t){var e=this;setTimeout((function(){if(t.id||(t=e.$refs.vanPicker.getValues()[0]),e.showPicker=!1,"next"===e.type){if(!e.defaultData&&(t.showHandleName=t.node.select_type,t.handleNames=[],"true"===t.node.select_type))if(t.node.users&&t.node.users.length>0)t.node.users.forEach((function(e){var o={};o.id=e.userId,o.text=e.userName,t.handleNames.push(o)}));else{var o=[];Object(S["f"])("").then((function(e){200===e.status?(o=e.data,o.forEach((function(e){var o={};o.id=e.userid,o.text=e.username,t.handleNames.push(o)}))):console.error("获取系统用户失败："+e.message)}))}}else"back"===e.type&&(t.handleNames=[{text:t.node.name,id:t.node.user_id}]);e.$emit("update:sourceVal",t)}),50)},onSearch:function(){var t=this;this.loading=!0,this.searchVal&&this.defaultData&&(this.originData=JSON.parse(JSON.stringify(this.defaultData))),0===this.originData.length&&(this.originData=JSON.parse(JSON.stringify(this.columnsData))),this.searchVal?this.columnsData=this.originData.filter((function(e){return e.text&&e.text.indexOf(t.searchVal)>-1})):this.columnsData=JSON.parse(JSON.stringify(this.originData)),this.loading=!1},processNextNodes:function(){var t=this,e="pId=".concat(this.param.pId,"&pKey=").concat(this.param.pKey,"&formData=").concat(this.formData,"&formId=").concat(this.param.formId,"&");e+="mt_process_curNodeName=".concat(this.param.curNodeName,"&taskId=").concat(this.param.taskId||"","&"),j(e).then((function(e){if(t.transData(e.data),1===t.columnsData.length&&t.onConfirm(t.columnsData[0]),window.footerData.next.setNextNode){var o=t.columnsData.findIndex((function(t,e,o){return t.id===window.footerData.next.setNextNode}));o>=0&&t.onConfirm(t.columnsData[o])}}))},getProcessBackNode:function(){var t=this,e="pId=".concat(this.param.pId,"&formId=").concat(this.param.formId,"&");T(e).then((function(e){t.columnsData=[],e.data.forEach((function(e){e.nodename&&t.columnsData.push({text:e.nodename,id:e.nodename,node:e})})),1===t.columnsData.length&&t.onConfirm(t.columnsData[0])}))},getUserByDeptIds:function(){var t=this;if(this.param.departIds){var e="departIds=".concat(this.param.departIds,"&");E(e).then((function(e){t.columnsData=[],t.originData=[],e.data.forEach((function(e){e.username&&t.columnsData.push({text:e.username,id:e.userid,node:e})}))}))}else this.columnsData=[{text:"请选择部门",id:""}]},transData:function(t){var e=this;this.columnsData=[],t.forEach((function(t){t.nodeName&&e.columnsData.push({text:t.transName,id:t.nodeName,node:t})}))}},watch:{showPicker:function(t){t&&this.columnsData.length<=0&&(this.columnsData=[{text:this.msg,id:""}])},defaultData:function(){if(this.defaultData&&(this.columnsData=this.defaultData,"nextUser"===this.type&&window.footerData.next.setNextUser)){var t=this.columnsData.findIndex((function(t,e,o){return t.id===window.footerData.next.setNextUser}));t>=0&&this.onConfirm(this.columnsData[t])}},departIds:function(){"forword"===this.type&&this.getUserByDeptIds()}}},vo=mo,xo=(o("99d4"),Object(p["a"])(vo,ho,po,!1,null,"f2c24a94",null)),go=xo.exports,yo=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.showPopup?o("van-popup",{staticStyle:{"background-color":"rgba(0,0,0,.0)",overflow:"hidden"},attrs:{position:"bottom","close-on-click-overlay":!1,overlay:!1},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[o("div",{staticStyle:{height:"100vh","background-color":"rgba(0,0,0,.7)",position:"relative"},on:{click:t.clickCancel}},[o("div",{staticStyle:{position:"absolute",width:"100vw",bottom:"50px"},on:{click:function(t){t.stopPropagation()}}},[o("div",{staticClass:"header",style:{background:t.headerColor}},[t._v("当前节点【"+t._s(t.curNodeName)+"】")]),o("van-cell-group",{staticClass:"vanCellGroup",attrs:{"abel-align":"left"}},[t._t("OrderHandleTop"),t._t("OrderHandleMiddle"),t._t("OrderHandleBotton")],2),o("div",{staticClass:"footer",staticStyle:{background:"#fff"}},[o("van-button",{staticClass:"vanButton",attrs:{type:"primary",size:"mini",round:""},on:{click:t.clickCancel}},[t._v("取消")]),o("van-button",{staticClass:"vanButton",attrs:{type:"primary",size:"mini",disabled:t.btnDisabled,round:""},on:{click:t.clickSubmit}},[t._v("提交")])],1)],1)])]):t._e()},ko=[],bo={name:"OrderHandle",props:{showPopup:{required:!0,type:Boolean},curNodeName:{required:!0,type:String},headerColor:{required:!0,type:String},btnDisabled:{required:!0,type:Boolean}},methods:{clickCancel:function(t){return this.$emit("update:showPopup",!1),!1},clickSubmit:function(){("function"!==typeof window.app_beforeNextStep||window.app_beforeNextStep())&&this.$emit("clickSubmit")}},watch:{}},wo=bo,_o=(o("f1c2"),Object(p["a"])(wo,yo,ko,!1,null,"6c2c1736",null)),Do=_o.exports,No=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-cell-group",{staticClass:"vanCellGroup",staticStyle:{border:"none"},attrs:{"abel-align":"left"}},[o("van-field",{attrs:{readonly:"",clickable:"",label:t.label,value:t.fieldValue.map((function(t){return t.departname})).join(","),placeholder:"--请选择--","right-icon":"arrow-down"},on:{click:function(e){t.showPicker=!0}}})],1),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("div",{staticClass:"show-toolbar"},[o("p",[o("a",{on:{click:function(e){t.showPicker=!1}}},[t._v("取消")]),o("a",{on:{click:t.onConfirm}},[t._v("确认")])]),o("form",{attrs:{action:"/"}},[o("van-search",{attrs:{placeholder:"搜索","show-action":""},on:{search:t.onSearch},model:{value:t.searchVal,callback:function(e){t.searchVal=e},expression:"searchVal"}},[o("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])])],1)]),!t.loading&&t.columnsData.length<=0?o("p",{staticClass:"noData"},[t._v("没有数据")]):t._e(),t.loading?o("van-loading",{staticClass:"loading",attrs:{type:"spinner",color:"#1989fa"}}):t._e(),o("van-checkbox-group",{staticClass:"vanCheckboxGroup",model:{value:t.checkBoxVal,callback:function(e){t.checkBoxVal=e},expression:"checkBoxVal"}},[o("van-cell-group",t._l(t.columnsData,(function(e,n){return o("van-cell",{key:n,attrs:{clickable:"",title:e.departname},on:{click:function(e){return t.toggle(n)}}},[o("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{slot:"right-icon",name:e},slot:"right-icon"})],1)})),1)],1)],1)],1)},Co=[],So={name:"SelectCheckbox",props:{sourceVal:{required:!0,type:Array},label:{required:!0,type:String}},data:function(){return{showPicker:!1,columnsData:[],loading:!1,checkBoxVal:this.sourceVal,countData:[],searchVal:"",fieldValue:this.sourceVal}},mounted:function(){this.loading=!0,this.getDepartments()},methods:{onConfirm:function(){this.checkBoxVal&&(this.fieldValue=this.checkBoxVal,this.$emit("update:sourceVal",this.checkBoxVal),this.showPicker=!1)},getDepartments:function(){var t=this;R("").then((function(e){t.countData=Object(lt["a"])(e.data),t.columnsData=t.countData.slice(0,30)})).catch((function(t){console.error(t)})).finally((function(){t.loading=!1}))},onSearch:function(){var t=this;this.loading=!0,this.searchVal?this.columnsData=this.countData.filter((function(e){return e.departname.indexOf(t.searchVal)>-1})):this.columnsData=this.countData.slice(0,30),this.loading=!1},toggle:function(t){this.$refs.checkboxes[t].toggle()}},watch:{}},Io=So,Lo=(o("d642"),Object(p["a"])(Io,No,Co,!1,null,"1728734f",null)),Oo=Lo.exports,Ho=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"margin-top":"45px",padding:"10px 8px"}},[o("div",{staticClass:"divisionLine"}),t.processLogs.length>0?o("div",{staticClass:"container"},[t._l(t.processLogs,(function(e,n){return[o("div",{key:n,class:"divGreen"},[o("h4",[t._v(t._s(e.nodename))]),o("p",[o("span",[t._v("处理人：")]),o("span",[t._v(t._s(e.username))])]),o("p",[o("span",[t._v("处理意见：")]),o("span",[t._v(t._s(e.value))])]),o("p",[o("span",[t._v("处理时间：")]),o("span",[t._v(t._s(e.dealtime))])])])]}))],2):o("NotData")],1)},Po=[],$o={name:"HProcessLog",data:function(){return{}},props:{processLogs:{required:!0,type:Array}},methods:{},components:{NotData:v}},Vo=$o,Fo=(o("51e2"),Object(p["a"])(Vo,Ho,Po,!1,null,"b49d18d8",null)),Eo=Fo.exports,Ro={forwordButton:{department:""},next:{nextNodes:{showHandleName:"true",handleNames:[{text:"请选择后续节点",id:""}]},handleName:{},opinion:"",showNext:!1,btnDisabled:!1,nextFormData:{}},back:{nextNodes:{handleNames:[{text:"请选择后续节点",id:""}]},handleName:{},opinion:"",showBack:!1,btnDisabled:!1},forword:{nextNodes:[],handleName:{},opinion:"",showForword:!1,btnDisabled:!1},client:{opinion:"",showClient:!1,btnDisabled:!1}},qo={_backButton:!1,_forwordButton2:!1,_nextButton:!1,_clientButton:!1,_signButton:!1,_assigneeButton:!1,_orderButton:!1},Ao={name:"GetReadyHandle",data:function(){return{activeName:"1",processField:{},spinnerLoad:!1,buttonList:Object(s["a"])({},qo),HChildTableData:[],formList:[],forwordButtonShow:!1,nextButtonShow:!1,footerData:JSON.parse(JSON.stringify(Ro)),HUtilitySystemList:[],HWorkOrderList:[],scriptList:{},processconfirmBtnText:"接单",processConfirmPerson:"",isCheck:!0,appDefaultProcessAdvice:""}},computed:Object(s["a"])({},Object(Re["c"])("form",{task:"getTask",isFromRead:"getIsFromRead"}),{height:function(){return window.innerHeight-100},footerDataBackNextNodes:function(){return this.footerData.back.nextNodes},footerDataForwordNextNodes:function(){return this.footerData.forword.nextNodes}}),mounted:function(){var t=this;this.$nextTick((function(){t.appDefaultProcessAdvice="",t.footerData=JSON.parse(JSON.stringify(Ro)),window.footerData=t.footerData,t.getData(),window.buttonList=t.buttonList}))},methods:Object(s["a"])({},Object(Re["d"])("form",["SET_ISFROMEREAD"]),{getData:function(){var t=this;return i(regeneratorRuntime.mark((function e(){var o,n,a,r,i,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.buttonList=Object(s["a"])({},qo),t.spinnerLoad=!0,o=t.task,window.formIsView=t.isFromRead,n="uuid=".concat(o.uuid,"&pKey=").concat(o.pkey,"&formId=").concat(o.formid,"&pId=").concat(o.pId,"&"),e.next=7,Object(S["g"])(n);case 7:return a=e.sent,r="uuid=".concat(o.uuid,"&pKey=").concat(o.pkey,"&"),e.next=11,Object(S["d"])(r);case 11:return i=e.sent,c="uuid=".concat(o.uuid,"&pKey=").concat(o.pkey,"&formId=").concat(o.formid,"&"),e.next=15,Object(S["e"])(c);case 15:l=e.sent,t.HUtilitySystemList=a.data.filter((function(t){return"关联配置项"===t.tabname}))||[],t.HWorkOrderList=a.data.filter((function(t){return"关联工单"===t.tabname}))||[],200===i.status?(t.formTransData(i.data.formfield),t.processField=i.data.processField||{},!t.isFromRead&&t.isShowButton(t.processField),t.scriptList=i.data.processField.APP_JS,window.processData=t.processField,Object.keys(t.scriptList).forEach((function(e){try{window.evil("window.".concat(e," = ").concat(t.scriptList[e]))}catch(o){console.error("请检查方法："+e),console.error("出错信息："+o)}}))):console.error("获取表单信息出错!："+i),200===l.status?t.subFormTransData(l):console.error("获取表单子表信息出错!："+l);try{window.app_onload&&window.app_onload()}catch(u){console.error("请检查方法:app_onload"),console.error("出错信息:"+u)}t.spinnerLoad=!1;case 22:case"end":return e.stop()}}),e)})))()},onClickLeft:function(){var t=this;setTimeout((function(){var e=t.$route.query.nowRouter;e?t.$router.push({path:"/".concat(e)}):t.$router.back()}),100)},formTransData:function(t){var e=this;this.formList=[],t&&t.forEach((function(o){"true"!==o.ext_readonly&&"是"!==o.isreadonly||"hidden"===o.ext_type||"ckeditor"===o.ext_type||"attachFile"===o.ext_type||"radio"===o.ext_type||"checkbox"===o.ext_type||(o.oldExtType=o.ext_type,o.ext_type="HReadonly",o.isreadonly="是"),"singleSelect"===o.ext_type||"HReadonly"===o.ext_type?(o.linkage=[],t.forEach((function(t){var e=t.ext_select&&t.ext_select.split("|");e&&e.forEach((function(e){e===o.name&&(o.linkage.push(t.name),t.rawvalue||(t.rawvalue="请选择".concat(o.cname)))}))}))):"datetime"===o.ext_type?o.rawvalue||(o.rawvalue=U()):"ckeditor"===o.ext_type?o.id=J()():"multiText"===o.ext_type&&(o.oldValue=o.value,o.dialogVal=""),o.scriptSetValue="",o.diyParam=o.ext_select,e.formList.push(o)})),window.formData=this.formList},subFormTransData:function(t){var e=t.data.subForm.map((function(t){return t.addGroup=JSON.parse(JSON.stringify(t.subinfo)),t.button={addBtn:!0,delBtn:!0},t.deleteGroup=[],t.list=[],t.subdata.forEach((function(e){var o=t.subinfo.concat(),n=o.map((function(t){return t.cname=t.ext_id,t.name=t.ext_id,t.scriptSetValue="",t}));n.push({cname:"uuid",ext_field:"uuid",ext_id:"uuid",ext_maxLength:"uuid",ext_name:"uuid",ext_select:"uuid",ext_type:"hidden",value:e.uuid}),t.list.push(n)})),t})),o=JSON.parse(JSON.stringify(e));o.forEach((function(t){t.list.forEach((function(e,o){e.forEach((function(n){var a=t.subdata[o];n.diyParam=n.ext_select,n.linkage=[],n.id=J()(),n.rawvalue=a[n.ext_field].rawvalue,n.value=a[n.ext_field].value,e.forEach((function(t){var e=t.ext_select&&t.ext_select.split("|");e&&e.forEach((function(e){var o=e.split("_")[0];n.ext_id===o&&t.ext_id!==o&&(n.linkage.push(t.ext_id),t.rawvalue||(t.rawvalue="请选择".concat(n.ext_id)))}))}))}))}))})),this.HChildTableData=o,window.subFormData=this.HChildTableData},processconfirm:function(){var t=this;try{window.app_beforeProcessConfirm&&window.app_beforeProcessConfirm()}catch(n){console.error("请检查方法:app_beforeProcessConfirm"),console.error("出错信息:"+n)}this.spinnerLoad=!0;var e=this.processField,o="pKey=".concat(e.pKey,"&formId=").concat(e.formId,"&uuid=").concat(e.uuid,"&taskId=").concat(e.taskId,"&pId=").concat(e.pId,"&");o+="&nodeName=".concat(e.curNodeName,"&"),M(o).then((function(e){200===e.status?(t.$toast("接单成功"),t.getData()):t.$toast.fail("接单失败，请联系管理员。")})).catch((function(e){t.$toast.fail("接单失败"),console.error(e)})).finally((function(){t.spinnerLoad=!1}))},showProcessConfirmPerson:function(){this.$dialog.alert({title:"可接单人",message:this.processConfirmPerson,confirmButtonText:"关闭"}).then((function(){}))},isShowButton:function(t){"candidate"===t.typeExp||""===t.typeExp?t.curNodeNameDealUser.split(",").length>1?(this.buttonList._orderButton=!0,this.processConfirmPerson=t.processConfirmPerson,this.processconfirmBtnText="接单"):(this.buttonList._nextButton=!0,""===t.buttonPopedom?(this.buttonList._backButton=!0,this.buttonList._forwordButton2=!0):(t.buttonPopedom&&t.buttonPopedom.indexOf("_return")>-1&&(this.buttonList._backButton=!0),t.buttonPopedom&&t.buttonPopedom.indexOf("_forward")>-1&&(this.buttonList._forwordButton2=!0))):t.isProcessConfirm&&t.curNodeNameDealUser.split(",").length>1?(this.buttonList._orderButton=!0,this.processConfirmPerson=t.processConfirmPerson,this.processconfirmBtnText="接单"):(this.buttonList._forwordButton2=!0,this.buttonList._backButton=!0,"client"===t.typeExp&&"并联审批"===t.taskType?this.buttonList._clientButton=!0:"client"===t.typeExp&&"会签节点"===t.taskType?this.buttonList._signButton=!0:"replaced-assignee"===t.typeExp&&(this.buttonList._assigneeButton=!0)),t.curNodeName===t.startNodeName&&""!==t.startNodeName&&(this.buttonList._backButton=!1)},forwordButtonClick:function(){this.forwordButtonShow=!0},clickNext:function(){this.isCheck=!0;var t=this.dataRecovery();Array.isArray(t)||(this.footerData.next.nextFormData=t,this.footerData.next.nextNodes={showHandleName:"true",handleNames:[{text:"请选择后续节点",id:""}]},this.footerData.next.handleName={},""===this.footerData.next.opinion&&(this.footerData.next.opinion=this.appDefaultProcessAdvice),this.footerData.next.showNext=!0)},nextSubmit:function(){var t=this;if(!this.footerData.next.handleName.id&&"true"===this.footerData.next.nextNodes.showHandleName||!this.footerData.next.nextNodes.id)return this.$toast("不能为空!!"),!1;this.footerData.next.btnDisabled=!0;var e=this.processField,o=this.dataRecovery(),n=this.processDataRecovery();if(!Array.isArray(o)){var a="pKey=".concat(e.pKey,"&formId=").concat(e.formId,"&uuid=").concat(e.uuid,"&taskId=").concat(e.taskId,"&pId=").concat(e.pId,"&");a+="mt_process_curNodeName=".concat(e.curNodeName,"&mt_process_nextNode=").concat(this.footerData.next.nextNodes.id,"&"),a+="mt_process_nextUser=".concat(this.footerData.next.handleName.id||"","&mt_process_advice=").concat(this.footerData.next.opinion,"&"),a+="formData=".concat(o,"&"),a+="processData=".concat(n,"&"),a+="mt_process_key=下一步&",this.spinnerLoad=!0,B(a).then((function(e){200===e.status?(t.footerData.next.showNext=!1,t.SET_ISFROMEREAD(!0),t.$router.push({path:"/getReady"}),t.$toast("提交成功")):t.$toast.fail("提交失败，请联系管理员。")})).catch((function(e){t.$toast.fail("提交出错"+e),console.error(e)})).finally((function(){t.spinnerLoad=!1,t.footerData.next.btnDisabled=!1}))}},clickSaveTemp:function(){var t=this;this.isCheck=!1;var e=this.processField,o=this.dataRecovery(),n=this.processDataRecovery(),a="pKey=".concat(e.pKey,"&formId=").concat(e.formId,"&uuid=").concat(e.uuid,"&taskId=").concat(e.taskId,"&pId=").concat(e.pId,"&");a+="mt_process_curNodeName=".concat(e.curNodeName,"&"),a+="formData=".concat(o,"&"),a+="processData=".concat(n,"&"),a+="mt_process_key=保存&",q(a).then((function(e){200===e.status?t.$toast("暂存成功"):t.$toast.fail("暂存失败，请联系管理员。")})).catch((function(e){t.$toast.fail("暂存出错"+e),console.error(e)})).finally((function(){t.spinnerLoad=!1,t.footerData.back.btnDisabled=!1}))},clickBack:function(){this.isCheck=!1,this.footerData.back.showBack=!0},backSubmit:function(){var t=this;if(!this.footerData.back.nextNodes.id||!this.footerData.back.handleName.id)return this.$toast("不能为空!!"),!1;this.footerData.back.btnDisabled=!0;var e=this.processField,o=this.dataRecovery(),n=this.processDataRecovery(),a="pKey=".concat(e.pKey,"&formId=").concat(e.formId,"&uuid=").concat(e.uuid,"&taskId=").concat(e.taskId,"&pId=").concat(e.pId,"&");a+="mt_process_curNodeName=".concat(e.curNodeName,"&mt_process_nextNode=").concat(this.footerData.back.nextNodes.id,"&"),a+="mt_process_nextUser=".concat(this.footerData.back.handleName.id||"","&mt_process_advice=").concat(this.footerData.back.opinion,"&"),a+="formData=".concat(o,"&"),a+="processData=".concat(n,"&"),a+="mt_process_key=退回&",this.spinnerLoad=!0,A(a).then((function(e){200===e.status?(t.footerData.back.showBack=!1,t.SET_ISFROMEREAD(!0),t.$router.push({path:"/getReady"}),t.$toast("退回成功")):t.$toast.fail("退回失败，请联系管理员。")})).catch((function(e){t.$toast.fail("退回出错"+e),console.error(e)})).finally((function(){t.spinnerLoad=!1,t.footerData.back.btnDisabled=!1}))},clickForword:function(){this.isCheck=!1,""===this.footerData.forword.opinion&&(this.footerData.forword.opinion=this.appDefaultProcessAdvice),this.footerData.forword.showForword=!0},forwordSubmit:function(){var t=this;if(!this.footerData.forword.handleName.id||!this.footerData.forword.nextNodes)return this.$toast("不能为空!!"),!1;this.footerData.forword.btnDisabled=!0,this.spinnerLoad=!0;var e=this.processField,o=this.dataRecovery(),n=this.processDataRecovery();if(!Array.isArray(o)){var a="pKey=".concat(e.pKey,"&formId=").concat(e.formId,"&uuid=").concat(e.uuid,"&taskId=").concat(e.taskId,"&pId=").concat(e.pId,"&");a+="mt_process_nextUser=".concat(this.footerData.forword.handleName.id,"&"),a+="mt_process_curNodeName=".concat(e.curNodeName,"&mt_process_advice=").concat(this.footerData.forword.opinion,"&"),a+="formData=".concat(o,"&"),a+="processData=".concat(n,"&"),a+="mt_process_key=转发&",F(a).then((function(e){200===e.status?(t.footerData.forword.showForword=!1,t.SET_ISFROMEREAD(!0),t.$router.push({path:"/getReady"}),t.$toast("转发成功")):t.$toast.fail("转发失败，请联系管理员。")})).catch((function(e){t.$toast.fail("转发出错"+e),console.error(e)})).finally((function(){t.spinnerLoad=!1,t.footerData.forword.btnDisabled=!1}))}},clientClick:function(){this.isCheck=!0;var t=this.dataRecovery();Array.isArray(t)||(""===this.footerData.client.opinion&&(this.footerData.client.opinion=this.appDefaultProcessAdvice),this.footerData.client.showClient=!0)},clientSubmit:function(){var t=this;return i(regeneratorRuntime.mark((function e(){var o,n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.footerData.client.btnDisabled=!0,t.spinnerLoad=!0,o=t.processField,n=t.dataRecovery(),a=t.processDataRecovery(),!Array.isArray(n)){e.next=7;break}return e.abrupt("return");case 7:if(r="pKey=".concat(o.pKey,"&formId=").concat(o.formId,"&uuid=").concat(o.uuid,"&taskId=").concat(o.taskId,"&pId=").concat(o.pId,"&"),r+="mt_process_curNodeName=".concat(o.curNodeName,"&mt_process_advice=").concat(t.footerData.client.opinion,"&"),r+="formData=".concat(n,"&"),r+="processData=".concat(a,"&"),i={},!t.buttonList._clientButton){e.next=20;break}return r+="mt_process_key=并联审批&",e.next=16,V(r);case 16:i=e.sent,console.log("并联审批"),e.next=34;break;case 20:if(!t.buttonList._signButton){e.next=28;break}return r+="mt_process_key=会签审批&",e.next=24,P(r);case 24:i=e.sent,console.log("会签审批"),e.next=34;break;case 28:if(!t.buttonList._assigneeButton){e.next=34;break}return r+="mt_process_key=级联审批&",e.next=32,$(r);case 32:i=e.sent,console.log("级联审批");case 34:200===i.status?(t.footerData.client.showClient=!1,t.SET_ISFROMEREAD(!0),t.$router.push({path:"/getReady"}),t.$toast("同意成功")):t.$toast.fail("同意失败，请联系管理员。"),t.spinnerLoad=!1,t.footerData.client.btnDisabled=!1;case 37:case"end":return e.stop()}}),e)})))()},dataRecovery:function(){var t={},e=[];return this.formList.forEach((function(o,n){"是"===o.isrequired&&""===o.value&&e.push(o.cname||o.ext_id),t[o.name]=o.value})),this.HChildTableData.forEach((function(o){var n=[];o.list.forEach((function(t){var o={};t.forEach((function(t){"是"===t.isrequired&&""===t.value&&e.push(t.cname||t.ext_id),o[t.ext_field]=t.value&&t.value.replaceAll("&","%amp;")})),n.push(o)})),o.deleteGroup.length>0&&(t["".concat(o.uuid,"_del")]=o.deleteGroup.join(",")),t[o.uuid]=n})),e.length>0&&this.isCheck?(this.$notify({type:"warning",message:"".concat(e," 不能为空")}),e):encodeURI(JSON.stringify(t))},processDataRecovery:function(){var t={};return window.processData.__subform_save_fields&&(t["__subform_save_fields"]=window.processData.__subform_save_fields),(qo._clientButton||qo._signButton)&&(t["__subform_save_type"]="true"),encodeURI(JSON.stringify(t))}}),components:{Form:fo,HProcessLog:Eo,HUtilitySystem:k,HWorkOrder:C,DropdownMenu:go,OrderHandle:Do,SelectCheckbox:Oo},watch:{footerDataBackNextNodes:function(){this.footerData.back.handleName={}},footerDataForwordNextNodes:function(){this.footerData.forword.handleName={}}},beforeDestroy:function(){try{window.app_beforeLeave&&window.app_beforeLeave()}catch(t){console.error("请检查方法:app_beforeLeave"),console.error("出错信息:"+t)}this.scriptList&&Object.keys(this.scriptList).forEach((function(t){delete window[t]})),window.formData&&delete window.formData,window.subFormData&&delete window.subFormData,window.processData&&delete window.processData,window.footerData&&delete window.footerData,window.buttonList&&delete window.buttonList}},To=Ao,Bo=(o("1611"),Object(p["a"])(To,n,a,!1,null,"17ef87d3",null));e["default"]=Bo.exports}}]);